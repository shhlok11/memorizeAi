"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/inngest/route";
exports.ids = ["app/api/inngest/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finngest%2Froute&page=%2Fapi%2Finngest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finngest%2Froute.ts&appDir=%2FUsers%2Fsania%2FPORJECT%2FMemorizeAI%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsania%2FPORJECT%2FMemorizeAI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finngest%2Froute&page=%2Fapi%2Finngest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finngest%2Froute.ts&appDir=%2FUsers%2Fsania%2FPORJECT%2FMemorizeAI%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsania%2FPORJECT%2FMemorizeAI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sania_PORJECT_MemorizeAI_src_app_api_inngest_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/inngest/route.ts */ \"(rsc)/./src/app/api/inngest/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_sania_PORJECT_MemorizeAI_src_app_api_inngest_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_sania_PORJECT_MemorizeAI_src_app_api_inngest_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/inngest/route\",\n        pathname: \"/api/inngest\",\n        filename: \"route\",\n        bundlePath: \"app/api/inngest/route\"\n    },\n    resolvedPagePath: \"/Users/sania/PORJECT/MemorizeAI/src/app/api/inngest/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sania_PORJECT_MemorizeAI_src_app_api_inngest_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/inngest/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbm5nZXN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZpbm5nZXN0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGaW5uZ2VzdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNhbmlhJTJGUE9SSkVDVCUyRk1lbW9yaXplQUklMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGc2FuaWElMkZQT1JKRUNUJTJGTWVtb3JpemVBSSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDWTtBQUN6RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLz9kM2U3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9zYW5pYS9QT1JKRUNUL01lbW9yaXplQUkvc3JjL2FwcC9hcGkvaW5uZ2VzdC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvaW5uZ2VzdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2lubmdlc3RcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2lubmdlc3Qvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc2FuaWEvUE9SSkVDVC9NZW1vcml6ZUFJL3NyYy9hcHAvYXBpL2lubmdlc3Qvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2lubmdlc3Qvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finngest%2Froute&page=%2Fapi%2Finngest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finngest%2Froute.ts&appDir=%2FUsers%2Fsania%2FPORJECT%2FMemorizeAI%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsania%2FPORJECT%2FMemorizeAI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/inngest/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/inngest/route.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var inngest_next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! inngest/next */ \"(rsc)/./node_modules/inngest/next.js\");\n/* harmony import */ var _lib_inngest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/inngest */ \"(rsc)/./src/lib/inngest.ts\");\n/* harmony import */ var _inngest_ingest_document__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/inngest/ingest-document */ \"(rsc)/./src/inngest/ingest-document.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_inngest_ingest_document__WEBPACK_IMPORTED_MODULE_1__]);\n_inngest_ingest_document__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst { GET, POST, PUT } = (0,inngest_next__WEBPACK_IMPORTED_MODULE_2__.serve)({\n    client: _lib_inngest__WEBPACK_IMPORTED_MODULE_0__.inngest,\n    functions: [\n        _inngest_ingest_document__WEBPACK_IMPORTED_MODULE_1__.ingestDocument\n    ]\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9pbm5nZXN0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFxQztBQUNHO0FBQ21CO0FBRXBELE1BQU0sRUFBRUcsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEdBQUcsRUFBRSxHQUFHTCxtREFBS0EsQ0FBQztJQUN0Q00sUUFBUUwsaURBQU9BO0lBQ2ZNLFdBQVc7UUFBQ0wsb0VBQWNBO0tBQUM7QUFDN0IsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vc3JjL2FwcC9hcGkvaW5uZ2VzdC9yb3V0ZS50cz81MzgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlcnZlIH0gZnJvbSBcImlubmdlc3QvbmV4dFwiO1xuaW1wb3J0IHsgaW5uZ2VzdCB9IGZyb20gXCJAL2xpYi9pbm5nZXN0XCI7XG5pbXBvcnQgeyBpbmdlc3REb2N1bWVudCB9IGZyb20gXCJAL2lubmdlc3QvaW5nZXN0LWRvY3VtZW50XCI7XG5cbmV4cG9ydCBjb25zdCB7IEdFVCwgUE9TVCwgUFVUIH0gPSBzZXJ2ZSh7XG4gIGNsaWVudDogaW5uZ2VzdCxcbiAgZnVuY3Rpb25zOiBbaW5nZXN0RG9jdW1lbnRdXG59KTtcbiJdLCJuYW1lcyI6WyJzZXJ2ZSIsImlubmdlc3QiLCJpbmdlc3REb2N1bWVudCIsIkdFVCIsIlBPU1QiLCJQVVQiLCJjbGllbnQiLCJmdW5jdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/inngest/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/inngest/ingest-document.ts":
/*!****************************************!*\
  !*** ./src/inngest/ingest-document.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ingestDocument: () => (/* binding */ ingestDocument)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ai */ \"(rsc)/./src/lib/ai.ts\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n/* harmony import */ var _lib_ingest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/ingest */ \"(rsc)/./src/lib/ingest.ts\");\n/* harmony import */ var _lib_inngest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/inngest */ \"(rsc)/./src/lib/inngest.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_retry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/retry */ \"(rsc)/./src/lib/retry.ts\");\n/* harmony import */ var _lib_storage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/storage */ \"(rsc)/./src/lib/storage.ts\");\n/* harmony import */ var _lib_vector__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/lib/vector */ \"(rsc)/./src/lib/vector.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_prisma__WEBPACK_IMPORTED_MODULE_5__]);\n_lib_prisma__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\nconst ingestDocument = _lib_inngest__WEBPACK_IMPORTED_MODULE_4__.inngest.createFunction({\n    id: \"ingest-document\"\n}, {\n    event: \"document.uploaded\"\n}, async ({ event, step })=>{\n    (0,_lib_env__WEBPACK_IMPORTED_MODULE_2__.assertEnv)();\n    const { jobId } = event.data;\n    const job = await step.run(\"load-job\", async ()=>{\n        return _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.job.findUnique({\n            where: {\n                id: jobId\n            }\n        });\n    });\n    if (!job) {\n        return {\n            ok: false,\n            reason: \"Job not found\"\n        };\n    }\n    if (job.status === \"ready\") {\n        return {\n            ok: true,\n            reason: \"Already processed\"\n        };\n    }\n    await step.run(\"mark-processing\", async ()=>{\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.job.update({\n            where: {\n                id: jobId\n            },\n            data: {\n                status: \"processing\",\n                stage: \"extracting\"\n            }\n        });\n    });\n    await step.sendEvent(\"emit-processing\", {\n        name: \"document.processing\",\n        data: {\n            jobId\n        }\n    });\n    try {\n        const document = await step.run(\"load-document\", async ()=>{\n            return _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.document.findUnique({\n                where: {\n                    id: job.documentId\n                }\n            });\n        });\n        if (!document) {\n            throw new Error(\"Document not found\");\n        }\n        const filePath = (0,_lib_storage__WEBPACK_IMPORTED_MODULE_7__.storagePathForKey)(document.storageKey);\n        const pages = await step.run(\"extract-pages\", async ()=>{\n            return (0,_lib_ingest__WEBPACK_IMPORTED_MODULE_3__.loadPdfPages)(filePath);\n        });\n        await step.run(\"mark-chunking\", async ()=>{\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.job.update({\n                where: {\n                    id: jobId\n                },\n                data: {\n                    stage: \"chunking\"\n                }\n            });\n        });\n        const chunks = await step.run(\"chunk-pages\", async ()=>{\n            return (0,_lib_ingest__WEBPACK_IMPORTED_MODULE_3__.chunkPages)(pages);\n        });\n        const existingHashes = await step.run(\"load-existing\", async ()=>{\n            if (!chunks.length) return [];\n            const hashes = chunks.map((chunk)=>chunk.contentHash);\n            const rows = await _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.chunk.findMany({\n                where: {\n                    documentId: document.id,\n                    contentHash: {\n                        in: hashes\n                    }\n                },\n                select: {\n                    contentHash: true\n                }\n            });\n            return rows.map((row)=>row.contentHash);\n        });\n        const existingHashSet = new Set(existingHashes);\n        const seenHashes = new Set();\n        const newChunks = chunks.filter((chunk)=>{\n            if (existingHashSet.has(chunk.contentHash)) return false;\n            if (seenHashes.has(chunk.contentHash)) return false;\n            seenHashes.add(chunk.contentHash);\n            return true;\n        });\n        const embeddings = (0,_lib_ai__WEBPACK_IMPORTED_MODULE_1__.createEmbeddingsClient)();\n        await step.run(\"mark-embedding\", async ()=>{\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.job.update({\n                where: {\n                    id: jobId\n                },\n                data: {\n                    stage: \"embedding\"\n                }\n            });\n        });\n        const batchSize = 20;\n        for(let i = 0; i < newChunks.length; i += batchSize){\n            const batch = newChunks.slice(i, i + batchSize);\n            const texts = batch.map((chunk)=>chunk.content);\n            const vectors = await (0,_lib_retry__WEBPACK_IMPORTED_MODULE_6__.withRetries)(()=>embeddings.embedDocuments(texts), {\n                retries: 3\n            });\n            for(let j = 0; j < batch.length; j += 1){\n                const chunk = batch[j];\n                const created = await _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.chunk.upsert({\n                    where: {\n                        documentId_contentHash: {\n                            documentId: document.id,\n                            contentHash: chunk.contentHash\n                        }\n                    },\n                    create: {\n                        documentId: document.id,\n                        chunkIndex: chunk.chunkIndex,\n                        content: chunk.content,\n                        contentHash: chunk.contentHash,\n                        pageStart: chunk.pageStart,\n                        pageEnd: chunk.pageEnd\n                    },\n                    update: {\n                        content: chunk.content,\n                        pageStart: chunk.pageStart,\n                        pageEnd: chunk.pageEnd\n                    }\n                });\n                const vector = (0,_lib_vector__WEBPACK_IMPORTED_MODULE_8__.toPgVector)(vectors[j]);\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.$executeRaw(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`\n              UPDATE \"Chunk\"\n              SET \"embedding\" = ${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(`'${vector}'::vector`)}\n              WHERE \"id\" = ${created.id}\n            `);\n            }\n        }\n        await step.sendEvent(\"emit-embedded\", {\n            name: \"document.embedded\",\n            data: {\n                jobId\n            }\n        });\n        await step.run(\"mark-ready\", async ()=>{\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.job.update({\n                where: {\n                    id: jobId\n                },\n                data: {\n                    status: \"ready\",\n                    stage: \"ready\"\n                }\n            });\n        });\n        await step.sendEvent(\"emit-ready\", {\n            name: \"document.ready\",\n            data: {\n                jobId\n            }\n        });\n        return {\n            ok: true\n        };\n    } catch (error) {\n        const message = error instanceof Error ? error.message : \"Unknown error\";\n        await step.run(\"mark-failed\", async ()=>{\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_5__.prisma.job.update({\n                where: {\n                    id: jobId\n                },\n                data: {\n                    status: \"failed\",\n                    stage: \"failed\",\n                    errorMessage: message\n                }\n            });\n        });\n        await step.sendEvent(\"emit-failed\", {\n            name: \"document.failed\",\n            data: {\n                jobId,\n                error: message\n            }\n        });\n        throw error;\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU87UUFDZCxNQUFNQyxVQUFVRCxpQkFBaUI3QyxRQUFRNkMsTUFBTUMsT0FBTyxHQUFHO1FBRXpELE1BQU05RCxLQUFLSSxHQUFHLENBQUMsZUFBZTtZQUM1QixNQUFNWiwrQ0FBTUEsQ0FBQ1csR0FBRyxDQUFDTyxNQUFNLENBQUM7Z0JBQ3RCSixPQUFPO29CQUFFUixJQUFJRztnQkFBTTtnQkFDbkJDLE1BQU07b0JBQUVPLFFBQVE7b0JBQVVFLE9BQU87b0JBQVVvRCxjQUFjRDtnQkFBUTtZQUNuRTtRQUNGO1FBRUEsTUFBTTlELEtBQUtZLFNBQVMsQ0FBQyxlQUFlO1lBQ2xDQyxNQUFNO1lBQ05YLE1BQU07Z0JBQUVEO2dCQUFPNEQsT0FBT0M7WUFBUTtRQUNoQztRQUVBLE1BQU1EO0lBQ1I7QUFDRixHQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9zcmMvaW5uZ2VzdC9pbmdlc3QtZG9jdW1lbnQudHM/ZGVkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWEgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYmVkZGluZ3NDbGllbnQgfSBmcm9tIFwiQC9saWIvYWlcIjtcbmltcG9ydCB7IGFzc2VydEVudiB9IGZyb20gXCJAL2xpYi9lbnZcIjtcbmltcG9ydCB7IGNodW5rUGFnZXMsIGxvYWRQZGZQYWdlcyB9IGZyb20gXCJAL2xpYi9pbmdlc3RcIjtcbmltcG9ydCB7IGlubmdlc3QgfSBmcm9tIFwiQC9saWIvaW5uZ2VzdFwiO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xuaW1wb3J0IHsgd2l0aFJldHJpZXMgfSBmcm9tIFwiQC9saWIvcmV0cnlcIjtcbmltcG9ydCB7IHN0b3JhZ2VQYXRoRm9yS2V5IH0gZnJvbSBcIkAvbGliL3N0b3JhZ2VcIjtcbmltcG9ydCB7IHRvUGdWZWN0b3IgfSBmcm9tIFwiQC9saWIvdmVjdG9yXCI7XG5cbmV4cG9ydCBjb25zdCBpbmdlc3REb2N1bWVudCA9IGlubmdlc3QuY3JlYXRlRnVuY3Rpb24oXG4gIHsgaWQ6IFwiaW5nZXN0LWRvY3VtZW50XCIgfSxcbiAgeyBldmVudDogXCJkb2N1bWVudC51cGxvYWRlZFwiIH0sXG4gIGFzeW5jICh7IGV2ZW50LCBzdGVwIH0pID0+IHtcbiAgICBhc3NlcnRFbnYoKTtcbiAgICBjb25zdCB7IGpvYklkIH0gPSBldmVudC5kYXRhIGFzIHsgam9iSWQ6IHN0cmluZyB9O1xuXG4gICAgY29uc3Qgam9iID0gYXdhaXQgc3RlcC5ydW4oXCJsb2FkLWpvYlwiLCBhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gcHJpc21hLmpvYi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGpvYklkIH0gfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoIWpvYikge1xuICAgICAgcmV0dXJuIHsgb2s6IGZhbHNlLCByZWFzb246IFwiSm9iIG5vdCBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgaWYgKGpvYi5zdGF0dXMgPT09IFwicmVhZHlcIikge1xuICAgICAgcmV0dXJuIHsgb2s6IHRydWUsIHJlYXNvbjogXCJBbHJlYWR5IHByb2Nlc3NlZFwiIH07XG4gICAgfVxuXG4gICAgYXdhaXQgc3RlcC5ydW4oXCJtYXJrLXByb2Nlc3NpbmdcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcHJpc21hLmpvYi51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogam9iSWQgfSxcbiAgICAgICAgZGF0YTogeyBzdGF0dXM6IFwicHJvY2Vzc2luZ1wiLCBzdGFnZTogXCJleHRyYWN0aW5nXCIgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBhd2FpdCBzdGVwLnNlbmRFdmVudChcImVtaXQtcHJvY2Vzc2luZ1wiLCB7XG4gICAgICBuYW1lOiBcImRvY3VtZW50LnByb2Nlc3NpbmdcIixcbiAgICAgIGRhdGE6IHsgam9iSWQgfVxuICAgIH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gYXdhaXQgc3RlcC5ydW4oXCJsb2FkLWRvY3VtZW50XCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHByaXNtYS5kb2N1bWVudC5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGpvYi5kb2N1bWVudElkIH0gfSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEb2N1bWVudCBub3QgZm91bmRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gc3RvcmFnZVBhdGhGb3JLZXkoZG9jdW1lbnQuc3RvcmFnZUtleSk7XG5cbiAgICAgIGNvbnN0IHBhZ2VzID0gYXdhaXQgc3RlcC5ydW4oXCJleHRyYWN0LXBhZ2VzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGxvYWRQZGZQYWdlcyhmaWxlUGF0aCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgc3RlcC5ydW4oXCJtYXJrLWNodW5raW5nXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcHJpc21hLmpvYi51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBqb2JJZCB9LFxuICAgICAgICAgIGRhdGE6IHsgc3RhZ2U6IFwiY2h1bmtpbmdcIiB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNodW5rcyA9IGF3YWl0IHN0ZXAucnVuKFwiY2h1bmstcGFnZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXR1cm4gY2h1bmtQYWdlcyhwYWdlcyk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhpc3RpbmdIYXNoZXMgPSBhd2FpdCBzdGVwLnJ1bihcImxvYWQtZXhpc3RpbmdcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIWNodW5rcy5sZW5ndGgpIHJldHVybiBbXSBhcyBzdHJpbmdbXTtcbiAgICAgICAgY29uc3QgaGFzaGVzID0gY2h1bmtzLm1hcCgoY2h1bmspID0+IGNodW5rLmNvbnRlbnRIYXNoKTtcbiAgICAgICAgY29uc3Qgcm93cyA9IGF3YWl0IHByaXNtYS5jaHVuay5maW5kTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGRvY3VtZW50SWQ6IGRvY3VtZW50LmlkLFxuICAgICAgICAgICAgY29udGVudEhhc2g6IHsgaW46IGhhc2hlcyB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWxlY3Q6IHsgY29udGVudEhhc2g6IHRydWUgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJvd3MubWFwKChyb3cpID0+IHJvdy5jb250ZW50SGFzaCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhpc3RpbmdIYXNoU2V0ID0gbmV3IFNldChleGlzdGluZ0hhc2hlcyk7XG5cbiAgICAgIGNvbnN0IHNlZW5IYXNoZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgIGNvbnN0IG5ld0NodW5rcyA9IGNodW5rcy5maWx0ZXIoKGNodW5rKSA9PiB7XG4gICAgICAgIGlmIChleGlzdGluZ0hhc2hTZXQuaGFzKGNodW5rLmNvbnRlbnRIYXNoKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoc2Vlbkhhc2hlcy5oYXMoY2h1bmsuY29udGVudEhhc2gpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHNlZW5IYXNoZXMuYWRkKGNodW5rLmNvbnRlbnRIYXNoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZW1iZWRkaW5ncyA9IGNyZWF0ZUVtYmVkZGluZ3NDbGllbnQoKTtcblxuICAgICAgYXdhaXQgc3RlcC5ydW4oXCJtYXJrLWVtYmVkZGluZ1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHByaXNtYS5qb2IudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogam9iSWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHN0YWdlOiBcImVtYmVkZGluZ1wiIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmF0Y2hTaXplID0gMjA7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0NodW5rcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoID0gbmV3Q2h1bmtzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuICAgICAgICBjb25zdCB0ZXh0cyA9IGJhdGNoLm1hcCgoY2h1bmspID0+IGNodW5rLmNvbnRlbnQpO1xuICAgICAgICBjb25zdCB2ZWN0b3JzID0gYXdhaXQgd2l0aFJldHJpZXMoXG4gICAgICAgICAgKCkgPT4gZW1iZWRkaW5ncy5lbWJlZERvY3VtZW50cyh0ZXh0cyksXG4gICAgICAgICAgeyByZXRyaWVzOiAzIH1cbiAgICAgICAgKTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJhdGNoLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBiYXRjaFtqXTtcbiAgICAgICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgcHJpc21hLmNodW5rLnVwc2VydCh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICBkb2N1bWVudElkX2NvbnRlbnRIYXNoOiB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRJZDogZG9jdW1lbnQuaWQsXG4gICAgICAgICAgICAgICAgY29udGVudEhhc2g6IGNodW5rLmNvbnRlbnRIYXNoXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICAgICAgZG9jdW1lbnRJZDogZG9jdW1lbnQuaWQsXG4gICAgICAgICAgICAgIGNodW5rSW5kZXg6IGNodW5rLmNodW5rSW5kZXgsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGNodW5rLmNvbnRlbnQsXG4gICAgICAgICAgICAgIGNvbnRlbnRIYXNoOiBjaHVuay5jb250ZW50SGFzaCxcbiAgICAgICAgICAgICAgcGFnZVN0YXJ0OiBjaHVuay5wYWdlU3RhcnQsXG4gICAgICAgICAgICAgIHBhZ2VFbmQ6IGNodW5rLnBhZ2VFbmRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgICAgY29udGVudDogY2h1bmsuY29udGVudCxcbiAgICAgICAgICAgICAgcGFnZVN0YXJ0OiBjaHVuay5wYWdlU3RhcnQsXG4gICAgICAgICAgICAgIHBhZ2VFbmQ6IGNodW5rLnBhZ2VFbmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IHZlY3RvciA9IHRvUGdWZWN0b3IodmVjdG9yc1tqXSk7XG4gICAgICAgICAgYXdhaXQgcHJpc21hLiRleGVjdXRlUmF3KFxuICAgICAgICAgICAgUHJpc21hLnNxbGBcbiAgICAgICAgICAgICAgVVBEQVRFIFwiQ2h1bmtcIlxuICAgICAgICAgICAgICBTRVQgXCJlbWJlZGRpbmdcIiA9ICR7UHJpc21hLnJhdyhgJyR7dmVjdG9yfSc6OnZlY3RvcmApfVxuICAgICAgICAgICAgICBXSEVSRSBcImlkXCIgPSAke2NyZWF0ZWQuaWR9XG4gICAgICAgICAgICBgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBhd2FpdCBzdGVwLnNlbmRFdmVudChcImVtaXQtZW1iZWRkZWRcIiwge1xuICAgICAgICBuYW1lOiBcImRvY3VtZW50LmVtYmVkZGVkXCIsXG4gICAgICAgIGRhdGE6IHsgam9iSWQgfVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHN0ZXAucnVuKFwibWFyay1yZWFkeVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHByaXNtYS5qb2IudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogam9iSWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1czogXCJyZWFkeVwiLCBzdGFnZTogXCJyZWFkeVwiIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgc3RlcC5zZW5kRXZlbnQoXCJlbWl0LXJlYWR5XCIsIHtcbiAgICAgICAgbmFtZTogXCJkb2N1bWVudC5yZWFkeVwiLFxuICAgICAgICBkYXRhOiB7IGpvYklkIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4geyBvazogdHJ1ZSB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIjtcblxuICAgICAgYXdhaXQgc3RlcC5ydW4oXCJtYXJrLWZhaWxlZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHByaXNtYS5qb2IudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogam9iSWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1czogXCJmYWlsZWRcIiwgc3RhZ2U6IFwiZmFpbGVkXCIsIGVycm9yTWVzc2FnZTogbWVzc2FnZSB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHN0ZXAuc2VuZEV2ZW50KFwiZW1pdC1mYWlsZWRcIiwge1xuICAgICAgICBuYW1lOiBcImRvY3VtZW50LmZhaWxlZFwiLFxuICAgICAgICBkYXRhOiB7IGpvYklkLCBlcnJvcjogbWVzc2FnZSB9XG4gICAgICB9KTtcblxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4pO1xuIl0sIm5hbWVzIjpbIlByaXNtYSIsImNyZWF0ZUVtYmVkZGluZ3NDbGllbnQiLCJhc3NlcnRFbnYiLCJjaHVua1BhZ2VzIiwibG9hZFBkZlBhZ2VzIiwiaW5uZ2VzdCIsInByaXNtYSIsIndpdGhSZXRyaWVzIiwic3RvcmFnZVBhdGhGb3JLZXkiLCJ0b1BnVmVjdG9yIiwiaW5nZXN0RG9jdW1lbnQiLCJjcmVhdGVGdW5jdGlvbiIsImlkIiwiZXZlbnQiLCJzdGVwIiwiam9iSWQiLCJkYXRhIiwiam9iIiwicnVuIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwib2siLCJyZWFzb24iLCJzdGF0dXMiLCJ1cGRhdGUiLCJzdGFnZSIsInNlbmRFdmVudCIsIm5hbWUiLCJkb2N1bWVudCIsImRvY3VtZW50SWQiLCJFcnJvciIsImZpbGVQYXRoIiwic3RvcmFnZUtleSIsInBhZ2VzIiwiY2h1bmtzIiwiZXhpc3RpbmdIYXNoZXMiLCJsZW5ndGgiLCJoYXNoZXMiLCJtYXAiLCJjaHVuayIsImNvbnRlbnRIYXNoIiwicm93cyIsImZpbmRNYW55IiwiaW4iLCJzZWxlY3QiLCJyb3ciLCJleGlzdGluZ0hhc2hTZXQiLCJTZXQiLCJzZWVuSGFzaGVzIiwibmV3Q2h1bmtzIiwiZmlsdGVyIiwiaGFzIiwiYWRkIiwiZW1iZWRkaW5ncyIsImJhdGNoU2l6ZSIsImkiLCJiYXRjaCIsInNsaWNlIiwidGV4dHMiLCJjb250ZW50IiwidmVjdG9ycyIsImVtYmVkRG9jdW1lbnRzIiwicmV0cmllcyIsImoiLCJjcmVhdGVkIiwidXBzZXJ0IiwiZG9jdW1lbnRJZF9jb250ZW50SGFzaCIsImNyZWF0ZSIsImNodW5rSW5kZXgiLCJwYWdlU3RhcnQiLCJwYWdlRW5kIiwidmVjdG9yIiwiJGV4ZWN1dGVSYXciLCJzcWwiLCJyYXciLCJlcnJvciIsIm1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/inngest/ingest-document.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ai.ts":
/*!***********************!*\
  !*** ./src/lib/ai.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createChatClient: () => (/* binding */ createChatClient),\n/* harmony export */   createEmbeddingsClient: () => (/* binding */ createEmbeddingsClient)\n/* harmony export */ });\n/* harmony import */ var _langchain_openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/openai */ \"(rsc)/./node_modules/@langchain/openai/index.js\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n\n\nfunction createEmbeddingsClient() {\n    return new _langchain_openai__WEBPACK_IMPORTED_MODULE_0__.OpenAIEmbeddings({\n        apiKey: _lib_env__WEBPACK_IMPORTED_MODULE_1__.env.openaiApiKey,\n        model: _lib_env__WEBPACK_IMPORTED_MODULE_1__.env.embeddingModel\n    });\n}\nfunction createChatClient() {\n    return new _langchain_openai__WEBPACK_IMPORTED_MODULE_0__.ChatOpenAI({\n        apiKey: _lib_env__WEBPACK_IMPORTED_MODULE_1__.env.openaiApiKey,\n        model: _lib_env__WEBPACK_IMPORTED_MODULE_1__.env.chatModel,\n        temperature: 0\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FpLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUU7QUFDakM7QUFFekIsU0FBU0c7SUFDZCxPQUFPLElBQUlGLCtEQUFnQkEsQ0FBQztRQUMxQkcsUUFBUUYseUNBQUdBLENBQUNHLFlBQVk7UUFDeEJDLE9BQU9KLHlDQUFHQSxDQUFDSyxjQUFjO0lBQzNCO0FBQ0Y7QUFFTyxTQUFTQztJQUNkLE9BQU8sSUFBSVIseURBQVVBLENBQUM7UUFDcEJJLFFBQVFGLHlDQUFHQSxDQUFDRyxZQUFZO1FBQ3hCQyxPQUFPSix5Q0FBR0EsQ0FBQ08sU0FBUztRQUNwQkMsYUFBYTtJQUNmO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL3NyYy9saWIvYWkudHM/ZGEyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGF0T3BlbkFJLCBPcGVuQUlFbWJlZGRpbmdzIH0gZnJvbSBcIkBsYW5nY2hhaW4vb3BlbmFpXCI7XG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9saWIvZW52XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbWJlZGRpbmdzQ2xpZW50KCkge1xuICByZXR1cm4gbmV3IE9wZW5BSUVtYmVkZGluZ3Moe1xuICAgIGFwaUtleTogZW52Lm9wZW5haUFwaUtleSxcbiAgICBtb2RlbDogZW52LmVtYmVkZGluZ01vZGVsXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hhdENsaWVudCgpIHtcbiAgcmV0dXJuIG5ldyBDaGF0T3BlbkFJKHtcbiAgICBhcGlLZXk6IGVudi5vcGVuYWlBcGlLZXksXG4gICAgbW9kZWw6IGVudi5jaGF0TW9kZWwsXG4gICAgdGVtcGVyYXR1cmU6IDBcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiQ2hhdE9wZW5BSSIsIk9wZW5BSUVtYmVkZGluZ3MiLCJlbnYiLCJjcmVhdGVFbWJlZGRpbmdzQ2xpZW50IiwiYXBpS2V5Iiwib3BlbmFpQXBpS2V5IiwibW9kZWwiLCJlbWJlZGRpbmdNb2RlbCIsImNyZWF0ZUNoYXRDbGllbnQiLCJjaGF0TW9kZWwiLCJ0ZW1wZXJhdHVyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ai.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/env.ts":
/*!************************!*\
  !*** ./src/lib/env.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertEnv: () => (/* binding */ assertEnv),\n/* harmony export */   env: () => (/* binding */ env)\n/* harmony export */ });\nconst env = {\n    databaseUrl: process.env.DATABASE_URL ?? \"\",\n    openaiApiKey: process.env.OPENAI_API_KEY ?? \"\",\n    inngestEventKey: process.env.INNGEST_EVENT_KEY ?? \"\",\n    inngestSigningKey: process.env.INNGEST_SIGNING_KEY ?? \"\",\n    chunkSize: Number(process.env.CHUNK_SIZE ?? 1000),\n    chunkOverlap: Number(process.env.CHUNK_OVERLAP ?? 150),\n    uploadMaxBytes: Number(process.env.UPLOAD_MAX_BYTES ?? 20000000),\n    embeddingModel: process.env.EMBEDDING_MODEL ?? \"text-embedding-3-small\",\n    chatModel: process.env.CHAT_MODEL ?? \"gpt-4o-mini\",\n    topK: Number(process.env.TOP_K ?? 5)\n};\nfunction assertEnv() {\n    const missing = [];\n    if (!env.databaseUrl) missing.push(\"DATABASE_URL\");\n    if (!env.openaiApiKey) missing.push(\"OPENAI_API_KEY\");\n    if (missing.length) {\n        throw new Error(`Missing required env vars: ${missing.join(\", \")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLE1BQU07SUFDakJDLGFBQWFDLFFBQVFGLEdBQUcsQ0FBQ0csWUFBWSxJQUFJO0lBQ3pDQyxjQUFjRixRQUFRRixHQUFHLENBQUNLLGNBQWMsSUFBSTtJQUM1Q0MsaUJBQWlCSixRQUFRRixHQUFHLENBQUNPLGlCQUFpQixJQUFJO0lBQ2xEQyxtQkFBbUJOLFFBQVFGLEdBQUcsQ0FBQ1MsbUJBQW1CLElBQUk7SUFDdERDLFdBQVdDLE9BQU9ULFFBQVFGLEdBQUcsQ0FBQ1ksVUFBVSxJQUFJO0lBQzVDQyxjQUFjRixPQUFPVCxRQUFRRixHQUFHLENBQUNjLGFBQWEsSUFBSTtJQUNsREMsZ0JBQWdCSixPQUFPVCxRQUFRRixHQUFHLENBQUNnQixnQkFBZ0IsSUFBSTtJQUN2REMsZ0JBQWdCZixRQUFRRixHQUFHLENBQUNrQixlQUFlLElBQUk7SUFDL0NDLFdBQVdqQixRQUFRRixHQUFHLENBQUNvQixVQUFVLElBQUk7SUFDckNDLE1BQU1WLE9BQU9ULFFBQVFGLEdBQUcsQ0FBQ3NCLEtBQUssSUFBSTtBQUNwQyxFQUFFO0FBRUssU0FBU0M7SUFDZCxNQUFNQyxVQUFvQixFQUFFO0lBQzVCLElBQUksQ0FBQ3hCLElBQUlDLFdBQVcsRUFBRXVCLFFBQVFDLElBQUksQ0FBQztJQUNuQyxJQUFJLENBQUN6QixJQUFJSSxZQUFZLEVBQUVvQixRQUFRQyxJQUFJLENBQUM7SUFDcEMsSUFBSUQsUUFBUUUsTUFBTSxFQUFFO1FBQ2xCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLDJCQUEyQixFQUFFSCxRQUFRSSxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3BFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL3NyYy9saWIvZW52LnRzPzg0ODUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGVudiA9IHtcbiAgZGF0YWJhc2VVcmw6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCA/PyBcIlwiLFxuICBvcGVuYWlBcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZID8/IFwiXCIsXG4gIGlubmdlc3RFdmVudEtleTogcHJvY2Vzcy5lbnYuSU5OR0VTVF9FVkVOVF9LRVkgPz8gXCJcIixcbiAgaW5uZ2VzdFNpZ25pbmdLZXk6IHByb2Nlc3MuZW52LklOTkdFU1RfU0lHTklOR19LRVkgPz8gXCJcIixcbiAgY2h1bmtTaXplOiBOdW1iZXIocHJvY2Vzcy5lbnYuQ0hVTktfU0laRSA/PyAxMDAwKSxcbiAgY2h1bmtPdmVybGFwOiBOdW1iZXIocHJvY2Vzcy5lbnYuQ0hVTktfT1ZFUkxBUCA/PyAxNTApLFxuICB1cGxvYWRNYXhCeXRlczogTnVtYmVyKHByb2Nlc3MuZW52LlVQTE9BRF9NQVhfQllURVMgPz8gMjBfMDAwXzAwMCksXG4gIGVtYmVkZGluZ01vZGVsOiBwcm9jZXNzLmVudi5FTUJFRERJTkdfTU9ERUwgPz8gXCJ0ZXh0LWVtYmVkZGluZy0zLXNtYWxsXCIsXG4gIGNoYXRNb2RlbDogcHJvY2Vzcy5lbnYuQ0hBVF9NT0RFTCA/PyBcImdwdC00by1taW5pXCIsXG4gIHRvcEs6IE51bWJlcihwcm9jZXNzLmVudi5UT1BfSyA/PyA1KVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEVudigpIHtcbiAgY29uc3QgbWlzc2luZzogc3RyaW5nW10gPSBbXTtcbiAgaWYgKCFlbnYuZGF0YWJhc2VVcmwpIG1pc3NpbmcucHVzaChcIkRBVEFCQVNFX1VSTFwiKTtcbiAgaWYgKCFlbnYub3BlbmFpQXBpS2V5KSBtaXNzaW5nLnB1c2goXCJPUEVOQUlfQVBJX0tFWVwiKTtcbiAgaWYgKG1pc3NpbmcubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGVudiB2YXJzOiAke21pc3Npbmcuam9pbihcIiwgXCIpfWApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiZW52IiwiZGF0YWJhc2VVcmwiLCJwcm9jZXNzIiwiREFUQUJBU0VfVVJMIiwib3BlbmFpQXBpS2V5IiwiT1BFTkFJX0FQSV9LRVkiLCJpbm5nZXN0RXZlbnRLZXkiLCJJTk5HRVNUX0VWRU5UX0tFWSIsImlubmdlc3RTaWduaW5nS2V5IiwiSU5OR0VTVF9TSUdOSU5HX0tFWSIsImNodW5rU2l6ZSIsIk51bWJlciIsIkNIVU5LX1NJWkUiLCJjaHVua092ZXJsYXAiLCJDSFVOS19PVkVSTEFQIiwidXBsb2FkTWF4Qnl0ZXMiLCJVUExPQURfTUFYX0JZVEVTIiwiZW1iZWRkaW5nTW9kZWwiLCJFTUJFRERJTkdfTU9ERUwiLCJjaGF0TW9kZWwiLCJDSEFUX01PREVMIiwidG9wSyIsIlRPUF9LIiwiYXNzZXJ0RW52IiwibWlzc2luZyIsInB1c2giLCJsZW5ndGgiLCJFcnJvciIsImpvaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ingest.ts":
/*!***************************!*\
  !*** ./src/lib/ingest.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkPages: () => (/* binding */ chunkPages),\n/* harmony export */   hashContent: () => (/* binding */ hashContent),\n/* harmony export */   loadPdfPages: () => (/* binding */ loadPdfPages)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _langchain_community_document_loaders_fs_pdf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/community/document_loaders/fs/pdf */ \"(rsc)/./node_modules/@langchain/community/document_loaders/fs/pdf.js\");\n/* harmony import */ var langchain_text_splitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! langchain/text_splitter */ \"(rsc)/./node_modules/langchain/text_splitter.js\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n\n\n\n\nasync function loadPdfPages(filePath) {\n    const loader = new _langchain_community_document_loaders_fs_pdf__WEBPACK_IMPORTED_MODULE_1__.PDFLoader(filePath, {\n        splitPages: true\n    });\n    const docs = await loader.load();\n    return docs.map((doc, index)=>{\n        const meta = doc.metadata;\n        return {\n            content: doc.pageContent,\n            pageNumber: meta?.pageNumber ?? index + 1\n        };\n    });\n}\nasync function chunkPages(pages) {\n    const splitter = new langchain_text_splitter__WEBPACK_IMPORTED_MODULE_2__.RecursiveCharacterTextSplitter({\n        chunkSize: _lib_env__WEBPACK_IMPORTED_MODULE_3__.env.chunkSize,\n        chunkOverlap: _lib_env__WEBPACK_IMPORTED_MODULE_3__.env.chunkOverlap\n    });\n    const chunks = [];\n    let chunkIndex = 0;\n    for (const page of pages){\n        const pieces = await splitter.splitText(page.content);\n        for (const piece of pieces){\n            const trimmed = piece.trim();\n            if (!trimmed) continue;\n            chunks.push({\n                content: trimmed,\n                contentHash: hashContent(trimmed),\n                pageStart: page.pageNumber,\n                pageEnd: page.pageNumber,\n                chunkIndex\n            });\n            chunkIndex += 1;\n        }\n    }\n    return chunks;\n}\nfunction hashContent(text) {\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(\"sha256\").update(text).digest(\"hex\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2luZ2VzdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE0QjtBQUM2QztBQUNBO0FBQ3pDO0FBZXpCLGVBQWVJLGFBQWFDLFFBQWdCO0lBQ2pELE1BQU1DLFNBQVMsSUFBSUwsbUZBQVNBLENBQUNJLFVBQVU7UUFBRUUsWUFBWTtJQUFLO0lBQzFELE1BQU1DLE9BQU8sTUFBTUYsT0FBT0csSUFBSTtJQUU5QixPQUFPRCxLQUFLRSxHQUFHLENBQUMsQ0FBQ0MsS0FBS0M7UUFDcEIsTUFBTUMsT0FBT0YsSUFBSUcsUUFBUTtRQUN6QixPQUFPO1lBQ0xDLFNBQVNKLElBQUlLLFdBQVc7WUFDeEJDLFlBQVlKLE1BQU1JLGNBQWNMLFFBQVE7UUFDMUM7SUFDRjtBQUNGO0FBRU8sZUFBZU0sV0FBV0MsS0FBZ0I7SUFDL0MsTUFBTUMsV0FBVyxJQUFJbEIsbUZBQThCQSxDQUFDO1FBQ2xEbUIsV0FBV2xCLHlDQUFHQSxDQUFDa0IsU0FBUztRQUN4QkMsY0FBY25CLHlDQUFHQSxDQUFDbUIsWUFBWTtJQUNoQztJQUVBLE1BQU1DLFNBQXlCLEVBQUU7SUFDakMsSUFBSUMsYUFBYTtJQUVqQixLQUFLLE1BQU1DLFFBQVFOLE1BQU87UUFDeEIsTUFBTU8sU0FBUyxNQUFNTixTQUFTTyxTQUFTLENBQUNGLEtBQUtWLE9BQU87UUFDcEQsS0FBSyxNQUFNYSxTQUFTRixPQUFRO1lBQzFCLE1BQU1HLFVBQVVELE1BQU1FLElBQUk7WUFDMUIsSUFBSSxDQUFDRCxTQUFTO1lBQ2ROLE9BQU9RLElBQUksQ0FBQztnQkFDVmhCLFNBQVNjO2dCQUNURyxhQUFhQyxZQUFZSjtnQkFDekJLLFdBQVdULEtBQUtSLFVBQVU7Z0JBQzFCa0IsU0FBU1YsS0FBS1IsVUFBVTtnQkFDeEJPO1lBQ0Y7WUFDQUEsY0FBYztRQUNoQjtJQUNGO0lBRUEsT0FBT0Q7QUFDVDtBQUVPLFNBQVNVLFlBQVlHLElBQVk7SUFDdEMsT0FBT3BDLHdEQUFpQixDQUFDLFVBQVVzQyxNQUFNLENBQUNGLE1BQU1HLE1BQU0sQ0FBQztBQUN6RCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vc3JjL2xpYi9pbmdlc3QudHM/OGI1MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCB7IFBERkxvYWRlciB9IGZyb20gXCJAbGFuZ2NoYWluL2NvbW11bml0eS9kb2N1bWVudF9sb2FkZXJzL2ZzL3BkZlwiO1xuaW1wb3J0IHsgUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyIH0gZnJvbSBcImxhbmdjaGFpbi90ZXh0X3NwbGl0dGVyXCI7XG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9saWIvZW52XCI7XG5cbmV4cG9ydCB0eXBlIFJhd1BhZ2UgPSB7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgcGFnZU51bWJlcjogbnVtYmVyIHwgbnVsbDtcbn07XG5cbmV4cG9ydCB0eXBlIENodW5rUGF5bG9hZCA9IHtcbiAgY29udGVudDogc3RyaW5nO1xuICBjb250ZW50SGFzaDogc3RyaW5nO1xuICBwYWdlU3RhcnQ6IG51bWJlciB8IG51bGw7XG4gIHBhZ2VFbmQ6IG51bWJlciB8IG51bGw7XG4gIGNodW5rSW5kZXg6IG51bWJlcjtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkUGRmUGFnZXMoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8UmF3UGFnZVtdPiB7XG4gIGNvbnN0IGxvYWRlciA9IG5ldyBQREZMb2FkZXIoZmlsZVBhdGgsIHsgc3BsaXRQYWdlczogdHJ1ZSB9KTtcbiAgY29uc3QgZG9jcyA9IGF3YWl0IGxvYWRlci5sb2FkKCk7XG5cbiAgcmV0dXJuIGRvY3MubWFwKChkb2MsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgbWV0YSA9IGRvYy5tZXRhZGF0YSBhcyB7IHBhZ2VOdW1iZXI/OiBudW1iZXIgfTtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudDogZG9jLnBhZ2VDb250ZW50LFxuICAgICAgcGFnZU51bWJlcjogbWV0YT8ucGFnZU51bWJlciA/PyBpbmRleCArIDFcbiAgICB9O1xuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNodW5rUGFnZXMocGFnZXM6IFJhd1BhZ2VbXSk6IFByb21pc2U8Q2h1bmtQYXlsb2FkW10+IHtcbiAgY29uc3Qgc3BsaXR0ZXIgPSBuZXcgUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyKHtcbiAgICBjaHVua1NpemU6IGVudi5jaHVua1NpemUsXG4gICAgY2h1bmtPdmVybGFwOiBlbnYuY2h1bmtPdmVybGFwXG4gIH0pO1xuXG4gIGNvbnN0IGNodW5rczogQ2h1bmtQYXlsb2FkW10gPSBbXTtcbiAgbGV0IGNodW5rSW5kZXggPSAwO1xuXG4gIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykge1xuICAgIGNvbnN0IHBpZWNlcyA9IGF3YWl0IHNwbGl0dGVyLnNwbGl0VGV4dChwYWdlLmNvbnRlbnQpO1xuICAgIGZvciAoY29uc3QgcGllY2Ugb2YgcGllY2VzKSB7XG4gICAgICBjb25zdCB0cmltbWVkID0gcGllY2UudHJpbSgpO1xuICAgICAgaWYgKCF0cmltbWVkKSBjb250aW51ZTtcbiAgICAgIGNodW5rcy5wdXNoKHtcbiAgICAgICAgY29udGVudDogdHJpbW1lZCxcbiAgICAgICAgY29udGVudEhhc2g6IGhhc2hDb250ZW50KHRyaW1tZWQpLFxuICAgICAgICBwYWdlU3RhcnQ6IHBhZ2UucGFnZU51bWJlcixcbiAgICAgICAgcGFnZUVuZDogcGFnZS5wYWdlTnVtYmVyLFxuICAgICAgICBjaHVua0luZGV4XG4gICAgICB9KTtcbiAgICAgIGNodW5rSW5kZXggKz0gMTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY2h1bmtzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzaENvbnRlbnQodGV4dDogc3RyaW5nKSB7XG4gIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaChcInNoYTI1NlwiKS51cGRhdGUodGV4dCkuZGlnZXN0KFwiaGV4XCIpO1xufVxuIl0sIm5hbWVzIjpbImNyeXB0byIsIlBERkxvYWRlciIsIlJlY3Vyc2l2ZUNoYXJhY3RlclRleHRTcGxpdHRlciIsImVudiIsImxvYWRQZGZQYWdlcyIsImZpbGVQYXRoIiwibG9hZGVyIiwic3BsaXRQYWdlcyIsImRvY3MiLCJsb2FkIiwibWFwIiwiZG9jIiwiaW5kZXgiLCJtZXRhIiwibWV0YWRhdGEiLCJjb250ZW50IiwicGFnZUNvbnRlbnQiLCJwYWdlTnVtYmVyIiwiY2h1bmtQYWdlcyIsInBhZ2VzIiwic3BsaXR0ZXIiLCJjaHVua1NpemUiLCJjaHVua092ZXJsYXAiLCJjaHVua3MiLCJjaHVua0luZGV4IiwicGFnZSIsInBpZWNlcyIsInNwbGl0VGV4dCIsInBpZWNlIiwidHJpbW1lZCIsInRyaW0iLCJwdXNoIiwiY29udGVudEhhc2giLCJoYXNoQ29udGVudCIsInBhZ2VTdGFydCIsInBhZ2VFbmQiLCJ0ZXh0IiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ingest.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/inngest.ts":
/*!****************************!*\
  !*** ./src/lib/inngest.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   inngest: () => (/* binding */ inngest)\n/* harmony export */ });\n/* harmony import */ var inngest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! inngest */ \"(rsc)/./node_modules/inngest/components/Inngest.js\");\n\nconst inngest = new inngest__WEBPACK_IMPORTED_MODULE_0__.Inngest({\n    id: \"memorizeai\"\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2lubmdlc3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFFM0IsTUFBTUMsVUFBVSxJQUFJRCw0Q0FBT0EsQ0FBQztJQUNqQ0UsSUFBSTtBQUNOLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL3NyYy9saWIvaW5uZ2VzdC50cz9lMjRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElubmdlc3QgfSBmcm9tIFwiaW5uZ2VzdFwiO1xuXG5leHBvcnQgY29uc3QgaW5uZ2VzdCA9IG5ldyBJbm5nZXN0KHtcbiAgaWQ6IFwibWVtb3JpemVhaVwiXG59KTtcbiJdLCJuYW1lcyI6WyJJbm5nZXN0IiwiaW5uZ2VzdCIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/inngest.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _prisma_adapter_pg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @prisma/adapter-pg */ \"(rsc)/./node_modules/@prisma/adapter-pg/dist/index.mjs\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_1__, _prisma_adapter_pg__WEBPACK_IMPORTED_MODULE_3__]);\n([pg__WEBPACK_IMPORTED_MODULE_1__, _prisma_adapter_pg__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst globalForPrisma = globalThis;\nfunction createPrismaClient() {\n    (0,_lib_env__WEBPACK_IMPORTED_MODULE_2__.assertEnv)();\n    const pool = new pg__WEBPACK_IMPORTED_MODULE_1__.Pool({\n        connectionString: _lib_env__WEBPACK_IMPORTED_MODULE_2__.env.databaseUrl\n    });\n    const adapter = new _prisma_adapter_pg__WEBPACK_IMPORTED_MODULE_3__.PrismaPg(pool);\n    return new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n        adapter\n    });\n}\nconst prisma = createPrismaClient();\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEM7QUFDQTtBQUNwQjtBQUNpQjtBQUUzQyxNQUFNSyxrQkFBa0JDO0FBRXhCLFNBQVNDO0lBQ1BKLG1EQUFTQTtJQUNULE1BQU1LLE9BQU8sSUFBSU4sb0NBQUlBLENBQUM7UUFDcEJPLGtCQUFrQkwseUNBQUdBLENBQUNNLFdBQVc7SUFDbkM7SUFDQSxNQUFNQyxVQUFVLElBQUlWLHdEQUFRQSxDQUFDTztJQUM3QixPQUFPLElBQUlSLHdEQUFZQSxDQUFDO1FBQUVXO0lBQVE7QUFDcEM7QUFFTyxNQUFNQyxTQUFTTCxxQkFBcUI7QUFFM0MsSUFBSU0sSUFBcUMsRUFBRTtJQUN6Q1IsZ0JBQWdCTyxNQUFNLEdBQUdBO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IHsgUHJpc21hUGcgfSBmcm9tIFwiQHByaXNtYS9hZGFwdGVyLXBnXCI7XG5pbXBvcnQgeyBQb29sIH0gZnJvbSBcInBnXCI7XG5pbXBvcnQgeyBhc3NlcnRFbnYsIGVudiB9IGZyb20gXCJAL2xpYi9lbnZcIjtcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHsgcHJpc21hPzogUHJpc21hQ2xpZW50IH07XG5cbmZ1bmN0aW9uIGNyZWF0ZVByaXNtYUNsaWVudCgpIHtcbiAgYXNzZXJ0RW52KCk7XG4gIGNvbnN0IHBvb2wgPSBuZXcgUG9vbCh7XG4gICAgY29ubmVjdGlvblN0cmluZzogZW52LmRhdGFiYXNlVXJsXG4gIH0pO1xuICBjb25zdCBhZGFwdGVyID0gbmV3IFByaXNtYVBnKHBvb2wpO1xuICByZXR1cm4gbmV3IFByaXNtYUNsaWVudCh7IGFkYXB0ZXIgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBjcmVhdGVQcmlzbWFDbGllbnQoKTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xufVxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsIlByaXNtYVBnIiwiUG9vbCIsImFzc2VydEVudiIsImVudiIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJjcmVhdGVQcmlzbWFDbGllbnQiLCJwb29sIiwiY29ubmVjdGlvblN0cmluZyIsImRhdGFiYXNlVXJsIiwiYWRhcHRlciIsInByaXNtYSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/retry.ts":
/*!**************************!*\
  !*** ./src/lib/retry.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withRetries: () => (/* binding */ withRetries)\n/* harmony export */ });\nasync function withRetries(operation, options = {\n    retries: 3,\n    baseDelayMs: 500\n}) {\n    const { retries, baseDelayMs = 500 } = options;\n    let lastError;\n    for(let attempt = 0; attempt <= retries; attempt += 1){\n        try {\n            return await operation();\n        } catch (error) {\n            lastError = error;\n            if (attempt === retries) break;\n            const delay = baseDelayMs * Math.pow(2, attempt);\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n        }\n    }\n    throw lastError;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JldHJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxlQUFlQSxZQUNwQkMsU0FBMkIsRUFDM0JDLFVBQXFEO0lBQUVDLFNBQVM7SUFBR0MsYUFBYTtBQUFJLENBQUM7SUFFckYsTUFBTSxFQUFFRCxPQUFPLEVBQUVDLGNBQWMsR0FBRyxFQUFFLEdBQUdGO0lBRXZDLElBQUlHO0lBQ0osSUFBSyxJQUFJQyxVQUFVLEdBQUdBLFdBQVdILFNBQVNHLFdBQVcsRUFBRztRQUN0RCxJQUFJO1lBQ0YsT0FBTyxNQUFNTDtRQUNmLEVBQUUsT0FBT00sT0FBTztZQUNkRixZQUFZRTtZQUNaLElBQUlELFlBQVlILFNBQVM7WUFDekIsTUFBTUssUUFBUUosY0FBY0ssS0FBS0MsR0FBRyxDQUFDLEdBQUdKO1lBQ3hDLE1BQU0sSUFBSUssUUFBUSxDQUFDQyxVQUFZQyxXQUFXRCxTQUFTSjtRQUNyRDtJQUNGO0lBRUEsTUFBTUg7QUFDUiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vc3JjL2xpYi9yZXRyeS50cz8zZDQxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoUmV0cmllczxUPihcbiAgb3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+LFxuICBvcHRpb25zOiB7IHJldHJpZXM6IG51bWJlcjsgYmFzZURlbGF5TXM/OiBudW1iZXIgfSA9IHsgcmV0cmllczogMywgYmFzZURlbGF5TXM6IDUwMCB9XG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgeyByZXRyaWVzLCBiYXNlRGVsYXlNcyA9IDUwMCB9ID0gb3B0aW9ucztcblxuICBsZXQgbGFzdEVycm9yOiB1bmtub3duO1xuICBmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8PSByZXRyaWVzOyBhdHRlbXB0ICs9IDEpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsYXN0RXJyb3IgPSBlcnJvcjtcbiAgICAgIGlmIChhdHRlbXB0ID09PSByZXRyaWVzKSBicmVhaztcbiAgICAgIGNvbnN0IGRlbGF5ID0gYmFzZURlbGF5TXMgKiBNYXRoLnBvdygyLCBhdHRlbXB0KTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgfVxuICB9XG5cbiAgdGhyb3cgbGFzdEVycm9yO1xufVxuIl0sIm5hbWVzIjpbIndpdGhSZXRyaWVzIiwib3BlcmF0aW9uIiwib3B0aW9ucyIsInJldHJpZXMiLCJiYXNlRGVsYXlNcyIsImxhc3RFcnJvciIsImF0dGVtcHQiLCJlcnJvciIsImRlbGF5IiwiTWF0aCIsInBvdyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/retry.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/storage.ts":
/*!****************************!*\
  !*** ./src/lib/storage.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureStorageDir: () => (/* binding */ ensureStorageDir),\n/* harmony export */   saveUploadedFile: () => (/* binding */ saveUploadedFile),\n/* harmony export */   storageKeyForJob: () => (/* binding */ storageKeyForJob),\n/* harmony export */   storagePathForKey: () => (/* binding */ storagePathForKey)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst STORAGE_DIR = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"storage\");\nasync function ensureStorageDir() {\n    await (0,fs_promises__WEBPACK_IMPORTED_MODULE_0__.mkdir)(STORAGE_DIR, {\n        recursive: true\n    });\n}\nfunction storageKeyForJob(jobId) {\n    return `${jobId}.pdf`;\n}\nfunction storagePathForKey(storageKey) {\n    return path__WEBPACK_IMPORTED_MODULE_1___default().join(STORAGE_DIR, storageKey);\n}\nasync function saveUploadedFile(storageKey, buffer) {\n    await ensureStorageDir();\n    const filePath = storagePathForKey(storageKey);\n    await (0,fs_promises__WEBPACK_IMPORTED_MODULE_0__.writeFile)(filePath, buffer);\n    return filePath;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N0b3JhZ2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0M7QUFDdkI7QUFFeEIsTUFBTUcsY0FBY0QsZ0RBQVMsQ0FBQ0csUUFBUUMsR0FBRyxJQUFJO0FBRXRDLGVBQWVDO0lBQ3BCLE1BQU1QLGtEQUFLQSxDQUFDRyxhQUFhO1FBQUVLLFdBQVc7SUFBSztBQUM3QztBQUVPLFNBQVNDLGlCQUFpQkMsS0FBYTtJQUM1QyxPQUFPLENBQUMsRUFBRUEsTUFBTSxJQUFJLENBQUM7QUFDdkI7QUFFTyxTQUFTQyxrQkFBa0JDLFVBQWtCO0lBQ2xELE9BQU9WLGdEQUFTLENBQUNDLGFBQWFTO0FBQ2hDO0FBRU8sZUFBZUMsaUJBQWlCRCxVQUFrQixFQUFFRSxNQUFjO0lBQ3ZFLE1BQU1QO0lBQ04sTUFBTVEsV0FBV0osa0JBQWtCQztJQUNuQyxNQUFNWCxzREFBU0EsQ0FBQ2MsVUFBVUQ7SUFDMUIsT0FBT0M7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vc3JjL2xpYi9zdG9yYWdlLnRzP2FmZTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWtkaXIsIHdyaXRlRmlsZSB9IGZyb20gXCJmcy9wcm9taXNlc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuY29uc3QgU1RPUkFHRV9ESVIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJzdG9yYWdlXCIpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlU3RvcmFnZURpcigpIHtcbiAgYXdhaXQgbWtkaXIoU1RPUkFHRV9ESVIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmFnZUtleUZvckpvYihqb2JJZDogc3RyaW5nKSB7XG4gIHJldHVybiBgJHtqb2JJZH0ucGRmYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JhZ2VQYXRoRm9yS2V5KHN0b3JhZ2VLZXk6IHN0cmluZykge1xuICByZXR1cm4gcGF0aC5qb2luKFNUT1JBR0VfRElSLCBzdG9yYWdlS2V5KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVVcGxvYWRlZEZpbGUoc3RvcmFnZUtleTogc3RyaW5nLCBidWZmZXI6IEJ1ZmZlcikge1xuICBhd2FpdCBlbnN1cmVTdG9yYWdlRGlyKCk7XG4gIGNvbnN0IGZpbGVQYXRoID0gc3RvcmFnZVBhdGhGb3JLZXkoc3RvcmFnZUtleSk7XG4gIGF3YWl0IHdyaXRlRmlsZShmaWxlUGF0aCwgYnVmZmVyKTtcbiAgcmV0dXJuIGZpbGVQYXRoO1xufVxuIl0sIm5hbWVzIjpbIm1rZGlyIiwid3JpdGVGaWxlIiwicGF0aCIsIlNUT1JBR0VfRElSIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJlbnN1cmVTdG9yYWdlRGlyIiwicmVjdXJzaXZlIiwic3RvcmFnZUtleUZvckpvYiIsImpvYklkIiwic3RvcmFnZVBhdGhGb3JLZXkiLCJzdG9yYWdlS2V5Iiwic2F2ZVVwbG9hZGVkRmlsZSIsImJ1ZmZlciIsImZpbGVQYXRoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/storage.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/vector.ts":
/*!***************************!*\
  !*** ./src/lib/vector.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toPgVector: () => (/* binding */ toPgVector)\n/* harmony export */ });\nfunction toPgVector(embedding) {\n    const sanitized = embedding.map((value)=>{\n        if (!Number.isFinite(value)) {\n            throw new Error(\"Embedding contains non-finite values\");\n        }\n        return Number(value).toFixed(8);\n    });\n    return `[${sanitized.join(\",\")}]`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ZlY3Rvci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sU0FBU0EsV0FBV0MsU0FBbUI7SUFDNUMsTUFBTUMsWUFBWUQsVUFBVUUsR0FBRyxDQUFDLENBQUNDO1FBQy9CLElBQUksQ0FBQ0MsT0FBT0MsUUFBUSxDQUFDRixRQUFRO1lBQzNCLE1BQU0sSUFBSUcsTUFBTTtRQUNsQjtRQUNBLE9BQU9GLE9BQU9ELE9BQU9JLE9BQU8sQ0FBQztJQUMvQjtJQUVBLE9BQU8sQ0FBQyxDQUFDLEVBQUVOLFVBQVVPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNuQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vc3JjL2xpYi92ZWN0b3IudHM/NWVlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gdG9QZ1ZlY3RvcihlbWJlZGRpbmc6IG51bWJlcltdKSB7XG4gIGNvbnN0IHNhbml0aXplZCA9IGVtYmVkZGluZy5tYXAoKHZhbHVlKSA9PiB7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodmFsdWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbWJlZGRpbmcgY29udGFpbnMgbm9uLWZpbml0ZSB2YWx1ZXNcIik7XG4gICAgfVxuICAgIHJldHVybiBOdW1iZXIodmFsdWUpLnRvRml4ZWQoOCk7XG4gIH0pO1xuXG4gIHJldHVybiBgWyR7c2FuaXRpemVkLmpvaW4oXCIsXCIpfV1gO1xufVxuIl0sIm5hbWVzIjpbInRvUGdWZWN0b3IiLCJlbWJlZGRpbmciLCJzYW5pdGl6ZWQiLCJtYXAiLCJ2YWx1ZSIsIk51bWJlciIsImlzRmluaXRlIiwiRXJyb3IiLCJ0b0ZpeGVkIiwiam9pbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/vector.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/formdata-node","vendor-chunks/@langchain","vendor-chunks/openai","vendor-chunks/semver","vendor-chunks/zod-to-json-schema","vendor-chunks/inngest","vendor-chunks/langsmith","vendor-chunks/@inngest","vendor-chunks/hash.js","vendor-chunks/form-data-encoder","vendor-chunks/node-fetch","vendor-chunks/zod","vendor-chunks/uuid","vendor-chunks/langchain","vendor-chunks/debug","vendor-chunks/chalk","vendor-chunks/agentkeepalive","vendor-chunks/@prisma","vendor-chunks/retry","vendor-chunks/p-queue","vendor-chunks/color-convert","vendor-chunks/js-tiktoken","vendor-chunks/strip-ansi","vendor-chunks/serialize-error-cjs","vendor-chunks/inherits","vendor-chunks/web-streams-polyfill","vendor-chunks/ulid","vendor-chunks/supports-color","vendor-chunks/postgres-array","vendor-chunks/p-timeout","vendor-chunks/p-retry","vendor-chunks/p-finally","vendor-chunks/ms","vendor-chunks/minimalistic-assert","vendor-chunks/json-stringify-safe","vendor-chunks/humanize-ms","vendor-chunks/has-flag","vendor-chunks/eventemitter3","vendor-chunks/event-target-shim","vendor-chunks/decamelize","vendor-chunks/color-name","vendor-chunks/canonicalize","vendor-chunks/camelcase","vendor-chunks/base64-js","vendor-chunks/ansi-styles","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finngest%2Froute&page=%2Fapi%2Finngest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finngest%2Froute.ts&appDir=%2FUsers%2Fsania%2FPORJECT%2FMemorizeAI%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsania%2FPORJECT%2FMemorizeAI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();