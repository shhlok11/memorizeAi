"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/inngest";
exports.ids = ["vendor-chunks/inngest"];
exports.modules = {

/***/ "(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js":
/*!***********************************************************!*\
  !*** ./node_modules/inngest/_virtual/rolldown_runtime.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __export: () => (/* binding */ __export),\n/* harmony export */   __require: () => (/* binding */ __require)\n/* harmony export */ });\n//#region rolldown:runtime\nvar __defProp = Object.defineProperty;\nvar __export = (all, symbols) => {\n\tlet target = {};\n\tfor (var name in all) {\n\t\t__defProp(target, name, {\n\t\t\tget: all[name],\n\t\t\tenumerable: true\n\t\t});\n\t}\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\treturn target;\n};\nvar __require = /* @__PURE__ */ ((x) => typeof require !== \"undefined\" ? require : typeof Proxy !== \"undefined\" ? new Proxy(x, { get: (a, b) => (typeof require !== \"undefined\" ? require : a)[b] }) : x)(function(x) {\n\tif (typeof require !== \"undefined\") return require.apply(this, arguments);\n\tthrow Error(\"Calling `require` for \\\"\" + x + \"\\\" in an environment that doesn't expose the `require` function.\");\n});\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMENBQTBDLGlCQUFpQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxpSUFBaUksa0VBQWtFO0FBQ25NO0FBQ0E7QUFDQSxDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzP2YzMjAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHJvbGxkb3duOnJ1bnRpbWVcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAoYWxsLCBzeW1ib2xzKSA9PiB7XG5cdGxldCB0YXJnZXQgPSB7fTtcblx0Zm9yICh2YXIgbmFtZSBpbiBhbGwpIHtcblx0XHRfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7XG5cdFx0XHRnZXQ6IGFsbFtuYW1lXSxcblx0XHRcdGVudW1lcmFibGU6IHRydWVcblx0XHR9KTtcblx0fVxuXHRpZiAoc3ltYm9scykge1xuXHRcdF9fZGVmUHJvcCh0YXJnZXQsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogXCJNb2R1bGVcIiB9KTtcblx0fVxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcbnZhciBfX3JlcXVpcmUgPSAvKiBAX19QVVJFX18gKi8gKCh4KSA9PiB0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHJlcXVpcmUgOiB0eXBlb2YgUHJveHkgIT09IFwidW5kZWZpbmVkXCIgPyBuZXcgUHJveHkoeCwgeyBnZXQ6IChhLCBiKSA9PiAodHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIgPyByZXF1aXJlIDogYSlbYl0gfSkgOiB4KShmdW5jdGlvbih4KSB7XG5cdGlmICh0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHJlcXVpcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0dGhyb3cgRXJyb3IoXCJDYWxsaW5nIGByZXF1aXJlYCBmb3IgXFxcIlwiICsgeCArIFwiXFxcIiBpbiBhbiBlbnZpcm9ubWVudCB0aGF0IGRvZXNuJ3QgZXhwb3NlIHRoZSBgcmVxdWlyZWAgZnVuY3Rpb24uXCIpO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgX19leHBvcnQsIF9fcmVxdWlyZSB9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/api/api.js":
/*!*****************************************!*\
  !*** ./node_modules/inngest/api/api.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestApi: () => (/* binding */ InngestApi)\n/* harmony export */ });\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _schema_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./schema.js */ \"(rsc)/./node_modules/inngest/api/schema.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _helpers_devserver_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/devserver.js */ \"(rsc)/./node_modules/inngest/helpers/devserver.js\");\n/* harmony import */ var _helpers_net_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../helpers/net.js */ \"(rsc)/./node_modules/inngest/helpers/net.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n\n\n\n\n\n\n//#region src/api/api.ts\nconst realtimeSubscriptionTokenSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ jwt: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string() });\nconst sendSignalSuccessResponseSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ data: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ run_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1) }) });\nconst checkpointNewRunResponseSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ data: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\tfn_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n\tapp_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n\trun_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n\ttoken: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1).optional()\n}) });\nvar InngestApi = class {\n\tapiBaseUrl;\n\tsigningKey;\n\tsigningKeyFallback;\n\tfetch;\n\tmode;\n\tconstructor({ baseUrl, signingKey, signingKeyFallback, fetch, mode }) {\n\t\tthis.apiBaseUrl = baseUrl;\n\t\tthis.signingKey = signingKey;\n\t\tthis.signingKeyFallback = signingKeyFallback;\n\t\tthis.fetch = fetch;\n\t\tthis.mode = mode;\n\t}\n\tget hashedKey() {\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__.hashSigningKey)(this.signingKey);\n\t}\n\tget hashedFallbackKey() {\n\t\tif (!this.signingKeyFallback) return;\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__.hashSigningKey)(this.signingKeyFallback);\n\t}\n\tsetSigningKey(key) {\n\t\tif (typeof key === \"string\" && this.signingKey === \"\") this.signingKey = key;\n\t}\n\tsetSigningKeyFallback(key) {\n\t\tif (typeof key === \"string\" && !this.signingKeyFallback) this.signingKeyFallback = key;\n\t}\n\tasync getTargetUrl(path) {\n\t\tif (this.apiBaseUrl) return new URL(path, this.apiBaseUrl);\n\t\tlet url = new URL(path, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.defaultInngestApiBaseUrl);\n\t\tif (this.mode.isDev && this.mode.isInferred && !this.apiBaseUrl) {\n\t\t\tif (await (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_3__.devServerAvailable)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.defaultDevServerHost, this.fetch)) url = new URL(path, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.defaultDevServerHost);\n\t\t}\n\t\treturn url;\n\t}\n\tasync req(url, options) {\n\t\tconst finalUrl = typeof url === \"string\" ? await this.getTargetUrl(url) : url;\n\t\ttry {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(await (0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_5__.fetchWithAuthFallback)({\n\t\t\t\tauthToken: this.hashedKey,\n\t\t\t\tauthTokenFallback: this.hashedFallbackKey,\n\t\t\t\tfetch: this.fetch,\n\t\t\t\turl: finalUrl,\n\t\t\t\toptions: {\n\t\t\t\t\t...options,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t...options?.headers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t} catch (error) {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(error);\n\t\t}\n\t}\n\tasync getRunSteps(runId, version) {\n\t\tconst result = await this.req(`/v0/runs/${runId}/actions`);\n\t\tif (result.ok) {\n\t\t\tconst res = result.value;\n\t\t\tconst data = await res.json();\n\t\t\tif (res.ok) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.stepsSchemas[version].parse(data));\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.errorSchema.parse(data));\n\t\t}\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error retrieving step data\"),\n\t\t\tstatus: 500\n\t\t});\n\t}\n\tasync getRunBatch(runId) {\n\t\tconst result = await this.req(`/v0/runs/${runId}/batch`);\n\t\tif (result.ok) {\n\t\t\tconst res = result.value;\n\t\t\tconst data = await res.json();\n\t\t\tif (res.ok) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.batchSchema.parse(data));\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.errorSchema.parse(data));\n\t\t}\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error retrieving event batch\"),\n\t\t\tstatus: 500\n\t\t});\n\t}\n\tasync publish(publishOptions, data) {\n\t\tconst isStream = data instanceof ReadableStream;\n\t\tconst url = await this.getTargetUrl(\"/v1/realtime/publish\");\n\t\turl.searchParams.set(\"channel\", publishOptions.channel || \"\");\n\t\tif (publishOptions.runId) url.searchParams.set(\"run_id\", publishOptions.runId);\n\t\tfor (const topic of publishOptions.topics) url.searchParams.append(\"topic\", topic);\n\t\tconst result = await this.req(url, {\n\t\t\tbody: isStream ? data : typeof data === \"string\" ? data : JSON.stringify(data),\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": isStream ? \"text/stream\" : \"application/json\" },\n\t\t\t...isStream ? { duplex: \"half\" } : {}\n\t\t});\n\t\tif (result.ok) {\n\t\t\tconst res = result.value;\n\t\t\tif (!res.ok) throw new Error(`Failed to publish event: ${res.status} ${res.statusText}`);\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(void 0);\n\t\t}\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error publishing event\"),\n\t\t\tstatus: 500\n\t\t});\n\t}\n\tasync sendSignal(signalOptions, options) {\n\t\tconst url = await this.getTargetUrl(\"/v1/signals\");\n\t\tconst body = {\n\t\t\tsignal: signalOptions.signal,\n\t\t\tdata: signalOptions.data\n\t\t};\n\t\treturn (0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_5__.fetchWithAuthFallback)({\n\t\t\tauthToken: this.hashedKey,\n\t\t\tauthTokenFallback: this.hashedFallbackKey,\n\t\t\tfetch: this.fetch,\n\t\t\turl,\n\t\t\toptions: {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: JSON.stringify(body),\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t...options?.headers\n\t\t\t\t}\n\t\t\t}\n\t\t}).then(async (res) => {\n\t\t\tif (res.status === 404) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)({ runId: void 0 });\n\t\t\tconst resClone = res.clone();\n\t\t\tlet json;\n\t\t\ttry {\n\t\t\t\tjson = await res.json();\n\t\t\t} catch {\n\t\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\t\terror: `Failed to send signal: ${res.status} ${res.statusText} - ${await resClone.text()}`,\n\t\t\t\t\tstatus: res.status\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (!res.ok) try {\n\t\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.errorSchema.parse(json));\n\t\t\t} catch {\n\t\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\t\terror: `Failed to send signal: ${res.status} ${res.statusText} - ${await res.text()}`,\n\t\t\t\t\tstatus: res.status\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst parseRes = sendSignalSuccessResponseSchema.safeParse(json);\n\t\t\tif (!parseRes.success) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\terror: `Successfully sent signal, but response parsing failed: ${res.status} ${res.statusText} - ${await resClone.text()}`,\n\t\t\t\tstatus: res.status\n\t\t\t});\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)({ runId: parseRes.data.data.run_id });\n\t\t}).catch((error) => {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(error, \"Unknown error sending signal\"),\n\t\t\t\tstatus: 500\n\t\t\t});\n\t\t});\n\t}\n\tasync getSubscriptionToken(channel, topics) {\n\t\tconst url = await this.getTargetUrl(\"/v1/realtime/token\");\n\t\tconst body = topics.map((topic) => ({\n\t\t\tchannel,\n\t\t\tname: topic,\n\t\t\tkind: \"run\"\n\t\t}));\n\t\treturn (0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_5__.fetchWithAuthFallback)({\n\t\t\tauthToken: this.hashedKey,\n\t\t\tauthTokenFallback: this.hashedFallbackKey,\n\t\t\tfetch: this.fetch,\n\t\t\turl,\n\t\t\toptions: {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: JSON.stringify(body),\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" }\n\t\t\t}\n\t\t}).then(async (res) => {\n\t\t\tif (!res.ok) throw new Error(`Failed to get subscription token: ${res.status} ${res.statusText} - ${await res.text()}`);\n\t\t\treturn realtimeSubscriptionTokenSchema.parse(await res.json()).jwt;\n\t\t}).catch((error) => {\n\t\t\tthrow new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(error, \"Unknown error getting subscription token\"));\n\t\t});\n\t}\n\tasync updateMetadata(args, options) {\n\t\tconst payload = {\n\t\t\ttarget: args.target,\n\t\t\tmetadata: args.metadata\n\t\t};\n\t\tconst result = await this.req(`/v1/runs/${args.target.run_id}/metadata`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(payload),\n\t\t\theaders: options?.headers\n\t\t});\n\t\tif (!result.ok) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error updating metadata\"),\n\t\t\tstatus: 500\n\t\t});\n\t\tconst res = result.value;\n\t\tif (res.ok) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(void 0);\n\t\tconst resClone = res.clone();\n\t\tlet json;\n\t\ttry {\n\t\t\tjson = await res.json();\n\t\t} catch {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\terror: `Failed to update metadata: ${res.status} ${res.statusText} - ${await resClone.text()}`,\n\t\t\t\tstatus: res.status\n\t\t\t});\n\t\t}\n\t\ttry {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.errorSchema.parse(json));\n\t\t} catch {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\terror: `Failed to update metadata: ${res.status} ${res.statusText}`,\n\t\t\t\tstatus: res.status\n\t\t\t});\n\t\t}\n\t}\n\t/**\n\t* Start a new run, optionally passing in a number of steps to initialize the\n\t* run with.\n\t*/\n\tasync checkpointNewRun(args) {\n\t\tconst body = JSON.stringify({\n\t\t\trun_id: args.runId,\n\t\t\tevent: args.event,\n\t\t\tsteps: args.steps,\n\t\t\tts: (/* @__PURE__ */ new Date()).valueOf()\n\t\t});\n\t\tconst result = await this.req(\"/v1/checkpoint\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody\n\t\t});\n\t\tif (!result.ok) throw new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error checkpointing new run\"));\n\t\tconst res = result.value;\n\t\tif (res.ok) {\n\t\t\tconst rawData = await res.json();\n\t\t\treturn checkpointNewRunResponseSchema.parse(rawData);\n\t\t}\n\t\tthrow new Error(`Failed to checkpoint new run: ${res.status} ${res.statusText} - ${await res.text()}`);\n\t}\n\t/**\n\t* Checkpoint steps for a given sync run.\n\t*/\n\tasync checkpointSteps(args) {\n\t\tconst body = JSON.stringify({\n\t\t\tfn_id: args.fnId,\n\t\t\tapp_id: args.appId,\n\t\t\trun_id: args.runId,\n\t\t\tsteps: args.steps,\n\t\t\tts: (/* @__PURE__ */ new Date()).valueOf()\n\t\t});\n\t\tconst result = await this.req(`/v1/checkpoint/${args.runId}/steps`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody\n\t\t});\n\t\tif (!result.ok) throw new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error checkpointing steps\"));\n\t\tconst res = result.value;\n\t\tif (!res.ok) throw new Error(`Failed to checkpoint steps: ${res.status} ${res.statusText} - ${await res.text()}`);\n\t}\n\t/**\n\t* Checkpoint steps for a given async run.\n\t*/\n\tasync checkpointStepsAsync(args) {\n\t\tconst body = JSON.stringify({\n\t\t\trun_id: args.runId,\n\t\t\tfn_id: args.fnId,\n\t\t\tqi_id: args.queueItemId,\n\t\t\tsteps: args.steps,\n\t\t\tts: (/* @__PURE__ */ new Date()).valueOf()\n\t\t});\n\t\tconst result = await this.req(`/v1/checkpoint/${args.runId}/async`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody\n\t\t});\n\t\tif (!result.ok) throw new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error checkpointing async\"));\n\t\tconst res = result.value;\n\t\tif (!res.ok) throw new Error(`Failed to checkpoint async: ${res.status} ${res.statusText} - ${await res.text()}`);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDakQ7QUFDQSw4REFBOEQsWUFBWSxFQUFFLGdCQUFnQixJQUFJLGlCQUFpQjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGtEQUFrRCxXQUFXO0FBQzdEO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0NBQWtDLG1FQUFlO0FBQ2pEO0FBQ0EsOERBQThELFlBQVksRUFBRSxnQkFBZ0IsSUFBSSxpQkFBaUI7QUFDakg7QUFDQTs7QUFFQTtBQUNzQjtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvYXBpL2FwaS5qcz8zMmUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmF1bHREZXZTZXJ2ZXJIb3N0LCBkZWZhdWx0SW5uZ2VzdEFwaUJhc2VVcmwgfSBmcm9tIFwiLi4vaGVscGVycy9jb25zdHMuanNcIjtcbmltcG9ydCB7IGVyciwgb2sgfSBmcm9tIFwiLi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IGJhdGNoU2NoZW1hLCBlcnJvclNjaGVtYSwgc3RlcHNTY2hlbWFzIH0gZnJvbSBcIi4vc2NoZW1hLmpzXCI7XG5pbXBvcnQgeyBnZXRFcnJvck1lc3NhZ2UgfSBmcm9tIFwiLi4vaGVscGVycy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGhhc2hTaWduaW5nS2V5IH0gZnJvbSBcIi4uL2hlbHBlcnMvc3RyaW5ncy5qc1wiO1xuaW1wb3J0IHsgZGV2U2VydmVyQXZhaWxhYmxlIH0gZnJvbSBcIi4uL2hlbHBlcnMvZGV2c2VydmVyLmpzXCI7XG5pbXBvcnQgeyBmZXRjaFdpdGhBdXRoRmFsbGJhY2sgfSBmcm9tIFwiLi4vaGVscGVycy9uZXQuanNcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kL3YzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL2FwaS50c1xuY29uc3QgcmVhbHRpbWVTdWJzY3JpcHRpb25Ub2tlblNjaGVtYSA9IHoub2JqZWN0KHsgand0OiB6LnN0cmluZygpIH0pO1xuY29uc3Qgc2VuZFNpZ25hbFN1Y2Nlc3NSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHsgZGF0YTogei5vYmplY3QoeyBydW5faWQ6IHouc3RyaW5nKCkubWluKDEpIH0pIH0pO1xuY29uc3QgY2hlY2twb2ludE5ld1J1blJlc3BvbnNlU2NoZW1hID0gei5vYmplY3QoeyBkYXRhOiB6Lm9iamVjdCh7XG5cdGZuX2lkOiB6LnN0cmluZygpLm1pbigxKSxcblx0YXBwX2lkOiB6LnN0cmluZygpLm1pbigxKSxcblx0cnVuX2lkOiB6LnN0cmluZygpLm1pbigxKSxcblx0dG9rZW46IHouc3RyaW5nKCkubWluKDEpLm9wdGlvbmFsKClcbn0pIH0pO1xudmFyIElubmdlc3RBcGkgPSBjbGFzcyB7XG5cdGFwaUJhc2VVcmw7XG5cdHNpZ25pbmdLZXk7XG5cdHNpZ25pbmdLZXlGYWxsYmFjaztcblx0ZmV0Y2g7XG5cdG1vZGU7XG5cdGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgc2lnbmluZ0tleSwgc2lnbmluZ0tleUZhbGxiYWNrLCBmZXRjaCwgbW9kZSB9KSB7XG5cdFx0dGhpcy5hcGlCYXNlVXJsID0gYmFzZVVybDtcblx0XHR0aGlzLnNpZ25pbmdLZXkgPSBzaWduaW5nS2V5O1xuXHRcdHRoaXMuc2lnbmluZ0tleUZhbGxiYWNrID0gc2lnbmluZ0tleUZhbGxiYWNrO1xuXHRcdHRoaXMuZmV0Y2ggPSBmZXRjaDtcblx0XHR0aGlzLm1vZGUgPSBtb2RlO1xuXHR9XG5cdGdldCBoYXNoZWRLZXkoKSB7XG5cdFx0cmV0dXJuIGhhc2hTaWduaW5nS2V5KHRoaXMuc2lnbmluZ0tleSk7XG5cdH1cblx0Z2V0IGhhc2hlZEZhbGxiYWNrS2V5KCkge1xuXHRcdGlmICghdGhpcy5zaWduaW5nS2V5RmFsbGJhY2spIHJldHVybjtcblx0XHRyZXR1cm4gaGFzaFNpZ25pbmdLZXkodGhpcy5zaWduaW5nS2V5RmFsbGJhY2spO1xuXHR9XG5cdHNldFNpZ25pbmdLZXkoa2V5KSB7XG5cdFx0aWYgKHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIgJiYgdGhpcy5zaWduaW5nS2V5ID09PSBcIlwiKSB0aGlzLnNpZ25pbmdLZXkgPSBrZXk7XG5cdH1cblx0c2V0U2lnbmluZ0tleUZhbGxiYWNrKGtleSkge1xuXHRcdGlmICh0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICYmICF0aGlzLnNpZ25pbmdLZXlGYWxsYmFjaykgdGhpcy5zaWduaW5nS2V5RmFsbGJhY2sgPSBrZXk7XG5cdH1cblx0YXN5bmMgZ2V0VGFyZ2V0VXJsKHBhdGgpIHtcblx0XHRpZiAodGhpcy5hcGlCYXNlVXJsKSByZXR1cm4gbmV3IFVSTChwYXRoLCB0aGlzLmFwaUJhc2VVcmwpO1xuXHRcdGxldCB1cmwgPSBuZXcgVVJMKHBhdGgsIGRlZmF1bHRJbm5nZXN0QXBpQmFzZVVybCk7XG5cdFx0aWYgKHRoaXMubW9kZS5pc0RldiAmJiB0aGlzLm1vZGUuaXNJbmZlcnJlZCAmJiAhdGhpcy5hcGlCYXNlVXJsKSB7XG5cdFx0XHRpZiAoYXdhaXQgZGV2U2VydmVyQXZhaWxhYmxlKGRlZmF1bHREZXZTZXJ2ZXJIb3N0LCB0aGlzLmZldGNoKSkgdXJsID0gbmV3IFVSTChwYXRoLCBkZWZhdWx0RGV2U2VydmVySG9zdCk7XG5cdFx0fVxuXHRcdHJldHVybiB1cmw7XG5cdH1cblx0YXN5bmMgcmVxKHVybCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IGZpbmFsVXJsID0gdHlwZW9mIHVybCA9PT0gXCJzdHJpbmdcIiA/IGF3YWl0IHRoaXMuZ2V0VGFyZ2V0VXJsKHVybCkgOiB1cmw7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBvayhhd2FpdCBmZXRjaFdpdGhBdXRoRmFsbGJhY2soe1xuXHRcdFx0XHRhdXRoVG9rZW46IHRoaXMuaGFzaGVkS2V5LFxuXHRcdFx0XHRhdXRoVG9rZW5GYWxsYmFjazogdGhpcy5oYXNoZWRGYWxsYmFja0tleSxcblx0XHRcdFx0ZmV0Y2g6IHRoaXMuZmV0Y2gsXG5cdFx0XHRcdHVybDogZmluYWxVcmwsXG5cdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcdFx0Li4ub3B0aW9ucz8uaGVhZGVyc1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRyZXR1cm4gZXJyKGVycm9yKTtcblx0XHR9XG5cdH1cblx0YXN5bmMgZ2V0UnVuU3RlcHMocnVuSWQsIHZlcnNpb24pIHtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlcShgL3YwL3J1bnMvJHtydW5JZH0vYWN0aW9uc2ApO1xuXHRcdGlmIChyZXN1bHQub2spIHtcblx0XHRcdGNvbnN0IHJlcyA9IHJlc3VsdC52YWx1ZTtcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuXHRcdFx0aWYgKHJlcy5vaykgcmV0dXJuIG9rKHN0ZXBzU2NoZW1hc1t2ZXJzaW9uXS5wYXJzZShkYXRhKSk7XG5cdFx0XHRyZXR1cm4gZXJyKGVycm9yU2NoZW1hLnBhcnNlKGRhdGEpKTtcblx0XHR9XG5cdFx0cmV0dXJuIGVycih7XG5cdFx0XHRlcnJvcjogZ2V0RXJyb3JNZXNzYWdlKHJlc3VsdC5lcnJvciwgXCJVbmtub3duIGVycm9yIHJldHJpZXZpbmcgc3RlcCBkYXRhXCIpLFxuXHRcdFx0c3RhdHVzOiA1MDBcblx0XHR9KTtcblx0fVxuXHRhc3luYyBnZXRSdW5CYXRjaChydW5JZCkge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVxKGAvdjAvcnVucy8ke3J1bklkfS9iYXRjaGApO1xuXHRcdGlmIChyZXN1bHQub2spIHtcblx0XHRcdGNvbnN0IHJlcyA9IHJlc3VsdC52YWx1ZTtcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuXHRcdFx0aWYgKHJlcy5vaykgcmV0dXJuIG9rKGJhdGNoU2NoZW1hLnBhcnNlKGRhdGEpKTtcblx0XHRcdHJldHVybiBlcnIoZXJyb3JTY2hlbWEucGFyc2UoZGF0YSkpO1xuXHRcdH1cblx0XHRyZXR1cm4gZXJyKHtcblx0XHRcdGVycm9yOiBnZXRFcnJvck1lc3NhZ2UocmVzdWx0LmVycm9yLCBcIlVua25vd24gZXJyb3IgcmV0cmlldmluZyBldmVudCBiYXRjaFwiKSxcblx0XHRcdHN0YXR1czogNTAwXG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgcHVibGlzaChwdWJsaXNoT3B0aW9ucywgZGF0YSkge1xuXHRcdGNvbnN0IGlzU3RyZWFtID0gZGF0YSBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtO1xuXHRcdGNvbnN0IHVybCA9IGF3YWl0IHRoaXMuZ2V0VGFyZ2V0VXJsKFwiL3YxL3JlYWx0aW1lL3B1Ymxpc2hcIik7XG5cdFx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjaGFubmVsXCIsIHB1Ymxpc2hPcHRpb25zLmNoYW5uZWwgfHwgXCJcIik7XG5cdFx0aWYgKHB1Ymxpc2hPcHRpb25zLnJ1bklkKSB1cmwuc2VhcmNoUGFyYW1zLnNldChcInJ1bl9pZFwiLCBwdWJsaXNoT3B0aW9ucy5ydW5JZCk7XG5cdFx0Zm9yIChjb25zdCB0b3BpYyBvZiBwdWJsaXNoT3B0aW9ucy50b3BpY3MpIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKFwidG9waWNcIiwgdG9waWMpO1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVxKHVybCwge1xuXHRcdFx0Ym9keTogaXNTdHJlYW0gPyBkYXRhIDogdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgPyBkYXRhIDogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBpc1N0cmVhbSA/IFwidGV4dC9zdHJlYW1cIiA6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHQuLi5pc1N0cmVhbSA/IHsgZHVwbGV4OiBcImhhbGZcIiB9IDoge31cblx0XHR9KTtcblx0XHRpZiAocmVzdWx0Lm9rKSB7XG5cdFx0XHRjb25zdCByZXMgPSByZXN1bHQudmFsdWU7XG5cdFx0XHRpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcHVibGlzaCBldmVudDogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fWApO1xuXHRcdFx0cmV0dXJuIG9rKHZvaWQgMCk7XG5cdFx0fVxuXHRcdHJldHVybiBlcnIoe1xuXHRcdFx0ZXJyb3I6IGdldEVycm9yTWVzc2FnZShyZXN1bHQuZXJyb3IsIFwiVW5rbm93biBlcnJvciBwdWJsaXNoaW5nIGV2ZW50XCIpLFxuXHRcdFx0c3RhdHVzOiA1MDBcblx0XHR9KTtcblx0fVxuXHRhc3luYyBzZW5kU2lnbmFsKHNpZ25hbE9wdGlvbnMsIG9wdGlvbnMpIHtcblx0XHRjb25zdCB1cmwgPSBhd2FpdCB0aGlzLmdldFRhcmdldFVybChcIi92MS9zaWduYWxzXCIpO1xuXHRcdGNvbnN0IGJvZHkgPSB7XG5cdFx0XHRzaWduYWw6IHNpZ25hbE9wdGlvbnMuc2lnbmFsLFxuXHRcdFx0ZGF0YTogc2lnbmFsT3B0aW9ucy5kYXRhXG5cdFx0fTtcblx0XHRyZXR1cm4gZmV0Y2hXaXRoQXV0aEZhbGxiYWNrKHtcblx0XHRcdGF1dGhUb2tlbjogdGhpcy5oYXNoZWRLZXksXG5cdFx0XHRhdXRoVG9rZW5GYWxsYmFjazogdGhpcy5oYXNoZWRGYWxsYmFja0tleSxcblx0XHRcdGZldGNoOiB0aGlzLmZldGNoLFxuXHRcdFx0dXJsLFxuXHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcdC4uLm9wdGlvbnM/LmhlYWRlcnNcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pLnRoZW4oYXN5bmMgKHJlcykgPT4ge1xuXHRcdFx0aWYgKHJlcy5zdGF0dXMgPT09IDQwNCkgcmV0dXJuIG9rKHsgcnVuSWQ6IHZvaWQgMCB9KTtcblx0XHRcdGNvbnN0IHJlc0Nsb25lID0gcmVzLmNsb25lKCk7XG5cdFx0XHRsZXQganNvbjtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdHJldHVybiBlcnIoe1xuXHRcdFx0XHRcdGVycm9yOiBgRmFpbGVkIHRvIHNlbmQgc2lnbmFsOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9IC0gJHthd2FpdCByZXNDbG9uZS50ZXh0KCl9YCxcblx0XHRcdFx0XHRzdGF0dXM6IHJlcy5zdGF0dXNcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXJlcy5vaykgdHJ5IHtcblx0XHRcdFx0cmV0dXJuIGVycihlcnJvclNjaGVtYS5wYXJzZShqc29uKSk7XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0cmV0dXJuIGVycih7XG5cdFx0XHRcdFx0ZXJyb3I6IGBGYWlsZWQgdG8gc2VuZCBzaWduYWw6ICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH0gLSAke2F3YWl0IHJlcy50ZXh0KCl9YCxcblx0XHRcdFx0XHRzdGF0dXM6IHJlcy5zdGF0dXNcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBwYXJzZVJlcyA9IHNlbmRTaWduYWxTdWNjZXNzUmVzcG9uc2VTY2hlbWEuc2FmZVBhcnNlKGpzb24pO1xuXHRcdFx0aWYgKCFwYXJzZVJlcy5zdWNjZXNzKSByZXR1cm4gZXJyKHtcblx0XHRcdFx0ZXJyb3I6IGBTdWNjZXNzZnVsbHkgc2VudCBzaWduYWwsIGJ1dCByZXNwb25zZSBwYXJzaW5nIGZhaWxlZDogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fSAtICR7YXdhaXQgcmVzQ2xvbmUudGV4dCgpfWAsXG5cdFx0XHRcdHN0YXR1czogcmVzLnN0YXR1c1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gb2soeyBydW5JZDogcGFyc2VSZXMuZGF0YS5kYXRhLnJ1bl9pZCB9KTtcblx0XHR9KS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRcdHJldHVybiBlcnIoe1xuXHRcdFx0XHRlcnJvcjogZ2V0RXJyb3JNZXNzYWdlKGVycm9yLCBcIlVua25vd24gZXJyb3Igc2VuZGluZyBzaWduYWxcIiksXG5cdFx0XHRcdHN0YXR1czogNTAwXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXHRhc3luYyBnZXRTdWJzY3JpcHRpb25Ub2tlbihjaGFubmVsLCB0b3BpY3MpIHtcblx0XHRjb25zdCB1cmwgPSBhd2FpdCB0aGlzLmdldFRhcmdldFVybChcIi92MS9yZWFsdGltZS90b2tlblwiKTtcblx0XHRjb25zdCBib2R5ID0gdG9waWNzLm1hcCgodG9waWMpID0+ICh7XG5cdFx0XHRjaGFubmVsLFxuXHRcdFx0bmFtZTogdG9waWMsXG5cdFx0XHRraW5kOiBcInJ1blwiXG5cdFx0fSkpO1xuXHRcdHJldHVybiBmZXRjaFdpdGhBdXRoRmFsbGJhY2soe1xuXHRcdFx0YXV0aFRva2VuOiB0aGlzLmhhc2hlZEtleSxcblx0XHRcdGF1dGhUb2tlbkZhbGxiYWNrOiB0aGlzLmhhc2hlZEZhbGxiYWNrS2V5LFxuXHRcdFx0ZmV0Y2g6IHRoaXMuZmV0Y2gsXG5cdFx0XHR1cmwsXG5cdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuXHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH1cblx0XHRcdH1cblx0XHR9KS50aGVuKGFzeW5jIChyZXMpID0+IHtcblx0XHRcdGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgc3Vic2NyaXB0aW9uIHRva2VuOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9IC0gJHthd2FpdCByZXMudGV4dCgpfWApO1xuXHRcdFx0cmV0dXJuIHJlYWx0aW1lU3Vic2NyaXB0aW9uVG9rZW5TY2hlbWEucGFyc2UoYXdhaXQgcmVzLmpzb24oKSkuand0O1xuXHRcdH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGdldEVycm9yTWVzc2FnZShlcnJvciwgXCJVbmtub3duIGVycm9yIGdldHRpbmcgc3Vic2NyaXB0aW9uIHRva2VuXCIpKTtcblx0XHR9KTtcblx0fVxuXHRhc3luYyB1cGRhdGVNZXRhZGF0YShhcmdzLCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgcGF5bG9hZCA9IHtcblx0XHRcdHRhcmdldDogYXJncy50YXJnZXQsXG5cdFx0XHRtZXRhZGF0YTogYXJncy5tZXRhZGF0YVxuXHRcdH07XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZXEoYC92MS9ydW5zLyR7YXJncy50YXJnZXQucnVuX2lkfS9tZXRhZGF0YWAsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcblx0XHRcdGhlYWRlcnM6IG9wdGlvbnM/LmhlYWRlcnNcblx0XHR9KTtcblx0XHRpZiAoIXJlc3VsdC5vaykgcmV0dXJuIGVycih7XG5cdFx0XHRlcnJvcjogZ2V0RXJyb3JNZXNzYWdlKHJlc3VsdC5lcnJvciwgXCJVbmtub3duIGVycm9yIHVwZGF0aW5nIG1ldGFkYXRhXCIpLFxuXHRcdFx0c3RhdHVzOiA1MDBcblx0XHR9KTtcblx0XHRjb25zdCByZXMgPSByZXN1bHQudmFsdWU7XG5cdFx0aWYgKHJlcy5vaykgcmV0dXJuIG9rKHZvaWQgMCk7XG5cdFx0Y29uc3QgcmVzQ2xvbmUgPSByZXMuY2xvbmUoKTtcblx0XHRsZXQganNvbjtcblx0XHR0cnkge1xuXHRcdFx0anNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gZXJyKHtcblx0XHRcdFx0ZXJyb3I6IGBGYWlsZWQgdG8gdXBkYXRlIG1ldGFkYXRhOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9IC0gJHthd2FpdCByZXNDbG9uZS50ZXh0KCl9YCxcblx0XHRcdFx0c3RhdHVzOiByZXMuc3RhdHVzXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBlcnIoZXJyb3JTY2hlbWEucGFyc2UoanNvbikpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0cmV0dXJuIGVycih7XG5cdFx0XHRcdGVycm9yOiBgRmFpbGVkIHRvIHVwZGF0ZSBtZXRhZGF0YTogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fWAsXG5cdFx0XHRcdHN0YXR1czogcmVzLnN0YXR1c1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQqIFN0YXJ0IGEgbmV3IHJ1biwgb3B0aW9uYWxseSBwYXNzaW5nIGluIGEgbnVtYmVyIG9mIHN0ZXBzIHRvIGluaXRpYWxpemUgdGhlXG5cdCogcnVuIHdpdGguXG5cdCovXG5cdGFzeW5jIGNoZWNrcG9pbnROZXdSdW4oYXJncykge1xuXHRcdGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRydW5faWQ6IGFyZ3MucnVuSWQsXG5cdFx0XHRldmVudDogYXJncy5ldmVudCxcblx0XHRcdHN0ZXBzOiBhcmdzLnN0ZXBzLFxuXHRcdFx0dHM6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudmFsdWVPZigpXG5cdFx0fSk7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZXEoXCIvdjEvY2hlY2twb2ludFwiLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0Ym9keVxuXHRcdH0pO1xuXHRcdGlmICghcmVzdWx0Lm9rKSB0aHJvdyBuZXcgRXJyb3IoZ2V0RXJyb3JNZXNzYWdlKHJlc3VsdC5lcnJvciwgXCJVbmtub3duIGVycm9yIGNoZWNrcG9pbnRpbmcgbmV3IHJ1blwiKSk7XG5cdFx0Y29uc3QgcmVzID0gcmVzdWx0LnZhbHVlO1xuXHRcdGlmIChyZXMub2spIHtcblx0XHRcdGNvbnN0IHJhd0RhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuXHRcdFx0cmV0dXJuIGNoZWNrcG9pbnROZXdSdW5SZXNwb25zZVNjaGVtYS5wYXJzZShyYXdEYXRhKTtcblx0XHR9XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY2hlY2twb2ludCBuZXcgcnVuOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9IC0gJHthd2FpdCByZXMudGV4dCgpfWApO1xuXHR9XG5cdC8qKlxuXHQqIENoZWNrcG9pbnQgc3RlcHMgZm9yIGEgZ2l2ZW4gc3luYyBydW4uXG5cdCovXG5cdGFzeW5jIGNoZWNrcG9pbnRTdGVwcyhhcmdzKSB7XG5cdFx0Y29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdGZuX2lkOiBhcmdzLmZuSWQsXG5cdFx0XHRhcHBfaWQ6IGFyZ3MuYXBwSWQsXG5cdFx0XHRydW5faWQ6IGFyZ3MucnVuSWQsXG5cdFx0XHRzdGVwczogYXJncy5zdGVwcyxcblx0XHRcdHRzOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnZhbHVlT2YoKVxuXHRcdH0pO1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVxKGAvdjEvY2hlY2twb2ludC8ke2FyZ3MucnVuSWR9L3N0ZXBzYCwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGJvZHlcblx0XHR9KTtcblx0XHRpZiAoIXJlc3VsdC5vaykgdGhyb3cgbmV3IEVycm9yKGdldEVycm9yTWVzc2FnZShyZXN1bHQuZXJyb3IsIFwiVW5rbm93biBlcnJvciBjaGVja3BvaW50aW5nIHN0ZXBzXCIpKTtcblx0XHRjb25zdCByZXMgPSByZXN1bHQudmFsdWU7XG5cdFx0aWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNoZWNrcG9pbnQgc3RlcHM6ICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH0gLSAke2F3YWl0IHJlcy50ZXh0KCl9YCk7XG5cdH1cblx0LyoqXG5cdCogQ2hlY2twb2ludCBzdGVwcyBmb3IgYSBnaXZlbiBhc3luYyBydW4uXG5cdCovXG5cdGFzeW5jIGNoZWNrcG9pbnRTdGVwc0FzeW5jKGFyZ3MpIHtcblx0XHRjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0cnVuX2lkOiBhcmdzLnJ1bklkLFxuXHRcdFx0Zm5faWQ6IGFyZ3MuZm5JZCxcblx0XHRcdHFpX2lkOiBhcmdzLnF1ZXVlSXRlbUlkLFxuXHRcdFx0c3RlcHM6IGFyZ3Muc3RlcHMsXG5cdFx0XHR0czogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS52YWx1ZU9mKClcblx0XHR9KTtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlcShgL3YxL2NoZWNrcG9pbnQvJHthcmdzLnJ1bklkfS9hc3luY2AsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRib2R5XG5cdFx0fSk7XG5cdFx0aWYgKCFyZXN1bHQub2spIHRocm93IG5ldyBFcnJvcihnZXRFcnJvck1lc3NhZ2UocmVzdWx0LmVycm9yLCBcIlVua25vd24gZXJyb3IgY2hlY2twb2ludGluZyBhc3luY1wiKSk7XG5cdFx0Y29uc3QgcmVzID0gcmVzdWx0LnZhbHVlO1xuXHRcdGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjaGVja3BvaW50IGFzeW5jOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9IC0gJHthd2FpdCByZXMudGV4dCgpfWApO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IElubmdlc3RBcGkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/api/api.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/api/schema.js":
/*!********************************************!*\
  !*** ./node_modules/inngest/api/schema.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   batchSchema: () => (/* binding */ batchSchema),\n/* harmony export */   errorSchema: () => (/* binding */ errorSchema),\n/* harmony export */   stepsSchemas: () => (/* binding */ stepsSchemas)\n/* harmony export */ });\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n\n//#region src/api/schema.ts\nconst errorSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n\tstatus: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nconst v0StepSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().refine((v) => typeof v !== \"undefined\", { message: \"Values in steps must be defined\" })).optional().nullable();\nconst v1StepSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\ttype: zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(\"data\").optional().default(\"data\"),\n\tdata: zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().refine((v) => typeof v !== \"undefined\", { message: \"Data in steps must be defined\" })\n}).strict().or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\ttype: zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(\"error\").optional().default(\"error\"),\n\terror: _types_js__WEBPACK_IMPORTED_MODULE_1__.jsonErrorSchema\n}).strict()).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\ttype: zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(\"input\").optional().default(\"input\"),\n\tinput: zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().refine((v) => typeof v !== \"undefined\", { message: \"If input is present it must not be `undefined`\" })\n}).strict()).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().transform((v) => ({\n\ttype: \"data\",\n\tdata: v\n})))).default({});\nconst v2StepSchema = v1StepSchema;\nconst stepsSchemas = {\n\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0]: v0StepSchema,\n\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1]: v1StepSchema,\n\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2]: v2StepSchema\n};\nconst batchSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()).transform((v) => v));\n\n//#endregion\n\n//# sourceMappingURL=schema.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9hcGkvc2NoZW1hLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUNWO0FBQ25COztBQUUzQjtBQUNBLG9CQUFvQiwwQ0FBUTtBQUM1QixRQUFRLDBDQUFRO0FBQ2hCLFNBQVMsMENBQVE7QUFDakIsQ0FBQztBQUNELHFCQUFxQiwwQ0FBUSxDQUFDLHVDQUFLLDZDQUE2Qyw0Q0FBNEM7QUFDNUgscUJBQXFCLDBDQUFRLENBQUMsMENBQVE7QUFDdEMsT0FBTywyQ0FBUztBQUNoQixPQUFPLHVDQUFLLDZDQUE2QywwQ0FBMEM7QUFDbkcsQ0FBQyxjQUFjLDBDQUFRO0FBQ3ZCLE9BQU8sMkNBQVM7QUFDaEIsUUFBUSxzREFBZTtBQUN2QixDQUFDLGVBQWUsMENBQVE7QUFDeEIsT0FBTywyQ0FBUztBQUNoQixRQUFRLHVDQUFLLDZDQUE2QywyREFBMkQ7QUFDckgsQ0FBQyxlQUFlLHVDQUFLO0FBQ3JCO0FBQ0E7QUFDQSxDQUFDLGVBQWU7QUFDaEI7QUFDQTtBQUNBLEVBQUUsZ0VBQWdCO0FBQ2xCLEVBQUUsZ0VBQWdCO0FBQ2xCLEVBQUUsZ0VBQWdCO0FBQ2xCO0FBQ0Esb0JBQW9CLHlDQUFPLENBQUMsMENBQVEsQ0FBQyx1Q0FBSzs7QUFFMUM7QUFDa0Q7QUFDbEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2FwaS9zY2hlbWEuanM/ZmYxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeGVjdXRpb25WZXJzaW9uIH0gZnJvbSBcIi4uL2hlbHBlcnMvY29uc3RzLmpzXCI7XG5pbXBvcnQgeyBqc29uRXJyb3JTY2hlbWEgfSBmcm9tIFwiLi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kL3YzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3NjaGVtYS50c1xuY29uc3QgZXJyb3JTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGVycm9yOiB6LnN0cmluZygpLFxuXHRzdGF0dXM6IHoubnVtYmVyKClcbn0pO1xuY29uc3QgdjBTdGVwU2NoZW1hID0gei5yZWNvcmQoei5hbnkoKS5yZWZpbmUoKHYpID0+IHR5cGVvZiB2ICE9PSBcInVuZGVmaW5lZFwiLCB7IG1lc3NhZ2U6IFwiVmFsdWVzIGluIHN0ZXBzIG11c3QgYmUgZGVmaW5lZFwiIH0pKS5vcHRpb25hbCgpLm51bGxhYmxlKCk7XG5jb25zdCB2MVN0ZXBTY2hlbWEgPSB6LnJlY29yZCh6Lm9iamVjdCh7XG5cdHR5cGU6IHoubGl0ZXJhbChcImRhdGFcIikub3B0aW9uYWwoKS5kZWZhdWx0KFwiZGF0YVwiKSxcblx0ZGF0YTogei5hbnkoKS5yZWZpbmUoKHYpID0+IHR5cGVvZiB2ICE9PSBcInVuZGVmaW5lZFwiLCB7IG1lc3NhZ2U6IFwiRGF0YSBpbiBzdGVwcyBtdXN0IGJlIGRlZmluZWRcIiB9KVxufSkuc3RyaWN0KCkub3Ioei5vYmplY3Qoe1xuXHR0eXBlOiB6LmxpdGVyYWwoXCJlcnJvclwiKS5vcHRpb25hbCgpLmRlZmF1bHQoXCJlcnJvclwiKSxcblx0ZXJyb3I6IGpzb25FcnJvclNjaGVtYVxufSkuc3RyaWN0KCkpLm9yKHoub2JqZWN0KHtcblx0dHlwZTogei5saXRlcmFsKFwiaW5wdXRcIikub3B0aW9uYWwoKS5kZWZhdWx0KFwiaW5wdXRcIiksXG5cdGlucHV0OiB6LmFueSgpLnJlZmluZSgodikgPT4gdHlwZW9mIHYgIT09IFwidW5kZWZpbmVkXCIsIHsgbWVzc2FnZTogXCJJZiBpbnB1dCBpcyBwcmVzZW50IGl0IG11c3Qgbm90IGJlIGB1bmRlZmluZWRgXCIgfSlcbn0pLnN0cmljdCgpKS5vcih6LmFueSgpLnRyYW5zZm9ybSgodikgPT4gKHtcblx0dHlwZTogXCJkYXRhXCIsXG5cdGRhdGE6IHZcbn0pKSkpLmRlZmF1bHQoe30pO1xuY29uc3QgdjJTdGVwU2NoZW1hID0gdjFTdGVwU2NoZW1hO1xuY29uc3Qgc3RlcHNTY2hlbWFzID0ge1xuXHRbRXhlY3V0aW9uVmVyc2lvbi5WMF06IHYwU3RlcFNjaGVtYSxcblx0W0V4ZWN1dGlvblZlcnNpb24uVjFdOiB2MVN0ZXBTY2hlbWEsXG5cdFtFeGVjdXRpb25WZXJzaW9uLlYyXTogdjJTdGVwU2NoZW1hXG59O1xuY29uc3QgYmF0Y2hTY2hlbWEgPSB6LmFycmF5KHoucmVjb3JkKHouYW55KCkpLnRyYW5zZm9ybSgodikgPT4gdikpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGJhdGNoU2NoZW1hLCBlcnJvclNjaGVtYSwgc3RlcHNTY2hlbWFzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWEuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/api/schema.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/Fetch.js":
/*!**************************************************!*\
  !*** ./node_modules/inngest/components/Fetch.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetch: () => (/* binding */ fetch)\n/* harmony export */ });\n/* harmony import */ var _execution_als_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./execution/als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InngestStepTools.js */ \"(rsc)/./node_modules/inngest/components/InngestStepTools.js\");\n/* harmony import */ var debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\");\n\n\n\n\n//#region src/components/Fetch.ts\nconst globalFetch = globalThis.fetch;\nconst debug = debug__WEBPACK_IMPORTED_MODULE_0__(\"inngest:fetch\");\nconst createFetchShim = () => {\n\tlet stepFetch;\n\tconst fetch$1 = async (input, init) => {\n\t\tconst ctx = await (0,_execution_als_js__WEBPACK_IMPORTED_MODULE_1__.getAsyncCtx)();\n\t\tif (!ctx?.execution) {\n\t\t\tif (!stepFetch.fallback) throw new Error(\"step.fetch() called outside of a function and had no fallback set\");\n\t\t\tdebug(\"step.fetch() called outside of a function; falling back to global fetch\");\n\t\t\treturn stepFetch.fallback(input, init);\n\t\t}\n\t\tif (ctx.execution.executingStep) {\n\t\t\tif (!stepFetch.fallback) throw new Error(`step.fetch() called inside step \"${ctx.execution.executingStep.id}\" and had no fallback set`);\n\t\t\tdebug(`step.fetch() called inside step \"${ctx.execution.executingStep.id}\"; falling back to global fetch`);\n\t\t\treturn stepFetch.fallback(input, init);\n\t\t}\n\t\tconst targetUrl = new URL(input instanceof Request ? input.url : input.toString());\n\t\tdebug(\"step.fetch() shimming request to\", targetUrl.hostname);\n\t\tconst jsonRes = await ctx.execution.ctx.step[_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_2__.gatewaySymbol](`step.fetch: ${targetUrl.hostname}`, input, init);\n\t\treturn new Response(jsonRes.body, {\n\t\t\theaders: jsonRes.headers,\n\t\t\tstatus: jsonRes.status_code\n\t\t});\n\t};\n\tconst optionsRef = { fallback: globalFetch };\n\tconst extras = {\n\t\tconfig: (options) => {\n\t\t\tObject.assign(optionsRef, options);\n\t\t\tObject.assign(stepFetch, optionsRef);\n\t\t\treturn stepFetch;\n\t\t},\n\t\t...optionsRef\n\t};\n\tstepFetch = Object.assign(fetch$1, extras);\n\treturn stepFetch;\n};\n/**\n* `fetch` is a Fetch API-compatible function that can be used to make any HTTP\n* code durable if it's called within an Inngest function.\n*\n* It will gracefully fall back to the global `fetch` if called outside of this\n* context, and a custom fallback can be set using the `config` method.\n*\n* @example Basic usage\n* ```ts\n* import { fetch } from \"inngest\";\n*\n* const api = new MyProductApi({ fetch });\n* ```\n*\n* @example Setting a custom fallback\n* ```ts\n* import { fetch } from \"inngest\";\n*\n* const api = new MyProductApi({\n*            fetch: fetch.config({ fallback: myCustomFetch }),\n* });\n* ```\n*\n* @example Do not allow fallback\n* ```ts\n* import { fetch } from \"inngest\";\n*\n* const api = new MyProductApi({\n*            fetch: fetch.config({ fallback: undefined }),\n* });\n* ```\n*/\nconst fetch = createFetchShim();\n\n//#endregion\n\n//# sourceMappingURL=Fetch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0ZldGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUQ7QUFDSztBQUM1Qjs7QUFFMUI7QUFDQTtBQUNBLGNBQWMsa0NBQUs7QUFDbkI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhEQUFXO0FBQy9CO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGLCtCQUErQjtBQUMvRyw2Q0FBNkMsK0JBQStCLEdBQUc7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsK0RBQWEsaUJBQWlCLG1CQUFtQjtBQUNoRztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsaUNBQWlDLE9BQU87QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBLG1DQUFtQyx5QkFBeUI7QUFDNUQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQSxtQ0FBbUMscUJBQXFCO0FBQ3hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDaUI7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvRmV0Y2guanM/MzZkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBc3luY0N0eCB9IGZyb20gXCIuL2V4ZWN1dGlvbi9hbHMuanNcIjtcbmltcG9ydCB7IGdhdGV3YXlTeW1ib2wgfSBmcm9tIFwiLi9Jbm5nZXN0U3RlcFRvb2xzLmpzXCI7XG5pbXBvcnQgRGVidWcgZnJvbSBcImRlYnVnXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9GZXRjaC50c1xuY29uc3QgZ2xvYmFsRmV0Y2ggPSBnbG9iYWxUaGlzLmZldGNoO1xuY29uc3QgZGVidWcgPSBEZWJ1ZyhcImlubmdlc3Q6ZmV0Y2hcIik7XG5jb25zdCBjcmVhdGVGZXRjaFNoaW0gPSAoKSA9PiB7XG5cdGxldCBzdGVwRmV0Y2g7XG5cdGNvbnN0IGZldGNoJDEgPSBhc3luYyAoaW5wdXQsIGluaXQpID0+IHtcblx0XHRjb25zdCBjdHggPSBhd2FpdCBnZXRBc3luY0N0eCgpO1xuXHRcdGlmICghY3R4Py5leGVjdXRpb24pIHtcblx0XHRcdGlmICghc3RlcEZldGNoLmZhbGxiYWNrKSB0aHJvdyBuZXcgRXJyb3IoXCJzdGVwLmZldGNoKCkgY2FsbGVkIG91dHNpZGUgb2YgYSBmdW5jdGlvbiBhbmQgaGFkIG5vIGZhbGxiYWNrIHNldFwiKTtcblx0XHRcdGRlYnVnKFwic3RlcC5mZXRjaCgpIGNhbGxlZCBvdXRzaWRlIG9mIGEgZnVuY3Rpb247IGZhbGxpbmcgYmFjayB0byBnbG9iYWwgZmV0Y2hcIik7XG5cdFx0XHRyZXR1cm4gc3RlcEZldGNoLmZhbGxiYWNrKGlucHV0LCBpbml0KTtcblx0XHR9XG5cdFx0aWYgKGN0eC5leGVjdXRpb24uZXhlY3V0aW5nU3RlcCkge1xuXHRcdFx0aWYgKCFzdGVwRmV0Y2guZmFsbGJhY2spIHRocm93IG5ldyBFcnJvcihgc3RlcC5mZXRjaCgpIGNhbGxlZCBpbnNpZGUgc3RlcCBcIiR7Y3R4LmV4ZWN1dGlvbi5leGVjdXRpbmdTdGVwLmlkfVwiIGFuZCBoYWQgbm8gZmFsbGJhY2sgc2V0YCk7XG5cdFx0XHRkZWJ1Zyhgc3RlcC5mZXRjaCgpIGNhbGxlZCBpbnNpZGUgc3RlcCBcIiR7Y3R4LmV4ZWN1dGlvbi5leGVjdXRpbmdTdGVwLmlkfVwiOyBmYWxsaW5nIGJhY2sgdG8gZ2xvYmFsIGZldGNoYCk7XG5cdFx0XHRyZXR1cm4gc3RlcEZldGNoLmZhbGxiYWNrKGlucHV0LCBpbml0KTtcblx0XHR9XG5cdFx0Y29uc3QgdGFyZ2V0VXJsID0gbmV3IFVSTChpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QgPyBpbnB1dC51cmwgOiBpbnB1dC50b1N0cmluZygpKTtcblx0XHRkZWJ1ZyhcInN0ZXAuZmV0Y2goKSBzaGltbWluZyByZXF1ZXN0IHRvXCIsIHRhcmdldFVybC5ob3N0bmFtZSk7XG5cdFx0Y29uc3QganNvblJlcyA9IGF3YWl0IGN0eC5leGVjdXRpb24uY3R4LnN0ZXBbZ2F0ZXdheVN5bWJvbF0oYHN0ZXAuZmV0Y2g6ICR7dGFyZ2V0VXJsLmhvc3RuYW1lfWAsIGlucHV0LCBpbml0KTtcblx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKGpzb25SZXMuYm9keSwge1xuXHRcdFx0aGVhZGVyczoganNvblJlcy5oZWFkZXJzLFxuXHRcdFx0c3RhdHVzOiBqc29uUmVzLnN0YXR1c19jb2RlXG5cdFx0fSk7XG5cdH07XG5cdGNvbnN0IG9wdGlvbnNSZWYgPSB7IGZhbGxiYWNrOiBnbG9iYWxGZXRjaCB9O1xuXHRjb25zdCBleHRyYXMgPSB7XG5cdFx0Y29uZmlnOiAob3B0aW9ucykgPT4ge1xuXHRcdFx0T2JqZWN0LmFzc2lnbihvcHRpb25zUmVmLCBvcHRpb25zKTtcblx0XHRcdE9iamVjdC5hc3NpZ24oc3RlcEZldGNoLCBvcHRpb25zUmVmKTtcblx0XHRcdHJldHVybiBzdGVwRmV0Y2g7XG5cdFx0fSxcblx0XHQuLi5vcHRpb25zUmVmXG5cdH07XG5cdHN0ZXBGZXRjaCA9IE9iamVjdC5hc3NpZ24oZmV0Y2gkMSwgZXh0cmFzKTtcblx0cmV0dXJuIHN0ZXBGZXRjaDtcbn07XG4vKipcbiogYGZldGNoYCBpcyBhIEZldGNoIEFQSS1jb21wYXRpYmxlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFrZSBhbnkgSFRUUFxuKiBjb2RlIGR1cmFibGUgaWYgaXQncyBjYWxsZWQgd2l0aGluIGFuIElubmdlc3QgZnVuY3Rpb24uXG4qXG4qIEl0IHdpbGwgZ3JhY2VmdWxseSBmYWxsIGJhY2sgdG8gdGhlIGdsb2JhbCBgZmV0Y2hgIGlmIGNhbGxlZCBvdXRzaWRlIG9mIHRoaXNcbiogY29udGV4dCwgYW5kIGEgY3VzdG9tIGZhbGxiYWNrIGNhbiBiZSBzZXQgdXNpbmcgdGhlIGBjb25maWdgIG1ldGhvZC5cbipcbiogQGV4YW1wbGUgQmFzaWMgdXNhZ2VcbiogYGBgdHNcbiogaW1wb3J0IHsgZmV0Y2ggfSBmcm9tIFwiaW5uZ2VzdFwiO1xuKlxuKiBjb25zdCBhcGkgPSBuZXcgTXlQcm9kdWN0QXBpKHsgZmV0Y2ggfSk7XG4qIGBgYFxuKlxuKiBAZXhhbXBsZSBTZXR0aW5nIGEgY3VzdG9tIGZhbGxiYWNrXG4qIGBgYHRzXG4qIGltcG9ydCB7IGZldGNoIH0gZnJvbSBcImlubmdlc3RcIjtcbipcbiogY29uc3QgYXBpID0gbmV3IE15UHJvZHVjdEFwaSh7XG4qICAgICAgICAgICAgZmV0Y2g6IGZldGNoLmNvbmZpZyh7IGZhbGxiYWNrOiBteUN1c3RvbUZldGNoIH0pLFxuKiB9KTtcbiogYGBgXG4qXG4qIEBleGFtcGxlIERvIG5vdCBhbGxvdyBmYWxsYmFja1xuKiBgYGB0c1xuKiBpbXBvcnQgeyBmZXRjaCB9IGZyb20gXCJpbm5nZXN0XCI7XG4qXG4qIGNvbnN0IGFwaSA9IG5ldyBNeVByb2R1Y3RBcGkoe1xuKiAgICAgICAgICAgIGZldGNoOiBmZXRjaC5jb25maWcoeyBmYWxsYmFjazogdW5kZWZpbmVkIH0pLFxuKiB9KTtcbiogYGBgXG4qL1xuY29uc3QgZmV0Y2ggPSBjcmVhdGVGZXRjaFNoaW0oKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBmZXRjaCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmV0Y2guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/Fetch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/Inngest.js":
/*!****************************************************!*\
  !*** ./node_modules/inngest/components/Inngest.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Inngest: () => (/* binding */ Inngest)\n/* harmony export */ });\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _helpers_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/env.js */ \"(rsc)/./node_modules/inngest/helpers/env.js\");\n/* harmony import */ var _helpers_devserver_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../helpers/devserver.js */ \"(rsc)/./node_modules/inngest/helpers/devserver.js\");\n/* harmony import */ var _InngestMetadata_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InngestMetadata.js */ \"(rsc)/./node_modules/inngest/components/InngestMetadata.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _InngestFunction_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./InngestFunction.js */ \"(rsc)/./node_modules/inngest/components/InngestFunction.js\");\n/* harmony import */ var _api_api_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/api.js */ \"(rsc)/./node_modules/inngest/api/api.js\");\n/* harmony import */ var _helpers_crypto_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../helpers/crypto.js */ \"(rsc)/./node_modules/inngest/helpers/crypto.js\");\n/* harmony import */ var _middleware_logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware/logger.js */ \"(rsc)/./node_modules/inngest/middleware/logger.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/Inngest.ts\n/**\n* A client used to interact with the Inngest API by sending or reacting to\n* events.\n*\n* To provide event typing, see {@link EventSchemas}.\n*\n* ```ts\n* const inngest = new Inngest({ id: \"my-app\" });\n*\n* // or to provide event typing too\n* const inngest = new Inngest({\n*   id: \"my-app\",\n*   schemas: new EventSchemas().fromRecord<{\n*     \"app/user.created\": {\n*       data: { userId: string };\n*     };\n*   }>(),\n* });\n* ```\n*\n* @public\n*/\nvar Inngest = class Inngest {\n\tget [Symbol.toStringTag]() {\n\t\treturn Inngest.Tag;\n\t}\n\t/**\n\t* The ID of this instance, most commonly a reference to the application it\n\t* resides in.\n\t*\n\t* The ID of your client should remain the same for its lifetime; if you'd\n\t* like to change the name of your client as it appears in the Inngest UI,\n\t* change the `name` property instead.\n\t*/\n\tid;\n\t/**\n\t* Stores the options so we can remember explicit settings the user has\n\t* provided.\n\t*/\n\toptions;\n\t/**\n\t* Inngest event key, used to send events to Inngest Cloud.\n\t*/\n\teventKey = \"\";\n\t_apiBaseUrl;\n\t_eventBaseUrl;\n\tinngestApi;\n\t/**\n\t* The absolute URL of the Inngest Cloud API.\n\t*/\n\tsendEventUrl = new URL(`e/${this.eventKey}`, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultInngestEventBaseUrl);\n\theaders;\n\tfetch;\n\tlogger;\n\tlocalFns = [];\n\t/**\n\t* A promise that resolves when the middleware stack has been initialized and\n\t* the client is ready to be used.\n\t*/\n\tmiddleware;\n\t/**\n\t* Whether the client is running in a production environment. This can\n\t* sometimes be `undefined` if the client has expressed no preference or\n\t* perhaps environment variables are only available at a later stage in the\n\t* runtime, for example when receiving a request.\n\t*\n\t* An {@link InngestCommHandler} should prioritize this value over all other\n\t* settings, but should still check for the presence of an environment\n\t* variable if it is not set.\n\t*/\n\t_mode;\n\tschemas;\n\t_appVersion;\n\t/**\n\t* @internal\n\t* Flag set by metadataMiddleware to enable step.metadata()\n\t*/\n\texperimentalMetadataEnabled = false;\n\tget apiBaseUrl() {\n\t\treturn this._apiBaseUrl;\n\t}\n\tget eventBaseUrl() {\n\t\treturn this._eventBaseUrl;\n\t}\n\tget env() {\n\t\treturn this.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Environment] ?? null;\n\t}\n\tget appVersion() {\n\t\treturn this._appVersion;\n\t}\n\t/**\n\t* Access the metadata builder for updating run and step metadata.\n\t*\n\t* @example\n\t* ```ts\n\t* // Update metadata for the current run\n\t* await inngest.metadata.update({ status: \"processing\" });\n\t*\n\t* // Update metadata for a different run\n\t* await inngest.metadata.run(otherRunId).update({ key: \"val\" });\n\t*\n\t* ```\n\t*/\n\tget metadata() {\n\t\tif (!this.experimentalMetadataEnabled) throw new Error(\"inngest.metadata is experimental. Enable it by adding metadataMiddleware() from \\\"inngest/experimental\\\" to your client middleware.\");\n\t\treturn new _InngestMetadata_js__WEBPACK_IMPORTED_MODULE_1__.UnscopedMetadataBuilder(this);\n\t}\n\t/**\n\t* A client used to interact with the Inngest API by sending or reacting to\n\t* events.\n\t*\n\t* To provide event typing, see {@link EventSchemas}.\n\t*\n\t* ```ts\n\t* const inngest = new Inngest({ name: \"My App\" });\n\t*\n\t* // or to provide event typing too\n\t* const inngest = new Inngest({\n\t*   name: \"My App\",\n\t*   schemas: new EventSchemas().fromRecord<{\n\t*     \"app/user.created\": {\n\t*       data: { userId: string };\n\t*     };\n\t*   }>(),\n\t* });\n\t* ```\n\t*/\n\tconstructor(options) {\n\t\tthis.options = options;\n\t\tconst { id, fetch, logger = new _middleware_logger_js__WEBPACK_IMPORTED_MODULE_2__.DefaultLogger(), middleware, isDev, schemas, appVersion } = this.options;\n\t\tif (!id) throw new Error(\"An `id` must be passed to create an Inngest instance.\");\n\t\tthis.id = id;\n\t\tthis._mode = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getMode)({ explicitMode: typeof isDev === \"boolean\" ? isDev ? \"dev\" : \"cloud\" : void 0 });\n\t\tthis.fetch = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getFetch)(fetch);\n\t\tthis.inngestApi = new _api_api_js__WEBPACK_IMPORTED_MODULE_4__.InngestApi({\n\t\t\tbaseUrl: this.apiBaseUrl,\n\t\t\tsigningKey: (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.processEnv)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestSigningKey) || \"\",\n\t\t\tsigningKeyFallback: (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.processEnv)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestSigningKeyFallback),\n\t\t\tfetch: this.fetch,\n\t\t\tmode: this.mode\n\t\t});\n\t\tthis.schemas = schemas;\n\t\tthis.loadModeEnvVars();\n\t\tthis.logger = logger;\n\t\tthis.middleware = this.initializeMiddleware([...builtInMiddleware, ...middleware || []]);\n\t\tthis._appVersion = appVersion;\n\t}\n\t/**\n\t* Returns a `Promise` that resolves when the app is ready and all middleware\n\t* has been initialized.\n\t*/\n\tget ready() {\n\t\treturn this.middleware.then(() => {});\n\t}\n\t/**\n\t* Set the environment variables for this client. This is useful if you are\n\t* passed environment variables at runtime instead of as globals and need to\n\t* update the client with those values as requests come in.\n\t*/\n\tsetEnvVars(env = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.allProcessEnv)()) {\n\t\tthis.mode = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getMode)({\n\t\t\tenv,\n\t\t\tclient: this\n\t\t});\n\t\treturn this;\n\t}\n\tloadModeEnvVars() {\n\t\tthis._apiBaseUrl = this.options.baseUrl || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestApiBaseUrl] || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestBaseUrl] || this.mode.getExplicitUrl(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultInngestApiBaseUrl);\n\t\tthis._eventBaseUrl = this.options.baseUrl || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestEventApiBaseUrl] || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestBaseUrl] || this.mode.getExplicitUrl(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultInngestEventBaseUrl);\n\t\tthis.setEventKey(this.options.eventKey || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestEventKey] || \"\");\n\t\tthis.headers = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.inngestHeaders)({\n\t\t\tinngestEnv: this.options.env,\n\t\t\tenv: this.mode[\"env\"]\n\t\t});\n\t\tthis.inngestApi[\"mode\"] = this.mode;\n\t\tthis.inngestApi[\"apiBaseUrl\"] = this._apiBaseUrl;\n\t}\n\t/**\n\t* Initialize all passed middleware, running the `register` function on each\n\t* in sequence and returning the requested hook registrations.\n\t*/\n\tasync initializeMiddleware(middleware = [], opts) {\n\t\t/**\n\t\t* Wait for the prefix stack to run first; do not trigger ours before this\n\t\t* is complete.\n\t\t*/\n\t\tconst prefix = await (opts?.prefixStack ?? []);\n\t\tconst stack = middleware.reduce(async (acc, m) => {\n\t\t\tconst prev = await acc;\n\t\t\tconst next = await m.init({\n\t\t\t\tclient: this,\n\t\t\t\t...opts?.registerInput\n\t\t\t});\n\t\t\treturn [...prev, next];\n\t\t}, Promise.resolve([]));\n\t\treturn [...prefix, ...await stack];\n\t}\n\tget mode() {\n\t\treturn this._mode;\n\t}\n\tset mode(m) {\n\t\tthis._mode = m;\n\t\tthis.loadModeEnvVars();\n\t}\n\t/**\n\t* Given a response from Inngest, relay the error to the caller.\n\t*/\n\tasync getResponseError(response, rawBody, foundErr = \"Unknown error\") {\n\t\tlet errorMessage = foundErr;\n\t\tif (errorMessage === \"Unknown error\") switch (response.status) {\n\t\t\tcase 401:\n\t\t\t\terrorMessage = \"Event key Not Found\";\n\t\t\t\tbreak;\n\t\t\tcase 400:\n\t\t\t\terrorMessage = \"Cannot process event payload\";\n\t\t\t\tbreak;\n\t\t\tcase 403:\n\t\t\t\terrorMessage = \"Forbidden\";\n\t\t\t\tbreak;\n\t\t\tcase 404:\n\t\t\t\terrorMessage = \"Event key not found\";\n\t\t\t\tbreak;\n\t\t\tcase 406:\n\t\t\t\terrorMessage = `${JSON.stringify(await rawBody)}`;\n\t\t\t\tbreak;\n\t\t\tcase 409:\n\t\t\tcase 412:\n\t\t\t\terrorMessage = \"Event transformation failed\";\n\t\t\t\tbreak;\n\t\t\tcase 413:\n\t\t\t\terrorMessage = \"Event payload too large\";\n\t\t\t\tbreak;\n\t\t\tcase 500:\n\t\t\t\terrorMessage = \"Internal server error\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttry {\n\t\t\t\t\terrorMessage = await response.text();\n\t\t\t\t} catch (_err) {\n\t\t\t\t\terrorMessage = `${JSON.stringify(await rawBody)}`;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn /* @__PURE__ */ new Error(`Inngest API Error: ${response.status} ${errorMessage}`);\n\t}\n\t/**\n\t* Set the event key for this instance of Inngest. This is useful if for some\n\t* reason the key is not available at time of instantiation or present in the\n\t* `INNGEST_EVENT_KEY` environment variable.\n\t*/\n\tsetEventKey(eventKey) {\n\t\tthis.eventKey = eventKey || _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.dummyEventKey;\n\t\tthis.sendEventUrl = new URL(`e/${this.eventKey}`, this.eventBaseUrl || _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultInngestEventBaseUrl);\n\t}\n\teventKeySet() {\n\t\treturn Boolean(this.eventKey) && this.eventKey !== _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.dummyEventKey;\n\t}\n\t/**\n\t* EXPERIMENTAL: This API is not yet stable and may change in the future\n\t* without a major version bump.\n\t*\n\t* Send a Signal to Inngest.\n\t*/\n\tasync sendSignal({ signal, data, env }) {\n\t\tconst headers = { ...env ? { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Environment]: env } : {} };\n\t\treturn this._sendSignal({\n\t\t\tsignal,\n\t\t\tdata,\n\t\t\theaders\n\t\t});\n\t}\n\tasync _sendSignal({ signal, data, headers }) {\n\t\tconst res = await this.inngestApi.sendSignal({\n\t\t\tsignal,\n\t\t\tdata\n\t\t}, {\n\t\t\t...this.headers,\n\t\t\t...headers\n\t\t});\n\t\tif (res.ok) return res.value;\n\t\tthrow new Error(`Failed to send signal: ${res.error?.error || \"Unknown error\"}`);\n\t}\n\tasync updateMetadata({ target, metadata, headers }) {\n\t\tconst res = await this.inngestApi.updateMetadata({\n\t\t\ttarget,\n\t\t\tmetadata\n\t\t}, { headers });\n\t\tif (res.ok) return res.value;\n\t\tthrow new Error(`Failed to update metadata: ${res.error?.error || \"Unknown error\"}`);\n\t}\n\tasync warnMetadata(target, kind, text) {\n\t\tthis.logger.warn(text);\n\t\tif (!this.experimentalMetadataEnabled) return;\n\t\tawait this.updateMetadata({\n\t\t\ttarget,\n\t\t\tmetadata: [{\n\t\t\t\tkind: \"inngest.warnings\",\n\t\t\t\top: \"merge\",\n\t\t\t\tvalues: { [`sdk.${kind}`]: text }\n\t\t\t}]\n\t\t});\n\t}\n\t/**\n\t* Send one or many events to Inngest. Takes an entire payload (including\n\t* name) as each input.\n\t*\n\t* ```ts\n\t* await inngest.send({ name: \"app/user.created\", data: { id: 123 } });\n\t* ```\n\t*\n\t* Returns a promise that will resolve if the event(s) were sent successfully,\n\t* else throws with an error explaining what went wrong.\n\t*\n\t* If you wish to send an event with custom types (i.e. one that hasn't been\n\t* generated), make sure to add it when creating your Inngest instance, like\n\t* so:\n\t*\n\t* ```ts\n\t* const inngest = new Inngest({\n\t*   name: \"My App\",\n\t*   schemas: new EventSchemas().fromRecord<{\n\t*     \"my/event\": {\n\t*       name: \"my/event\";\n\t*       data: { bar: string };\n\t*     };\n\t*   }>(),\n\t* });\n\t* ```\n\t*/\n\tasync send(payload, options) {\n\t\tconst headers = { ...options?.env ? { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Environment]: options.env } : {} };\n\t\treturn this._send({\n\t\t\tpayload,\n\t\t\theaders\n\t\t});\n\t}\n\t/**\n\t* Internal method for sending an event, used to allow Inngest internals to\n\t* further customize the request sent to an Inngest Server.\n\t*/\n\tasync _send({ payload, headers }) {\n\t\tconst nowMillis = (/* @__PURE__ */ new Date()).getTime();\n\t\tlet maxAttempts = 5;\n\t\ttry {\n\t\t\tconst entropy = (0,_helpers_crypto_js__WEBPACK_IMPORTED_MODULE_5__.createEntropy)(10);\n\t\t\tconst entropyBase64 = Buffer.from(entropy).toString(\"base64\");\n\t\t\theaders = {\n\t\t\t\t...headers,\n\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.EventIdSeed]: `${nowMillis},${entropyBase64}`\n\t\t\t};\n\t\t} catch (err) {\n\t\t\tlet message = \"Event-sending retries disabled\";\n\t\t\tif (err instanceof Error) message += `: ${err.message}`;\n\t\t\tconsole.debug(message);\n\t\t\tmaxAttempts = 1;\n\t\t}\n\t\tconst hooks = await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_6__.getHookStack)(this.middleware, \"onSendEvent\", void 0, {\n\t\t\ttransformInput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prev,\n\t\t\t\t\t...output\n\t\t\t\t};\n\t\t\t},\n\t\t\ttransformOutput(prev, output) {\n\t\t\t\treturn { result: {\n\t\t\t\t\t...prev.result,\n\t\t\t\t\t...output?.result\n\t\t\t\t} };\n\t\t\t}\n\t\t});\n\t\tlet payloads = Array.isArray(payload) ? payload : payload ? [payload] : [];\n\t\tconst inputChanges = await hooks.transformInput?.({ payloads: [...payloads] });\n\t\tif (inputChanges?.payloads) payloads = [...inputChanges.payloads];\n\t\tpayloads = payloads.map((p) => {\n\t\t\treturn {\n\t\t\t\t...p,\n\t\t\t\tid: p.id,\n\t\t\t\tts: p.ts || nowMillis,\n\t\t\t\tdata: p.data || {}\n\t\t\t};\n\t\t});\n\t\tconst applyHookToOutput = async (arg) => {\n\t\t\tconst hookOutput = await hooks.transformOutput?.(arg);\n\t\t\treturn {\n\t\t\t\t...arg.result,\n\t\t\t\t...hookOutput?.result\n\t\t\t};\n\t\t};\n\t\t/**\n\t\t* It can be valid for a user to send an empty list of events; if this\n\t\t* happens, show a warning that this may not be intended, but don't throw.\n\t\t*/\n\t\tif (!payloads.length) {\n\t\t\tconsole.warn((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.prettyError)({\n\t\t\t\ttype: \"warn\",\n\t\t\t\twhatHappened: \"`inngest.send()` called with no events\",\n\t\t\t\treassurance: \"This is not an error, but you may not have intended to do this.\",\n\t\t\t\tconsequences: \"The returned promise will resolve, but no events have been sent to Inngest.\",\n\t\t\t\tstack: true\n\t\t\t}));\n\t\t\treturn await applyHookToOutput({ result: { ids: [] } });\n\t\t}\n\t\tlet url = this.sendEventUrl.href;\n\t\t/**\n\t\t* If in prod mode and key is not present, fail now.\n\t\t*/\n\t\tif (this.mode.isCloud && !this.eventKeySet()) throw new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.prettyError)({\n\t\t\twhatHappened: \"Failed to send event\",\n\t\t\tconsequences: \"Your event or events were not sent to Inngest.\",\n\t\t\twhy: \"We couldn't find an event key to use to send events to Inngest.\",\n\t\t\ttoFixNow: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.fixEventKeyMissingSteps\n\t\t}));\n\t\t/**\n\t\t* If dev mode has been inferred, try to hit the dev server first to see if\n\t\t* it exists. If it does, use it, otherwise fall back to whatever server we\n\t\t* have configured.\n\t\t*\n\t\t* `INNGEST_BASE_URL` is used to set both dev server and prod URLs, so if a\n\t\t* user has set this it means they have already chosen a URL to hit.\n\t\t*/\n\t\tif (this.mode.isDev && this.mode.isInferred && !this.eventBaseUrl) {\n\t\t\tif (await (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_8__.devServerAvailable)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost, this.fetch)) url = (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_8__.devServerUrl)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost, `e/${this.eventKey}`).href;\n\t\t}\n\t\treturn await applyHookToOutput({ result: { ids: (await (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_9__.retryWithBackoff)(async () => {\n\t\t\tlet rawBody;\n\t\t\tlet body;\n\t\t\tconst response = await this.fetch(url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_10__.stringify)(payloads),\n\t\t\t\theaders: {\n\t\t\t\t\t...this.headers,\n\t\t\t\t\t...headers\n\t\t\t\t}\n\t\t\t});\n\t\t\ttry {\n\t\t\t\trawBody = await response.json();\n\t\t\t\tbody = await _types_js__WEBPACK_IMPORTED_MODULE_11__.sendEventResponseSchema.parseAsync(rawBody);\n\t\t\t} catch (_err) {\n\t\t\t\tthrow await this.getResponseError(response, rawBody);\n\t\t\t}\n\t\t\tif (body.status !== 200 || body.error) throw await this.getResponseError(response, rawBody, body.error);\n\t\t\treturn body;\n\t\t}, {\n\t\t\tmaxAttempts,\n\t\t\tbaseDelay: 100\n\t\t})).ids } });\n\t}\n\tcreateFunction = (rawOptions, rawTrigger, handler) => {\n\t\tconst fn = this._createFunction(rawOptions, rawTrigger, handler);\n\t\tthis.localFns.push(fn);\n\t\treturn fn;\n\t};\n\tget funcs() {\n\t\treturn this.localFns;\n\t}\n\t_createFunction = (rawOptions, rawTrigger, handler) => {\n\t\tconst options = this.sanitizeOptions(rawOptions);\n\t\tconst triggers = this.sanitizeTriggers(rawTrigger);\n\t\treturn new _InngestFunction_js__WEBPACK_IMPORTED_MODULE_12__.InngestFunction(this, {\n\t\t\t...options,\n\t\t\ttriggers\n\t\t}, handler);\n\t};\n\t/**\n\t* Runtime-only validation.\n\t*/\n\tsanitizeOptions(options) {\n\t\tif (Object.hasOwn(options, \"fns\")) console.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.logPrefix} InngestFunction: \\`fns\\` option has been deprecated in v3; use \\`middleware\\` instead. See https://www.inngest.com/docs/sdk/migration`);\n\t\tif (typeof options === \"string\") {\n\t\t\tconsole.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.logPrefix} InngestFunction: Creating a function with a string as the first argument has been deprecated in v3; pass an object instead. See https://www.inngest.com/docs/sdk/migration`);\n\t\t\treturn { id: options };\n\t\t}\n\t\treturn options;\n\t}\n\t/**\n\t* Runtime-only validation.\n\t*/\n\tsanitizeTriggers(triggers) {\n\t\tif (typeof triggers === \"string\") {\n\t\t\tconsole.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.logPrefix} InngestFunction: Creating a function with a string as the second argument has been deprecated in v3; pass an object instead. See https://www.inngest.com/docs/sdk/migration`);\n\t\t\treturn [{ event: triggers }];\n\t\t}\n\t\tif (!Array.isArray(triggers)) return [triggers];\n\t\treturn triggers;\n\t}\n};\n/**\n* Default middleware that is included in every client, placed after the user's\n* middleware on the client but before function-level middleware.\n*\n* It is defined here to ensure that comments are included in the generated TS\n* definitions. Without this, we infer the stack of built-in middleware without\n* comments, losing a lot of value.\n*\n* If this is moved, please ensure that using this package in another project\n* can correctly access comments on mutated input and output.\n*\n* This return pattern mimics the output of a `satisfies` suffix; it's used as\n* we support versions of TypeScript prior to the introduction of `satisfies`.\n*/\nconst builtInMiddleware = ((m) => m)([new _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_6__.InngestMiddleware({\n\tname: \"Inngest: Logger\",\n\tinit({ client }) {\n\t\treturn { onFunctionRun(arg) {\n\t\t\tconst { ctx } = arg;\n\t\t\tconst metadata = {\n\t\t\t\trunID: ctx.runId,\n\t\t\t\teventName: ctx.event.name,\n\t\t\t\tfunctionName: arg.fn.name\n\t\t\t};\n\t\t\tlet providedLogger = client[\"logger\"];\n\t\t\ttry {\n\t\t\t\tif (\"child\" in providedLogger) providedLogger = providedLogger.child(metadata);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\"failed to create \\\"childLogger\\\" with error: \", err);\n\t\t\t}\n\t\t\tconst logger = new _middleware_logger_js__WEBPACK_IMPORTED_MODULE_2__.ProxyLogger(providedLogger);\n\t\t\treturn {\n\t\t\t\ttransformInput() {\n\t\t\t\t\treturn { ctx: { logger } };\n\t\t\t\t},\n\t\t\t\tbeforeExecution() {\n\t\t\t\t\tlogger.enable();\n\t\t\t\t},\n\t\t\t\ttransformOutput({ result: { error } }) {\n\t\t\t\t\tif (error) logger.error(error);\n\t\t\t\t},\n\t\t\t\tasync beforeResponse() {\n\t\t\t\t\tawait logger.flush();\n\t\t\t\t}\n\t\t\t};\n\t\t} };\n\t}\n})]);\n(function(_Inngest) {\n\t_Inngest.Tag = \"Inngest.App\";\n})(Inngest || (Inngest = {}));\n\n//#endregion\n\n//# sourceMappingURL=Inngest.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUs7QUFDM0c7QUFDc0I7QUFDSDtBQUN2QjtBQUMrQztBQUN0QjtBQUNaO0FBQ0w7QUFDSDtBQUNaO0FBQ1U7QUFDZ0I7O0FBRXJFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsbUJBQW1CO0FBQ25EO0FBQ0E7QUFDQSxnQ0FBZ0MsY0FBYztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixjQUFjLEdBQUcsMEVBQTBCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sMEJBQTBCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwREFBVTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxzQkFBc0I7QUFDekQ7QUFDQTtBQUNBLG1EQUFtRCxZQUFZO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHdFQUF1QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG1CQUFt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QVU7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGlFQUFlO0FBQzVCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCx5REFBUyxFQUFFLDJEQUEyRDtBQUMzSDtBQUNBLG1CQUFtQix5REFBUyxFQUFFLG9HQUFvRztBQUNsSSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5REFBUyxFQUFFLHFHQUFxRztBQUNuSSxhQUFhLGlCQUFpQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0EsMENBQTBDLG9FQUFpQjtBQUMzRDtBQUNBLFFBQVEsUUFBUTtBQUNoQixXQUFXO0FBQ1gsV0FBVyxNQUFNO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHNCQUFzQiw4REFBVztBQUNqQztBQUNBO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLHNCQUFzQixVQUFVLFNBQVM7QUFDekM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDLDBCQUEwQjs7QUFFM0I7QUFDbUI7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvSW5uZ2VzdC5qcz8zMTY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmF1bHREZXZTZXJ2ZXJIb3N0LCBkZWZhdWx0SW5uZ2VzdEFwaUJhc2VVcmwsIGRlZmF1bHRJbm5nZXN0RXZlbnRCYXNlVXJsLCBkdW1teUV2ZW50S2V5LCBlbnZLZXlzLCBoZWFkZXJLZXlzLCBsb2dQcmVmaXggfSBmcm9tIFwiLi4vaGVscGVycy9jb25zdHMuanNcIjtcbmltcG9ydCB7IHNlbmRFdmVudFJlc3BvbnNlU2NoZW1hIH0gZnJvbSBcIi4uL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBmaXhFdmVudEtleU1pc3NpbmdTdGVwcywgcHJldHR5RXJyb3IgfSBmcm9tIFwiLi4vaGVscGVycy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IElubmdlc3RNaWRkbGV3YXJlLCBnZXRIb29rU3RhY2sgfSBmcm9tIFwiLi9Jbm5nZXN0TWlkZGxld2FyZS5qc1wiO1xuaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSBcIi4uL2hlbHBlcnMvc3RyaW5ncy5qc1wiO1xuaW1wb3J0IHsgYWxsUHJvY2Vzc0VudiwgZ2V0RmV0Y2gsIGdldE1vZGUsIGlubmdlc3RIZWFkZXJzLCBwcm9jZXNzRW52IH0gZnJvbSBcIi4uL2hlbHBlcnMvZW52LmpzXCI7XG5pbXBvcnQgeyBkZXZTZXJ2ZXJBdmFpbGFibGUsIGRldlNlcnZlclVybCB9IGZyb20gXCIuLi9oZWxwZXJzL2RldnNlcnZlci5qc1wiO1xuaW1wb3J0IHsgVW5zY29wZWRNZXRhZGF0YUJ1aWxkZXIgfSBmcm9tIFwiLi9Jbm5nZXN0TWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IHJldHJ5V2l0aEJhY2tvZmYgfSBmcm9tIFwiLi4vaGVscGVycy9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgSW5uZ2VzdEZ1bmN0aW9uIH0gZnJvbSBcIi4vSW5uZ2VzdEZ1bmN0aW9uLmpzXCI7XG5pbXBvcnQgeyBJbm5nZXN0QXBpIH0gZnJvbSBcIi4uL2FwaS9hcGkuanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVudHJvcHkgfSBmcm9tIFwiLi4vaGVscGVycy9jcnlwdG8uanNcIjtcbmltcG9ydCB7IERlZmF1bHRMb2dnZXIsIFByb3h5TG9nZ2VyIH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvbG9nZ2VyLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9Jbm5nZXN0LnRzXG4vKipcbiogQSBjbGllbnQgdXNlZCB0byBpbnRlcmFjdCB3aXRoIHRoZSBJbm5nZXN0IEFQSSBieSBzZW5kaW5nIG9yIHJlYWN0aW5nIHRvXG4qIGV2ZW50cy5cbipcbiogVG8gcHJvdmlkZSBldmVudCB0eXBpbmcsIHNlZSB7QGxpbmsgRXZlbnRTY2hlbWFzfS5cbipcbiogYGBgdHNcbiogY29uc3QgaW5uZ2VzdCA9IG5ldyBJbm5nZXN0KHsgaWQ6IFwibXktYXBwXCIgfSk7XG4qXG4qIC8vIG9yIHRvIHByb3ZpZGUgZXZlbnQgdHlwaW5nIHRvb1xuKiBjb25zdCBpbm5nZXN0ID0gbmV3IElubmdlc3Qoe1xuKiAgIGlkOiBcIm15LWFwcFwiLFxuKiAgIHNjaGVtYXM6IG5ldyBFdmVudFNjaGVtYXMoKS5mcm9tUmVjb3JkPHtcbiogICAgIFwiYXBwL3VzZXIuY3JlYXRlZFwiOiB7XG4qICAgICAgIGRhdGE6IHsgdXNlcklkOiBzdHJpbmcgfTtcbiogICAgIH07XG4qICAgfT4oKSxcbiogfSk7XG4qIGBgYFxuKlxuKiBAcHVibGljXG4qL1xudmFyIElubmdlc3QgPSBjbGFzcyBJbm5nZXN0IHtcblx0Z2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuXHRcdHJldHVybiBJbm5nZXN0LlRhZztcblx0fVxuXHQvKipcblx0KiBUaGUgSUQgb2YgdGhpcyBpbnN0YW5jZSwgbW9zdCBjb21tb25seSBhIHJlZmVyZW5jZSB0byB0aGUgYXBwbGljYXRpb24gaXRcblx0KiByZXNpZGVzIGluLlxuXHQqXG5cdCogVGhlIElEIG9mIHlvdXIgY2xpZW50IHNob3VsZCByZW1haW4gdGhlIHNhbWUgZm9yIGl0cyBsaWZldGltZTsgaWYgeW91J2Rcblx0KiBsaWtlIHRvIGNoYW5nZSB0aGUgbmFtZSBvZiB5b3VyIGNsaWVudCBhcyBpdCBhcHBlYXJzIGluIHRoZSBJbm5nZXN0IFVJLFxuXHQqIGNoYW5nZSB0aGUgYG5hbWVgIHByb3BlcnR5IGluc3RlYWQuXG5cdCovXG5cdGlkO1xuXHQvKipcblx0KiBTdG9yZXMgdGhlIG9wdGlvbnMgc28gd2UgY2FuIHJlbWVtYmVyIGV4cGxpY2l0IHNldHRpbmdzIHRoZSB1c2VyIGhhc1xuXHQqIHByb3ZpZGVkLlxuXHQqL1xuXHRvcHRpb25zO1xuXHQvKipcblx0KiBJbm5nZXN0IGV2ZW50IGtleSwgdXNlZCB0byBzZW5kIGV2ZW50cyB0byBJbm5nZXN0IENsb3VkLlxuXHQqL1xuXHRldmVudEtleSA9IFwiXCI7XG5cdF9hcGlCYXNlVXJsO1xuXHRfZXZlbnRCYXNlVXJsO1xuXHRpbm5nZXN0QXBpO1xuXHQvKipcblx0KiBUaGUgYWJzb2x1dGUgVVJMIG9mIHRoZSBJbm5nZXN0IENsb3VkIEFQSS5cblx0Ki9cblx0c2VuZEV2ZW50VXJsID0gbmV3IFVSTChgZS8ke3RoaXMuZXZlbnRLZXl9YCwgZGVmYXVsdElubmdlc3RFdmVudEJhc2VVcmwpO1xuXHRoZWFkZXJzO1xuXHRmZXRjaDtcblx0bG9nZ2VyO1xuXHRsb2NhbEZucyA9IFtdO1xuXHQvKipcblx0KiBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBtaWRkbGV3YXJlIHN0YWNrIGhhcyBiZWVuIGluaXRpYWxpemVkIGFuZFxuXHQqIHRoZSBjbGllbnQgaXMgcmVhZHkgdG8gYmUgdXNlZC5cblx0Ki9cblx0bWlkZGxld2FyZTtcblx0LyoqXG5cdCogV2hldGhlciB0aGUgY2xpZW50IGlzIHJ1bm5pbmcgaW4gYSBwcm9kdWN0aW9uIGVudmlyb25tZW50LiBUaGlzIGNhblxuXHQqIHNvbWV0aW1lcyBiZSBgdW5kZWZpbmVkYCBpZiB0aGUgY2xpZW50IGhhcyBleHByZXNzZWQgbm8gcHJlZmVyZW5jZSBvclxuXHQqIHBlcmhhcHMgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBvbmx5IGF2YWlsYWJsZSBhdCBhIGxhdGVyIHN0YWdlIGluIHRoZVxuXHQqIHJ1bnRpbWUsIGZvciBleGFtcGxlIHdoZW4gcmVjZWl2aW5nIGEgcmVxdWVzdC5cblx0KlxuXHQqIEFuIHtAbGluayBJbm5nZXN0Q29tbUhhbmRsZXJ9IHNob3VsZCBwcmlvcml0aXplIHRoaXMgdmFsdWUgb3ZlciBhbGwgb3RoZXJcblx0KiBzZXR0aW5ncywgYnV0IHNob3VsZCBzdGlsbCBjaGVjayBmb3IgdGhlIHByZXNlbmNlIG9mIGFuIGVudmlyb25tZW50XG5cdCogdmFyaWFibGUgaWYgaXQgaXMgbm90IHNldC5cblx0Ki9cblx0X21vZGU7XG5cdHNjaGVtYXM7XG5cdF9hcHBWZXJzaW9uO1xuXHQvKipcblx0KiBAaW50ZXJuYWxcblx0KiBGbGFnIHNldCBieSBtZXRhZGF0YU1pZGRsZXdhcmUgdG8gZW5hYmxlIHN0ZXAubWV0YWRhdGEoKVxuXHQqL1xuXHRleHBlcmltZW50YWxNZXRhZGF0YUVuYWJsZWQgPSBmYWxzZTtcblx0Z2V0IGFwaUJhc2VVcmwoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2FwaUJhc2VVcmw7XG5cdH1cblx0Z2V0IGV2ZW50QmFzZVVybCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fZXZlbnRCYXNlVXJsO1xuXHR9XG5cdGdldCBlbnYoKSB7XG5cdFx0cmV0dXJuIHRoaXMuaGVhZGVyc1toZWFkZXJLZXlzLkVudmlyb25tZW50XSA/PyBudWxsO1xuXHR9XG5cdGdldCBhcHBWZXJzaW9uKCkge1xuXHRcdHJldHVybiB0aGlzLl9hcHBWZXJzaW9uO1xuXHR9XG5cdC8qKlxuXHQqIEFjY2VzcyB0aGUgbWV0YWRhdGEgYnVpbGRlciBmb3IgdXBkYXRpbmcgcnVuIGFuZCBzdGVwIG1ldGFkYXRhLlxuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBgYGB0c1xuXHQqIC8vIFVwZGF0ZSBtZXRhZGF0YSBmb3IgdGhlIGN1cnJlbnQgcnVuXG5cdCogYXdhaXQgaW5uZ2VzdC5tZXRhZGF0YS51cGRhdGUoeyBzdGF0dXM6IFwicHJvY2Vzc2luZ1wiIH0pO1xuXHQqXG5cdCogLy8gVXBkYXRlIG1ldGFkYXRhIGZvciBhIGRpZmZlcmVudCBydW5cblx0KiBhd2FpdCBpbm5nZXN0Lm1ldGFkYXRhLnJ1bihvdGhlclJ1bklkKS51cGRhdGUoeyBrZXk6IFwidmFsXCIgfSk7XG5cdCpcblx0KiBgYGBcblx0Ki9cblx0Z2V0IG1ldGFkYXRhKCkge1xuXHRcdGlmICghdGhpcy5leHBlcmltZW50YWxNZXRhZGF0YUVuYWJsZWQpIHRocm93IG5ldyBFcnJvcihcImlubmdlc3QubWV0YWRhdGEgaXMgZXhwZXJpbWVudGFsLiBFbmFibGUgaXQgYnkgYWRkaW5nIG1ldGFkYXRhTWlkZGxld2FyZSgpIGZyb20gXFxcImlubmdlc3QvZXhwZXJpbWVudGFsXFxcIiB0byB5b3VyIGNsaWVudCBtaWRkbGV3YXJlLlwiKTtcblx0XHRyZXR1cm4gbmV3IFVuc2NvcGVkTWV0YWRhdGFCdWlsZGVyKHRoaXMpO1xuXHR9XG5cdC8qKlxuXHQqIEEgY2xpZW50IHVzZWQgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgSW5uZ2VzdCBBUEkgYnkgc2VuZGluZyBvciByZWFjdGluZyB0b1xuXHQqIGV2ZW50cy5cblx0KlxuXHQqIFRvIHByb3ZpZGUgZXZlbnQgdHlwaW5nLCBzZWUge0BsaW5rIEV2ZW50U2NoZW1hc30uXG5cdCpcblx0KiBgYGB0c1xuXHQqIGNvbnN0IGlubmdlc3QgPSBuZXcgSW5uZ2VzdCh7IG5hbWU6IFwiTXkgQXBwXCIgfSk7XG5cdCpcblx0KiAvLyBvciB0byBwcm92aWRlIGV2ZW50IHR5cGluZyB0b29cblx0KiBjb25zdCBpbm5nZXN0ID0gbmV3IElubmdlc3Qoe1xuXHQqICAgbmFtZTogXCJNeSBBcHBcIixcblx0KiAgIHNjaGVtYXM6IG5ldyBFdmVudFNjaGVtYXMoKS5mcm9tUmVjb3JkPHtcblx0KiAgICAgXCJhcHAvdXNlci5jcmVhdGVkXCI6IHtcblx0KiAgICAgICBkYXRhOiB7IHVzZXJJZDogc3RyaW5nIH07XG5cdCogICAgIH07XG5cdCogICB9PigpLFxuXHQqIH0pO1xuXHQqIGBgYFxuXHQqL1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHRjb25zdCB7IGlkLCBmZXRjaCwgbG9nZ2VyID0gbmV3IERlZmF1bHRMb2dnZXIoKSwgbWlkZGxld2FyZSwgaXNEZXYsIHNjaGVtYXMsIGFwcFZlcnNpb24gfSA9IHRoaXMub3B0aW9ucztcblx0XHRpZiAoIWlkKSB0aHJvdyBuZXcgRXJyb3IoXCJBbiBgaWRgIG11c3QgYmUgcGFzc2VkIHRvIGNyZWF0ZSBhbiBJbm5nZXN0IGluc3RhbmNlLlwiKTtcblx0XHR0aGlzLmlkID0gaWQ7XG5cdFx0dGhpcy5fbW9kZSA9IGdldE1vZGUoeyBleHBsaWNpdE1vZGU6IHR5cGVvZiBpc0RldiA9PT0gXCJib29sZWFuXCIgPyBpc0RldiA/IFwiZGV2XCIgOiBcImNsb3VkXCIgOiB2b2lkIDAgfSk7XG5cdFx0dGhpcy5mZXRjaCA9IGdldEZldGNoKGZldGNoKTtcblx0XHR0aGlzLmlubmdlc3RBcGkgPSBuZXcgSW5uZ2VzdEFwaSh7XG5cdFx0XHRiYXNlVXJsOiB0aGlzLmFwaUJhc2VVcmwsXG5cdFx0XHRzaWduaW5nS2V5OiBwcm9jZXNzRW52KGVudktleXMuSW5uZ2VzdFNpZ25pbmdLZXkpIHx8IFwiXCIsXG5cdFx0XHRzaWduaW5nS2V5RmFsbGJhY2s6IHByb2Nlc3NFbnYoZW52S2V5cy5Jbm5nZXN0U2lnbmluZ0tleUZhbGxiYWNrKSxcblx0XHRcdGZldGNoOiB0aGlzLmZldGNoLFxuXHRcdFx0bW9kZTogdGhpcy5tb2RlXG5cdFx0fSk7XG5cdFx0dGhpcy5zY2hlbWFzID0gc2NoZW1hcztcblx0XHR0aGlzLmxvYWRNb2RlRW52VmFycygpO1xuXHRcdHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuXHRcdHRoaXMubWlkZGxld2FyZSA9IHRoaXMuaW5pdGlhbGl6ZU1pZGRsZXdhcmUoWy4uLmJ1aWx0SW5NaWRkbGV3YXJlLCAuLi5taWRkbGV3YXJlIHx8IFtdXSk7XG5cdFx0dGhpcy5fYXBwVmVyc2lvbiA9IGFwcFZlcnNpb247XG5cdH1cblx0LyoqXG5cdCogUmV0dXJucyBhIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGFwcCBpcyByZWFkeSBhbmQgYWxsIG1pZGRsZXdhcmVcblx0KiBoYXMgYmVlbiBpbml0aWFsaXplZC5cblx0Ki9cblx0Z2V0IHJlYWR5KCkge1xuXHRcdHJldHVybiB0aGlzLm1pZGRsZXdhcmUudGhlbigoKSA9PiB7fSk7XG5cdH1cblx0LyoqXG5cdCogU2V0IHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZm9yIHRoaXMgY2xpZW50LiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3UgYXJlXG5cdCogcGFzc2VkIGVudmlyb25tZW50IHZhcmlhYmxlcyBhdCBydW50aW1lIGluc3RlYWQgb2YgYXMgZ2xvYmFscyBhbmQgbmVlZCB0b1xuXHQqIHVwZGF0ZSB0aGUgY2xpZW50IHdpdGggdGhvc2UgdmFsdWVzIGFzIHJlcXVlc3RzIGNvbWUgaW4uXG5cdCovXG5cdHNldEVudlZhcnMoZW52ID0gYWxsUHJvY2Vzc0VudigpKSB7XG5cdFx0dGhpcy5tb2RlID0gZ2V0TW9kZSh7XG5cdFx0XHRlbnYsXG5cdFx0XHRjbGllbnQ6IHRoaXNcblx0XHR9KTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXHRsb2FkTW9kZUVudlZhcnMoKSB7XG5cdFx0dGhpcy5fYXBpQmFzZVVybCA9IHRoaXMub3B0aW9ucy5iYXNlVXJsIHx8IHRoaXMubW9kZVtcImVudlwiXVtlbnZLZXlzLklubmdlc3RBcGlCYXNlVXJsXSB8fCB0aGlzLm1vZGVbXCJlbnZcIl1bZW52S2V5cy5Jbm5nZXN0QmFzZVVybF0gfHwgdGhpcy5tb2RlLmdldEV4cGxpY2l0VXJsKGRlZmF1bHRJbm5nZXN0QXBpQmFzZVVybCk7XG5cdFx0dGhpcy5fZXZlbnRCYXNlVXJsID0gdGhpcy5vcHRpb25zLmJhc2VVcmwgfHwgdGhpcy5tb2RlW1wiZW52XCJdW2VudktleXMuSW5uZ2VzdEV2ZW50QXBpQmFzZVVybF0gfHwgdGhpcy5tb2RlW1wiZW52XCJdW2VudktleXMuSW5uZ2VzdEJhc2VVcmxdIHx8IHRoaXMubW9kZS5nZXRFeHBsaWNpdFVybChkZWZhdWx0SW5uZ2VzdEV2ZW50QmFzZVVybCk7XG5cdFx0dGhpcy5zZXRFdmVudEtleSh0aGlzLm9wdGlvbnMuZXZlbnRLZXkgfHwgdGhpcy5tb2RlW1wiZW52XCJdW2VudktleXMuSW5uZ2VzdEV2ZW50S2V5XSB8fCBcIlwiKTtcblx0XHR0aGlzLmhlYWRlcnMgPSBpbm5nZXN0SGVhZGVycyh7XG5cdFx0XHRpbm5nZXN0RW52OiB0aGlzLm9wdGlvbnMuZW52LFxuXHRcdFx0ZW52OiB0aGlzLm1vZGVbXCJlbnZcIl1cblx0XHR9KTtcblx0XHR0aGlzLmlubmdlc3RBcGlbXCJtb2RlXCJdID0gdGhpcy5tb2RlO1xuXHRcdHRoaXMuaW5uZ2VzdEFwaVtcImFwaUJhc2VVcmxcIl0gPSB0aGlzLl9hcGlCYXNlVXJsO1xuXHR9XG5cdC8qKlxuXHQqIEluaXRpYWxpemUgYWxsIHBhc3NlZCBtaWRkbGV3YXJlLCBydW5uaW5nIHRoZSBgcmVnaXN0ZXJgIGZ1bmN0aW9uIG9uIGVhY2hcblx0KiBpbiBzZXF1ZW5jZSBhbmQgcmV0dXJuaW5nIHRoZSByZXF1ZXN0ZWQgaG9vayByZWdpc3RyYXRpb25zLlxuXHQqL1xuXHRhc3luYyBpbml0aWFsaXplTWlkZGxld2FyZShtaWRkbGV3YXJlID0gW10sIG9wdHMpIHtcblx0XHQvKipcblx0XHQqIFdhaXQgZm9yIHRoZSBwcmVmaXggc3RhY2sgdG8gcnVuIGZpcnN0OyBkbyBub3QgdHJpZ2dlciBvdXJzIGJlZm9yZSB0aGlzXG5cdFx0KiBpcyBjb21wbGV0ZS5cblx0XHQqL1xuXHRcdGNvbnN0IHByZWZpeCA9IGF3YWl0IChvcHRzPy5wcmVmaXhTdGFjayA/PyBbXSk7XG5cdFx0Y29uc3Qgc3RhY2sgPSBtaWRkbGV3YXJlLnJlZHVjZShhc3luYyAoYWNjLCBtKSA9PiB7XG5cdFx0XHRjb25zdCBwcmV2ID0gYXdhaXQgYWNjO1xuXHRcdFx0Y29uc3QgbmV4dCA9IGF3YWl0IG0uaW5pdCh7XG5cdFx0XHRcdGNsaWVudDogdGhpcyxcblx0XHRcdFx0Li4ub3B0cz8ucmVnaXN0ZXJJbnB1dFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gWy4uLnByZXYsIG5leHRdO1xuXHRcdH0sIFByb21pc2UucmVzb2x2ZShbXSkpO1xuXHRcdHJldHVybiBbLi4ucHJlZml4LCAuLi5hd2FpdCBzdGFja107XG5cdH1cblx0Z2V0IG1vZGUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX21vZGU7XG5cdH1cblx0c2V0IG1vZGUobSkge1xuXHRcdHRoaXMuX21vZGUgPSBtO1xuXHRcdHRoaXMubG9hZE1vZGVFbnZWYXJzKCk7XG5cdH1cblx0LyoqXG5cdCogR2l2ZW4gYSByZXNwb25zZSBmcm9tIElubmdlc3QsIHJlbGF5IHRoZSBlcnJvciB0byB0aGUgY2FsbGVyLlxuXHQqL1xuXHRhc3luYyBnZXRSZXNwb25zZUVycm9yKHJlc3BvbnNlLCByYXdCb2R5LCBmb3VuZEVyciA9IFwiVW5rbm93biBlcnJvclwiKSB7XG5cdFx0bGV0IGVycm9yTWVzc2FnZSA9IGZvdW5kRXJyO1xuXHRcdGlmIChlcnJvck1lc3NhZ2UgPT09IFwiVW5rbm93biBlcnJvclwiKSBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykge1xuXHRcdFx0Y2FzZSA0MDE6XG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9IFwiRXZlbnQga2V5IE5vdCBGb3VuZFwiO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNDAwOlxuXHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBcIkNhbm5vdCBwcm9jZXNzIGV2ZW50IHBheWxvYWRcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDQwMzpcblx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gXCJGb3JiaWRkZW5cIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDQwNDpcblx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gXCJFdmVudCBrZXkgbm90IGZvdW5kXCI7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA0MDY6XG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9IGAke0pTT04uc3RyaW5naWZ5KGF3YWl0IHJhd0JvZHkpfWA7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA0MDk6XG5cdFx0XHRjYXNlIDQxMjpcblx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gXCJFdmVudCB0cmFuc2Zvcm1hdGlvbiBmYWlsZWRcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDQxMzpcblx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gXCJFdmVudCBwYXlsb2FkIHRvbyBsYXJnZVwiO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNTAwOlxuXHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBcIkludGVybmFsIHNlcnZlciBlcnJvclwiO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXHRcdFx0XHR9IGNhdGNoIChfZXJyKSB7XG5cdFx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gYCR7SlNPTi5zdHJpbmdpZnkoYXdhaXQgcmF3Qm9keSl9YDtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdFx0cmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoYElubmdlc3QgQVBJIEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtlcnJvck1lc3NhZ2V9YCk7XG5cdH1cblx0LyoqXG5cdCogU2V0IHRoZSBldmVudCBrZXkgZm9yIHRoaXMgaW5zdGFuY2Ugb2YgSW5uZ2VzdC4gVGhpcyBpcyB1c2VmdWwgaWYgZm9yIHNvbWVcblx0KiByZWFzb24gdGhlIGtleSBpcyBub3QgYXZhaWxhYmxlIGF0IHRpbWUgb2YgaW5zdGFudGlhdGlvbiBvciBwcmVzZW50IGluIHRoZVxuXHQqIGBJTk5HRVNUX0VWRU5UX0tFWWAgZW52aXJvbm1lbnQgdmFyaWFibGUuXG5cdCovXG5cdHNldEV2ZW50S2V5KGV2ZW50S2V5KSB7XG5cdFx0dGhpcy5ldmVudEtleSA9IGV2ZW50S2V5IHx8IGR1bW15RXZlbnRLZXk7XG5cdFx0dGhpcy5zZW5kRXZlbnRVcmwgPSBuZXcgVVJMKGBlLyR7dGhpcy5ldmVudEtleX1gLCB0aGlzLmV2ZW50QmFzZVVybCB8fCBkZWZhdWx0SW5uZ2VzdEV2ZW50QmFzZVVybCk7XG5cdH1cblx0ZXZlbnRLZXlTZXQoKSB7XG5cdFx0cmV0dXJuIEJvb2xlYW4odGhpcy5ldmVudEtleSkgJiYgdGhpcy5ldmVudEtleSAhPT0gZHVtbXlFdmVudEtleTtcblx0fVxuXHQvKipcblx0KiBFWFBFUklNRU5UQUw6IFRoaXMgQVBJIGlzIG5vdCB5ZXQgc3RhYmxlIGFuZCBtYXkgY2hhbmdlIGluIHRoZSBmdXR1cmVcblx0KiB3aXRob3V0IGEgbWFqb3IgdmVyc2lvbiBidW1wLlxuXHQqXG5cdCogU2VuZCBhIFNpZ25hbCB0byBJbm5nZXN0LlxuXHQqL1xuXHRhc3luYyBzZW5kU2lnbmFsKHsgc2lnbmFsLCBkYXRhLCBlbnYgfSkge1xuXHRcdGNvbnN0IGhlYWRlcnMgPSB7IC4uLmVudiA/IHsgW2hlYWRlcktleXMuRW52aXJvbm1lbnRdOiBlbnYgfSA6IHt9IH07XG5cdFx0cmV0dXJuIHRoaXMuX3NlbmRTaWduYWwoe1xuXHRcdFx0c2lnbmFsLFxuXHRcdFx0ZGF0YSxcblx0XHRcdGhlYWRlcnNcblx0XHR9KTtcblx0fVxuXHRhc3luYyBfc2VuZFNpZ25hbCh7IHNpZ25hbCwgZGF0YSwgaGVhZGVycyB9KSB7XG5cdFx0Y29uc3QgcmVzID0gYXdhaXQgdGhpcy5pbm5nZXN0QXBpLnNlbmRTaWduYWwoe1xuXHRcdFx0c2lnbmFsLFxuXHRcdFx0ZGF0YVxuXHRcdH0sIHtcblx0XHRcdC4uLnRoaXMuaGVhZGVycyxcblx0XHRcdC4uLmhlYWRlcnNcblx0XHR9KTtcblx0XHRpZiAocmVzLm9rKSByZXR1cm4gcmVzLnZhbHVlO1xuXHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNlbmQgc2lnbmFsOiAke3Jlcy5lcnJvcj8uZXJyb3IgfHwgXCJVbmtub3duIGVycm9yXCJ9YCk7XG5cdH1cblx0YXN5bmMgdXBkYXRlTWV0YWRhdGEoeyB0YXJnZXQsIG1ldGFkYXRhLCBoZWFkZXJzIH0pIHtcblx0XHRjb25zdCByZXMgPSBhd2FpdCB0aGlzLmlubmdlc3RBcGkudXBkYXRlTWV0YWRhdGEoe1xuXHRcdFx0dGFyZ2V0LFxuXHRcdFx0bWV0YWRhdGFcblx0XHR9LCB7IGhlYWRlcnMgfSk7XG5cdFx0aWYgKHJlcy5vaykgcmV0dXJuIHJlcy52YWx1ZTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgbWV0YWRhdGE6ICR7cmVzLmVycm9yPy5lcnJvciB8fCBcIlVua25vd24gZXJyb3JcIn1gKTtcblx0fVxuXHRhc3luYyB3YXJuTWV0YWRhdGEodGFyZ2V0LCBraW5kLCB0ZXh0KSB7XG5cdFx0dGhpcy5sb2dnZXIud2Fybih0ZXh0KTtcblx0XHRpZiAoIXRoaXMuZXhwZXJpbWVudGFsTWV0YWRhdGFFbmFibGVkKSByZXR1cm47XG5cdFx0YXdhaXQgdGhpcy51cGRhdGVNZXRhZGF0YSh7XG5cdFx0XHR0YXJnZXQsXG5cdFx0XHRtZXRhZGF0YTogW3tcblx0XHRcdFx0a2luZDogXCJpbm5nZXN0Lndhcm5pbmdzXCIsXG5cdFx0XHRcdG9wOiBcIm1lcmdlXCIsXG5cdFx0XHRcdHZhbHVlczogeyBbYHNkay4ke2tpbmR9YF06IHRleHQgfVxuXHRcdFx0fV1cblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBTZW5kIG9uZSBvciBtYW55IGV2ZW50cyB0byBJbm5nZXN0LiBUYWtlcyBhbiBlbnRpcmUgcGF5bG9hZCAoaW5jbHVkaW5nXG5cdCogbmFtZSkgYXMgZWFjaCBpbnB1dC5cblx0KlxuXHQqIGBgYHRzXG5cdCogYXdhaXQgaW5uZ2VzdC5zZW5kKHsgbmFtZTogXCJhcHAvdXNlci5jcmVhdGVkXCIsIGRhdGE6IHsgaWQ6IDEyMyB9IH0pO1xuXHQqIGBgYFxuXHQqXG5cdCogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgaWYgdGhlIGV2ZW50KHMpIHdlcmUgc2VudCBzdWNjZXNzZnVsbHksXG5cdCogZWxzZSB0aHJvd3Mgd2l0aCBhbiBlcnJvciBleHBsYWluaW5nIHdoYXQgd2VudCB3cm9uZy5cblx0KlxuXHQqIElmIHlvdSB3aXNoIHRvIHNlbmQgYW4gZXZlbnQgd2l0aCBjdXN0b20gdHlwZXMgKGkuZS4gb25lIHRoYXQgaGFzbid0IGJlZW5cblx0KiBnZW5lcmF0ZWQpLCBtYWtlIHN1cmUgdG8gYWRkIGl0IHdoZW4gY3JlYXRpbmcgeW91ciBJbm5nZXN0IGluc3RhbmNlLCBsaWtlXG5cdCogc286XG5cdCpcblx0KiBgYGB0c1xuXHQqIGNvbnN0IGlubmdlc3QgPSBuZXcgSW5uZ2VzdCh7XG5cdCogICBuYW1lOiBcIk15IEFwcFwiLFxuXHQqICAgc2NoZW1hczogbmV3IEV2ZW50U2NoZW1hcygpLmZyb21SZWNvcmQ8e1xuXHQqICAgICBcIm15L2V2ZW50XCI6IHtcblx0KiAgICAgICBuYW1lOiBcIm15L2V2ZW50XCI7XG5cdCogICAgICAgZGF0YTogeyBiYXI6IHN0cmluZyB9O1xuXHQqICAgICB9O1xuXHQqICAgfT4oKSxcblx0KiB9KTtcblx0KiBgYGBcblx0Ki9cblx0YXN5bmMgc2VuZChwYXlsb2FkLCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgaGVhZGVycyA9IHsgLi4ub3B0aW9ucz8uZW52ID8geyBbaGVhZGVyS2V5cy5FbnZpcm9ubWVudF06IG9wdGlvbnMuZW52IH0gOiB7fSB9O1xuXHRcdHJldHVybiB0aGlzLl9zZW5kKHtcblx0XHRcdHBheWxvYWQsXG5cdFx0XHRoZWFkZXJzXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogSW50ZXJuYWwgbWV0aG9kIGZvciBzZW5kaW5nIGFuIGV2ZW50LCB1c2VkIHRvIGFsbG93IElubmdlc3QgaW50ZXJuYWxzIHRvXG5cdCogZnVydGhlciBjdXN0b21pemUgdGhlIHJlcXVlc3Qgc2VudCB0byBhbiBJbm5nZXN0IFNlcnZlci5cblx0Ki9cblx0YXN5bmMgX3NlbmQoeyBwYXlsb2FkLCBoZWFkZXJzIH0pIHtcblx0XHRjb25zdCBub3dNaWxsaXMgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcblx0XHRsZXQgbWF4QXR0ZW1wdHMgPSA1O1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBlbnRyb3B5ID0gY3JlYXRlRW50cm9weSgxMCk7XG5cdFx0XHRjb25zdCBlbnRyb3B5QmFzZTY0ID0gQnVmZmVyLmZyb20oZW50cm9weSkudG9TdHJpbmcoXCJiYXNlNjRcIik7XG5cdFx0XHRoZWFkZXJzID0ge1xuXHRcdFx0XHQuLi5oZWFkZXJzLFxuXHRcdFx0XHRbaGVhZGVyS2V5cy5FdmVudElkU2VlZF06IGAke25vd01pbGxpc30sJHtlbnRyb3B5QmFzZTY0fWBcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRsZXQgbWVzc2FnZSA9IFwiRXZlbnQtc2VuZGluZyByZXRyaWVzIGRpc2FibGVkXCI7XG5cdFx0XHRpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIG1lc3NhZ2UgKz0gYDogJHtlcnIubWVzc2FnZX1gO1xuXHRcdFx0Y29uc29sZS5kZWJ1ZyhtZXNzYWdlKTtcblx0XHRcdG1heEF0dGVtcHRzID0gMTtcblx0XHR9XG5cdFx0Y29uc3QgaG9va3MgPSBhd2FpdCBnZXRIb29rU3RhY2sodGhpcy5taWRkbGV3YXJlLCBcIm9uU2VuZEV2ZW50XCIsIHZvaWQgMCwge1xuXHRcdFx0dHJhbnNmb3JtSW5wdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHQuLi5wcmV2LFxuXHRcdFx0XHRcdC4uLm91dHB1dFxuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblx0XHRcdHRyYW5zZm9ybU91dHB1dChwcmV2LCBvdXRwdXQpIHtcblx0XHRcdFx0cmV0dXJuIHsgcmVzdWx0OiB7XG5cdFx0XHRcdFx0Li4ucHJldi5yZXN1bHQsXG5cdFx0XHRcdFx0Li4ub3V0cHV0Py5yZXN1bHRcblx0XHRcdFx0fSB9O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGxldCBwYXlsb2FkcyA9IEFycmF5LmlzQXJyYXkocGF5bG9hZCkgPyBwYXlsb2FkIDogcGF5bG9hZCA/IFtwYXlsb2FkXSA6IFtdO1xuXHRcdGNvbnN0IGlucHV0Q2hhbmdlcyA9IGF3YWl0IGhvb2tzLnRyYW5zZm9ybUlucHV0Py4oeyBwYXlsb2FkczogWy4uLnBheWxvYWRzXSB9KTtcblx0XHRpZiAoaW5wdXRDaGFuZ2VzPy5wYXlsb2FkcykgcGF5bG9hZHMgPSBbLi4uaW5wdXRDaGFuZ2VzLnBheWxvYWRzXTtcblx0XHRwYXlsb2FkcyA9IHBheWxvYWRzLm1hcCgocCkgPT4ge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4ucCxcblx0XHRcdFx0aWQ6IHAuaWQsXG5cdFx0XHRcdHRzOiBwLnRzIHx8IG5vd01pbGxpcyxcblx0XHRcdFx0ZGF0YTogcC5kYXRhIHx8IHt9XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHRcdGNvbnN0IGFwcGx5SG9va1RvT3V0cHV0ID0gYXN5bmMgKGFyZykgPT4ge1xuXHRcdFx0Y29uc3QgaG9va091dHB1dCA9IGF3YWl0IGhvb2tzLnRyYW5zZm9ybU91dHB1dD8uKGFyZyk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi5hcmcucmVzdWx0LFxuXHRcdFx0XHQuLi5ob29rT3V0cHV0Py5yZXN1bHRcblx0XHRcdH07XG5cdFx0fTtcblx0XHQvKipcblx0XHQqIEl0IGNhbiBiZSB2YWxpZCBmb3IgYSB1c2VyIHRvIHNlbmQgYW4gZW1wdHkgbGlzdCBvZiBldmVudHM7IGlmIHRoaXNcblx0XHQqIGhhcHBlbnMsIHNob3cgYSB3YXJuaW5nIHRoYXQgdGhpcyBtYXkgbm90IGJlIGludGVuZGVkLCBidXQgZG9uJ3QgdGhyb3cuXG5cdFx0Ki9cblx0XHRpZiAoIXBheWxvYWRzLmxlbmd0aCkge1xuXHRcdFx0Y29uc29sZS53YXJuKHByZXR0eUVycm9yKHtcblx0XHRcdFx0dHlwZTogXCJ3YXJuXCIsXG5cdFx0XHRcdHdoYXRIYXBwZW5lZDogXCJgaW5uZ2VzdC5zZW5kKClgIGNhbGxlZCB3aXRoIG5vIGV2ZW50c1wiLFxuXHRcdFx0XHRyZWFzc3VyYW5jZTogXCJUaGlzIGlzIG5vdCBhbiBlcnJvciwgYnV0IHlvdSBtYXkgbm90IGhhdmUgaW50ZW5kZWQgdG8gZG8gdGhpcy5cIixcblx0XHRcdFx0Y29uc2VxdWVuY2VzOiBcIlRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgcmVzb2x2ZSwgYnV0IG5vIGV2ZW50cyBoYXZlIGJlZW4gc2VudCB0byBJbm5nZXN0LlwiLFxuXHRcdFx0XHRzdGFjazogdHJ1ZVxuXHRcdFx0fSkpO1xuXHRcdFx0cmV0dXJuIGF3YWl0IGFwcGx5SG9va1RvT3V0cHV0KHsgcmVzdWx0OiB7IGlkczogW10gfSB9KTtcblx0XHR9XG5cdFx0bGV0IHVybCA9IHRoaXMuc2VuZEV2ZW50VXJsLmhyZWY7XG5cdFx0LyoqXG5cdFx0KiBJZiBpbiBwcm9kIG1vZGUgYW5kIGtleSBpcyBub3QgcHJlc2VudCwgZmFpbCBub3cuXG5cdFx0Ki9cblx0XHRpZiAodGhpcy5tb2RlLmlzQ2xvdWQgJiYgIXRoaXMuZXZlbnRLZXlTZXQoKSkgdGhyb3cgbmV3IEVycm9yKHByZXR0eUVycm9yKHtcblx0XHRcdHdoYXRIYXBwZW5lZDogXCJGYWlsZWQgdG8gc2VuZCBldmVudFwiLFxuXHRcdFx0Y29uc2VxdWVuY2VzOiBcIllvdXIgZXZlbnQgb3IgZXZlbnRzIHdlcmUgbm90IHNlbnQgdG8gSW5uZ2VzdC5cIixcblx0XHRcdHdoeTogXCJXZSBjb3VsZG4ndCBmaW5kIGFuIGV2ZW50IGtleSB0byB1c2UgdG8gc2VuZCBldmVudHMgdG8gSW5uZ2VzdC5cIixcblx0XHRcdHRvRml4Tm93OiBmaXhFdmVudEtleU1pc3NpbmdTdGVwc1xuXHRcdH0pKTtcblx0XHQvKipcblx0XHQqIElmIGRldiBtb2RlIGhhcyBiZWVuIGluZmVycmVkLCB0cnkgdG8gaGl0IHRoZSBkZXYgc2VydmVyIGZpcnN0IHRvIHNlZSBpZlxuXHRcdCogaXQgZXhpc3RzLiBJZiBpdCBkb2VzLCB1c2UgaXQsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gd2hhdGV2ZXIgc2VydmVyIHdlXG5cdFx0KiBoYXZlIGNvbmZpZ3VyZWQuXG5cdFx0KlxuXHRcdCogYElOTkdFU1RfQkFTRV9VUkxgIGlzIHVzZWQgdG8gc2V0IGJvdGggZGV2IHNlcnZlciBhbmQgcHJvZCBVUkxzLCBzbyBpZiBhXG5cdFx0KiB1c2VyIGhhcyBzZXQgdGhpcyBpdCBtZWFucyB0aGV5IGhhdmUgYWxyZWFkeSBjaG9zZW4gYSBVUkwgdG8gaGl0LlxuXHRcdCovXG5cdFx0aWYgKHRoaXMubW9kZS5pc0RldiAmJiB0aGlzLm1vZGUuaXNJbmZlcnJlZCAmJiAhdGhpcy5ldmVudEJhc2VVcmwpIHtcblx0XHRcdGlmIChhd2FpdCBkZXZTZXJ2ZXJBdmFpbGFibGUoZGVmYXVsdERldlNlcnZlckhvc3QsIHRoaXMuZmV0Y2gpKSB1cmwgPSBkZXZTZXJ2ZXJVcmwoZGVmYXVsdERldlNlcnZlckhvc3QsIGBlLyR7dGhpcy5ldmVudEtleX1gKS5ocmVmO1xuXHRcdH1cblx0XHRyZXR1cm4gYXdhaXQgYXBwbHlIb29rVG9PdXRwdXQoeyByZXN1bHQ6IHsgaWRzOiAoYXdhaXQgcmV0cnlXaXRoQmFja29mZihhc3luYyAoKSA9PiB7XG5cdFx0XHRsZXQgcmF3Qm9keTtcblx0XHRcdGxldCBib2R5O1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoKHVybCwge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRib2R5OiBzdHJpbmdpZnkocGF5bG9hZHMpLFxuXHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0Li4udGhpcy5oZWFkZXJzLFxuXHRcdFx0XHRcdC4uLmhlYWRlcnNcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyYXdCb2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXHRcdFx0XHRib2R5ID0gYXdhaXQgc2VuZEV2ZW50UmVzcG9uc2VTY2hlbWEucGFyc2VBc3luYyhyYXdCb2R5KTtcblx0XHRcdH0gY2F0Y2ggKF9lcnIpIHtcblx0XHRcdFx0dGhyb3cgYXdhaXQgdGhpcy5nZXRSZXNwb25zZUVycm9yKHJlc3BvbnNlLCByYXdCb2R5KTtcblx0XHRcdH1cblx0XHRcdGlmIChib2R5LnN0YXR1cyAhPT0gMjAwIHx8IGJvZHkuZXJyb3IpIHRocm93IGF3YWl0IHRoaXMuZ2V0UmVzcG9uc2VFcnJvcihyZXNwb25zZSwgcmF3Qm9keSwgYm9keS5lcnJvcik7XG5cdFx0XHRyZXR1cm4gYm9keTtcblx0XHR9LCB7XG5cdFx0XHRtYXhBdHRlbXB0cyxcblx0XHRcdGJhc2VEZWxheTogMTAwXG5cdFx0fSkpLmlkcyB9IH0pO1xuXHR9XG5cdGNyZWF0ZUZ1bmN0aW9uID0gKHJhd09wdGlvbnMsIHJhd1RyaWdnZXIsIGhhbmRsZXIpID0+IHtcblx0XHRjb25zdCBmbiA9IHRoaXMuX2NyZWF0ZUZ1bmN0aW9uKHJhd09wdGlvbnMsIHJhd1RyaWdnZXIsIGhhbmRsZXIpO1xuXHRcdHRoaXMubG9jYWxGbnMucHVzaChmbik7XG5cdFx0cmV0dXJuIGZuO1xuXHR9O1xuXHRnZXQgZnVuY3MoKSB7XG5cdFx0cmV0dXJuIHRoaXMubG9jYWxGbnM7XG5cdH1cblx0X2NyZWF0ZUZ1bmN0aW9uID0gKHJhd09wdGlvbnMsIHJhd1RyaWdnZXIsIGhhbmRsZXIpID0+IHtcblx0XHRjb25zdCBvcHRpb25zID0gdGhpcy5zYW5pdGl6ZU9wdGlvbnMocmF3T3B0aW9ucyk7XG5cdFx0Y29uc3QgdHJpZ2dlcnMgPSB0aGlzLnNhbml0aXplVHJpZ2dlcnMocmF3VHJpZ2dlcik7XG5cdFx0cmV0dXJuIG5ldyBJbm5nZXN0RnVuY3Rpb24odGhpcywge1xuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdHRyaWdnZXJzXG5cdFx0fSwgaGFuZGxlcik7XG5cdH07XG5cdC8qKlxuXHQqIFJ1bnRpbWUtb25seSB2YWxpZGF0aW9uLlxuXHQqL1xuXHRzYW5pdGl6ZU9wdGlvbnMob3B0aW9ucykge1xuXHRcdGlmIChPYmplY3QuaGFzT3duKG9wdGlvbnMsIFwiZm5zXCIpKSBjb25zb2xlLndhcm4oYCR7bG9nUHJlZml4fSBJbm5nZXN0RnVuY3Rpb246IFxcYGZuc1xcYCBvcHRpb24gaGFzIGJlZW4gZGVwcmVjYXRlZCBpbiB2MzsgdXNlIFxcYG1pZGRsZXdhcmVcXGAgaW5zdGVhZC4gU2VlIGh0dHBzOi8vd3d3Lmlubmdlc3QuY29tL2RvY3Mvc2RrL21pZ3JhdGlvbmApO1xuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0Y29uc29sZS53YXJuKGAke2xvZ1ByZWZpeH0gSW5uZ2VzdEZ1bmN0aW9uOiBDcmVhdGluZyBhIGZ1bmN0aW9uIHdpdGggYSBzdHJpbmcgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IGhhcyBiZWVuIGRlcHJlY2F0ZWQgaW4gdjM7IHBhc3MgYW4gb2JqZWN0IGluc3RlYWQuIFNlZSBodHRwczovL3d3dy5pbm5nZXN0LmNvbS9kb2NzL3Nkay9taWdyYXRpb25gKTtcblx0XHRcdHJldHVybiB7IGlkOiBvcHRpb25zIH07XG5cdFx0fVxuXHRcdHJldHVybiBvcHRpb25zO1xuXHR9XG5cdC8qKlxuXHQqIFJ1bnRpbWUtb25seSB2YWxpZGF0aW9uLlxuXHQqL1xuXHRzYW5pdGl6ZVRyaWdnZXJzKHRyaWdnZXJzKSB7XG5cdFx0aWYgKHR5cGVvZiB0cmlnZ2VycyA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0Y29uc29sZS53YXJuKGAke2xvZ1ByZWZpeH0gSW5uZ2VzdEZ1bmN0aW9uOiBDcmVhdGluZyBhIGZ1bmN0aW9uIHdpdGggYSBzdHJpbmcgYXMgdGhlIHNlY29uZCBhcmd1bWVudCBoYXMgYmVlbiBkZXByZWNhdGVkIGluIHYzOyBwYXNzIGFuIG9iamVjdCBpbnN0ZWFkLiBTZWUgaHR0cHM6Ly93d3cuaW5uZ2VzdC5jb20vZG9jcy9zZGsvbWlncmF0aW9uYCk7XG5cdFx0XHRyZXR1cm4gW3sgZXZlbnQ6IHRyaWdnZXJzIH1dO1xuXHRcdH1cblx0XHRpZiAoIUFycmF5LmlzQXJyYXkodHJpZ2dlcnMpKSByZXR1cm4gW3RyaWdnZXJzXTtcblx0XHRyZXR1cm4gdHJpZ2dlcnM7XG5cdH1cbn07XG4vKipcbiogRGVmYXVsdCBtaWRkbGV3YXJlIHRoYXQgaXMgaW5jbHVkZWQgaW4gZXZlcnkgY2xpZW50LCBwbGFjZWQgYWZ0ZXIgdGhlIHVzZXInc1xuKiBtaWRkbGV3YXJlIG9uIHRoZSBjbGllbnQgYnV0IGJlZm9yZSBmdW5jdGlvbi1sZXZlbCBtaWRkbGV3YXJlLlxuKlxuKiBJdCBpcyBkZWZpbmVkIGhlcmUgdG8gZW5zdXJlIHRoYXQgY29tbWVudHMgYXJlIGluY2x1ZGVkIGluIHRoZSBnZW5lcmF0ZWQgVFNcbiogZGVmaW5pdGlvbnMuIFdpdGhvdXQgdGhpcywgd2UgaW5mZXIgdGhlIHN0YWNrIG9mIGJ1aWx0LWluIG1pZGRsZXdhcmUgd2l0aG91dFxuKiBjb21tZW50cywgbG9zaW5nIGEgbG90IG9mIHZhbHVlLlxuKlxuKiBJZiB0aGlzIGlzIG1vdmVkLCBwbGVhc2UgZW5zdXJlIHRoYXQgdXNpbmcgdGhpcyBwYWNrYWdlIGluIGFub3RoZXIgcHJvamVjdFxuKiBjYW4gY29ycmVjdGx5IGFjY2VzcyBjb21tZW50cyBvbiBtdXRhdGVkIGlucHV0IGFuZCBvdXRwdXQuXG4qXG4qIFRoaXMgcmV0dXJuIHBhdHRlcm4gbWltaWNzIHRoZSBvdXRwdXQgb2YgYSBgc2F0aXNmaWVzYCBzdWZmaXg7IGl0J3MgdXNlZCBhc1xuKiB3ZSBzdXBwb3J0IHZlcnNpb25zIG9mIFR5cGVTY3JpcHQgcHJpb3IgdG8gdGhlIGludHJvZHVjdGlvbiBvZiBgc2F0aXNmaWVzYC5cbiovXG5jb25zdCBidWlsdEluTWlkZGxld2FyZSA9ICgobSkgPT4gbSkoW25ldyBJbm5nZXN0TWlkZGxld2FyZSh7XG5cdG5hbWU6IFwiSW5uZ2VzdDogTG9nZ2VyXCIsXG5cdGluaXQoeyBjbGllbnQgfSkge1xuXHRcdHJldHVybiB7IG9uRnVuY3Rpb25SdW4oYXJnKSB7XG5cdFx0XHRjb25zdCB7IGN0eCB9ID0gYXJnO1xuXHRcdFx0Y29uc3QgbWV0YWRhdGEgPSB7XG5cdFx0XHRcdHJ1bklEOiBjdHgucnVuSWQsXG5cdFx0XHRcdGV2ZW50TmFtZTogY3R4LmV2ZW50Lm5hbWUsXG5cdFx0XHRcdGZ1bmN0aW9uTmFtZTogYXJnLmZuLm5hbWVcblx0XHRcdH07XG5cdFx0XHRsZXQgcHJvdmlkZWRMb2dnZXIgPSBjbGllbnRbXCJsb2dnZXJcIl07XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAoXCJjaGlsZFwiIGluIHByb3ZpZGVkTG9nZ2VyKSBwcm92aWRlZExvZ2dlciA9IHByb3ZpZGVkTG9nZ2VyLmNoaWxkKG1ldGFkYXRhKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiZmFpbGVkIHRvIGNyZWF0ZSBcXFwiY2hpbGRMb2dnZXJcXFwiIHdpdGggZXJyb3I6IFwiLCBlcnIpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgbG9nZ2VyID0gbmV3IFByb3h5TG9nZ2VyKHByb3ZpZGVkTG9nZ2VyKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHRyYW5zZm9ybUlucHV0KCkge1xuXHRcdFx0XHRcdHJldHVybiB7IGN0eDogeyBsb2dnZXIgfSB9O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRiZWZvcmVFeGVjdXRpb24oKSB7XG5cdFx0XHRcdFx0bG9nZ2VyLmVuYWJsZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0cmFuc2Zvcm1PdXRwdXQoeyByZXN1bHQ6IHsgZXJyb3IgfSB9KSB7XG5cdFx0XHRcdFx0aWYgKGVycm9yKSBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhc3luYyBiZWZvcmVSZXNwb25zZSgpIHtcblx0XHRcdFx0XHRhd2FpdCBsb2dnZXIuZmx1c2goKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9IH07XG5cdH1cbn0pXSk7XG4oZnVuY3Rpb24oX0lubmdlc3QpIHtcblx0X0lubmdlc3QuVGFnID0gXCJJbm5nZXN0LkFwcFwiO1xufSkoSW5uZ2VzdCB8fCAoSW5uZ2VzdCA9IHt9KSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSW5uZ2VzdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5uZ2VzdC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/Inngest.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestCommHandler.js":
/*!***************************************************************!*\
  !*** ./node_modules/inngest/components/InngestCommHandler.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestCommHandler: () => (/* binding */ InngestCommHandler)\n/* harmony export */ });\n/* harmony import */ var _execution_als_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./execution/als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../version.js */ \"(rsc)/./node_modules/inngest/version.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./execution/InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _helpers_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/env.js */ \"(rsc)/./node_modules/inngest/helpers/env.js\");\n/* harmony import */ var _helpers_devserver_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../helpers/devserver.js */ \"(rsc)/./node_modules/inngest/helpers/devserver.js\");\n/* harmony import */ var _helpers_enum_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../helpers/enum.js */ \"(rsc)/./node_modules/inngest/helpers/enum.js\");\n/* harmony import */ var _helpers_net_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../helpers/net.js */ \"(rsc)/./node_modules/inngest/helpers/net.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _helpers_ServerTiming_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/ServerTiming.js */ \"(rsc)/./node_modules/inngest/helpers/ServerTiming.js\");\n/* harmony import */ var _helpers_stream_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../helpers/stream.js */ \"(rsc)/./node_modules/inngest/helpers/stream.js\");\n/* harmony import */ var _InngestFunction_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./InngestFunction.js */ \"(rsc)/./node_modules/inngest/components/InngestFunction.js\");\n/* harmony import */ var _execution_v1_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./execution/v1.js */ \"(rsc)/./node_modules/inngest/components/execution/v1.js\");\n/* harmony import */ var debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\");\n/* harmony import */ var ulid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ulid */ \"(rsc)/./node_modules/ulid/dist/index.esm.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/InngestCommHandler.ts\n/**\n* A schema for the response from Inngest when registering.\n*/\nconst registerResSchema = zod_v3__WEBPACK_IMPORTED_MODULE_2__.object({\n\tstatus: zod_v3__WEBPACK_IMPORTED_MODULE_2__.number().default(200),\n\tskipped: zod_v3__WEBPACK_IMPORTED_MODULE_2__.boolean().optional().default(false),\n\tmodified: zod_v3__WEBPACK_IMPORTED_MODULE_2__.boolean().optional().default(false),\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_2__.string().default(\"Successfully registered\")\n});\n/**\n* `InngestCommHandler` is a class for handling incoming requests from Inngest (or\n* Inngest's tooling such as the dev server or CLI) and taking appropriate\n* action for any served functions.\n*\n* All handlers (Next.js, RedwoodJS, Remix, Deno Fresh, etc.) are created using\n* this class; the exposed `serve` function will - most commonly - create an\n* instance of `InngestCommHandler` and then return `instance.createHandler()`.\n*\n* See individual parameter details for more information, or see the\n* source code for an existing handler, e.g.\n* {@link https://github.com/inngest/inngest-js/blob/main/src/next.ts}\n*\n* @example\n* ```\n* // my-custom-handler.ts\n* import {\n*   InngestCommHandler,\n*   type ServeHandlerOptions,\n* } from \"./components/InngestCommHandler\";\n*\n* export const serve = (options: ServeHandlerOptions) => {\n*   const handler = new InngestCommHandler({\n*     frameworkName: \"my-custom-handler\",\n*     ...options,\n*     handler: (req: Request) => {\n*       return {\n*         body: () => req.json(),\n*         headers: (key) => req.headers.get(key),\n*         method: () => req.method,\n*         url: () => new URL(req.url, `https://${req.headers.get(\"host\") || \"\"}`),\n*         transformResponse: ({ body, status, headers }) => {\n*           return new Response(body, { status, headers });\n*         },\n*       };\n*     },\n*   });\n*\n*   return handler.createHandler();\n* };\n* ```\n*\n* @public\n*/\nvar InngestCommHandler = class {\n\t/**\n\t* The ID of this serve handler, e.g. `\"my-app\"`. It's recommended that this\n\t* value represents the overarching app/service that this set of functions is\n\t* being served from.\n\t*/\n\tid;\n\t/**\n\t* The handler specified during instantiation of the class.\n\t*/\n\thandler;\n\t/**\n\t* The URL of the Inngest function registration endpoint.\n\t*/\n\tinngestRegisterUrl;\n\t/**\n\t* The name of the framework this handler is designed for. Should be\n\t* lowercase, alphanumeric characters inclusive of `-` and `/`.\n\t*/\n\tframeworkName;\n\t/**\n\t* The signing key used to validate requests from Inngest. This is\n\t* intentionally mutable so that we can pick up the signing key from the\n\t* environment during execution if needed.\n\t*/\n\tsigningKey;\n\t/**\n\t* The same as signingKey, except used as a fallback when auth fails using the\n\t* primary signing key.\n\t*/\n\tsigningKeyFallback;\n\t/**\n\t* A property that can be set to indicate whether we believe we are in\n\t* production mode.\n\t*\n\t* Should be set every time a request is received.\n\t*/\n\t_mode;\n\t/**\n\t* The localized `fetch` implementation used by this handler.\n\t*/\n\tfetch;\n\t/**\n\t* The host used to access the Inngest serve endpoint, e.g.:\n\t*\n\t*     \"https://myapp.com\"\n\t*\n\t* By default, the library will try to infer this using request details such\n\t* as the \"Host\" header and request path, but sometimes this isn't possible\n\t* (e.g. when running in a more controlled environments such as AWS Lambda or\n\t* when dealing with proxies/redirects).\n\t*\n\t* Provide the custom hostname here to ensure that the path is reported\n\t* correctly when registering functions with Inngest.\n\t*\n\t* To also provide a custom path, use `servePath`.\n\t*/\n\t_serveHost;\n\t/**\n\t* The path to the Inngest serve endpoint. e.g.:\n\t*\n\t*     \"/some/long/path/to/inngest/endpoint\"\n\t*\n\t* By default, the library will try to infer this using request details such\n\t* as the \"Host\" header and request path, but sometimes this isn't possible\n\t* (e.g. when running in a more controlled environments such as AWS Lambda or\n\t* when dealing with proxies/redirects).\n\t*\n\t* Provide the custom path (excluding the hostname) here to ensure that the\n\t* path is reported correctly when registering functions with Inngest.\n\t*\n\t* To also provide a custom hostname, use `serveHost`.\n\t*/\n\t_servePath;\n\t/**\n\t* The minimum level to log from the Inngest serve handler.\n\t*/\n\tlogLevel;\n\tstreaming;\n\t/**\n\t* A private collection of just Inngest functions, as they have been passed\n\t* when instantiating the class.\n\t*/\n\trawFns;\n\tclient;\n\t/**\n\t* A private collection of functions that are being served. This map is used\n\t* to find and register functions when interacting with Inngest Cloud.\n\t*/\n\tfns = {};\n\tenv = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.allProcessEnv)();\n\tallowExpiredSignatures;\n\t_options;\n\tskipSignatureValidation;\n\tconstructor(options) {\n\t\tthis._options = options;\n\t\t/**\n\t\t* v2 -> v3 migration error.\n\t\t*\n\t\t* If a serve handler is passed a client as the first argument, it'll be\n\t\t* spread in to these options. We should be able to detect this by picking\n\t\t* up a unique property on the object.\n\t\t*/\n\t\tif (Object.hasOwn(options, \"eventKey\")) throw new Error(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.logPrefix} You've passed an Inngest client as the first argument to your serve handler. This is no longer supported in v3; please pass the Inngest client as the \\`client\\` property of an options object instead. See https://www.inngest.com/docs/sdk/migration`);\n\t\tthis.frameworkName = options.frameworkName;\n\t\tthis.client = options.client;\n\t\tif (options.id) console.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.logPrefix} The \\`id\\` serve option is deprecated and will be removed in v4`);\n\t\tthis.id = options.id || this.client.id;\n\t\tthis.handler = options.handler;\n\t\t/**\n\t\t* Provide a hidden option to allow expired signatures to be accepted during\n\t\t* testing.\n\t\t*/\n\t\tthis.allowExpiredSignatures = Boolean(arguments[\"0\"]?.__testingAllowExpiredSignatures);\n\t\tthis.rawFns = options.functions?.filter(Boolean) ?? [];\n\t\tif (this.rawFns.length !== (options.functions ?? []).length) console.warn(`Some functions passed to serve() are undefined and misconfigured.  Please check your imports.`);\n\t\tthis.fns = this.rawFns.reduce((acc, fn) => {\n\t\t\tconst configs = fn[\"getConfig\"]({\n\t\t\t\tbaseUrl: new URL(\"https://example.com\"),\n\t\t\t\tappPrefix: this.id\n\t\t\t});\n\t\t\tconst fns = configs.reduce((acc$1, { id }, index) => {\n\t\t\t\treturn {\n\t\t\t\t\t...acc$1,\n\t\t\t\t\t[id]: {\n\t\t\t\t\t\tfn,\n\t\t\t\t\t\tonFailure: Boolean(index)\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}, {});\n\t\t\tconfigs.forEach(({ id }) => {\n\t\t\t\tif (acc[id]) throw new Error(`Duplicate function ID \"${id}\"; please change a function's name or provide an explicit ID to avoid conflicts.`);\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...acc,\n\t\t\t\t...fns\n\t\t\t};\n\t\t}, {});\n\t\tthis.inngestRegisterUrl = new URL(\"/fn/register\", this.apiBaseUrl);\n\t\tthis.signingKey = options.signingKey;\n\t\tthis.signingKeyFallback = options.signingKeyFallback;\n\t\tthis._serveHost = options.serveHost || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServeHost];\n\t\tthis._servePath = options.servePath || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServePath];\n\t\tthis.skipSignatureValidation = options.skipSignatureValidation || false;\n\t\tconst defaultLogLevel = \"info\";\n\t\tthis.logLevel = zod_v3__WEBPACK_IMPORTED_MODULE_2__[\"enum\"](_types_js__WEBPACK_IMPORTED_MODULE_5__.logLevels).default(defaultLogLevel).catch((ctx) => {\n\t\t\tthis.log(\"warn\", `Unknown log level passed: ${String(ctx.input)}; defaulting to ${defaultLogLevel}`);\n\t\t\treturn defaultLogLevel;\n\t\t}).parse(options.logLevel || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestLogLevel]);\n\t\tif (this.logLevel === \"debug\") {\n\t\t\t/**\n\t\t\t* `debug` is an old library; sometimes its runtime detection doesn't work\n\t\t\t* for newer pairings of framework/runtime.\n\t\t\t*\n\t\t\t* One silly symptom of this is that `Debug()` returns an anonymous\n\t\t\t* function with no extra properties instead of a `Debugger` instance if\n\t\t\t* the wrong code is consumed following a bad detection. This results in\n\t\t\t* the following `.enable()` call failing, so we just try carefully to\n\t\t\t* enable it here.\n\t\t\t*/\n\t\t\tif (debug__WEBPACK_IMPORTED_MODULE_0__.enable && typeof debug__WEBPACK_IMPORTED_MODULE_0__.enable === \"function\") debug__WEBPACK_IMPORTED_MODULE_0__.enable(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.debugPrefix}:*`);\n\t\t}\n\t\tconst defaultStreamingOption = false;\n\t\tthis.streaming = zod_v3__WEBPACK_IMPORTED_MODULE_2__.union([zod_v3__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\"allow\", \"force\"]), zod_v3__WEBPACK_IMPORTED_MODULE_2__.literal(false)]).default(defaultStreamingOption).catch((ctx) => {\n\t\t\tthis.log(\"warn\", `Unknown streaming option passed: ${String(ctx.input)}; defaulting to ${String(defaultStreamingOption)}`);\n\t\t\treturn defaultStreamingOption;\n\t\t}).parse(options.streaming || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestStreaming]);\n\t\tthis.fetch = options.fetch ? (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getFetch)(options.fetch) : this.client[\"fetch\"];\n\t}\n\t/**\n\t* Get the API base URL for the Inngest API.\n\t*\n\t* This is a getter to encourage checking the environment for the API base URL\n\t* each time it's accessed, as it may change during execution.\n\t*/\n\tget apiBaseUrl() {\n\t\treturn this._options.baseUrl || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestApiBaseUrl] || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestBaseUrl] || this.client.apiBaseUrl || _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.defaultInngestApiBaseUrl;\n\t}\n\t/**\n\t* Get the event API base URL for the Inngest API.\n\t*\n\t* This is a getter to encourage checking the environment for the event API\n\t* base URL each time it's accessed, as it may change during execution.\n\t*/\n\tget eventApiBaseUrl() {\n\t\treturn this._options.baseUrl || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestEventApiBaseUrl] || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestBaseUrl] || this.client.eventBaseUrl || _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.defaultInngestEventBaseUrl;\n\t}\n\t/**\n\t* The host used to access the Inngest serve endpoint, e.g.:\n\t*\n\t*     \"https://myapp.com\"\n\t*\n\t* By default, the library will try to infer this using request details such\n\t* as the \"Host\" header and request path, but sometimes this isn't possible\n\t* (e.g. when running in a more controlled environments such as AWS Lambda or\n\t* when dealing with proxies/redirects).\n\t*\n\t* Provide the custom hostname here to ensure that the path is reported\n\t* correctly when registering functions with Inngest.\n\t*\n\t* To also provide a custom path, use `servePath`.\n\t*/\n\tget serveHost() {\n\t\treturn this._serveHost || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServeHost];\n\t}\n\t/**\n\t* The path to the Inngest serve endpoint. e.g.:\n\t*\n\t*     \"/some/long/path/to/inngest/endpoint\"\n\t*\n\t* By default, the library will try to infer this using request details such\n\t* as the \"Host\" header and request path, but sometimes this isn't possible\n\t* (e.g. when running in a more controlled environments such as AWS Lambda or\n\t* when dealing with proxies/redirects).\n\t*\n\t* Provide the custom path (excluding the hostname) here to ensure that the\n\t* path is reported correctly when registering functions with Inngest.\n\t*\n\t* To also provide a custom hostname, use `serveHost`.\n\t*\n\t* This is a getter to encourage checking the environment for the serve path\n\t* each time it's accessed, as it may change during execution.\n\t*/\n\tget servePath() {\n\t\treturn this._servePath || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServePath];\n\t}\n\tget hashedEventKey() {\n\t\tif (!this.client[\"eventKey\"] || this.client[\"eventKey\"] === _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.dummyEventKey) return;\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.hashEventKey)(this.client[\"eventKey\"]);\n\t}\n\tget hashedSigningKey() {\n\t\tif (!this.signingKey) return;\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.hashSigningKey)(this.signingKey);\n\t}\n\tget hashedSigningKeyFallback() {\n\t\tif (!this.signingKeyFallback) return;\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.hashSigningKey)(this.signingKeyFallback);\n\t}\n\t/**\n\t* Returns a `boolean` representing whether this handler will stream responses\n\t* or not. Takes into account the user's preference and the platform's\n\t* capabilities.\n\t*/\n\tasync shouldStream(actions) {\n\t\tif (await actions.queryStringWithDefaults(\"testing for probe\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.Probe) !== void 0) return false;\n\t\tif (!actions.transformStreamingResponse) return false;\n\t\tif (this.streaming === \"force\") return true;\n\t\treturn this.streaming === \"allow\" && (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.platformSupportsStreaming)(this.frameworkName, this.env);\n\t}\n\tasync isInngestReq(actions) {\n\t\tconst reqMessage = `checking if this is an Inngest request`;\n\t\tconst [runId, signature] = await Promise.all([actions.headers(reqMessage, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestRunId), actions.headers(reqMessage, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature)]);\n\t\treturn Boolean(runId && typeof signature === \"string\");\n\t}\n\t/**\n\t* Start handling a request, setting up environments, modes, and returning\n\t* some helpers.\n\t*/\n\tasync initRequest(...args) {\n\t\tconst timer = new _helpers_ServerTiming_js__WEBPACK_IMPORTED_MODULE_7__.ServerTiming();\n\t\tconst actions = await this.getActions(timer, ...args);\n\t\tconst [env, expectedServerKind] = await Promise.all([actions.env?.(\"starting to handle request\"), actions.headers(\"checking expected server kind\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestServerKind)]);\n\t\tthis.env = {\n\t\t\t...(0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.allProcessEnv)(),\n\t\t\t...env\n\t\t};\n\t\tconst headerPromises = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.forwardedHeaders.map(async (header) => {\n\t\t\treturn {\n\t\t\t\theader,\n\t\t\t\tvalue: await actions.headers(`fetching ${header} for forwarding`, header)\n\t\t\t};\n\t\t});\n\t\tconst headersToForwardP = Promise.all(headerPromises).then((fetchedHeaders) => {\n\t\t\treturn fetchedHeaders.reduce((acc, { header, value }) => {\n\t\t\t\tif (value) acc[header] = value;\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t});\n\t\tconst getHeaders = async () => ({\n\t\t\t...(0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.inngestHeaders)({\n\t\t\t\tenv: this.env,\n\t\t\t\tframework: this.frameworkName,\n\t\t\t\tclient: this.client,\n\t\t\t\texpectedServerKind: expectedServerKind || void 0,\n\t\t\t\textras: { \"Server-Timing\": timer.getHeader() }\n\t\t\t}),\n\t\t\t...await headersToForwardP\n\t\t});\n\t\tconst assumedMode = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getMode)({\n\t\t\tenv: this.env,\n\t\t\tclient: this.client\n\t\t});\n\t\tif (assumedMode.isExplicit) this._mode = assumedMode;\n\t\telse {\n\t\t\tconst serveIsProd = await actions.isProduction?.(\"starting to handle request\");\n\t\t\tif (typeof serveIsProd === \"boolean\") this._mode = new _helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.Mode({\n\t\t\t\ttype: serveIsProd ? \"cloud\" : \"dev\",\n\t\t\t\tisExplicit: false\n\t\t\t});\n\t\t\telse this._mode = assumedMode;\n\t\t}\n\t\tthis.upsertKeysFromEnv();\n\t\treturn {\n\t\t\ttimer,\n\t\t\tactions,\n\t\t\tgetHeaders\n\t\t};\n\t}\n\t/**\n\t* `createSyncHandler` should be used to return a type-equivalent version of\n\t* the `handler` specified during instantiation.\n\t*/\n\tcreateSyncHandler() {\n\t\treturn (handler) => {\n\t\t\treturn this.wrapHandler((async (...args) => {\n\t\t\t\tconst reqInit = await this.initRequest(...args);\n\t\t\t\tconst fn = new _InngestFunction_js__WEBPACK_IMPORTED_MODULE_8__.InngestFunction(this.client, {\n\t\t\t\t\tid: this._options.syncOptions?.functionId ?? \"\",\n\t\t\t\t\tretries: this._options.syncOptions?.retries ?? _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.defaultMaxRetries\n\t\t\t\t}, () => handler(...args));\n\t\t\t\tif (await this.isInngestReq(reqInit.actions)) return this.handleAsyncRequest({\n\t\t\t\t\t...reqInit,\n\t\t\t\t\tforceExecution: true,\n\t\t\t\t\targs,\n\t\t\t\t\tfns: [fn]\n\t\t\t\t});\n\t\t\t\treturn this.handleSyncRequest({\n\t\t\t\t\t...reqInit,\n\t\t\t\t\targs,\n\t\t\t\t\tasyncMode: this._options.syncOptions?.asyncResponse ?? _types_js__WEBPACK_IMPORTED_MODULE_5__.AsyncResponseType.Redirect,\n\t\t\t\t\tfn\n\t\t\t\t});\n\t\t\t}));\n\t\t};\n\t}\n\t/**\n\t* `createHandler` should be used to return a type-equivalent version of the\n\t* `handler` specified during instantiation.\n\t*\n\t* @example\n\t* ```\n\t* // my-custom-handler.ts\n\t* import {\n\t*   InngestCommHandler,\n\t*   type ServeHandlerOptions,\n\t* } from \"./components/InngestCommHandler\";\n\t*\n\t* export const serve = (options: ServeHandlerOptions) => {\n\t*   const handler = new InngestCommHandler({\n\t*     frameworkName: \"my-custom-handler\",\n\t*     ...options,\n\t*     handler: (req: Request) => {\n\t*       return {\n\t*         body: () => req.json(),\n\t*         headers: (key) => req.headers.get(key),\n\t*         method: () => req.method,\n\t*         url: () => new URL(req.url, `https://${req.headers.get(\"host\") || \"\"}`),\n\t*         transformResponse: ({ body, status, headers }) => {\n\t*           return new Response(body, { status, headers });\n\t*         },\n\t*       };\n\t*     },\n\t*   });\n\t*\n\t*   return handler.createHandler();\n\t* };\n\t* ```\n\t*/\n\tcreateHandler() {\n\t\treturn this.wrapHandler((async (...args) => {\n\t\t\treturn this.handleAsyncRequest({\n\t\t\t\t...await this.initRequest(...args),\n\t\t\t\targs\n\t\t\t});\n\t\t}));\n\t}\n\t/**\n\t* Given a set of actions that let us access the incoming request, create a\n\t* `http/run.started` event that repesents a run starting from an HTTP\n\t* request.\n\t*/\n\tasync createHttpEvent(actions, fn) {\n\t\tconst reason = \"creating sync event\";\n\t\tconst contentTypePromise = actions.headers(reason, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.ContentType).then((v) => v ?? \"\");\n\t\tconst ipPromise = actions.headers(reason, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.ForwardedFor).then((v) => {\n\t\t\tif (v) return v;\n\t\t\treturn actions.headers(reason, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.RealIp).then((v$1) => v$1 ?? \"\");\n\t\t});\n\t\tconst methodPromise = actions.method(reason);\n\t\tconst urlPromise = actions.url(reason).then((v) => this.reqUrl(v));\n\t\tconst domainPromise = urlPromise.then((url) => `${url.protocol}//${url.host}`);\n\t\tconst pathPromise = urlPromise.then((url) => url.pathname);\n\t\tconst queryParamsPromise = urlPromise.then((url) => url.searchParams.toString());\n\t\tconst bodyPromise = actions.textBody(reason).then((body$1) => {\n\t\t\treturn typeof body$1 === \"string\" ? body$1 : (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(body$1);\n\t\t});\n\t\tconst [contentType, domain, ip, method, path, queryParams, body] = await Promise.all([\n\t\t\tcontentTypePromise,\n\t\t\tdomainPromise,\n\t\t\tipPromise,\n\t\t\tmethodPromise,\n\t\t\tpathPromise,\n\t\t\tqueryParamsPromise,\n\t\t\tbodyPromise\n\t\t]);\n\t\treturn {\n\t\t\tname: \"http/run.started\",\n\t\t\tdata: {\n\t\t\t\tcontent_type: contentType,\n\t\t\t\tdomain,\n\t\t\t\tip,\n\t\t\t\tmethod,\n\t\t\t\tpath,\n\t\t\t\tquery_params: queryParams,\n\t\t\t\tbody,\n\t\t\t\tfn: fn.id()\n\t\t\t}\n\t\t};\n\t}\n\tasync handleSyncRequest({ timer, actions, fn, asyncMode, args }) {\n\t\tif (!actions.experimentalTransformSyncResponse) throw new Error(\"This platform does not support synchronous Inngest function executions.\");\n\t\tif (await (0,_execution_als_js__WEBPACK_IMPORTED_MODULE_9__.getAsyncCtx)()) throw new Error(\"We already seem to be in the context of an Inngest execution, but didn't expect to be. Did you already wrap this handler?\");\n\t\tconst runId = (0,ulid__WEBPACK_IMPORTED_MODULE_1__.ulid)();\n\t\tconst event = await this.createHttpEvent(actions, fn);\n\t\tconst exeVersion = _execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_10__.PREFERRED_EXECUTION_VERSION;\n\t\tconst result = await fn[\"createExecution\"]({\n\t\t\tversion: exeVersion,\n\t\t\tpartialOptions: {\n\t\t\t\tclient: this.client,\n\t\t\t\tdata: {\n\t\t\t\t\trunId,\n\t\t\t\t\tevent,\n\t\t\t\t\tattempt: 0,\n\t\t\t\t\tevents: [event],\n\t\t\t\t\tmaxAttempts: fn.opts.retries ?? _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.defaultMaxRetries\n\t\t\t\t},\n\t\t\t\trunId,\n\t\t\t\theaders: {},\n\t\t\t\treqArgs: args,\n\t\t\t\tstepCompletionOrder: [],\n\t\t\t\tstepState: {},\n\t\t\t\tdisableImmediateExecution: false,\n\t\t\t\tisFailureHandler: false,\n\t\t\t\ttimer,\n\t\t\t\tcreateResponse: (data) => actions.experimentalTransformSyncResponse(\"creating sync execution\", data).then((res) => ({\n\t\t\t\t\t...res,\n\t\t\t\t\tversion: exeVersion\n\t\t\t\t})),\n\t\t\t\tstepMode: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync\n\t\t\t}\n\t\t}).start();\n\t\tconst resultHandler = {\n\t\t\t\"step-not-found\": () => {\n\t\t\t\tthrow new Error(\"We should not get the result 'step-not-found' when checkpointing. This is a bug in the `inngest` SDK\");\n\t\t\t},\n\t\t\t\"steps-found\": () => {\n\t\t\t\tthrow new Error(\"We should not get the result 'steps-found' when checkpointing. This is a bug in the `inngest` SDK\");\n\t\t\t},\n\t\t\t\"step-ran\": () => {\n\t\t\t\tthrow new Error(\"We should not get the result 'step-ran' when checkpointing. This is a bug in the `inngest` SDK\");\n\t\t\t},\n\t\t\t\"function-rejected\": () => {\n\t\t\t\tthrow new Error(\"We should not get the result 'function-rejected' when checkpointing. This is a bug in the `inngest` SDK\");\n\t\t\t},\n\t\t\t\"function-resolved\": ({ data }) => {\n\t\t\t\treturn data;\n\t\t\t},\n\t\t\t\"change-mode\": async ({ token }) => {\n\t\t\t\tswitch (asyncMode) {\n\t\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_5__.AsyncResponseType.Redirect: return actions.transformResponse(\"creating sync->async redirect response\", {\n\t\t\t\t\t\tstatus: 302,\n\t\t\t\t\t\theaders: { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Location]: await this.client[\"inngestApi\"][\"getTargetUrl\"](`/v1/http/runs/${runId}/output?token=${token}`).then((url) => url.toString()) },\n\t\t\t\t\t\tversion: exeVersion,\n\t\t\t\t\t\tbody: \"\"\n\t\t\t\t\t});\n\t\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_5__.AsyncResponseType.Token: return actions.transformResponse(\"creating sync->async token response\", {\n\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\theaders: {},\n\t\t\t\t\t\tversion: exeVersion,\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({\n\t\t\t\t\t\t\trun_id: runId,\n\t\t\t\t\t\t\ttoken\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t\tdefault: break;\n\t\t\t\t}\n\t\t\t\tthrow new Error(\"Not implemented: change-mode\");\n\t\t\t}\n\t\t}[result.type];\n\t\tif (!resultHandler) throw new Error(`No handler for execution result type: ${result.type}. This is a bug in the \\`inngest\\` SDK`);\n\t\treturn resultHandler(result);\n\t}\n\tasync handleAsyncRequest({ timer, actions, args, getHeaders, forceExecution, fns }) {\n\t\tif (forceExecution && !actions.experimentalTransformSyncResponse) throw new Error(\"This platform does not support async executions in Inngest for APIs.\");\n\t\tconst methodP = actions.method(\"starting to handle request\");\n\t\tconst contentLength = await actions.headers(\"checking signature for request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.ContentLength).then((value) => {\n\t\t\tif (!value) return;\n\t\t\treturn Number.parseInt(value, 10);\n\t\t});\n\t\tconst [signature, method, body] = await Promise.all([\n\t\t\tactions.headers(\"checking signature for request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature).then((headerSignature) => {\n\t\t\t\treturn headerSignature ?? void 0;\n\t\t\t}),\n\t\t\tmethodP,\n\t\t\tmethodP.then((method$1) => {\n\t\t\t\tif (method$1 === \"POST\" || method$1 === \"PUT\") {\n\t\t\t\t\tif (!contentLength) return \"\";\n\t\t\t\t\treturn actions.body(`checking body for request signing as method is ${method$1}`);\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t})\n\t\t]);\n\t\tconst signatureValidation = this.validateSignature(signature, body);\n\t\tconst actionRes = timer.wrap(\"action\", () => this.handleAction({\n\t\t\tactions,\n\t\t\ttimer,\n\t\t\tgetHeaders,\n\t\t\treqArgs: args,\n\t\t\tsignatureValidation,\n\t\t\tbody,\n\t\t\tmethod,\n\t\t\tforceExecution: Boolean(forceExecution),\n\t\t\tfns\n\t\t}));\n\t\t/**\n\t\t* Prepares an action response by merging returned data to provide\n\t\t* trailing information such as `Server-Timing` headers.\n\t\t*\n\t\t* It should always prioritize the headers returned by the action, as they\n\t\t* may contain important information such as `Content-Type`.\n\t\t*/\n\t\tconst prepareActionRes = async (res) => {\n\t\t\tconst headers = {\n\t\t\t\t...await getHeaders(),\n\t\t\t\t...res.headers,\n\t\t\t\t...res.version === null ? {} : { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.RequestVersion]: (res.version ?? _execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_10__.PREFERRED_EXECUTION_VERSION).toString() }\n\t\t\t};\n\t\t\tlet signature$1;\n\t\t\ttry {\n\t\t\t\tsignature$1 = await signatureValidation.then((result) => {\n\t\t\t\t\tif (!result.success || !result.keyUsed) return;\n\t\t\t\t\treturn this.getResponseSignature(result.keyUsed, res.body);\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\treturn {\n\t\t\t\t\t...res,\n\t\t\t\t\theaders,\n\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(err)),\n\t\t\t\t\tstatus: 500\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (signature$1) headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature] = signature$1;\n\t\t\treturn {\n\t\t\t\t...res,\n\t\t\t\theaders\n\t\t\t};\n\t\t};\n\t\tif (await this.shouldStream(actions)) {\n\t\t\tif (await actions.method(\"starting streaming response\") === \"POST\") {\n\t\t\t\tconst { stream, finalize } = await (0,_helpers_stream_js__WEBPACK_IMPORTED_MODULE_12__.createStream)();\n\t\t\t\t/**\n\t\t\t\t* Errors are handled by `handleAction` here to ensure that an\n\t\t\t\t* appropriate response is always given.\n\t\t\t\t*/\n\t\t\t\tactionRes.then((res) => {\n\t\t\t\t\treturn finalize(prepareActionRes(res));\n\t\t\t\t});\n\t\t\t\treturn timer.wrap(\"res\", async () => {\n\t\t\t\t\treturn actions.transformStreamingResponse?.(\"starting streaming response\", {\n\t\t\t\t\t\tstatus: 201,\n\t\t\t\t\t\theaders: await getHeaders(),\n\t\t\t\t\t\tbody: stream,\n\t\t\t\t\t\tversion: null\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn timer.wrap(\"res\", async () => {\n\t\t\treturn actionRes.then(prepareActionRes).then((actionRes$1) => {\n\t\t\t\treturn actions.transformResponse(\"sending back response\", actionRes$1);\n\t\t\t});\n\t\t});\n\t}\n\tasync getActions(timer, ...args) {\n\t\t/**\n\t\t* Used for testing, allow setting action overrides externally when\n\t\t* calling the handler. Always search the final argument.\n\t\t*/\n\t\tconst lastArg = args[args.length - 1];\n\t\tconst actionOverrides = typeof lastArg === \"object\" && lastArg !== null && \"actionOverrides\" in lastArg && typeof lastArg[\"actionOverrides\"] === \"object\" && lastArg[\"actionOverrides\"] !== null ? lastArg[\"actionOverrides\"] : {};\n\t\t/**\n\t\t* We purposefully `await` the handler, as it could be either sync or\n\t\t* async.\n\t\t*/\n\t\tconst rawActions = {\n\t\t\t...await timer.wrap(\"handler\", () => this.handler(...args)).catch((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.rethrowError)(\"Serve handler failed to run\")),\n\t\t\t...actionOverrides\n\t\t};\n\t\t/**\n\t\t* Mapped promisified handlers from userland `serve()` function mixed in\n\t\t* with some helpers.\n\t\t*/\n\t\tconst actions = {\n\t\t\t...Object.entries(rawActions).reduce((acc, [key, value]) => {\n\t\t\t\tif (typeof value !== \"function\") return acc;\n\t\t\t\treturn {\n\t\t\t\t\t...acc,\n\t\t\t\t\t[key]: (reason, ...args$1) => {\n\t\t\t\t\t\tconst errMessage = [`Failed calling \\`${key}\\` from serve handler`, reason].filter(Boolean).join(\" when \");\n\t\t\t\t\t\tconst fn = () => value(...args$1);\n\t\t\t\t\t\treturn (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.runAsPromise)(fn).catch((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.rethrowError)(errMessage)).catch((err) => {\n\t\t\t\t\t\t\tthis.log(\"error\", err);\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}, {}),\n\t\t\tqueryStringWithDefaults: async (reason, key) => {\n\t\t\t\tconst url = await actions.url(reason);\n\t\t\t\treturn await actions.queryString?.(reason, key, url) || url.searchParams.get(key) || void 0;\n\t\t\t},\n\t\t\t...actionOverrides\n\t\t};\n\t\treturn actions;\n\t}\n\twrapHandler(handler) {\n\t\t/**\n\t\t* Some platforms check (at runtime) the length of the function being used\n\t\t* to handle an endpoint. If this is a variadic function, it will fail that\n\t\t* check.\n\t\t*\n\t\t* Therefore, we expect the arguments accepted to be the same length as the\n\t\t* `handler` function passed internally.\n\t\t*\n\t\t* We also set a name to avoid a common useless name in tracing such as\n\t\t* `\"anonymous\"` or `\"bound function\"`.\n\t\t*\n\t\t* https://github.com/getsentry/sentry-javascript/issues/3284\n\t\t*/\n\t\tObject.defineProperties(handler, {\n\t\t\tname: { value: \"InngestHandler\" },\n\t\t\tlength: { value: this.handler.length }\n\t\t});\n\t\treturn handler;\n\t}\n\tget mode() {\n\t\treturn this._mode;\n\t}\n\tset mode(m) {\n\t\tthis._mode = m;\n\t\tif (m) this.client[\"mode\"] = m;\n\t}\n\t/**\n\t* Given a set of functions to check if an action is available from the\n\t* instance's handler, enact any action that is found.\n\t*\n\t* This method can fetch varying payloads of data, but ultimately is the place\n\t* where _decisions_ are made regarding functionality.\n\t*\n\t* For example, if we find that we should be viewing the UI, this function\n\t* will decide whether the UI should be visible based on the payload it has\n\t* found (e.g. env vars, options, etc).\n\t*/\n\tasync handleAction({ actions, timer, getHeaders, reqArgs, signatureValidation, body: rawBody, method, forceExecution, fns }) {\n\t\tconst isMissingBody = rawBody === void 0;\n\t\tlet body = rawBody;\n\t\ttry {\n\t\t\tlet url = await actions.url(\"starting to handle request\");\n\t\t\tif (method === \"POST\" || forceExecution) {\n\t\t\t\tif (!forceExecution && isMissingBody) {\n\t\t\t\t\tthis.log(\"error\", \"Missing body when executing, possibly due to missing request body middleware\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(/* @__PURE__ */ new Error(\"Missing request body when executing, possibly due to missing request body middleware\"))),\n\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst validationResult = await signatureValidation;\n\t\t\t\tif (!validationResult.success) return {\n\t\t\t\t\tstatus: 401,\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(validationResult.err)),\n\t\t\t\t\tversion: void 0\n\t\t\t\t};\n\t\t\t\tlet fn;\n\t\t\t\tlet fnId;\n\t\t\t\tlet stepId;\n\t\t\t\tif (forceExecution) {\n\t\t\t\t\tfn = fns?.length && fns[0] ? {\n\t\t\t\t\t\tfn: fns[0],\n\t\t\t\t\t\tonFailure: false\n\t\t\t\t\t} : Object.values(this.fns)[0];\n\t\t\t\t\tfnId = fn?.fn.id();\n\t\t\t\t\tstepId = \"step\";\n\t\t\t\t\tbody = {\n\t\t\t\t\t\tevent: {},\n\t\t\t\t\t\tevents: [],\n\t\t\t\t\t\tsteps: {},\n\t\t\t\t\t\tversion: _execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_10__.PREFERRED_EXECUTION_VERSION,\n\t\t\t\t\t\tsdkDecided: true,\n\t\t\t\t\t\tctx: {\n\t\t\t\t\t\t\tattempt: 0,\n\t\t\t\t\t\t\tdisable_immediate_execution: false,\n\t\t\t\t\t\t\tuse_api: true,\n\t\t\t\t\t\t\tmax_attempts: 3,\n\t\t\t\t\t\t\trun_id: await actions.headers(\"getting run ID for forced execution\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestRunId),\n\t\t\t\t\t\t\tstack: {\n\t\t\t\t\t\t\t\tstack: [],\n\t\t\t\t\t\t\t\tcurrent: 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tconst rawProbe = await actions.queryStringWithDefaults(\"testing for probe\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.Probe);\n\t\t\t\t\tif (rawProbe) {\n\t\t\t\t\t\tconst probe$1 = (0,_helpers_enum_js__WEBPACK_IMPORTED_MODULE_14__.enumFromValue)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.probe, rawProbe);\n\t\t\t\t\t\tif (!probe$1) return {\n\t\t\t\t\t\t\tstatus: 400,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(/* @__PURE__ */ new Error(`Unknown probe \"${rawProbe}\"`))),\n\t\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.probe.Trust]: () => ({\n\t\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: \"\",\n\t\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t\t}) }[probe$1]();\n\t\t\t\t\t}\n\t\t\t\t\tfnId = await actions.queryStringWithDefaults(\"processing run request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.FnId);\n\t\t\t\t\tif (!fnId) throw new Error(\"No function ID found in async request\");\n\t\t\t\t\tfn = this.fns[fnId];\n\t\t\t\t\tstepId = await actions.queryStringWithDefaults(\"processing run request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.StepId) || null;\n\t\t\t\t}\n\t\t\t\tif (typeof fnId === \"undefined\" || !fn) throw new Error(\"No function ID found in request\");\n\t\t\t\tconst { version: version$1, result } = this.runStep({\n\t\t\t\t\tfunctionId: fnId,\n\t\t\t\t\tdata: body,\n\t\t\t\t\tstepId,\n\t\t\t\t\ttimer,\n\t\t\t\t\treqArgs,\n\t\t\t\t\theaders: await getHeaders(),\n\t\t\t\t\tfn,\n\t\t\t\t\tforceExecution,\n\t\t\t\t\tactions\n\t\t\t\t});\n\t\t\t\tconst stepOutput = await result;\n\t\t\t\t/**\n\t\t\t\t* Functions can return `undefined`, but we'll always convert this to\n\t\t\t\t* `null`, as this is appropriately serializable by JSON.\n\t\t\t\t*/\n\t\t\t\tconst opDataUndefinedToNull = (op) => {\n\t\t\t\t\top.data = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.undefinedToNull)(op.data);\n\t\t\t\t\treturn op;\n\t\t\t\t};\n\t\t\t\tconst handler = {\n\t\t\t\t\t\"function-rejected\": (result$1) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: result$1.retriable ? 500 : 400,\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.NoRetry]: result$1.retriable ? \"false\" : \"true\",\n\t\t\t\t\t\t\t\t...typeof result$1.retriable === \"string\" ? { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.RetryAfter]: result$1.retriable } : {}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.undefinedToNull)(result$1.error)),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"function-resolved\": (result$1) => {\n\t\t\t\t\t\tif (forceExecution) {\n\t\t\t\t\t\t\tconst runCompleteOp = {\n\t\t\t\t\t\t\t\tid: _execution_v1_js__WEBPACK_IMPORTED_MODULE_16__._internals.hashId(\"complete\"),\n\t\t\t\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.RunComplete,\n\t\t\t\t\t\t\t\tdata: (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.undefinedToNull)(result$1.data)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstatus: 206,\n\t\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(runCompleteOp),\n\t\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.undefinedToNull)(result$1.data)),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"step-not-found\": (result$1) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.NoRetry]: \"false\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({ error: `Could not find step \"${result$1.step.displayName || result$1.step.id}\" to run; timed out` }),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"step-ran\": (result$1) => {\n\t\t\t\t\t\tconst step = opDataUndefinedToNull(result$1.step);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 206,\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t...typeof result$1.retriable !== \"undefined\" ? {\n\t\t\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.NoRetry]: result$1.retriable ? \"false\" : \"true\",\n\t\t\t\t\t\t\t\t\t...typeof result$1.retriable === \"string\" ? { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.RetryAfter]: result$1.retriable } : {}\n\t\t\t\t\t\t\t\t} : {}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)([step]),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"steps-found\": (result$1) => {\n\t\t\t\t\t\tconst steps = result$1.steps.map(opDataUndefinedToNull);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 206,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(steps),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"change-mode\": (result$1) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.NoRetry]: \"true\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({ error: `We wanted to change mode to \"${result$1.to}\", but this is not supported within the InngestCommHandler. This is a bug in the Inngest SDK.` }),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}[stepOutput.type];\n\t\t\t\ttry {\n\t\t\t\t\treturn await handler(stepOutput);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis.log(\"error\", \"Error handling execution result\", err);\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst env = (await getHeaders())[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Environment] ?? null;\n\t\t\tif (method === \"GET\") return {\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(await this.introspectionBody({\n\t\t\t\t\tactions,\n\t\t\t\t\tenv,\n\t\t\t\t\tsignatureValidation,\n\t\t\t\t\turl\n\t\t\t\t})),\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\tversion: void 0\n\t\t\t};\n\t\t\tif (method === \"PUT\") {\n\t\t\t\tconst [deployId, inBandSyncRequested] = await Promise.all([actions.queryStringWithDefaults(\"processing deployment request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.DeployId).then((deployId$1) => {\n\t\t\t\t\treturn deployId$1 === \"undefined\" ? void 0 : deployId$1;\n\t\t\t\t}), Promise.resolve((0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.parseAsBoolean)(this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestAllowInBandSync])).then((allowInBandSync) => {\n\t\t\t\t\tif (allowInBandSync !== void 0 && !allowInBandSync) return _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.OutOfBand;\n\t\t\t\t\treturn actions.headers(\"processing deployment request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestSyncKind);\n\t\t\t\t}).then((kind) => {\n\t\t\t\t\treturn kind === _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.InBand;\n\t\t\t\t})]);\n\t\t\t\tif (inBandSyncRequested) {\n\t\t\t\t\tif (isMissingBody) {\n\t\t\t\t\t\tthis.log(\"error\", \"Missing body when syncing, possibly due to missing request body middleware\");\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(/* @__PURE__ */ new Error(\"Missing request body when syncing, possibly due to missing request body middleware\"))),\n\t\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (!(await signatureValidation).success) return {\n\t\t\t\t\t\tstatus: 401,\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({ code: \"sig_verification_failed\" }),\n\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t};\n\t\t\t\t\tconst res = _types_js__WEBPACK_IMPORTED_MODULE_5__.inBandSyncRequestBodySchema.safeParse(body);\n\t\t\t\t\tif (!res.success) return {\n\t\t\t\t\t\tstatus: 400,\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({\n\t\t\t\t\t\t\tcode: \"invalid_request\",\n\t\t\t\t\t\t\tmessage: res.error.message\n\t\t\t\t\t\t}),\n\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t};\n\t\t\t\t\turl = this.reqUrl(new URL(res.data.url));\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(await this.inBandRegisterBody({\n\t\t\t\t\t\t\tactions,\n\t\t\t\t\t\t\tdeployId,\n\t\t\t\t\t\t\tenv,\n\t\t\t\t\t\t\tsignatureValidation,\n\t\t\t\t\t\t\turl\n\t\t\t\t\t\t})),\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestSyncKind]: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.InBand\n\t\t\t\t\t\t},\n\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst { status, message, modified } = await this.register(this.reqUrl(url), deployId, getHeaders);\n\t\t\t\treturn {\n\t\t\t\t\tstatus,\n\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tmodified\n\t\t\t\t\t}),\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestSyncKind]: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.OutOfBand\n\t\t\t\t\t},\n\t\t\t\t\tversion: void 0\n\t\t\t\t};\n\t\t\t}\n\t\t} catch (err) {\n\t\t\treturn {\n\t\t\t\tstatus: 500,\n\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({\n\t\t\t\t\ttype: \"internal\",\n\t\t\t\t\t...(0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(err)\n\t\t\t\t}),\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\tversion: void 0\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tstatus: 405,\n\t\t\tbody: JSON.stringify({\n\t\t\t\tmessage: \"No action found; request was likely not POST, PUT, or GET\",\n\t\t\t\tmode: this._mode\n\t\t\t}),\n\t\t\theaders: {},\n\t\t\tversion: void 0\n\t\t};\n\t}\n\trunStep({ actions, functionId, stepId, data, timer, reqArgs, headers, fn, forceExecution }) {\n\t\tif (!fn) throw new Error(`Could not find function with ID \"${functionId}\"`);\n\t\tconst immediateFnData = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.parseFnData)(data);\n\t\tlet { version: version$1, sdkDecided } = immediateFnData;\n\t\tif (version$1 === _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V1 && sdkDecided && fn.fn[\"shouldOptimizeParallelism\"]?.()) version$1 = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V2;\n\t\tconst result = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.runAsPromise)(async () => {\n\t\t\tconst anyFnData = await (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.fetchAllFnData)({\n\t\t\t\tdata: immediateFnData,\n\t\t\t\tapi: this.client[\"inngestApi\"],\n\t\t\t\tversion: version$1\n\t\t\t});\n\t\t\tif (!anyFnData.ok) throw new Error(anyFnData.error);\n\t\t\tconst createResponse = forceExecution && actions.experimentalTransformSyncResponse ? (data$1) => actions.experimentalTransformSyncResponse(\"created sync->async response\", data$1).then((res) => ({\n\t\t\t\t...res,\n\t\t\t\tversion: version$1\n\t\t\t})) : void 0;\n\t\t\tconst executionOptions = await ((s) => s)({\n\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V0]: ({ event, events, steps, ctx, version: version$2 }) => {\n\t\t\t\t\tconst stepState = Object.entries(steps ?? {}).reduce((acc, [id, data$1]) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t[id]: {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tdata: data$1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}, {});\n\t\t\t\t\treturn {\n\t\t\t\t\t\tversion: version$2,\n\t\t\t\t\t\tpartialOptions: {\n\t\t\t\t\t\t\tclient: this.client,\n\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\tstepMode: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevents,\n\t\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\t\tattempt: ctx?.attempt ?? 0\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstepState,\n\t\t\t\t\t\t\trequestedRunStep: stepId === \"step\" ? void 0 : stepId || void 0,\n\t\t\t\t\t\t\ttimer,\n\t\t\t\t\t\t\tisFailureHandler: fn.onFailure,\n\t\t\t\t\t\t\tstepCompletionOrder: ctx?.stack?.stack ?? [],\n\t\t\t\t\t\t\treqArgs,\n\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\tcreateResponse\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V1]: ({ event, events, steps, ctx, version: version$2 }) => {\n\t\t\t\t\tconst stepState = Object.entries(steps ?? {}).reduce((acc, [id, result$1]) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t[id]: result$1.type === \"data\" ? {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tdata: result$1.data\n\t\t\t\t\t\t\t} : result$1.type === \"input\" ? {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tinput: result$1.input\n\t\t\t\t\t\t\t} : {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\terror: result$1.error\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}, {});\n\t\t\t\t\tconst requestedRunStep = stepId === \"step\" ? void 0 : stepId || void 0;\n\t\t\t\t\tconst checkpointingConfig = fn.fn[\"shouldAsyncCheckpoint\"](requestedRunStep, ctx?.fn_id, Boolean(ctx?.disable_immediate_execution));\n\t\t\t\t\treturn {\n\t\t\t\t\t\tversion: version$2,\n\t\t\t\t\t\tpartialOptions: {\n\t\t\t\t\t\t\tclient: this.client,\n\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\tstepMode: checkpointingConfig ? _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.AsyncCheckpointing : _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async,\n\t\t\t\t\t\t\tcheckpointingConfig,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevents,\n\t\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\t\tattempt: ctx?.attempt ?? 0,\n\t\t\t\t\t\t\t\tmaxAttempts: ctx?.max_attempts\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tinternalFnId: ctx?.fn_id,\n\t\t\t\t\t\t\tqueueItemId: ctx?.qi_id,\n\t\t\t\t\t\t\tstepState,\n\t\t\t\t\t\t\trequestedRunStep,\n\t\t\t\t\t\t\ttimer,\n\t\t\t\t\t\t\tisFailureHandler: fn.onFailure,\n\t\t\t\t\t\t\tdisableImmediateExecution: ctx?.disable_immediate_execution,\n\t\t\t\t\t\t\tstepCompletionOrder: ctx?.stack?.stack ?? [],\n\t\t\t\t\t\t\treqArgs,\n\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\tcreateResponse\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V2]: ({ event, events, steps, ctx, version: version$2 }) => {\n\t\t\t\t\tconst stepState = Object.entries(steps ?? {}).reduce((acc, [id, result$1]) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t[id]: result$1.type === \"data\" ? {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tdata: result$1.data\n\t\t\t\t\t\t\t} : result$1.type === \"input\" ? {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tinput: result$1.input\n\t\t\t\t\t\t\t} : {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\terror: result$1.error\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}, {});\n\t\t\t\t\tconst requestedRunStep = stepId === \"step\" ? void 0 : stepId || void 0;\n\t\t\t\t\tconst checkpointingConfig = fn.fn[\"shouldAsyncCheckpoint\"](requestedRunStep, ctx?.fn_id, Boolean(ctx?.disable_immediate_execution));\n\t\t\t\t\treturn {\n\t\t\t\t\t\tversion: version$2,\n\t\t\t\t\t\tpartialOptions: {\n\t\t\t\t\t\t\tclient: this.client,\n\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\tstepMode: checkpointingConfig ? _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.AsyncCheckpointing : _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async,\n\t\t\t\t\t\t\tcheckpointingConfig,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevents,\n\t\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\t\tattempt: ctx?.attempt ?? 0,\n\t\t\t\t\t\t\t\tmaxAttempts: ctx?.max_attempts\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tinternalFnId: ctx?.fn_id,\n\t\t\t\t\t\t\tqueueItemId: ctx?.qi_id,\n\t\t\t\t\t\t\tstepState,\n\t\t\t\t\t\t\trequestedRunStep,\n\t\t\t\t\t\t\ttimer,\n\t\t\t\t\t\t\tisFailureHandler: fn.onFailure,\n\t\t\t\t\t\t\tdisableImmediateExecution: ctx?.disable_immediate_execution,\n\t\t\t\t\t\t\tstepCompletionOrder: ctx?.stack?.stack ?? [],\n\t\t\t\t\t\t\treqArgs,\n\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\tcreateResponse\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t})[version$1](anyFnData.value);\n\t\t\treturn fn.fn[\"createExecution\"](executionOptions).start();\n\t\t});\n\t\treturn {\n\t\t\tversion: version$1,\n\t\t\tresult\n\t\t};\n\t}\n\tconfigs(url) {\n\t\tconst configs = Object.values(this.rawFns).reduce((acc, fn) => [...acc, ...fn[\"getConfig\"]({\n\t\t\tbaseUrl: url,\n\t\t\tappPrefix: this.id\n\t\t})], []);\n\t\tfor (const config of configs) {\n\t\t\tconst check = _types_js__WEBPACK_IMPORTED_MODULE_5__.functionConfigSchema.safeParse(config);\n\t\t\tif (!check.success) {\n\t\t\t\tconst errors = check.error.errors.map((err) => err.message).join(\"; \");\n\t\t\t\tthis.log(\"warn\", `Config invalid for function \"${config.id}\" : ${errors}`);\n\t\t\t}\n\t\t}\n\t\treturn configs;\n\t}\n\t/**\n\t* Return an Inngest serve endpoint URL given a potential `path` and `host`.\n\t*\n\t* Will automatically use the `serveHost` and `servePath` if they have been\n\t* set when registering.\n\t*/\n\treqUrl(url) {\n\t\tlet ret = new URL(url);\n\t\tconst serveHost = this.serveHost || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServeHost];\n\t\tconst servePath = this.servePath || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServePath];\n\t\tif (servePath) ret.pathname = servePath;\n\t\tif (serveHost) ret = new URL(ret.pathname + ret.search, serveHost);\n\t\treturn ret;\n\t}\n\tregisterBody({ url, deployId }) {\n\t\treturn {\n\t\t\turl: url.href,\n\t\t\tdeployType: \"ping\",\n\t\t\tframework: this.frameworkName,\n\t\t\tappName: this.id,\n\t\t\tfunctions: this.configs(url),\n\t\t\tsdk: `js:v${_version_js__WEBPACK_IMPORTED_MODULE_17__.version}`,\n\t\t\tv: \"0.1\",\n\t\t\tdeployId: deployId || void 0,\n\t\t\tcapabilities: {\n\t\t\t\ttrust_probe: \"v1\",\n\t\t\t\tconnect: \"v1\"\n\t\t\t},\n\t\t\tappVersion: this.client.appVersion\n\t\t};\n\t}\n\tasync inBandRegisterBody({ actions, deployId, env, signatureValidation, url }) {\n\t\tconst registerBody = this.registerBody({\n\t\t\tdeployId,\n\t\t\turl\n\t\t});\n\t\tconst introspectionBody = await this.introspectionBody({\n\t\t\tactions,\n\t\t\tenv,\n\t\t\tsignatureValidation,\n\t\t\turl\n\t\t});\n\t\tconst body = {\n\t\t\tapp_id: this.id,\n\t\t\tappVersion: this.client.appVersion,\n\t\t\tcapabilities: registerBody.capabilities,\n\t\t\tenv,\n\t\t\tframework: registerBody.framework,\n\t\t\tfunctions: registerBody.functions,\n\t\t\tinspection: introspectionBody,\n\t\t\tplatform: (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getPlatformName)({\n\t\t\t\t...(0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.allProcessEnv)(),\n\t\t\t\t...this.env\n\t\t\t}),\n\t\t\tsdk_author: \"inngest\",\n\t\t\tsdk_language: \"\",\n\t\t\tsdk_version: \"\",\n\t\t\tsdk: registerBody.sdk,\n\t\t\turl: registerBody.url\n\t\t};\n\t\tif (\"authentication_succeeded\" in introspectionBody && introspectionBody.authentication_succeeded) {\n\t\t\tbody.sdk_language = introspectionBody.sdk_language;\n\t\t\tbody.sdk_version = introspectionBody.sdk_version;\n\t\t}\n\t\treturn body;\n\t}\n\tasync introspectionBody({ actions, env, signatureValidation, url }) {\n\t\tconst registerBody = this.registerBody({\n\t\t\turl: this.reqUrl(url),\n\t\t\tdeployId: null\n\t\t});\n\t\tif (!this._mode) throw new Error(\"No mode set; cannot introspect without mode\");\n\t\tlet introspection = {\n\t\t\textra: { is_mode_explicit: this._mode.isExplicit },\n\t\t\thas_event_key: this.client[\"eventKeySet\"](),\n\t\t\thas_signing_key: Boolean(this.signingKey),\n\t\t\tfunction_count: registerBody.functions.length,\n\t\t\tmode: this._mode.type,\n\t\t\tschema_version: \"2024-05-24\"\n\t\t};\n\t\tif (this._mode.type === \"cloud\") try {\n\t\t\tif (!(await signatureValidation).success) throw new Error(\"Signature validation failed\");\n\t\t\tintrospection = {\n\t\t\t\t...introspection,\n\t\t\t\tauthentication_succeeded: true,\n\t\t\t\tapi_origin: this.apiBaseUrl,\n\t\t\t\tapp_id: this.id,\n\t\t\t\tcapabilities: {\n\t\t\t\t\ttrust_probe: \"v1\",\n\t\t\t\t\tconnect: \"v1\"\n\t\t\t\t},\n\t\t\t\tenv,\n\t\t\t\tevent_api_origin: this.eventApiBaseUrl,\n\t\t\t\tevent_key_hash: this.hashedEventKey ?? null,\n\t\t\t\textra: {\n\t\t\t\t\t...introspection.extra,\n\t\t\t\t\tis_streaming: await this.shouldStream(actions)\n\t\t\t\t},\n\t\t\t\tframework: this.frameworkName,\n\t\t\t\tsdk_language: \"js\",\n\t\t\t\tsdk_version: _version_js__WEBPACK_IMPORTED_MODULE_17__.version,\n\t\t\t\tserve_origin: this.serveHost ?? null,\n\t\t\t\tserve_path: this.servePath ?? null,\n\t\t\t\tsigning_key_fallback_hash: this.hashedSigningKeyFallback ?? null,\n\t\t\t\tsigning_key_hash: this.hashedSigningKey ?? null\n\t\t\t};\n\t\t} catch {\n\t\t\tintrospection = { ...introspection };\n\t\t}\n\t\treturn introspection;\n\t}\n\tasync register(url, deployId, getHeaders) {\n\t\tconst body = this.registerBody({\n\t\t\turl,\n\t\t\tdeployId\n\t\t});\n\t\tlet res;\n\t\tlet registerURL = new URL(this.inngestRegisterUrl.href);\n\t\tif (this._mode && this._mode.isInferred && this._mode.isDev) {\n\t\t\tconst host = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.devServerHost)(this.env);\n\t\t\tif (await (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_18__.devServerAvailable)(host, this.fetch)) registerURL = (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_18__.devServerUrl)(host, \"/fn/register\");\n\t\t} else if (this._mode?.explicitDevUrl) registerURL = (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_18__.devServerUrl)(this._mode.explicitDevUrl.href, \"/fn/register\");\n\t\tif (deployId) registerURL.searchParams.set(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.DeployId, deployId);\n\t\ttry {\n\t\t\tres = await (0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_19__.fetchWithAuthFallback)({\n\t\t\t\tauthToken: this.hashedSigningKey,\n\t\t\t\tauthTokenFallback: this.hashedSigningKeyFallback,\n\t\t\t\tfetch: this.fetch,\n\t\t\t\turl: registerURL.href,\n\t\t\t\toptions: {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(body),\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t...await getHeaders(),\n\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestSyncKind]: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.OutOfBand\n\t\t\t\t\t},\n\t\t\t\t\tredirect: \"follow\"\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tthis.log(\"error\", err);\n\t\t\treturn {\n\t\t\t\tstatus: 500,\n\t\t\t\tmessage: `Failed to register${err instanceof Error ? `; ${err.message}` : \"\"}`,\n\t\t\t\tmodified: false\n\t\t\t};\n\t\t}\n\t\tconst raw = await res.text();\n\t\tlet data = {};\n\t\ttry {\n\t\t\tdata = JSON.parse(raw);\n\t\t} catch (err) {\n\t\t\tthis.log(\"warn\", \"Couldn't unpack register response:\", err);\n\t\t\tlet message = \"Failed to register\";\n\t\t\tif (err instanceof Error) message += `; ${err.message}`;\n\t\t\tmessage += `; status code: ${res.status}`;\n\t\t\treturn {\n\t\t\t\tstatus: 500,\n\t\t\t\tmessage,\n\t\t\t\tmodified: false\n\t\t\t};\n\t\t}\n\t\tlet status;\n\t\tlet error;\n\t\tlet skipped;\n\t\tlet modified;\n\t\ttry {\n\t\t\t({status, error, skipped, modified} = registerResSchema.parse(data));\n\t\t} catch (err) {\n\t\t\tthis.log(\"warn\", \"Invalid register response schema:\", err);\n\t\t\tlet message = \"Failed to register\";\n\t\t\tif (err instanceof Error) message += `; ${err.message}`;\n\t\t\tmessage += `; status code: ${res.status}`;\n\t\t\treturn {\n\t\t\t\tstatus: 500,\n\t\t\t\tmessage,\n\t\t\t\tmodified: false\n\t\t\t};\n\t\t}\n\t\tif (!skipped) this.log(\"debug\", \"registered inngest functions:\", res.status, res.statusText, data);\n\t\treturn {\n\t\t\tstatus,\n\t\t\tmessage: error,\n\t\t\tmodified\n\t\t};\n\t}\n\t/**\n\t* Given an environment, upsert any missing keys. This is useful in\n\t* situations where environment variables are passed directly to handlers or\n\t* are otherwise difficult to access during initialization.\n\t*/\n\tupsertKeysFromEnv() {\n\t\tif (this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKey]) {\n\t\t\tif (!this.signingKey) this.signingKey = String(this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKey]);\n\t\t\tthis.client[\"inngestApi\"].setSigningKey(this.signingKey);\n\t\t}\n\t\tif (this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKeyFallback]) {\n\t\t\tif (!this.signingKeyFallback) this.signingKeyFallback = String(this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKeyFallback]);\n\t\t\tthis.client[\"inngestApi\"].setSigningKeyFallback(this.signingKeyFallback);\n\t\t}\n\t\tif (!this.client[\"eventKeySet\"]() && this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestEventKey]) this.client.setEventKey(String(this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestEventKey]));\n\t\tif (this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestDevServerUrl]) this.log(\"warn\", `Use of ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestDevServerUrl} has been deprecated in v3; please use ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestBaseUrl} instead. See https://www.inngest.com/docs/sdk/migration`);\n\t}\n\t/**\n\t* Validate the signature of a request and return the signing key used to\n\t* validate it.\n\t*/\n\tasync validateSignature(sig, body) {\n\t\ttry {\n\t\t\tif (this.skipSignatureValidation) return {\n\t\t\t\tsuccess: true,\n\t\t\t\tkeyUsed: \"\"\n\t\t\t};\n\t\t\tif (this._mode && !this._mode.isCloud) return {\n\t\t\t\tsuccess: true,\n\t\t\t\tkeyUsed: \"\"\n\t\t\t};\n\t\t\tif (!this.signingKey) throw new Error(`No signing key found in client options or ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKey} env var. Find your keys at https://app.inngest.com/secrets`);\n\t\t\tif (!sig) throw new Error(`No ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature} provided`);\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tkeyUsed: new RequestSignature(sig).verifySignature({\n\t\t\t\t\tbody,\n\t\t\t\t\tallowExpiredSignatures: this.allowExpiredSignatures,\n\t\t\t\t\tsigningKey: this.signingKey,\n\t\t\t\t\tsigningKeyFallback: this.signingKeyFallback\n\t\t\t\t})\n\t\t\t};\n\t\t} catch (err) {\n\t\t\treturn {\n\t\t\t\tsuccess: false,\n\t\t\t\terr\n\t\t\t};\n\t\t}\n\t}\n\tgetResponseSignature(key, body) {\n\t\tconst now = Date.now();\n\t\treturn `t=${now}&s=${(0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_19__.signDataWithKey)(body, key, now.toString())}`;\n\t}\n\t/**\n\t* Log to stdout/stderr if the log level is set to include the given level.\n\t* The default log level is `\"info\"`.\n\t*\n\t* This is an abstraction over `console.log` and will try to use the correct\n\t* method for the given log level.  For example, `log(\"error\", \"foo\")` will\n\t* call `console.error(\"foo\")`.\n\t*/\n\tlog(level, ...args) {\n\t\tconst logLevels$1 = [\n\t\t\t\"debug\",\n\t\t\t\"info\",\n\t\t\t\"warn\",\n\t\t\t\"error\",\n\t\t\t\"fatal\",\n\t\t\t\"silent\"\n\t\t];\n\t\tconst logLevelSetting = logLevels$1.indexOf(this.logLevel);\n\t\tif (logLevels$1.indexOf(level) >= logLevelSetting) {\n\t\t\tlet logger = console.log;\n\t\t\tif (Object.hasOwn(console, level)) logger = console[level];\n\t\t\tlogger(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.logPrefix} ${level} -`, ...args);\n\t\t}\n\t}\n};\nvar RequestSignature = class {\n\ttimestamp;\n\tsignature;\n\tconstructor(sig) {\n\t\tconst params = new URLSearchParams(sig);\n\t\tthis.timestamp = params.get(\"t\") || \"\";\n\t\tthis.signature = params.get(\"s\") || \"\";\n\t\tif (!this.timestamp || !this.signature) throw new Error(`Invalid ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature} provided`);\n\t}\n\thasExpired(allowExpiredSignatures) {\n\t\tif (allowExpiredSignatures) return false;\n\t\treturn Date.now() - (/* @__PURE__ */ new Date(Number.parseInt(this.timestamp) * 1e3)).valueOf() > 1e3 * 60 * 5;\n\t}\n\t#verifySignature({ body, signingKey, allowExpiredSignatures }) {\n\t\tif (this.hasExpired(allowExpiredSignatures)) throw new Error(\"Signature has expired\");\n\t\tif ((0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_19__.signDataWithKey)(body, signingKey, this.timestamp) !== this.signature) throw new Error(\"Invalid signature\");\n\t}\n\tverifySignature({ body, signingKey, signingKeyFallback, allowExpiredSignatures }) {\n\t\ttry {\n\t\t\tthis.#verifySignature({\n\t\t\t\tbody,\n\t\t\t\tsigningKey,\n\t\t\t\tallowExpiredSignatures\n\t\t\t});\n\t\t\treturn signingKey;\n\t\t} catch (err) {\n\t\t\tif (!signingKeyFallback) throw err;\n\t\t\tthis.#verifySignature({\n\t\t\t\tbody,\n\t\t\t\tsigningKey: signingKeyFallback,\n\t\t\t\tallowExpiredSignatures\n\t\t\t});\n\t\t\treturn signingKeyFallback;\n\t\t}\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=InngestCommHandler.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RDb21tSGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUQ7QUFDVDtBQUNtTTtBQUN2RztBQUN0RDtBQUNWO0FBQ21CO0FBQ1A7QUFDc0Y7QUFDM0Y7QUFDeEI7QUFDd0I7QUFDckI7QUFDSTtBQUNOO0FBQ0c7QUFDUjtBQUNyQjtBQUNFO0FBQ0Q7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBDQUFRO0FBQ2xDLFNBQVMsMENBQVE7QUFDakIsVUFBVSwyQ0FBUztBQUNuQixXQUFXLDJDQUFTO0FBQ3BCLFFBQVEsMENBQVE7QUFDaEIsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCw4QkFBOEI7QUFDL0UsZ0NBQWdDLHVCQUF1QjtBQUN2RCx3Q0FBd0MsaUJBQWlCO0FBQ3pELFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLDhEQUFhO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCx5REFBUyxFQUFFLGdIQUFnSDtBQUN4TDtBQUNBO0FBQ0Esa0NBQWtDLHlEQUFTLEVBQUU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osd0NBQXdDLElBQUk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUixzQkFBc0IsSUFBSTtBQUMxQiwyREFBMkQsR0FBRyxHQUFHO0FBQ2pFLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx1REFBTztBQUN6RCxrREFBa0QsdURBQU87QUFDekQ7QUFDQTtBQUNBLGtCQUFrQiwyQ0FBTSxDQUFDLGdEQUFTO0FBQ2xDLGlEQUFpRCxvQkFBb0IsZ0JBQWdCLGdCQUFnQjtBQUNyRztBQUNBLEdBQUcscUNBQXFDLHVEQUFPO0FBQy9DO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8seUNBQVksV0FBVyx5Q0FBWSxpQkFBaUIseUNBQVksSUFBSSwyREFBVyxDQUFDO0FBQ3ZGO0FBQ0E7QUFDQSxtQkFBbUIseUNBQU8sRUFBRSwyQ0FBTSxzQkFBc0IsMkNBQVM7QUFDakUsd0RBQXdELG9CQUFvQixnQkFBZ0IsK0JBQStCO0FBQzNIO0FBQ0EsR0FBRyxzQ0FBc0MsdURBQU87QUFDaEQsK0JBQStCLHlEQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsdURBQU8sZ0NBQWdDLHVEQUFPLDhDQUE4Qyx3RUFBd0I7QUFDL0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx1REFBTyxxQ0FBcUMsdURBQU8sZ0RBQWdELDBFQUEwQjtBQUN4SztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHVEQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsdURBQU87QUFDNUM7QUFDQTtBQUNBLDhEQUE4RCw2REFBYTtBQUMzRSxTQUFTLGlFQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbUVBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtRUFBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSx5REFBUztBQUMxRTtBQUNBO0FBQ0EsdUNBQXVDLDBFQUF5QjtBQUNoRTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsMERBQVUsNENBQTRDLDBEQUFVO0FBQzVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtFQUFZO0FBQ2hDO0FBQ0EscUpBQXFKLDBEQUFVO0FBQy9KO0FBQ0EsTUFBTSw4REFBYTtBQUNuQjtBQUNBO0FBQ0EseUJBQXlCLGdFQUFnQjtBQUN6QztBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQSxHQUFHO0FBQ0g7QUFDQSx3Q0FBd0MsZUFBZTtBQUN2RDtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1IsR0FBRztBQUNIO0FBQ0EsTUFBTSwrREFBYztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0gsc0JBQXNCLHdEQUFPO0FBQzdCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGlEQUFJO0FBQzlEO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRUFBZTtBQUNsQztBQUNBLG9EQUFvRCxpRUFBaUI7QUFDckUsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsNERBQTRELHdEQUFpQjtBQUM3RTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDhCQUE4QjtBQUNoRixpQ0FBaUMsdUJBQXVCO0FBQ3hELHlDQUF5QyxpQkFBaUI7QUFDMUQsWUFBWTtBQUNaO0FBQ0EsUUFBUTtBQUNSLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCwwREFBVTtBQUMvRCw0Q0FBNEMsMERBQVU7QUFDdEQ7QUFDQSxrQ0FBa0MsMERBQVU7QUFDNUMsR0FBRztBQUNIO0FBQ0E7QUFDQSxvREFBb0QsYUFBYSxJQUFJLFNBQVM7QUFDOUU7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDhEQUFTO0FBQ3pELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFDQUFxQztBQUNoRTtBQUNBLFlBQVksOERBQVc7QUFDdkIsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0EscUJBQXFCLHdGQUEyQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsaUVBQWlCO0FBQ3RELEtBQUs7QUFDTDtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxjQUFjLCtDQUFRO0FBQ3RCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSiwyQkFBMkIsTUFBTTtBQUNqQztBQUNBLElBQUk7QUFDSiwyQkFBMkIsT0FBTztBQUNsQztBQUNBLFVBQVUsd0RBQWlCO0FBQzNCO0FBQ0EsaUJBQWlCLENBQUMsMERBQVUsNkVBQTZFLE1BQU0sZ0JBQWdCLE1BQU0sa0NBQWtDO0FBQ3ZLO0FBQ0E7QUFDQSxNQUFNO0FBQ04sVUFBVSx3REFBaUI7QUFDM0I7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxZQUFZLDhEQUFTO0FBQ3JCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILCtFQUErRSxZQUFZO0FBQzNGO0FBQ0E7QUFDQSw0QkFBNEIsdURBQXVEO0FBQ25GO0FBQ0E7QUFDQSxnRkFBZ0YsMERBQVU7QUFDMUY7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHFEQUFxRCwwREFBVTtBQUMvRDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxTQUFTO0FBQ3BGO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsSUFBSSxDQUFDLDBEQUFVLGtDQUFrQyx3RkFBMkI7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxXQUFXLDhEQUFTLENBQUMsbUVBQWM7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBEQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUIsUUFBUSxpRUFBWTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxpRUFBWTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsSUFBSTtBQUNsRDtBQUNBLGFBQWEsbUVBQVksV0FBVyxpRUFBWTtBQUNoRDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQyxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0dBQXNHO0FBQzVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvQ0FBb0M7QUFDckQsWUFBWSw4REFBUyxDQUFDLG1FQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvQ0FBb0M7QUFDcEQsV0FBVyw4REFBUyxDQUFDLG1FQUFjO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxlQUFlO0FBQ2YsZUFBZSx3RkFBMkI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLDBEQUFVO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixpRkFBaUYseURBQVM7QUFDMUY7QUFDQSxzQkFBc0IsZ0VBQWEsQ0FBQyxxREFBSztBQUN6QztBQUNBO0FBQ0Esa0JBQWtCLG9DQUFvQztBQUN0RCxhQUFhLDhEQUFTLENBQUMsbUVBQWMsNkNBQTZDLFNBQVM7QUFDM0Y7QUFDQTtBQUNBLGVBQWUsQ0FBQyxxREFBSztBQUNyQjtBQUNBLGtCQUFrQixvQ0FBb0M7QUFDdEQ7QUFDQTtBQUNBLE9BQU8sR0FBRztBQUNWO0FBQ0EsNEVBQTRFLHlEQUFTO0FBQ3JGO0FBQ0E7QUFDQSw4RUFBOEUseURBQVM7QUFDdkY7QUFDQTtBQUNBLFlBQVksNkJBQTZCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVFQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUFVO0FBQ25CLHNEQUFzRCxDQUFDLDBEQUFVLG1DQUFtQztBQUNwRyxRQUFRO0FBQ1IsYUFBYSw4REFBUyxDQUFDLHVFQUFlO0FBQ3RDO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsWUFBWSx5REFBVTtBQUN0QixZQUFZLGlEQUFVO0FBQ3RCLGNBQWMsdUVBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9DQUFvQztBQUN2RCxjQUFjLDhEQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0NBQW9DO0FBQ3RELGFBQWEsOERBQVMsQ0FBQyx1RUFBZTtBQUN0QztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUFVO0FBQ25CLFFBQVE7QUFDUixhQUFhLDhEQUFTLEdBQUcsK0JBQStCLDhDQUE4QyxVQUFVLFlBQVk7QUFDNUg7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMERBQVU7QUFDcEIsdURBQXVELENBQUMsMERBQVUsbUNBQW1DO0FBQ3JHLFVBQVU7QUFDVixRQUFRO0FBQ1IsYUFBYSw4REFBUztBQUN0QjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG9DQUFvQztBQUN0RCxhQUFhLDhEQUFTO0FBQ3RCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQVU7QUFDbkIsUUFBUTtBQUNSLGFBQWEsOERBQVMsR0FBRyx1Q0FBdUMsWUFBWSxnR0FBZ0c7QUFDNUs7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsMERBQVU7QUFDOUM7QUFDQTtBQUNBLFVBQVUsOERBQVM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZUFBZSxvQ0FBb0M7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsZ0lBQWdJLHlEQUFTO0FBQ3pJO0FBQ0EsS0FBSyxtQkFBbUIsK0RBQWMsVUFBVSx1REFBTztBQUN2RCxnRUFBZ0Usd0RBQVE7QUFDeEUsNkRBQTZELDBEQUFVO0FBQ3ZFLEtBQUs7QUFDTCxxQkFBcUIsd0RBQVE7QUFDN0IsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0NBQW9DO0FBQ3RELGFBQWEsOERBQVMsQ0FBQyxtRUFBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBUyxHQUFHLGlDQUFpQztBQUN6RCxpQkFBaUIsb0NBQW9DO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUIsa0VBQTJCO0FBQzVDO0FBQ0E7QUFDQSxZQUFZLDhEQUFTO0FBQ3JCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsaUJBQWlCLG9DQUFvQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxRQUFRLDBEQUFVLG1CQUFtQix3REFBUTtBQUM3QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0QkFBNEI7QUFDeEM7QUFDQTtBQUNBLFdBQVcsOERBQVM7QUFDcEI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTywwREFBVSxtQkFBbUIsd0RBQVE7QUFDNUMsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsVUFBVSw4REFBUztBQUNuQjtBQUNBLFFBQVEsbUVBQWM7QUFDdEIsS0FBSztBQUNMLGVBQWUsb0NBQW9DO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLElBQUk7QUFDSixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnRkFBZ0Y7QUFDM0YsK0RBQStELFdBQVc7QUFDMUUsMEJBQTBCLG1FQUFXO0FBQ3JDLFFBQVEsaUNBQWlDO0FBQ3pDLG9CQUFvQixnRUFBZ0IseUVBQXlFLGdFQUFnQjtBQUM3SCxpQkFBaUIsbUVBQVk7QUFDN0IsMkJBQTJCLHNFQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEtBQUssZ0VBQWdCLFNBQVMsK0NBQStDO0FBQzdFLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sSUFBSTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0NBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLLGdFQUFnQixTQUFTLCtDQUErQztBQUM3RSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxJQUFJO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsK0NBQVEsc0JBQXNCLCtDQUFRO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUssZ0VBQWdCLFNBQVMsK0NBQStDO0FBQzdFLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLElBQUk7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywrQ0FBUSxzQkFBc0IsK0NBQVE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxpQkFBaUIsMkRBQW9CO0FBQ3JDO0FBQ0Esd0VBQXdFO0FBQ3hFLHFEQUFxRCxVQUFVLE1BQU0sT0FBTztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsdURBQU87QUFDdEQsK0NBQStDLHVEQUFPO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpREFBTyxDQUFDO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFrRDtBQUM5RTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnRUFBZTtBQUM1QixPQUFPLDhEQUFhO0FBQ3BCO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3Q0FBd0M7QUFDbkU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGlEQUFpRDtBQUNqRDtBQUNBLFlBQVkseUNBQXlDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUJBQWlCLGlEQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw4REFBYTtBQUM3QixhQUFhLDBFQUFrQixrQ0FBa0Msb0VBQVk7QUFDN0UsSUFBSSxtREFBbUQsb0VBQVk7QUFDbkUsNkNBQTZDLHlEQUFTO0FBQ3REO0FBQ0EsZUFBZSx1RUFBcUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBUztBQUNwQjtBQUNBO0FBQ0EsT0FBTywwREFBVSxtQkFBbUIsd0RBQVE7QUFDNUMsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywwQkFBMEIsRUFBRSxZQUFZLE9BQU87QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLDJDQUEyQyxFQUFFLFlBQVk7QUFDekQsaUJBQWlCLGVBQWUsV0FBVztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxrQ0FBa0M7QUFDdkMsSUFBSTtBQUNKO0FBQ0E7QUFDQSwyQ0FBMkMsRUFBRSxZQUFZO0FBQ3pELGlCQUFpQixlQUFlLFdBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVEQUFPO0FBQ3RCLDJEQUEyRCx1REFBTztBQUNsRTtBQUNBO0FBQ0EsZUFBZSx1REFBTztBQUN0QiwyRUFBMkUsdURBQU87QUFDbEY7QUFDQTtBQUNBLGdEQUFnRCx1REFBTywyREFBMkQsdURBQU87QUFDekgsZUFBZSx1REFBTyxrREFBa0QsdURBQU8sc0JBQXNCLDJCQUEyQixhQUFhLHVEQUFPLGlCQUFpQjtBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0YsdURBQU8sb0JBQW9CO0FBQ2pILG1DQUFtQywwREFBVSxZQUFZO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLElBQUksS0FBSyxpRUFBZSw0QkFBNEI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlEQUFTLEVBQUUsRUFBRSxPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLDBEQUFVLFlBQVk7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQ0FBMEM7QUFDOUQ7QUFDQSxNQUFNLGlFQUFlO0FBQ3JCO0FBQ0EsbUJBQW1CLDhEQUE4RDtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvSW5uZ2VzdENvbW1IYW5kbGVyLmpzPzE5NWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXN5bmNDdHggfSBmcm9tIFwiLi9leGVjdXRpb24vYWxzLmpzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IEV4ZWN1dGlvblZlcnNpb24sIGRlYnVnUHJlZml4LCBkZWZhdWx0SW5uZ2VzdEFwaUJhc2VVcmwsIGRlZmF1bHRJbm5nZXN0RXZlbnRCYXNlVXJsLCBkZWZhdWx0TWF4UmV0cmllcywgZHVtbXlFdmVudEtleSwgZW52S2V5cywgZm9yd2FyZGVkSGVhZGVycywgaGVhZGVyS2V5cywgbG9nUHJlZml4LCBwcm9iZSwgcXVlcnlLZXlzLCBzeW5jS2luZCB9IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0cy5qc1wiO1xuaW1wb3J0IHsgQXN5bmNSZXNwb25zZVR5cGUsIFN0ZXBNb2RlLCBTdGVwT3BDb2RlLCBmdW5jdGlvbkNvbmZpZ1NjaGVtYSwgaW5CYW5kU3luY1JlcXVlc3RCb2R5U2NoZW1hLCBsb2dMZXZlbHMgfSBmcm9tIFwiLi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IFBSRUZFUlJFRF9FWEVDVVRJT05fVkVSU0lPTiB9IGZyb20gXCIuL2V4ZWN1dGlvbi9Jbm5nZXN0RXhlY3V0aW9uLmpzXCI7XG5pbXBvcnQgeyByZXRocm93RXJyb3IsIHNlcmlhbGl6ZUVycm9yIH0gZnJvbSBcIi4uL2hlbHBlcnMvZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBmZXRjaEFsbEZuRGF0YSwgcGFyc2VGbkRhdGEsIHVuZGVmaW5lZFRvTnVsbCB9IGZyb20gXCIuLi9oZWxwZXJzL2Z1bmN0aW9ucy5qc1wiO1xuaW1wb3J0IHsgaGFzaEV2ZW50S2V5LCBoYXNoU2lnbmluZ0tleSwgc3RyaW5naWZ5IH0gZnJvbSBcIi4uL2hlbHBlcnMvc3RyaW5ncy5qc1wiO1xuaW1wb3J0IHsgTW9kZSwgYWxsUHJvY2Vzc0VudiwgZGV2U2VydmVySG9zdCwgZ2V0RmV0Y2gsIGdldE1vZGUsIGdldFBsYXRmb3JtTmFtZSwgaW5uZ2VzdEhlYWRlcnMsIHBhcnNlQXNCb29sZWFuLCBwbGF0Zm9ybVN1cHBvcnRzU3RyZWFtaW5nIH0gZnJvbSBcIi4uL2hlbHBlcnMvZW52LmpzXCI7XG5pbXBvcnQgeyBkZXZTZXJ2ZXJBdmFpbGFibGUsIGRldlNlcnZlclVybCB9IGZyb20gXCIuLi9oZWxwZXJzL2RldnNlcnZlci5qc1wiO1xuaW1wb3J0IHsgZW51bUZyb21WYWx1ZSB9IGZyb20gXCIuLi9oZWxwZXJzL2VudW0uanNcIjtcbmltcG9ydCB7IGZldGNoV2l0aEF1dGhGYWxsYmFjaywgc2lnbkRhdGFXaXRoS2V5IH0gZnJvbSBcIi4uL2hlbHBlcnMvbmV0LmpzXCI7XG5pbXBvcnQgeyBydW5Bc1Byb21pc2UgfSBmcm9tIFwiLi4vaGVscGVycy9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgU2VydmVyVGltaW5nIH0gZnJvbSBcIi4uL2hlbHBlcnMvU2VydmVyVGltaW5nLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTdHJlYW0gfSBmcm9tIFwiLi4vaGVscGVycy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IElubmdlc3RGdW5jdGlvbiB9IGZyb20gXCIuL0lubmdlc3RGdW5jdGlvbi5qc1wiO1xuaW1wb3J0IHsgX2ludGVybmFscyB9IGZyb20gXCIuL2V4ZWN1dGlvbi92MS5qc1wiO1xuaW1wb3J0IERlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuaW1wb3J0IHsgdWxpZCB9IGZyb20gXCJ1bGlkXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92M1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvSW5uZ2VzdENvbW1IYW5kbGVyLnRzXG4vKipcbiogQSBzY2hlbWEgZm9yIHRoZSByZXNwb25zZSBmcm9tIElubmdlc3Qgd2hlbiByZWdpc3RlcmluZy5cbiovXG5jb25zdCByZWdpc3RlclJlc1NjaGVtYSA9IHoub2JqZWN0KHtcblx0c3RhdHVzOiB6Lm51bWJlcigpLmRlZmF1bHQoMjAwKSxcblx0c2tpcHBlZDogei5ib29sZWFuKCkub3B0aW9uYWwoKS5kZWZhdWx0KGZhbHNlKSxcblx0bW9kaWZpZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCkuZGVmYXVsdChmYWxzZSksXG5cdGVycm9yOiB6LnN0cmluZygpLmRlZmF1bHQoXCJTdWNjZXNzZnVsbHkgcmVnaXN0ZXJlZFwiKVxufSk7XG4vKipcbiogYElubmdlc3RDb21tSGFuZGxlcmAgaXMgYSBjbGFzcyBmb3IgaGFuZGxpbmcgaW5jb21pbmcgcmVxdWVzdHMgZnJvbSBJbm5nZXN0IChvclxuKiBJbm5nZXN0J3MgdG9vbGluZyBzdWNoIGFzIHRoZSBkZXYgc2VydmVyIG9yIENMSSkgYW5kIHRha2luZyBhcHByb3ByaWF0ZVxuKiBhY3Rpb24gZm9yIGFueSBzZXJ2ZWQgZnVuY3Rpb25zLlxuKlxuKiBBbGwgaGFuZGxlcnMgKE5leHQuanMsIFJlZHdvb2RKUywgUmVtaXgsIERlbm8gRnJlc2gsIGV0Yy4pIGFyZSBjcmVhdGVkIHVzaW5nXG4qIHRoaXMgY2xhc3M7IHRoZSBleHBvc2VkIGBzZXJ2ZWAgZnVuY3Rpb24gd2lsbCAtIG1vc3QgY29tbW9ubHkgLSBjcmVhdGUgYW5cbiogaW5zdGFuY2Ugb2YgYElubmdlc3RDb21tSGFuZGxlcmAgYW5kIHRoZW4gcmV0dXJuIGBpbnN0YW5jZS5jcmVhdGVIYW5kbGVyKClgLlxuKlxuKiBTZWUgaW5kaXZpZHVhbCBwYXJhbWV0ZXIgZGV0YWlscyBmb3IgbW9yZSBpbmZvcm1hdGlvbiwgb3Igc2VlIHRoZVxuKiBzb3VyY2UgY29kZSBmb3IgYW4gZXhpc3RpbmcgaGFuZGxlciwgZS5nLlxuKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2lubmdlc3QvaW5uZ2VzdC1qcy9ibG9iL21haW4vc3JjL25leHQudHN9XG4qXG4qIEBleGFtcGxlXG4qIGBgYFxuKiAvLyBteS1jdXN0b20taGFuZGxlci50c1xuKiBpbXBvcnQge1xuKiAgIElubmdlc3RDb21tSGFuZGxlcixcbiogICB0eXBlIFNlcnZlSGFuZGxlck9wdGlvbnMsXG4qIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Jbm5nZXN0Q29tbUhhbmRsZXJcIjtcbipcbiogZXhwb3J0IGNvbnN0IHNlcnZlID0gKG9wdGlvbnM6IFNlcnZlSGFuZGxlck9wdGlvbnMpID0+IHtcbiogICBjb25zdCBoYW5kbGVyID0gbmV3IElubmdlc3RDb21tSGFuZGxlcih7XG4qICAgICBmcmFtZXdvcmtOYW1lOiBcIm15LWN1c3RvbS1oYW5kbGVyXCIsXG4qICAgICAuLi5vcHRpb25zLFxuKiAgICAgaGFuZGxlcjogKHJlcTogUmVxdWVzdCkgPT4ge1xuKiAgICAgICByZXR1cm4ge1xuKiAgICAgICAgIGJvZHk6ICgpID0+IHJlcS5qc29uKCksXG4qICAgICAgICAgaGVhZGVyczogKGtleSkgPT4gcmVxLmhlYWRlcnMuZ2V0KGtleSksXG4qICAgICAgICAgbWV0aG9kOiAoKSA9PiByZXEubWV0aG9kLFxuKiAgICAgICAgIHVybDogKCkgPT4gbmV3IFVSTChyZXEudXJsLCBgaHR0cHM6Ly8ke3JlcS5oZWFkZXJzLmdldChcImhvc3RcIikgfHwgXCJcIn1gKSxcbiogICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZTogKHsgYm9keSwgc3RhdHVzLCBoZWFkZXJzIH0pID0+IHtcbiogICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoYm9keSwgeyBzdGF0dXMsIGhlYWRlcnMgfSk7XG4qICAgICAgICAgfSxcbiogICAgICAgfTtcbiogICAgIH0sXG4qICAgfSk7XG4qXG4qICAgcmV0dXJuIGhhbmRsZXIuY3JlYXRlSGFuZGxlcigpO1xuKiB9O1xuKiBgYGBcbipcbiogQHB1YmxpY1xuKi9cbnZhciBJbm5nZXN0Q29tbUhhbmRsZXIgPSBjbGFzcyB7XG5cdC8qKlxuXHQqIFRoZSBJRCBvZiB0aGlzIHNlcnZlIGhhbmRsZXIsIGUuZy4gYFwibXktYXBwXCJgLiBJdCdzIHJlY29tbWVuZGVkIHRoYXQgdGhpc1xuXHQqIHZhbHVlIHJlcHJlc2VudHMgdGhlIG92ZXJhcmNoaW5nIGFwcC9zZXJ2aWNlIHRoYXQgdGhpcyBzZXQgb2YgZnVuY3Rpb25zIGlzXG5cdCogYmVpbmcgc2VydmVkIGZyb20uXG5cdCovXG5cdGlkO1xuXHQvKipcblx0KiBUaGUgaGFuZGxlciBzcGVjaWZpZWQgZHVyaW5nIGluc3RhbnRpYXRpb24gb2YgdGhlIGNsYXNzLlxuXHQqL1xuXHRoYW5kbGVyO1xuXHQvKipcblx0KiBUaGUgVVJMIG9mIHRoZSBJbm5nZXN0IGZ1bmN0aW9uIHJlZ2lzdHJhdGlvbiBlbmRwb2ludC5cblx0Ki9cblx0aW5uZ2VzdFJlZ2lzdGVyVXJsO1xuXHQvKipcblx0KiBUaGUgbmFtZSBvZiB0aGUgZnJhbWV3b3JrIHRoaXMgaGFuZGxlciBpcyBkZXNpZ25lZCBmb3IuIFNob3VsZCBiZVxuXHQqIGxvd2VyY2FzZSwgYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgaW5jbHVzaXZlIG9mIGAtYCBhbmQgYC9gLlxuXHQqL1xuXHRmcmFtZXdvcmtOYW1lO1xuXHQvKipcblx0KiBUaGUgc2lnbmluZyBrZXkgdXNlZCB0byB2YWxpZGF0ZSByZXF1ZXN0cyBmcm9tIElubmdlc3QuIFRoaXMgaXNcblx0KiBpbnRlbnRpb25hbGx5IG11dGFibGUgc28gdGhhdCB3ZSBjYW4gcGljayB1cCB0aGUgc2lnbmluZyBrZXkgZnJvbSB0aGVcblx0KiBlbnZpcm9ubWVudCBkdXJpbmcgZXhlY3V0aW9uIGlmIG5lZWRlZC5cblx0Ki9cblx0c2lnbmluZ0tleTtcblx0LyoqXG5cdCogVGhlIHNhbWUgYXMgc2lnbmluZ0tleSwgZXhjZXB0IHVzZWQgYXMgYSBmYWxsYmFjayB3aGVuIGF1dGggZmFpbHMgdXNpbmcgdGhlXG5cdCogcHJpbWFyeSBzaWduaW5nIGtleS5cblx0Ki9cblx0c2lnbmluZ0tleUZhbGxiYWNrO1xuXHQvKipcblx0KiBBIHByb3BlcnR5IHRoYXQgY2FuIGJlIHNldCB0byBpbmRpY2F0ZSB3aGV0aGVyIHdlIGJlbGlldmUgd2UgYXJlIGluXG5cdCogcHJvZHVjdGlvbiBtb2RlLlxuXHQqXG5cdCogU2hvdWxkIGJlIHNldCBldmVyeSB0aW1lIGEgcmVxdWVzdCBpcyByZWNlaXZlZC5cblx0Ki9cblx0X21vZGU7XG5cdC8qKlxuXHQqIFRoZSBsb2NhbGl6ZWQgYGZldGNoYCBpbXBsZW1lbnRhdGlvbiB1c2VkIGJ5IHRoaXMgaGFuZGxlci5cblx0Ki9cblx0ZmV0Y2g7XG5cdC8qKlxuXHQqIFRoZSBob3N0IHVzZWQgdG8gYWNjZXNzIHRoZSBJbm5nZXN0IHNlcnZlIGVuZHBvaW50LCBlLmcuOlxuXHQqXG5cdCogICAgIFwiaHR0cHM6Ly9teWFwcC5jb21cIlxuXHQqXG5cdCogQnkgZGVmYXVsdCwgdGhlIGxpYnJhcnkgd2lsbCB0cnkgdG8gaW5mZXIgdGhpcyB1c2luZyByZXF1ZXN0IGRldGFpbHMgc3VjaFxuXHQqIGFzIHRoZSBcIkhvc3RcIiBoZWFkZXIgYW5kIHJlcXVlc3QgcGF0aCwgYnV0IHNvbWV0aW1lcyB0aGlzIGlzbid0IHBvc3NpYmxlXG5cdCogKGUuZy4gd2hlbiBydW5uaW5nIGluIGEgbW9yZSBjb250cm9sbGVkIGVudmlyb25tZW50cyBzdWNoIGFzIEFXUyBMYW1iZGEgb3Jcblx0KiB3aGVuIGRlYWxpbmcgd2l0aCBwcm94aWVzL3JlZGlyZWN0cykuXG5cdCpcblx0KiBQcm92aWRlIHRoZSBjdXN0b20gaG9zdG5hbWUgaGVyZSB0byBlbnN1cmUgdGhhdCB0aGUgcGF0aCBpcyByZXBvcnRlZFxuXHQqIGNvcnJlY3RseSB3aGVuIHJlZ2lzdGVyaW5nIGZ1bmN0aW9ucyB3aXRoIElubmdlc3QuXG5cdCpcblx0KiBUbyBhbHNvIHByb3ZpZGUgYSBjdXN0b20gcGF0aCwgdXNlIGBzZXJ2ZVBhdGhgLlxuXHQqL1xuXHRfc2VydmVIb3N0O1xuXHQvKipcblx0KiBUaGUgcGF0aCB0byB0aGUgSW5uZ2VzdCBzZXJ2ZSBlbmRwb2ludC4gZS5nLjpcblx0KlxuXHQqICAgICBcIi9zb21lL2xvbmcvcGF0aC90by9pbm5nZXN0L2VuZHBvaW50XCJcblx0KlxuXHQqIEJ5IGRlZmF1bHQsIHRoZSBsaWJyYXJ5IHdpbGwgdHJ5IHRvIGluZmVyIHRoaXMgdXNpbmcgcmVxdWVzdCBkZXRhaWxzIHN1Y2hcblx0KiBhcyB0aGUgXCJIb3N0XCIgaGVhZGVyIGFuZCByZXF1ZXN0IHBhdGgsIGJ1dCBzb21ldGltZXMgdGhpcyBpc24ndCBwb3NzaWJsZVxuXHQqIChlLmcuIHdoZW4gcnVubmluZyBpbiBhIG1vcmUgY29udHJvbGxlZCBlbnZpcm9ubWVudHMgc3VjaCBhcyBBV1MgTGFtYmRhIG9yXG5cdCogd2hlbiBkZWFsaW5nIHdpdGggcHJveGllcy9yZWRpcmVjdHMpLlxuXHQqXG5cdCogUHJvdmlkZSB0aGUgY3VzdG9tIHBhdGggKGV4Y2x1ZGluZyB0aGUgaG9zdG5hbWUpIGhlcmUgdG8gZW5zdXJlIHRoYXQgdGhlXG5cdCogcGF0aCBpcyByZXBvcnRlZCBjb3JyZWN0bHkgd2hlbiByZWdpc3RlcmluZyBmdW5jdGlvbnMgd2l0aCBJbm5nZXN0LlxuXHQqXG5cdCogVG8gYWxzbyBwcm92aWRlIGEgY3VzdG9tIGhvc3RuYW1lLCB1c2UgYHNlcnZlSG9zdGAuXG5cdCovXG5cdF9zZXJ2ZVBhdGg7XG5cdC8qKlxuXHQqIFRoZSBtaW5pbXVtIGxldmVsIHRvIGxvZyBmcm9tIHRoZSBJbm5nZXN0IHNlcnZlIGhhbmRsZXIuXG5cdCovXG5cdGxvZ0xldmVsO1xuXHRzdHJlYW1pbmc7XG5cdC8qKlxuXHQqIEEgcHJpdmF0ZSBjb2xsZWN0aW9uIG9mIGp1c3QgSW5uZ2VzdCBmdW5jdGlvbnMsIGFzIHRoZXkgaGF2ZSBiZWVuIHBhc3NlZFxuXHQqIHdoZW4gaW5zdGFudGlhdGluZyB0aGUgY2xhc3MuXG5cdCovXG5cdHJhd0Zucztcblx0Y2xpZW50O1xuXHQvKipcblx0KiBBIHByaXZhdGUgY29sbGVjdGlvbiBvZiBmdW5jdGlvbnMgdGhhdCBhcmUgYmVpbmcgc2VydmVkLiBUaGlzIG1hcCBpcyB1c2VkXG5cdCogdG8gZmluZCBhbmQgcmVnaXN0ZXIgZnVuY3Rpb25zIHdoZW4gaW50ZXJhY3Rpbmcgd2l0aCBJbm5nZXN0IENsb3VkLlxuXHQqL1xuXHRmbnMgPSB7fTtcblx0ZW52ID0gYWxsUHJvY2Vzc0VudigpO1xuXHRhbGxvd0V4cGlyZWRTaWduYXR1cmVzO1xuXHRfb3B0aW9ucztcblx0c2tpcFNpZ25hdHVyZVZhbGlkYXRpb247XG5cdGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcblx0XHR0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcblx0XHQvKipcblx0XHQqIHYyIC0+IHYzIG1pZ3JhdGlvbiBlcnJvci5cblx0XHQqXG5cdFx0KiBJZiBhIHNlcnZlIGhhbmRsZXIgaXMgcGFzc2VkIGEgY2xpZW50IGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgaXQnbGwgYmVcblx0XHQqIHNwcmVhZCBpbiB0byB0aGVzZSBvcHRpb25zLiBXZSBzaG91bGQgYmUgYWJsZSB0byBkZXRlY3QgdGhpcyBieSBwaWNraW5nXG5cdFx0KiB1cCBhIHVuaXF1ZSBwcm9wZXJ0eSBvbiB0aGUgb2JqZWN0LlxuXHRcdCovXG5cdFx0aWYgKE9iamVjdC5oYXNPd24ob3B0aW9ucywgXCJldmVudEtleVwiKSkgdGhyb3cgbmV3IEVycm9yKGAke2xvZ1ByZWZpeH0gWW91J3ZlIHBhc3NlZCBhbiBJbm5nZXN0IGNsaWVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8geW91ciBzZXJ2ZSBoYW5kbGVyLiBUaGlzIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgaW4gdjM7IHBsZWFzZSBwYXNzIHRoZSBJbm5nZXN0IGNsaWVudCBhcyB0aGUgXFxgY2xpZW50XFxgIHByb3BlcnR5IG9mIGFuIG9wdGlvbnMgb2JqZWN0IGluc3RlYWQuIFNlZSBodHRwczovL3d3dy5pbm5nZXN0LmNvbS9kb2NzL3Nkay9taWdyYXRpb25gKTtcblx0XHR0aGlzLmZyYW1ld29ya05hbWUgPSBvcHRpb25zLmZyYW1ld29ya05hbWU7XG5cdFx0dGhpcy5jbGllbnQgPSBvcHRpb25zLmNsaWVudDtcblx0XHRpZiAob3B0aW9ucy5pZCkgY29uc29sZS53YXJuKGAke2xvZ1ByZWZpeH0gVGhlIFxcYGlkXFxgIHNlcnZlIG9wdGlvbiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdjRgKTtcblx0XHR0aGlzLmlkID0gb3B0aW9ucy5pZCB8fCB0aGlzLmNsaWVudC5pZDtcblx0XHR0aGlzLmhhbmRsZXIgPSBvcHRpb25zLmhhbmRsZXI7XG5cdFx0LyoqXG5cdFx0KiBQcm92aWRlIGEgaGlkZGVuIG9wdGlvbiB0byBhbGxvdyBleHBpcmVkIHNpZ25hdHVyZXMgdG8gYmUgYWNjZXB0ZWQgZHVyaW5nXG5cdFx0KiB0ZXN0aW5nLlxuXHRcdCovXG5cdFx0dGhpcy5hbGxvd0V4cGlyZWRTaWduYXR1cmVzID0gQm9vbGVhbihhcmd1bWVudHNbXCIwXCJdPy5fX3Rlc3RpbmdBbGxvd0V4cGlyZWRTaWduYXR1cmVzKTtcblx0XHR0aGlzLnJhd0ZucyA9IG9wdGlvbnMuZnVuY3Rpb25zPy5maWx0ZXIoQm9vbGVhbikgPz8gW107XG5cdFx0aWYgKHRoaXMucmF3Rm5zLmxlbmd0aCAhPT0gKG9wdGlvbnMuZnVuY3Rpb25zID8/IFtdKS5sZW5ndGgpIGNvbnNvbGUud2FybihgU29tZSBmdW5jdGlvbnMgcGFzc2VkIHRvIHNlcnZlKCkgYXJlIHVuZGVmaW5lZCBhbmQgbWlzY29uZmlndXJlZC4gIFBsZWFzZSBjaGVjayB5b3VyIGltcG9ydHMuYCk7XG5cdFx0dGhpcy5mbnMgPSB0aGlzLnJhd0Zucy5yZWR1Y2UoKGFjYywgZm4pID0+IHtcblx0XHRcdGNvbnN0IGNvbmZpZ3MgPSBmbltcImdldENvbmZpZ1wiXSh7XG5cdFx0XHRcdGJhc2VVcmw6IG5ldyBVUkwoXCJodHRwczovL2V4YW1wbGUuY29tXCIpLFxuXHRcdFx0XHRhcHBQcmVmaXg6IHRoaXMuaWRcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgZm5zID0gY29uZmlncy5yZWR1Y2UoKGFjYyQxLCB7IGlkIH0sIGluZGV4KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Li4uYWNjJDEsXG5cdFx0XHRcdFx0W2lkXToge1xuXHRcdFx0XHRcdFx0Zm4sXG5cdFx0XHRcdFx0XHRvbkZhaWx1cmU6IEJvb2xlYW4oaW5kZXgpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fSwge30pO1xuXHRcdFx0Y29uZmlncy5mb3JFYWNoKCh7IGlkIH0pID0+IHtcblx0XHRcdFx0aWYgKGFjY1tpZF0pIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIGZ1bmN0aW9uIElEIFwiJHtpZH1cIjsgcGxlYXNlIGNoYW5nZSBhIGZ1bmN0aW9uJ3MgbmFtZSBvciBwcm92aWRlIGFuIGV4cGxpY2l0IElEIHRvIGF2b2lkIGNvbmZsaWN0cy5gKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4uYWNjLFxuXHRcdFx0XHQuLi5mbnNcblx0XHRcdH07XG5cdFx0fSwge30pO1xuXHRcdHRoaXMuaW5uZ2VzdFJlZ2lzdGVyVXJsID0gbmV3IFVSTChcIi9mbi9yZWdpc3RlclwiLCB0aGlzLmFwaUJhc2VVcmwpO1xuXHRcdHRoaXMuc2lnbmluZ0tleSA9IG9wdGlvbnMuc2lnbmluZ0tleTtcblx0XHR0aGlzLnNpZ25pbmdLZXlGYWxsYmFjayA9IG9wdGlvbnMuc2lnbmluZ0tleUZhbGxiYWNrO1xuXHRcdHRoaXMuX3NlcnZlSG9zdCA9IG9wdGlvbnMuc2VydmVIb3N0IHx8IHRoaXMuZW52W2VudktleXMuSW5uZ2VzdFNlcnZlSG9zdF07XG5cdFx0dGhpcy5fc2VydmVQYXRoID0gb3B0aW9ucy5zZXJ2ZVBhdGggfHwgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0U2VydmVQYXRoXTtcblx0XHR0aGlzLnNraXBTaWduYXR1cmVWYWxpZGF0aW9uID0gb3B0aW9ucy5za2lwU2lnbmF0dXJlVmFsaWRhdGlvbiB8fCBmYWxzZTtcblx0XHRjb25zdCBkZWZhdWx0TG9nTGV2ZWwgPSBcImluZm9cIjtcblx0XHR0aGlzLmxvZ0xldmVsID0gei5lbnVtKGxvZ0xldmVscykuZGVmYXVsdChkZWZhdWx0TG9nTGV2ZWwpLmNhdGNoKChjdHgpID0+IHtcblx0XHRcdHRoaXMubG9nKFwid2FyblwiLCBgVW5rbm93biBsb2cgbGV2ZWwgcGFzc2VkOiAke1N0cmluZyhjdHguaW5wdXQpfTsgZGVmYXVsdGluZyB0byAke2RlZmF1bHRMb2dMZXZlbH1gKTtcblx0XHRcdHJldHVybiBkZWZhdWx0TG9nTGV2ZWw7XG5cdFx0fSkucGFyc2Uob3B0aW9ucy5sb2dMZXZlbCB8fCB0aGlzLmVudltlbnZLZXlzLklubmdlc3RMb2dMZXZlbF0pO1xuXHRcdGlmICh0aGlzLmxvZ0xldmVsID09PSBcImRlYnVnXCIpIHtcblx0XHRcdC8qKlxuXHRcdFx0KiBgZGVidWdgIGlzIGFuIG9sZCBsaWJyYXJ5OyBzb21ldGltZXMgaXRzIHJ1bnRpbWUgZGV0ZWN0aW9uIGRvZXNuJ3Qgd29ya1xuXHRcdFx0KiBmb3IgbmV3ZXIgcGFpcmluZ3Mgb2YgZnJhbWV3b3JrL3J1bnRpbWUuXG5cdFx0XHQqXG5cdFx0XHQqIE9uZSBzaWxseSBzeW1wdG9tIG9mIHRoaXMgaXMgdGhhdCBgRGVidWcoKWAgcmV0dXJucyBhbiBhbm9ueW1vdXNcblx0XHRcdCogZnVuY3Rpb24gd2l0aCBubyBleHRyYSBwcm9wZXJ0aWVzIGluc3RlYWQgb2YgYSBgRGVidWdnZXJgIGluc3RhbmNlIGlmXG5cdFx0XHQqIHRoZSB3cm9uZyBjb2RlIGlzIGNvbnN1bWVkIGZvbGxvd2luZyBhIGJhZCBkZXRlY3Rpb24uIFRoaXMgcmVzdWx0cyBpblxuXHRcdFx0KiB0aGUgZm9sbG93aW5nIGAuZW5hYmxlKClgIGNhbGwgZmFpbGluZywgc28gd2UganVzdCB0cnkgY2FyZWZ1bGx5IHRvXG5cdFx0XHQqIGVuYWJsZSBpdCBoZXJlLlxuXHRcdFx0Ki9cblx0XHRcdGlmIChEZWJ1Zy5lbmFibGUgJiYgdHlwZW9mIERlYnVnLmVuYWJsZSA9PT0gXCJmdW5jdGlvblwiKSBEZWJ1Zy5lbmFibGUoYCR7ZGVidWdQcmVmaXh9OipgKTtcblx0XHR9XG5cdFx0Y29uc3QgZGVmYXVsdFN0cmVhbWluZ09wdGlvbiA9IGZhbHNlO1xuXHRcdHRoaXMuc3RyZWFtaW5nID0gei51bmlvbihbei5lbnVtKFtcImFsbG93XCIsIFwiZm9yY2VcIl0pLCB6LmxpdGVyYWwoZmFsc2UpXSkuZGVmYXVsdChkZWZhdWx0U3RyZWFtaW5nT3B0aW9uKS5jYXRjaCgoY3R4KSA9PiB7XG5cdFx0XHR0aGlzLmxvZyhcIndhcm5cIiwgYFVua25vd24gc3RyZWFtaW5nIG9wdGlvbiBwYXNzZWQ6ICR7U3RyaW5nKGN0eC5pbnB1dCl9OyBkZWZhdWx0aW5nIHRvICR7U3RyaW5nKGRlZmF1bHRTdHJlYW1pbmdPcHRpb24pfWApO1xuXHRcdFx0cmV0dXJuIGRlZmF1bHRTdHJlYW1pbmdPcHRpb247XG5cdFx0fSkucGFyc2Uob3B0aW9ucy5zdHJlYW1pbmcgfHwgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0U3RyZWFtaW5nXSk7XG5cdFx0dGhpcy5mZXRjaCA9IG9wdGlvbnMuZmV0Y2ggPyBnZXRGZXRjaChvcHRpb25zLmZldGNoKSA6IHRoaXMuY2xpZW50W1wiZmV0Y2hcIl07XG5cdH1cblx0LyoqXG5cdCogR2V0IHRoZSBBUEkgYmFzZSBVUkwgZm9yIHRoZSBJbm5nZXN0IEFQSS5cblx0KlxuXHQqIFRoaXMgaXMgYSBnZXR0ZXIgdG8gZW5jb3VyYWdlIGNoZWNraW5nIHRoZSBlbnZpcm9ubWVudCBmb3IgdGhlIEFQSSBiYXNlIFVSTFxuXHQqIGVhY2ggdGltZSBpdCdzIGFjY2Vzc2VkLCBhcyBpdCBtYXkgY2hhbmdlIGR1cmluZyBleGVjdXRpb24uXG5cdCovXG5cdGdldCBhcGlCYXNlVXJsKCkge1xuXHRcdHJldHVybiB0aGlzLl9vcHRpb25zLmJhc2VVcmwgfHwgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0QXBpQmFzZVVybF0gfHwgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0QmFzZVVybF0gfHwgdGhpcy5jbGllbnQuYXBpQmFzZVVybCB8fCBkZWZhdWx0SW5uZ2VzdEFwaUJhc2VVcmw7XG5cdH1cblx0LyoqXG5cdCogR2V0IHRoZSBldmVudCBBUEkgYmFzZSBVUkwgZm9yIHRoZSBJbm5nZXN0IEFQSS5cblx0KlxuXHQqIFRoaXMgaXMgYSBnZXR0ZXIgdG8gZW5jb3VyYWdlIGNoZWNraW5nIHRoZSBlbnZpcm9ubWVudCBmb3IgdGhlIGV2ZW50IEFQSVxuXHQqIGJhc2UgVVJMIGVhY2ggdGltZSBpdCdzIGFjY2Vzc2VkLCBhcyBpdCBtYXkgY2hhbmdlIGR1cmluZyBleGVjdXRpb24uXG5cdCovXG5cdGdldCBldmVudEFwaUJhc2VVcmwoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX29wdGlvbnMuYmFzZVVybCB8fCB0aGlzLmVudltlbnZLZXlzLklubmdlc3RFdmVudEFwaUJhc2VVcmxdIHx8IHRoaXMuZW52W2VudktleXMuSW5uZ2VzdEJhc2VVcmxdIHx8IHRoaXMuY2xpZW50LmV2ZW50QmFzZVVybCB8fCBkZWZhdWx0SW5uZ2VzdEV2ZW50QmFzZVVybDtcblx0fVxuXHQvKipcblx0KiBUaGUgaG9zdCB1c2VkIHRvIGFjY2VzcyB0aGUgSW5uZ2VzdCBzZXJ2ZSBlbmRwb2ludCwgZS5nLjpcblx0KlxuXHQqICAgICBcImh0dHBzOi8vbXlhcHAuY29tXCJcblx0KlxuXHQqIEJ5IGRlZmF1bHQsIHRoZSBsaWJyYXJ5IHdpbGwgdHJ5IHRvIGluZmVyIHRoaXMgdXNpbmcgcmVxdWVzdCBkZXRhaWxzIHN1Y2hcblx0KiBhcyB0aGUgXCJIb3N0XCIgaGVhZGVyIGFuZCByZXF1ZXN0IHBhdGgsIGJ1dCBzb21ldGltZXMgdGhpcyBpc24ndCBwb3NzaWJsZVxuXHQqIChlLmcuIHdoZW4gcnVubmluZyBpbiBhIG1vcmUgY29udHJvbGxlZCBlbnZpcm9ubWVudHMgc3VjaCBhcyBBV1MgTGFtYmRhIG9yXG5cdCogd2hlbiBkZWFsaW5nIHdpdGggcHJveGllcy9yZWRpcmVjdHMpLlxuXHQqXG5cdCogUHJvdmlkZSB0aGUgY3VzdG9tIGhvc3RuYW1lIGhlcmUgdG8gZW5zdXJlIHRoYXQgdGhlIHBhdGggaXMgcmVwb3J0ZWRcblx0KiBjb3JyZWN0bHkgd2hlbiByZWdpc3RlcmluZyBmdW5jdGlvbnMgd2l0aCBJbm5nZXN0LlxuXHQqXG5cdCogVG8gYWxzbyBwcm92aWRlIGEgY3VzdG9tIHBhdGgsIHVzZSBgc2VydmVQYXRoYC5cblx0Ki9cblx0Z2V0IHNlcnZlSG9zdCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fc2VydmVIb3N0IHx8IHRoaXMuZW52W2VudktleXMuSW5uZ2VzdFNlcnZlSG9zdF07XG5cdH1cblx0LyoqXG5cdCogVGhlIHBhdGggdG8gdGhlIElubmdlc3Qgc2VydmUgZW5kcG9pbnQuIGUuZy46XG5cdCpcblx0KiAgICAgXCIvc29tZS9sb25nL3BhdGgvdG8vaW5uZ2VzdC9lbmRwb2ludFwiXG5cdCpcblx0KiBCeSBkZWZhdWx0LCB0aGUgbGlicmFyeSB3aWxsIHRyeSB0byBpbmZlciB0aGlzIHVzaW5nIHJlcXVlc3QgZGV0YWlscyBzdWNoXG5cdCogYXMgdGhlIFwiSG9zdFwiIGhlYWRlciBhbmQgcmVxdWVzdCBwYXRoLCBidXQgc29tZXRpbWVzIHRoaXMgaXNuJ3QgcG9zc2libGVcblx0KiAoZS5nLiB3aGVuIHJ1bm5pbmcgaW4gYSBtb3JlIGNvbnRyb2xsZWQgZW52aXJvbm1lbnRzIHN1Y2ggYXMgQVdTIExhbWJkYSBvclxuXHQqIHdoZW4gZGVhbGluZyB3aXRoIHByb3hpZXMvcmVkaXJlY3RzKS5cblx0KlxuXHQqIFByb3ZpZGUgdGhlIGN1c3RvbSBwYXRoIChleGNsdWRpbmcgdGhlIGhvc3RuYW1lKSBoZXJlIHRvIGVuc3VyZSB0aGF0IHRoZVxuXHQqIHBhdGggaXMgcmVwb3J0ZWQgY29ycmVjdGx5IHdoZW4gcmVnaXN0ZXJpbmcgZnVuY3Rpb25zIHdpdGggSW5uZ2VzdC5cblx0KlxuXHQqIFRvIGFsc28gcHJvdmlkZSBhIGN1c3RvbSBob3N0bmFtZSwgdXNlIGBzZXJ2ZUhvc3RgLlxuXHQqXG5cdCogVGhpcyBpcyBhIGdldHRlciB0byBlbmNvdXJhZ2UgY2hlY2tpbmcgdGhlIGVudmlyb25tZW50IGZvciB0aGUgc2VydmUgcGF0aFxuXHQqIGVhY2ggdGltZSBpdCdzIGFjY2Vzc2VkLCBhcyBpdCBtYXkgY2hhbmdlIGR1cmluZyBleGVjdXRpb24uXG5cdCovXG5cdGdldCBzZXJ2ZVBhdGgoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3NlcnZlUGF0aCB8fCB0aGlzLmVudltlbnZLZXlzLklubmdlc3RTZXJ2ZVBhdGhdO1xuXHR9XG5cdGdldCBoYXNoZWRFdmVudEtleSgpIHtcblx0XHRpZiAoIXRoaXMuY2xpZW50W1wiZXZlbnRLZXlcIl0gfHwgdGhpcy5jbGllbnRbXCJldmVudEtleVwiXSA9PT0gZHVtbXlFdmVudEtleSkgcmV0dXJuO1xuXHRcdHJldHVybiBoYXNoRXZlbnRLZXkodGhpcy5jbGllbnRbXCJldmVudEtleVwiXSk7XG5cdH1cblx0Z2V0IGhhc2hlZFNpZ25pbmdLZXkoKSB7XG5cdFx0aWYgKCF0aGlzLnNpZ25pbmdLZXkpIHJldHVybjtcblx0XHRyZXR1cm4gaGFzaFNpZ25pbmdLZXkodGhpcy5zaWduaW5nS2V5KTtcblx0fVxuXHRnZXQgaGFzaGVkU2lnbmluZ0tleUZhbGxiYWNrKCkge1xuXHRcdGlmICghdGhpcy5zaWduaW5nS2V5RmFsbGJhY2spIHJldHVybjtcblx0XHRyZXR1cm4gaGFzaFNpZ25pbmdLZXkodGhpcy5zaWduaW5nS2V5RmFsbGJhY2spO1xuXHR9XG5cdC8qKlxuXHQqIFJldHVybnMgYSBgYm9vbGVhbmAgcmVwcmVzZW50aW5nIHdoZXRoZXIgdGhpcyBoYW5kbGVyIHdpbGwgc3RyZWFtIHJlc3BvbnNlc1xuXHQqIG9yIG5vdC4gVGFrZXMgaW50byBhY2NvdW50IHRoZSB1c2VyJ3MgcHJlZmVyZW5jZSBhbmQgdGhlIHBsYXRmb3JtJ3Ncblx0KiBjYXBhYmlsaXRpZXMuXG5cdCovXG5cdGFzeW5jIHNob3VsZFN0cmVhbShhY3Rpb25zKSB7XG5cdFx0aWYgKGF3YWl0IGFjdGlvbnMucXVlcnlTdHJpbmdXaXRoRGVmYXVsdHMoXCJ0ZXN0aW5nIGZvciBwcm9iZVwiLCBxdWVyeUtleXMuUHJvYmUpICE9PSB2b2lkIDApIHJldHVybiBmYWxzZTtcblx0XHRpZiAoIWFjdGlvbnMudHJhbnNmb3JtU3RyZWFtaW5nUmVzcG9uc2UpIHJldHVybiBmYWxzZTtcblx0XHRpZiAodGhpcy5zdHJlYW1pbmcgPT09IFwiZm9yY2VcIikgcmV0dXJuIHRydWU7XG5cdFx0cmV0dXJuIHRoaXMuc3RyZWFtaW5nID09PSBcImFsbG93XCIgJiYgcGxhdGZvcm1TdXBwb3J0c1N0cmVhbWluZyh0aGlzLmZyYW1ld29ya05hbWUsIHRoaXMuZW52KTtcblx0fVxuXHRhc3luYyBpc0lubmdlc3RSZXEoYWN0aW9ucykge1xuXHRcdGNvbnN0IHJlcU1lc3NhZ2UgPSBgY2hlY2tpbmcgaWYgdGhpcyBpcyBhbiBJbm5nZXN0IHJlcXVlc3RgO1xuXHRcdGNvbnN0IFtydW5JZCwgc2lnbmF0dXJlXSA9IGF3YWl0IFByb21pc2UuYWxsKFthY3Rpb25zLmhlYWRlcnMocmVxTWVzc2FnZSwgaGVhZGVyS2V5cy5Jbm5nZXN0UnVuSWQpLCBhY3Rpb25zLmhlYWRlcnMocmVxTWVzc2FnZSwgaGVhZGVyS2V5cy5TaWduYXR1cmUpXSk7XG5cdFx0cmV0dXJuIEJvb2xlYW4ocnVuSWQgJiYgdHlwZW9mIHNpZ25hdHVyZSA9PT0gXCJzdHJpbmdcIik7XG5cdH1cblx0LyoqXG5cdCogU3RhcnQgaGFuZGxpbmcgYSByZXF1ZXN0LCBzZXR0aW5nIHVwIGVudmlyb25tZW50cywgbW9kZXMsIGFuZCByZXR1cm5pbmdcblx0KiBzb21lIGhlbHBlcnMuXG5cdCovXG5cdGFzeW5jIGluaXRSZXF1ZXN0KC4uLmFyZ3MpIHtcblx0XHRjb25zdCB0aW1lciA9IG5ldyBTZXJ2ZXJUaW1pbmcoKTtcblx0XHRjb25zdCBhY3Rpb25zID0gYXdhaXQgdGhpcy5nZXRBY3Rpb25zKHRpbWVyLCAuLi5hcmdzKTtcblx0XHRjb25zdCBbZW52LCBleHBlY3RlZFNlcnZlcktpbmRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW2FjdGlvbnMuZW52Py4oXCJzdGFydGluZyB0byBoYW5kbGUgcmVxdWVzdFwiKSwgYWN0aW9ucy5oZWFkZXJzKFwiY2hlY2tpbmcgZXhwZWN0ZWQgc2VydmVyIGtpbmRcIiwgaGVhZGVyS2V5cy5Jbm5nZXN0U2VydmVyS2luZCldKTtcblx0XHR0aGlzLmVudiA9IHtcblx0XHRcdC4uLmFsbFByb2Nlc3NFbnYoKSxcblx0XHRcdC4uLmVudlxuXHRcdH07XG5cdFx0Y29uc3QgaGVhZGVyUHJvbWlzZXMgPSBmb3J3YXJkZWRIZWFkZXJzLm1hcChhc3luYyAoaGVhZGVyKSA9PiB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRoZWFkZXIsXG5cdFx0XHRcdHZhbHVlOiBhd2FpdCBhY3Rpb25zLmhlYWRlcnMoYGZldGNoaW5nICR7aGVhZGVyfSBmb3IgZm9yd2FyZGluZ2AsIGhlYWRlcilcblx0XHRcdH07XG5cdFx0fSk7XG5cdFx0Y29uc3QgaGVhZGVyc1RvRm9yd2FyZFAgPSBQcm9taXNlLmFsbChoZWFkZXJQcm9taXNlcykudGhlbigoZmV0Y2hlZEhlYWRlcnMpID0+IHtcblx0XHRcdHJldHVybiBmZXRjaGVkSGVhZGVycy5yZWR1Y2UoKGFjYywgeyBoZWFkZXIsIHZhbHVlIH0pID0+IHtcblx0XHRcdFx0aWYgKHZhbHVlKSBhY2NbaGVhZGVyXSA9IHZhbHVlO1xuXHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0fSwge30pO1xuXHRcdH0pO1xuXHRcdGNvbnN0IGdldEhlYWRlcnMgPSBhc3luYyAoKSA9PiAoe1xuXHRcdFx0Li4uaW5uZ2VzdEhlYWRlcnMoe1xuXHRcdFx0XHRlbnY6IHRoaXMuZW52LFxuXHRcdFx0XHRmcmFtZXdvcms6IHRoaXMuZnJhbWV3b3JrTmFtZSxcblx0XHRcdFx0Y2xpZW50OiB0aGlzLmNsaWVudCxcblx0XHRcdFx0ZXhwZWN0ZWRTZXJ2ZXJLaW5kOiBleHBlY3RlZFNlcnZlcktpbmQgfHwgdm9pZCAwLFxuXHRcdFx0XHRleHRyYXM6IHsgXCJTZXJ2ZXItVGltaW5nXCI6IHRpbWVyLmdldEhlYWRlcigpIH1cblx0XHRcdH0pLFxuXHRcdFx0Li4uYXdhaXQgaGVhZGVyc1RvRm9yd2FyZFBcblx0XHR9KTtcblx0XHRjb25zdCBhc3N1bWVkTW9kZSA9IGdldE1vZGUoe1xuXHRcdFx0ZW52OiB0aGlzLmVudixcblx0XHRcdGNsaWVudDogdGhpcy5jbGllbnRcblx0XHR9KTtcblx0XHRpZiAoYXNzdW1lZE1vZGUuaXNFeHBsaWNpdCkgdGhpcy5fbW9kZSA9IGFzc3VtZWRNb2RlO1xuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3Qgc2VydmVJc1Byb2QgPSBhd2FpdCBhY3Rpb25zLmlzUHJvZHVjdGlvbj8uKFwic3RhcnRpbmcgdG8gaGFuZGxlIHJlcXVlc3RcIik7XG5cdFx0XHRpZiAodHlwZW9mIHNlcnZlSXNQcm9kID09PSBcImJvb2xlYW5cIikgdGhpcy5fbW9kZSA9IG5ldyBNb2RlKHtcblx0XHRcdFx0dHlwZTogc2VydmVJc1Byb2QgPyBcImNsb3VkXCIgOiBcImRldlwiLFxuXHRcdFx0XHRpc0V4cGxpY2l0OiBmYWxzZVxuXHRcdFx0fSk7XG5cdFx0XHRlbHNlIHRoaXMuX21vZGUgPSBhc3N1bWVkTW9kZTtcblx0XHR9XG5cdFx0dGhpcy51cHNlcnRLZXlzRnJvbUVudigpO1xuXHRcdHJldHVybiB7XG5cdFx0XHR0aW1lcixcblx0XHRcdGFjdGlvbnMsXG5cdFx0XHRnZXRIZWFkZXJzXG5cdFx0fTtcblx0fVxuXHQvKipcblx0KiBgY3JlYXRlU3luY0hhbmRsZXJgIHNob3VsZCBiZSB1c2VkIHRvIHJldHVybiBhIHR5cGUtZXF1aXZhbGVudCB2ZXJzaW9uIG9mXG5cdCogdGhlIGBoYW5kbGVyYCBzcGVjaWZpZWQgZHVyaW5nIGluc3RhbnRpYXRpb24uXG5cdCovXG5cdGNyZWF0ZVN5bmNIYW5kbGVyKCkge1xuXHRcdHJldHVybiAoaGFuZGxlcikgPT4ge1xuXHRcdFx0cmV0dXJuIHRoaXMud3JhcEhhbmRsZXIoKGFzeW5jICguLi5hcmdzKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHJlcUluaXQgPSBhd2FpdCB0aGlzLmluaXRSZXF1ZXN0KC4uLmFyZ3MpO1xuXHRcdFx0XHRjb25zdCBmbiA9IG5ldyBJbm5nZXN0RnVuY3Rpb24odGhpcy5jbGllbnQsIHtcblx0XHRcdFx0XHRpZDogdGhpcy5fb3B0aW9ucy5zeW5jT3B0aW9ucz8uZnVuY3Rpb25JZCA/PyBcIlwiLFxuXHRcdFx0XHRcdHJldHJpZXM6IHRoaXMuX29wdGlvbnMuc3luY09wdGlvbnM/LnJldHJpZXMgPz8gZGVmYXVsdE1heFJldHJpZXNcblx0XHRcdFx0fSwgKCkgPT4gaGFuZGxlciguLi5hcmdzKSk7XG5cdFx0XHRcdGlmIChhd2FpdCB0aGlzLmlzSW5uZ2VzdFJlcShyZXFJbml0LmFjdGlvbnMpKSByZXR1cm4gdGhpcy5oYW5kbGVBc3luY1JlcXVlc3Qoe1xuXHRcdFx0XHRcdC4uLnJlcUluaXQsXG5cdFx0XHRcdFx0Zm9yY2VFeGVjdXRpb246IHRydWUsXG5cdFx0XHRcdFx0YXJncyxcblx0XHRcdFx0XHRmbnM6IFtmbl1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiB0aGlzLmhhbmRsZVN5bmNSZXF1ZXN0KHtcblx0XHRcdFx0XHQuLi5yZXFJbml0LFxuXHRcdFx0XHRcdGFyZ3MsXG5cdFx0XHRcdFx0YXN5bmNNb2RlOiB0aGlzLl9vcHRpb25zLnN5bmNPcHRpb25zPy5hc3luY1Jlc3BvbnNlID8/IEFzeW5jUmVzcG9uc2VUeXBlLlJlZGlyZWN0LFxuXHRcdFx0XHRcdGZuXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSkpO1xuXHRcdH07XG5cdH1cblx0LyoqXG5cdCogYGNyZWF0ZUhhbmRsZXJgIHNob3VsZCBiZSB1c2VkIHRvIHJldHVybiBhIHR5cGUtZXF1aXZhbGVudCB2ZXJzaW9uIG9mIHRoZVxuXHQqIGBoYW5kbGVyYCBzcGVjaWZpZWQgZHVyaW5nIGluc3RhbnRpYXRpb24uXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGBgYFxuXHQqIC8vIG15LWN1c3RvbS1oYW5kbGVyLnRzXG5cdCogaW1wb3J0IHtcblx0KiAgIElubmdlc3RDb21tSGFuZGxlcixcblx0KiAgIHR5cGUgU2VydmVIYW5kbGVyT3B0aW9ucyxcblx0KiB9IGZyb20gXCIuL2NvbXBvbmVudHMvSW5uZ2VzdENvbW1IYW5kbGVyXCI7XG5cdCpcblx0KiBleHBvcnQgY29uc3Qgc2VydmUgPSAob3B0aW9uczogU2VydmVIYW5kbGVyT3B0aW9ucykgPT4ge1xuXHQqICAgY29uc3QgaGFuZGxlciA9IG5ldyBJbm5nZXN0Q29tbUhhbmRsZXIoe1xuXHQqICAgICBmcmFtZXdvcmtOYW1lOiBcIm15LWN1c3RvbS1oYW5kbGVyXCIsXG5cdCogICAgIC4uLm9wdGlvbnMsXG5cdCogICAgIGhhbmRsZXI6IChyZXE6IFJlcXVlc3QpID0+IHtcblx0KiAgICAgICByZXR1cm4ge1xuXHQqICAgICAgICAgYm9keTogKCkgPT4gcmVxLmpzb24oKSxcblx0KiAgICAgICAgIGhlYWRlcnM6IChrZXkpID0+IHJlcS5oZWFkZXJzLmdldChrZXkpLFxuXHQqICAgICAgICAgbWV0aG9kOiAoKSA9PiByZXEubWV0aG9kLFxuXHQqICAgICAgICAgdXJsOiAoKSA9PiBuZXcgVVJMKHJlcS51cmwsIGBodHRwczovLyR7cmVxLmhlYWRlcnMuZ2V0KFwiaG9zdFwiKSB8fCBcIlwifWApLFxuXHQqICAgICAgICAgdHJhbnNmb3JtUmVzcG9uc2U6ICh7IGJvZHksIHN0YXR1cywgaGVhZGVycyB9KSA9PiB7XG5cdCogICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoYm9keSwgeyBzdGF0dXMsIGhlYWRlcnMgfSk7XG5cdCogICAgICAgICB9LFxuXHQqICAgICAgIH07XG5cdCogICAgIH0sXG5cdCogICB9KTtcblx0KlxuXHQqICAgcmV0dXJuIGhhbmRsZXIuY3JlYXRlSGFuZGxlcigpO1xuXHQqIH07XG5cdCogYGBgXG5cdCovXG5cdGNyZWF0ZUhhbmRsZXIoKSB7XG5cdFx0cmV0dXJuIHRoaXMud3JhcEhhbmRsZXIoKGFzeW5jICguLi5hcmdzKSA9PiB7XG5cdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVBc3luY1JlcXVlc3Qoe1xuXHRcdFx0XHQuLi5hd2FpdCB0aGlzLmluaXRSZXF1ZXN0KC4uLmFyZ3MpLFxuXHRcdFx0XHRhcmdzXG5cdFx0XHR9KTtcblx0XHR9KSk7XG5cdH1cblx0LyoqXG5cdCogR2l2ZW4gYSBzZXQgb2YgYWN0aW9ucyB0aGF0IGxldCB1cyBhY2Nlc3MgdGhlIGluY29taW5nIHJlcXVlc3QsIGNyZWF0ZSBhXG5cdCogYGh0dHAvcnVuLnN0YXJ0ZWRgIGV2ZW50IHRoYXQgcmVwZXNlbnRzIGEgcnVuIHN0YXJ0aW5nIGZyb20gYW4gSFRUUFxuXHQqIHJlcXVlc3QuXG5cdCovXG5cdGFzeW5jIGNyZWF0ZUh0dHBFdmVudChhY3Rpb25zLCBmbikge1xuXHRcdGNvbnN0IHJlYXNvbiA9IFwiY3JlYXRpbmcgc3luYyBldmVudFwiO1xuXHRcdGNvbnN0IGNvbnRlbnRUeXBlUHJvbWlzZSA9IGFjdGlvbnMuaGVhZGVycyhyZWFzb24sIGhlYWRlcktleXMuQ29udGVudFR5cGUpLnRoZW4oKHYpID0+IHYgPz8gXCJcIik7XG5cdFx0Y29uc3QgaXBQcm9taXNlID0gYWN0aW9ucy5oZWFkZXJzKHJlYXNvbiwgaGVhZGVyS2V5cy5Gb3J3YXJkZWRGb3IpLnRoZW4oKHYpID0+IHtcblx0XHRcdGlmICh2KSByZXR1cm4gdjtcblx0XHRcdHJldHVybiBhY3Rpb25zLmhlYWRlcnMocmVhc29uLCBoZWFkZXJLZXlzLlJlYWxJcCkudGhlbigodiQxKSA9PiB2JDEgPz8gXCJcIik7XG5cdFx0fSk7XG5cdFx0Y29uc3QgbWV0aG9kUHJvbWlzZSA9IGFjdGlvbnMubWV0aG9kKHJlYXNvbik7XG5cdFx0Y29uc3QgdXJsUHJvbWlzZSA9IGFjdGlvbnMudXJsKHJlYXNvbikudGhlbigodikgPT4gdGhpcy5yZXFVcmwodikpO1xuXHRcdGNvbnN0IGRvbWFpblByb21pc2UgPSB1cmxQcm9taXNlLnRoZW4oKHVybCkgPT4gYCR7dXJsLnByb3RvY29sfS8vJHt1cmwuaG9zdH1gKTtcblx0XHRjb25zdCBwYXRoUHJvbWlzZSA9IHVybFByb21pc2UudGhlbigodXJsKSA9PiB1cmwucGF0aG5hbWUpO1xuXHRcdGNvbnN0IHF1ZXJ5UGFyYW1zUHJvbWlzZSA9IHVybFByb21pc2UudGhlbigodXJsKSA9PiB1cmwuc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCkpO1xuXHRcdGNvbnN0IGJvZHlQcm9taXNlID0gYWN0aW9ucy50ZXh0Qm9keShyZWFzb24pLnRoZW4oKGJvZHkkMSkgPT4ge1xuXHRcdFx0cmV0dXJuIHR5cGVvZiBib2R5JDEgPT09IFwic3RyaW5nXCIgPyBib2R5JDEgOiBzdHJpbmdpZnkoYm9keSQxKTtcblx0XHR9KTtcblx0XHRjb25zdCBbY29udGVudFR5cGUsIGRvbWFpbiwgaXAsIG1ldGhvZCwgcGF0aCwgcXVlcnlQYXJhbXMsIGJvZHldID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuXHRcdFx0Y29udGVudFR5cGVQcm9taXNlLFxuXHRcdFx0ZG9tYWluUHJvbWlzZSxcblx0XHRcdGlwUHJvbWlzZSxcblx0XHRcdG1ldGhvZFByb21pc2UsXG5cdFx0XHRwYXRoUHJvbWlzZSxcblx0XHRcdHF1ZXJ5UGFyYW1zUHJvbWlzZSxcblx0XHRcdGJvZHlQcm9taXNlXG5cdFx0XSk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IFwiaHR0cC9ydW4uc3RhcnRlZFwiLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRjb250ZW50X3R5cGU6IGNvbnRlbnRUeXBlLFxuXHRcdFx0XHRkb21haW4sXG5cdFx0XHRcdGlwLFxuXHRcdFx0XHRtZXRob2QsXG5cdFx0XHRcdHBhdGgsXG5cdFx0XHRcdHF1ZXJ5X3BhcmFtczogcXVlcnlQYXJhbXMsXG5cdFx0XHRcdGJvZHksXG5cdFx0XHRcdGZuOiBmbi5pZCgpXG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRhc3luYyBoYW5kbGVTeW5jUmVxdWVzdCh7IHRpbWVyLCBhY3Rpb25zLCBmbiwgYXN5bmNNb2RlLCBhcmdzIH0pIHtcblx0XHRpZiAoIWFjdGlvbnMuZXhwZXJpbWVudGFsVHJhbnNmb3JtU3luY1Jlc3BvbnNlKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHBsYXRmb3JtIGRvZXMgbm90IHN1cHBvcnQgc3luY2hyb25vdXMgSW5uZ2VzdCBmdW5jdGlvbiBleGVjdXRpb25zLlwiKTtcblx0XHRpZiAoYXdhaXQgZ2V0QXN5bmNDdHgoKSkgdGhyb3cgbmV3IEVycm9yKFwiV2UgYWxyZWFkeSBzZWVtIHRvIGJlIGluIHRoZSBjb250ZXh0IG9mIGFuIElubmdlc3QgZXhlY3V0aW9uLCBidXQgZGlkbid0IGV4cGVjdCB0byBiZS4gRGlkIHlvdSBhbHJlYWR5IHdyYXAgdGhpcyBoYW5kbGVyP1wiKTtcblx0XHRjb25zdCBydW5JZCA9IHVsaWQoKTtcblx0XHRjb25zdCBldmVudCA9IGF3YWl0IHRoaXMuY3JlYXRlSHR0cEV2ZW50KGFjdGlvbnMsIGZuKTtcblx0XHRjb25zdCBleGVWZXJzaW9uID0gUFJFRkVSUkVEX0VYRUNVVElPTl9WRVJTSU9OO1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuW1wiY3JlYXRlRXhlY3V0aW9uXCJdKHtcblx0XHRcdHZlcnNpb246IGV4ZVZlcnNpb24sXG5cdFx0XHRwYXJ0aWFsT3B0aW9uczoge1xuXHRcdFx0XHRjbGllbnQ6IHRoaXMuY2xpZW50LFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0cnVuSWQsXG5cdFx0XHRcdFx0ZXZlbnQsXG5cdFx0XHRcdFx0YXR0ZW1wdDogMCxcblx0XHRcdFx0XHRldmVudHM6IFtldmVudF0sXG5cdFx0XHRcdFx0bWF4QXR0ZW1wdHM6IGZuLm9wdHMucmV0cmllcyA/PyBkZWZhdWx0TWF4UmV0cmllc1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRydW5JZCxcblx0XHRcdFx0aGVhZGVyczoge30sXG5cdFx0XHRcdHJlcUFyZ3M6IGFyZ3MsXG5cdFx0XHRcdHN0ZXBDb21wbGV0aW9uT3JkZXI6IFtdLFxuXHRcdFx0XHRzdGVwU3RhdGU6IHt9LFxuXHRcdFx0XHRkaXNhYmxlSW1tZWRpYXRlRXhlY3V0aW9uOiBmYWxzZSxcblx0XHRcdFx0aXNGYWlsdXJlSGFuZGxlcjogZmFsc2UsXG5cdFx0XHRcdHRpbWVyLFxuXHRcdFx0XHRjcmVhdGVSZXNwb25zZTogKGRhdGEpID0+IGFjdGlvbnMuZXhwZXJpbWVudGFsVHJhbnNmb3JtU3luY1Jlc3BvbnNlKFwiY3JlYXRpbmcgc3luYyBleGVjdXRpb25cIiwgZGF0YSkudGhlbigocmVzKSA9PiAoe1xuXHRcdFx0XHRcdC4uLnJlcyxcblx0XHRcdFx0XHR2ZXJzaW9uOiBleGVWZXJzaW9uXG5cdFx0XHRcdH0pKSxcblx0XHRcdFx0c3RlcE1vZGU6IFN0ZXBNb2RlLlN5bmNcblx0XHRcdH1cblx0XHR9KS5zdGFydCgpO1xuXHRcdGNvbnN0IHJlc3VsdEhhbmRsZXIgPSB7XG5cdFx0XHRcInN0ZXAtbm90LWZvdW5kXCI6ICgpID0+IHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiV2Ugc2hvdWxkIG5vdCBnZXQgdGhlIHJlc3VsdCAnc3RlcC1ub3QtZm91bmQnIHdoZW4gY2hlY2twb2ludGluZy4gVGhpcyBpcyBhIGJ1ZyBpbiB0aGUgYGlubmdlc3RgIFNES1wiKTtcblx0XHRcdH0sXG5cdFx0XHRcInN0ZXBzLWZvdW5kXCI6ICgpID0+IHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiV2Ugc2hvdWxkIG5vdCBnZXQgdGhlIHJlc3VsdCAnc3RlcHMtZm91bmQnIHdoZW4gY2hlY2twb2ludGluZy4gVGhpcyBpcyBhIGJ1ZyBpbiB0aGUgYGlubmdlc3RgIFNES1wiKTtcblx0XHRcdH0sXG5cdFx0XHRcInN0ZXAtcmFuXCI6ICgpID0+IHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiV2Ugc2hvdWxkIG5vdCBnZXQgdGhlIHJlc3VsdCAnc3RlcC1yYW4nIHdoZW4gY2hlY2twb2ludGluZy4gVGhpcyBpcyBhIGJ1ZyBpbiB0aGUgYGlubmdlc3RgIFNES1wiKTtcblx0XHRcdH0sXG5cdFx0XHRcImZ1bmN0aW9uLXJlamVjdGVkXCI6ICgpID0+IHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiV2Ugc2hvdWxkIG5vdCBnZXQgdGhlIHJlc3VsdCAnZnVuY3Rpb24tcmVqZWN0ZWQnIHdoZW4gY2hlY2twb2ludGluZy4gVGhpcyBpcyBhIGJ1ZyBpbiB0aGUgYGlubmdlc3RgIFNES1wiKTtcblx0XHRcdH0sXG5cdFx0XHRcImZ1bmN0aW9uLXJlc29sdmVkXCI6ICh7IGRhdGEgfSkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdH0sXG5cdFx0XHRcImNoYW5nZS1tb2RlXCI6IGFzeW5jICh7IHRva2VuIH0pID0+IHtcblx0XHRcdFx0c3dpdGNoIChhc3luY01vZGUpIHtcblx0XHRcdFx0XHRjYXNlIEFzeW5jUmVzcG9uc2VUeXBlLlJlZGlyZWN0OiByZXR1cm4gYWN0aW9ucy50cmFuc2Zvcm1SZXNwb25zZShcImNyZWF0aW5nIHN5bmMtPmFzeW5jIHJlZGlyZWN0IHJlc3BvbnNlXCIsIHtcblx0XHRcdFx0XHRcdHN0YXR1czogMzAyLFxuXHRcdFx0XHRcdFx0aGVhZGVyczogeyBbaGVhZGVyS2V5cy5Mb2NhdGlvbl06IGF3YWl0IHRoaXMuY2xpZW50W1wiaW5uZ2VzdEFwaVwiXVtcImdldFRhcmdldFVybFwiXShgL3YxL2h0dHAvcnVucy8ke3J1bklkfS9vdXRwdXQ/dG9rZW49JHt0b2tlbn1gKS50aGVuKCh1cmwpID0+IHVybC50b1N0cmluZygpKSB9LFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogZXhlVmVyc2lvbixcblx0XHRcdFx0XHRcdGJvZHk6IFwiXCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjYXNlIEFzeW5jUmVzcG9uc2VUeXBlLlRva2VuOiByZXR1cm4gYWN0aW9ucy50cmFuc2Zvcm1SZXNwb25zZShcImNyZWF0aW5nIHN5bmMtPmFzeW5jIHRva2VuIHJlc3BvbnNlXCIsIHtcblx0XHRcdFx0XHRcdHN0YXR1czogMjAwLFxuXHRcdFx0XHRcdFx0aGVhZGVyczoge30sXG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiBleGVWZXJzaW9uLFxuXHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHtcblx0XHRcdFx0XHRcdFx0cnVuX2lkOiBydW5JZCxcblx0XHRcdFx0XHRcdFx0dG9rZW5cblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0ZGVmYXVsdDogYnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkOiBjaGFuZ2UtbW9kZVwiKTtcblx0XHRcdH1cblx0XHR9W3Jlc3VsdC50eXBlXTtcblx0XHRpZiAoIXJlc3VsdEhhbmRsZXIpIHRocm93IG5ldyBFcnJvcihgTm8gaGFuZGxlciBmb3IgZXhlY3V0aW9uIHJlc3VsdCB0eXBlOiAke3Jlc3VsdC50eXBlfS4gVGhpcyBpcyBhIGJ1ZyBpbiB0aGUgXFxgaW5uZ2VzdFxcYCBTREtgKTtcblx0XHRyZXR1cm4gcmVzdWx0SGFuZGxlcihyZXN1bHQpO1xuXHR9XG5cdGFzeW5jIGhhbmRsZUFzeW5jUmVxdWVzdCh7IHRpbWVyLCBhY3Rpb25zLCBhcmdzLCBnZXRIZWFkZXJzLCBmb3JjZUV4ZWN1dGlvbiwgZm5zIH0pIHtcblx0XHRpZiAoZm9yY2VFeGVjdXRpb24gJiYgIWFjdGlvbnMuZXhwZXJpbWVudGFsVHJhbnNmb3JtU3luY1Jlc3BvbnNlKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHBsYXRmb3JtIGRvZXMgbm90IHN1cHBvcnQgYXN5bmMgZXhlY3V0aW9ucyBpbiBJbm5nZXN0IGZvciBBUElzLlwiKTtcblx0XHRjb25zdCBtZXRob2RQID0gYWN0aW9ucy5tZXRob2QoXCJzdGFydGluZyB0byBoYW5kbGUgcmVxdWVzdFwiKTtcblx0XHRjb25zdCBjb250ZW50TGVuZ3RoID0gYXdhaXQgYWN0aW9ucy5oZWFkZXJzKFwiY2hlY2tpbmcgc2lnbmF0dXJlIGZvciByZXF1ZXN0XCIsIGhlYWRlcktleXMuQ29udGVudExlbmd0aCkudGhlbigodmFsdWUpID0+IHtcblx0XHRcdGlmICghdmFsdWUpIHJldHVybjtcblx0XHRcdHJldHVybiBOdW1iZXIucGFyc2VJbnQodmFsdWUsIDEwKTtcblx0XHR9KTtcblx0XHRjb25zdCBbc2lnbmF0dXJlLCBtZXRob2QsIGJvZHldID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuXHRcdFx0YWN0aW9ucy5oZWFkZXJzKFwiY2hlY2tpbmcgc2lnbmF0dXJlIGZvciByZXF1ZXN0XCIsIGhlYWRlcktleXMuU2lnbmF0dXJlKS50aGVuKChoZWFkZXJTaWduYXR1cmUpID0+IHtcblx0XHRcdFx0cmV0dXJuIGhlYWRlclNpZ25hdHVyZSA/PyB2b2lkIDA7XG5cdFx0XHR9KSxcblx0XHRcdG1ldGhvZFAsXG5cdFx0XHRtZXRob2RQLnRoZW4oKG1ldGhvZCQxKSA9PiB7XG5cdFx0XHRcdGlmIChtZXRob2QkMSA9PT0gXCJQT1NUXCIgfHwgbWV0aG9kJDEgPT09IFwiUFVUXCIpIHtcblx0XHRcdFx0XHRpZiAoIWNvbnRlbnRMZW5ndGgpIHJldHVybiBcIlwiO1xuXHRcdFx0XHRcdHJldHVybiBhY3Rpb25zLmJvZHkoYGNoZWNraW5nIGJvZHkgZm9yIHJlcXVlc3Qgc2lnbmluZyBhcyBtZXRob2QgaXMgJHttZXRob2QkMX1gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gXCJcIjtcblx0XHRcdH0pXG5cdFx0XSk7XG5cdFx0Y29uc3Qgc2lnbmF0dXJlVmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVTaWduYXR1cmUoc2lnbmF0dXJlLCBib2R5KTtcblx0XHRjb25zdCBhY3Rpb25SZXMgPSB0aW1lci53cmFwKFwiYWN0aW9uXCIsICgpID0+IHRoaXMuaGFuZGxlQWN0aW9uKHtcblx0XHRcdGFjdGlvbnMsXG5cdFx0XHR0aW1lcixcblx0XHRcdGdldEhlYWRlcnMsXG5cdFx0XHRyZXFBcmdzOiBhcmdzLFxuXHRcdFx0c2lnbmF0dXJlVmFsaWRhdGlvbixcblx0XHRcdGJvZHksXG5cdFx0XHRtZXRob2QsXG5cdFx0XHRmb3JjZUV4ZWN1dGlvbjogQm9vbGVhbihmb3JjZUV4ZWN1dGlvbiksXG5cdFx0XHRmbnNcblx0XHR9KSk7XG5cdFx0LyoqXG5cdFx0KiBQcmVwYXJlcyBhbiBhY3Rpb24gcmVzcG9uc2UgYnkgbWVyZ2luZyByZXR1cm5lZCBkYXRhIHRvIHByb3ZpZGVcblx0XHQqIHRyYWlsaW5nIGluZm9ybWF0aW9uIHN1Y2ggYXMgYFNlcnZlci1UaW1pbmdgIGhlYWRlcnMuXG5cdFx0KlxuXHRcdCogSXQgc2hvdWxkIGFsd2F5cyBwcmlvcml0aXplIHRoZSBoZWFkZXJzIHJldHVybmVkIGJ5IHRoZSBhY3Rpb24sIGFzIHRoZXlcblx0XHQqIG1heSBjb250YWluIGltcG9ydGFudCBpbmZvcm1hdGlvbiBzdWNoIGFzIGBDb250ZW50LVR5cGVgLlxuXHRcdCovXG5cdFx0Y29uc3QgcHJlcGFyZUFjdGlvblJlcyA9IGFzeW5jIChyZXMpID0+IHtcblx0XHRcdGNvbnN0IGhlYWRlcnMgPSB7XG5cdFx0XHRcdC4uLmF3YWl0IGdldEhlYWRlcnMoKSxcblx0XHRcdFx0Li4ucmVzLmhlYWRlcnMsXG5cdFx0XHRcdC4uLnJlcy52ZXJzaW9uID09PSBudWxsID8ge30gOiB7IFtoZWFkZXJLZXlzLlJlcXVlc3RWZXJzaW9uXTogKHJlcy52ZXJzaW9uID8/IFBSRUZFUlJFRF9FWEVDVVRJT05fVkVSU0lPTikudG9TdHJpbmcoKSB9XG5cdFx0XHR9O1xuXHRcdFx0bGV0IHNpZ25hdHVyZSQxO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0c2lnbmF0dXJlJDEgPSBhd2FpdCBzaWduYXR1cmVWYWxpZGF0aW9uLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdGlmICghcmVzdWx0LnN1Y2Nlc3MgfHwgIXJlc3VsdC5rZXlVc2VkKSByZXR1cm47XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0UmVzcG9uc2VTaWduYXR1cmUocmVzdWx0LmtleVVzZWQsIHJlcy5ib2R5KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHQuLi5yZXMsXG5cdFx0XHRcdFx0aGVhZGVycyxcblx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoc2VyaWFsaXplRXJyb3IoZXJyKSksXG5cdFx0XHRcdFx0c3RhdHVzOiA1MDBcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGlmIChzaWduYXR1cmUkMSkgaGVhZGVyc1toZWFkZXJLZXlzLlNpZ25hdHVyZV0gPSBzaWduYXR1cmUkMTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLnJlcyxcblx0XHRcdFx0aGVhZGVyc1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcdGlmIChhd2FpdCB0aGlzLnNob3VsZFN0cmVhbShhY3Rpb25zKSkge1xuXHRcdFx0aWYgKGF3YWl0IGFjdGlvbnMubWV0aG9kKFwic3RhcnRpbmcgc3RyZWFtaW5nIHJlc3BvbnNlXCIpID09PSBcIlBPU1RcIikge1xuXHRcdFx0XHRjb25zdCB7IHN0cmVhbSwgZmluYWxpemUgfSA9IGF3YWl0IGNyZWF0ZVN0cmVhbSgpO1xuXHRcdFx0XHQvKipcblx0XHRcdFx0KiBFcnJvcnMgYXJlIGhhbmRsZWQgYnkgYGhhbmRsZUFjdGlvbmAgaGVyZSB0byBlbnN1cmUgdGhhdCBhblxuXHRcdFx0XHQqIGFwcHJvcHJpYXRlIHJlc3BvbnNlIGlzIGFsd2F5cyBnaXZlbi5cblx0XHRcdFx0Ki9cblx0XHRcdFx0YWN0aW9uUmVzLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBmaW5hbGl6ZShwcmVwYXJlQWN0aW9uUmVzKHJlcykpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIHRpbWVyLndyYXAoXCJyZXNcIiwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBhY3Rpb25zLnRyYW5zZm9ybVN0cmVhbWluZ1Jlc3BvbnNlPy4oXCJzdGFydGluZyBzdHJlYW1pbmcgcmVzcG9uc2VcIiwge1xuXHRcdFx0XHRcdFx0c3RhdHVzOiAyMDEsXG5cdFx0XHRcdFx0XHRoZWFkZXJzOiBhd2FpdCBnZXRIZWFkZXJzKCksXG5cdFx0XHRcdFx0XHRib2R5OiBzdHJlYW0sXG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiBudWxsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGltZXIud3JhcChcInJlc1wiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gYWN0aW9uUmVzLnRoZW4ocHJlcGFyZUFjdGlvblJlcykudGhlbigoYWN0aW9uUmVzJDEpID0+IHtcblx0XHRcdFx0cmV0dXJuIGFjdGlvbnMudHJhbnNmb3JtUmVzcG9uc2UoXCJzZW5kaW5nIGJhY2sgcmVzcG9uc2VcIiwgYWN0aW9uUmVzJDEpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgZ2V0QWN0aW9ucyh0aW1lciwgLi4uYXJncykge1xuXHRcdC8qKlxuXHRcdCogVXNlZCBmb3IgdGVzdGluZywgYWxsb3cgc2V0dGluZyBhY3Rpb24gb3ZlcnJpZGVzIGV4dGVybmFsbHkgd2hlblxuXHRcdCogY2FsbGluZyB0aGUgaGFuZGxlci4gQWx3YXlzIHNlYXJjaCB0aGUgZmluYWwgYXJndW1lbnQuXG5cdFx0Ki9cblx0XHRjb25zdCBsYXN0QXJnID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuXHRcdGNvbnN0IGFjdGlvbk92ZXJyaWRlcyA9IHR5cGVvZiBsYXN0QXJnID09PSBcIm9iamVjdFwiICYmIGxhc3RBcmcgIT09IG51bGwgJiYgXCJhY3Rpb25PdmVycmlkZXNcIiBpbiBsYXN0QXJnICYmIHR5cGVvZiBsYXN0QXJnW1wiYWN0aW9uT3ZlcnJpZGVzXCJdID09PSBcIm9iamVjdFwiICYmIGxhc3RBcmdbXCJhY3Rpb25PdmVycmlkZXNcIl0gIT09IG51bGwgPyBsYXN0QXJnW1wiYWN0aW9uT3ZlcnJpZGVzXCJdIDoge307XG5cdFx0LyoqXG5cdFx0KiBXZSBwdXJwb3NlZnVsbHkgYGF3YWl0YCB0aGUgaGFuZGxlciwgYXMgaXQgY291bGQgYmUgZWl0aGVyIHN5bmMgb3Jcblx0XHQqIGFzeW5jLlxuXHRcdCovXG5cdFx0Y29uc3QgcmF3QWN0aW9ucyA9IHtcblx0XHRcdC4uLmF3YWl0IHRpbWVyLndyYXAoXCJoYW5kbGVyXCIsICgpID0+IHRoaXMuaGFuZGxlciguLi5hcmdzKSkuY2F0Y2gocmV0aHJvd0Vycm9yKFwiU2VydmUgaGFuZGxlciBmYWlsZWQgdG8gcnVuXCIpKSxcblx0XHRcdC4uLmFjdGlvbk92ZXJyaWRlc1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0KiBNYXBwZWQgcHJvbWlzaWZpZWQgaGFuZGxlcnMgZnJvbSB1c2VybGFuZCBgc2VydmUoKWAgZnVuY3Rpb24gbWl4ZWQgaW5cblx0XHQqIHdpdGggc29tZSBoZWxwZXJzLlxuXHRcdCovXG5cdFx0Y29uc3QgYWN0aW9ucyA9IHtcblx0XHRcdC4uLk9iamVjdC5lbnRyaWVzKHJhd0FjdGlvbnMpLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcblx0XHRcdFx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gYWNjO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdC4uLmFjYyxcblx0XHRcdFx0XHRba2V5XTogKHJlYXNvbiwgLi4uYXJncyQxKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBlcnJNZXNzYWdlID0gW2BGYWlsZWQgY2FsbGluZyBcXGAke2tleX1cXGAgZnJvbSBzZXJ2ZSBoYW5kbGVyYCwgcmVhc29uXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiB3aGVuIFwiKTtcblx0XHRcdFx0XHRcdGNvbnN0IGZuID0gKCkgPT4gdmFsdWUoLi4uYXJncyQxKTtcblx0XHRcdFx0XHRcdHJldHVybiBydW5Bc1Byb21pc2UoZm4pLmNhdGNoKHJldGhyb3dFcnJvcihlcnJNZXNzYWdlKSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmxvZyhcImVycm9yXCIsIGVycik7XG5cdFx0XHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH0sIHt9KSxcblx0XHRcdHF1ZXJ5U3RyaW5nV2l0aERlZmF1bHRzOiBhc3luYyAocmVhc29uLCBrZXkpID0+IHtcblx0XHRcdFx0Y29uc3QgdXJsID0gYXdhaXQgYWN0aW9ucy51cmwocmVhc29uKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IGFjdGlvbnMucXVlcnlTdHJpbmc/LihyZWFzb24sIGtleSwgdXJsKSB8fCB1cmwuc2VhcmNoUGFyYW1zLmdldChrZXkpIHx8IHZvaWQgMDtcblx0XHRcdH0sXG5cdFx0XHQuLi5hY3Rpb25PdmVycmlkZXNcblx0XHR9O1xuXHRcdHJldHVybiBhY3Rpb25zO1xuXHR9XG5cdHdyYXBIYW5kbGVyKGhhbmRsZXIpIHtcblx0XHQvKipcblx0XHQqIFNvbWUgcGxhdGZvcm1zIGNoZWNrIChhdCBydW50aW1lKSB0aGUgbGVuZ3RoIG9mIHRoZSBmdW5jdGlvbiBiZWluZyB1c2VkXG5cdFx0KiB0byBoYW5kbGUgYW4gZW5kcG9pbnQuIElmIHRoaXMgaXMgYSB2YXJpYWRpYyBmdW5jdGlvbiwgaXQgd2lsbCBmYWlsIHRoYXRcblx0XHQqIGNoZWNrLlxuXHRcdCpcblx0XHQqIFRoZXJlZm9yZSwgd2UgZXhwZWN0IHRoZSBhcmd1bWVudHMgYWNjZXB0ZWQgdG8gYmUgdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZVxuXHRcdCogYGhhbmRsZXJgIGZ1bmN0aW9uIHBhc3NlZCBpbnRlcm5hbGx5LlxuXHRcdCpcblx0XHQqIFdlIGFsc28gc2V0IGEgbmFtZSB0byBhdm9pZCBhIGNvbW1vbiB1c2VsZXNzIG5hbWUgaW4gdHJhY2luZyBzdWNoIGFzXG5cdFx0KiBgXCJhbm9ueW1vdXNcImAgb3IgYFwiYm91bmQgZnVuY3Rpb25cImAuXG5cdFx0KlxuXHRcdCogaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdC9pc3N1ZXMvMzI4NFxuXHRcdCovXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaGFuZGxlciwge1xuXHRcdFx0bmFtZTogeyB2YWx1ZTogXCJJbm5nZXN0SGFuZGxlclwiIH0sXG5cdFx0XHRsZW5ndGg6IHsgdmFsdWU6IHRoaXMuaGFuZGxlci5sZW5ndGggfVxuXHRcdH0pO1xuXHRcdHJldHVybiBoYW5kbGVyO1xuXHR9XG5cdGdldCBtb2RlKCkge1xuXHRcdHJldHVybiB0aGlzLl9tb2RlO1xuXHR9XG5cdHNldCBtb2RlKG0pIHtcblx0XHR0aGlzLl9tb2RlID0gbTtcblx0XHRpZiAobSkgdGhpcy5jbGllbnRbXCJtb2RlXCJdID0gbTtcblx0fVxuXHQvKipcblx0KiBHaXZlbiBhIHNldCBvZiBmdW5jdGlvbnMgdG8gY2hlY2sgaWYgYW4gYWN0aW9uIGlzIGF2YWlsYWJsZSBmcm9tIHRoZVxuXHQqIGluc3RhbmNlJ3MgaGFuZGxlciwgZW5hY3QgYW55IGFjdGlvbiB0aGF0IGlzIGZvdW5kLlxuXHQqXG5cdCogVGhpcyBtZXRob2QgY2FuIGZldGNoIHZhcnlpbmcgcGF5bG9hZHMgb2YgZGF0YSwgYnV0IHVsdGltYXRlbHkgaXMgdGhlIHBsYWNlXG5cdCogd2hlcmUgX2RlY2lzaW9uc18gYXJlIG1hZGUgcmVnYXJkaW5nIGZ1bmN0aW9uYWxpdHkuXG5cdCpcblx0KiBGb3IgZXhhbXBsZSwgaWYgd2UgZmluZCB0aGF0IHdlIHNob3VsZCBiZSB2aWV3aW5nIHRoZSBVSSwgdGhpcyBmdW5jdGlvblxuXHQqIHdpbGwgZGVjaWRlIHdoZXRoZXIgdGhlIFVJIHNob3VsZCBiZSB2aXNpYmxlIGJhc2VkIG9uIHRoZSBwYXlsb2FkIGl0IGhhc1xuXHQqIGZvdW5kIChlLmcuIGVudiB2YXJzLCBvcHRpb25zLCBldGMpLlxuXHQqL1xuXHRhc3luYyBoYW5kbGVBY3Rpb24oeyBhY3Rpb25zLCB0aW1lciwgZ2V0SGVhZGVycywgcmVxQXJncywgc2lnbmF0dXJlVmFsaWRhdGlvbiwgYm9keTogcmF3Qm9keSwgbWV0aG9kLCBmb3JjZUV4ZWN1dGlvbiwgZm5zIH0pIHtcblx0XHRjb25zdCBpc01pc3NpbmdCb2R5ID0gcmF3Qm9keSA9PT0gdm9pZCAwO1xuXHRcdGxldCBib2R5ID0gcmF3Qm9keTtcblx0XHR0cnkge1xuXHRcdFx0bGV0IHVybCA9IGF3YWl0IGFjdGlvbnMudXJsKFwic3RhcnRpbmcgdG8gaGFuZGxlIHJlcXVlc3RcIik7XG5cdFx0XHRpZiAobWV0aG9kID09PSBcIlBPU1RcIiB8fCBmb3JjZUV4ZWN1dGlvbikge1xuXHRcdFx0XHRpZiAoIWZvcmNlRXhlY3V0aW9uICYmIGlzTWlzc2luZ0JvZHkpIHtcblx0XHRcdFx0XHR0aGlzLmxvZyhcImVycm9yXCIsIFwiTWlzc2luZyBib2R5IHdoZW4gZXhlY3V0aW5nLCBwb3NzaWJseSBkdWUgdG8gbWlzc2luZyByZXF1ZXN0IGJvZHkgbWlkZGxld2FyZVwiKTtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0c3RhdHVzOiA1MDAsXG5cdFx0XHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoc2VyaWFsaXplRXJyb3IoLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcihcIk1pc3NpbmcgcmVxdWVzdCBib2R5IHdoZW4gZXhlY3V0aW5nLCBwb3NzaWJseSBkdWUgdG8gbWlzc2luZyByZXF1ZXN0IGJvZHkgbWlkZGxld2FyZVwiKSkpLFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogdm9pZCAwXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgc2lnbmF0dXJlVmFsaWRhdGlvbjtcblx0XHRcdFx0aWYgKCF2YWxpZGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHJldHVybiB7XG5cdFx0XHRcdFx0c3RhdHVzOiA0MDEsXG5cdFx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeShzZXJpYWxpemVFcnJvcih2YWxpZGF0aW9uUmVzdWx0LmVycikpLFxuXHRcdFx0XHRcdHZlcnNpb246IHZvaWQgMFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRsZXQgZm47XG5cdFx0XHRcdGxldCBmbklkO1xuXHRcdFx0XHRsZXQgc3RlcElkO1xuXHRcdFx0XHRpZiAoZm9yY2VFeGVjdXRpb24pIHtcblx0XHRcdFx0XHRmbiA9IGZucz8ubGVuZ3RoICYmIGZuc1swXSA/IHtcblx0XHRcdFx0XHRcdGZuOiBmbnNbMF0sXG5cdFx0XHRcdFx0XHRvbkZhaWx1cmU6IGZhbHNlXG5cdFx0XHRcdFx0fSA6IE9iamVjdC52YWx1ZXModGhpcy5mbnMpWzBdO1xuXHRcdFx0XHRcdGZuSWQgPSBmbj8uZm4uaWQoKTtcblx0XHRcdFx0XHRzdGVwSWQgPSBcInN0ZXBcIjtcblx0XHRcdFx0XHRib2R5ID0ge1xuXHRcdFx0XHRcdFx0ZXZlbnQ6IHt9LFxuXHRcdFx0XHRcdFx0ZXZlbnRzOiBbXSxcblx0XHRcdFx0XHRcdHN0ZXBzOiB7fSxcblx0XHRcdFx0XHRcdHZlcnNpb246IFBSRUZFUlJFRF9FWEVDVVRJT05fVkVSU0lPTixcblx0XHRcdFx0XHRcdHNka0RlY2lkZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHRjdHg6IHtcblx0XHRcdFx0XHRcdFx0YXR0ZW1wdDogMCxcblx0XHRcdFx0XHRcdFx0ZGlzYWJsZV9pbW1lZGlhdGVfZXhlY3V0aW9uOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0dXNlX2FwaTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0bWF4X2F0dGVtcHRzOiAzLFxuXHRcdFx0XHRcdFx0XHRydW5faWQ6IGF3YWl0IGFjdGlvbnMuaGVhZGVycyhcImdldHRpbmcgcnVuIElEIGZvciBmb3JjZWQgZXhlY3V0aW9uXCIsIGhlYWRlcktleXMuSW5uZ2VzdFJ1bklkKSxcblx0XHRcdFx0XHRcdFx0c3RhY2s6IHtcblx0XHRcdFx0XHRcdFx0XHRzdGFjazogW10sXG5cdFx0XHRcdFx0XHRcdFx0Y3VycmVudDogMFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCByYXdQcm9iZSA9IGF3YWl0IGFjdGlvbnMucXVlcnlTdHJpbmdXaXRoRGVmYXVsdHMoXCJ0ZXN0aW5nIGZvciBwcm9iZVwiLCBxdWVyeUtleXMuUHJvYmUpO1xuXHRcdFx0XHRcdGlmIChyYXdQcm9iZSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgcHJvYmUkMSA9IGVudW1Gcm9tVmFsdWUocHJvYmUsIHJhd1Byb2JlKTtcblx0XHRcdFx0XHRcdGlmICghcHJvYmUkMSkgcmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiA0MDAsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcblx0XHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHNlcmlhbGl6ZUVycm9yKC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoYFVua25vd24gcHJvYmUgXCIke3Jhd1Byb2JlfVwiYCkpKSxcblx0XHRcdFx0XHRcdFx0dmVyc2lvbjogdm9pZCAwXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0cmV0dXJuIHsgW3Byb2JlLlRydXN0XTogKCkgPT4gKHtcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiAyMDAsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcblx0XHRcdFx0XHRcdFx0Ym9keTogXCJcIixcblx0XHRcdFx0XHRcdFx0dmVyc2lvbjogdm9pZCAwXG5cdFx0XHRcdFx0XHR9KSB9W3Byb2JlJDFdKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGZuSWQgPSBhd2FpdCBhY3Rpb25zLnF1ZXJ5U3RyaW5nV2l0aERlZmF1bHRzKFwicHJvY2Vzc2luZyBydW4gcmVxdWVzdFwiLCBxdWVyeUtleXMuRm5JZCk7XG5cdFx0XHRcdFx0aWYgKCFmbklkKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBmdW5jdGlvbiBJRCBmb3VuZCBpbiBhc3luYyByZXF1ZXN0XCIpO1xuXHRcdFx0XHRcdGZuID0gdGhpcy5mbnNbZm5JZF07XG5cdFx0XHRcdFx0c3RlcElkID0gYXdhaXQgYWN0aW9ucy5xdWVyeVN0cmluZ1dpdGhEZWZhdWx0cyhcInByb2Nlc3NpbmcgcnVuIHJlcXVlc3RcIiwgcXVlcnlLZXlzLlN0ZXBJZCkgfHwgbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodHlwZW9mIGZuSWQgPT09IFwidW5kZWZpbmVkXCIgfHwgIWZuKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBmdW5jdGlvbiBJRCBmb3VuZCBpbiByZXF1ZXN0XCIpO1xuXHRcdFx0XHRjb25zdCB7IHZlcnNpb246IHZlcnNpb24kMSwgcmVzdWx0IH0gPSB0aGlzLnJ1blN0ZXAoe1xuXHRcdFx0XHRcdGZ1bmN0aW9uSWQ6IGZuSWQsXG5cdFx0XHRcdFx0ZGF0YTogYm9keSxcblx0XHRcdFx0XHRzdGVwSWQsXG5cdFx0XHRcdFx0dGltZXIsXG5cdFx0XHRcdFx0cmVxQXJncyxcblx0XHRcdFx0XHRoZWFkZXJzOiBhd2FpdCBnZXRIZWFkZXJzKCksXG5cdFx0XHRcdFx0Zm4sXG5cdFx0XHRcdFx0Zm9yY2VFeGVjdXRpb24sXG5cdFx0XHRcdFx0YWN0aW9uc1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3Qgc3RlcE91dHB1dCA9IGF3YWl0IHJlc3VsdDtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogRnVuY3Rpb25zIGNhbiByZXR1cm4gYHVuZGVmaW5lZGAsIGJ1dCB3ZSdsbCBhbHdheXMgY29udmVydCB0aGlzIHRvXG5cdFx0XHRcdCogYG51bGxgLCBhcyB0aGlzIGlzIGFwcHJvcHJpYXRlbHkgc2VyaWFsaXphYmxlIGJ5IEpTT04uXG5cdFx0XHRcdCovXG5cdFx0XHRcdGNvbnN0IG9wRGF0YVVuZGVmaW5lZFRvTnVsbCA9IChvcCkgPT4ge1xuXHRcdFx0XHRcdG9wLmRhdGEgPSB1bmRlZmluZWRUb051bGwob3AuZGF0YSk7XG5cdFx0XHRcdFx0cmV0dXJuIG9wO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb25zdCBoYW5kbGVyID0ge1xuXHRcdFx0XHRcdFwiZnVuY3Rpb24tcmVqZWN0ZWRcIjogKHJlc3VsdCQxKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IHJlc3VsdCQxLnJldHJpYWJsZSA/IDUwMCA6IDQwMCxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFtoZWFkZXJLZXlzLk5vUmV0cnldOiByZXN1bHQkMS5yZXRyaWFibGUgPyBcImZhbHNlXCIgOiBcInRydWVcIixcblx0XHRcdFx0XHRcdFx0XHQuLi50eXBlb2YgcmVzdWx0JDEucmV0cmlhYmxlID09PSBcInN0cmluZ1wiID8geyBbaGVhZGVyS2V5cy5SZXRyeUFmdGVyXTogcmVzdWx0JDEucmV0cmlhYmxlIH0gOiB7fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkodW5kZWZpbmVkVG9OdWxsKHJlc3VsdCQxLmVycm9yKSksXG5cdFx0XHRcdFx0XHRcdHZlcnNpb246IHZlcnNpb24kMVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFwiZnVuY3Rpb24tcmVzb2x2ZWRcIjogKHJlc3VsdCQxKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZm9yY2VFeGVjdXRpb24pIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcnVuQ29tcGxldGVPcCA9IHtcblx0XHRcdFx0XHRcdFx0XHRpZDogX2ludGVybmFscy5oYXNoSWQoXCJjb21wbGV0ZVwiKSxcblx0XHRcdFx0XHRcdFx0XHRvcDogU3RlcE9wQ29kZS5SdW5Db21wbGV0ZSxcblx0XHRcdFx0XHRcdFx0XHRkYXRhOiB1bmRlZmluZWRUb051bGwocmVzdWx0JDEuZGF0YSlcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRzdGF0dXM6IDIwNixcblx0XHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHJ1bkNvbXBsZXRlT3ApLFxuXHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IHZlcnNpb24kMVxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiAyMDAsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcblx0XHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHVuZGVmaW5lZFRvTnVsbChyZXN1bHQkMS5kYXRhKSksXG5cdFx0XHRcdFx0XHRcdHZlcnNpb246IHZlcnNpb24kMVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFwic3RlcC1ub3QtZm91bmRcIjogKHJlc3VsdCQxKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IDUwMCxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFtoZWFkZXJLZXlzLk5vUmV0cnldOiBcImZhbHNlXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHsgZXJyb3I6IGBDb3VsZCBub3QgZmluZCBzdGVwIFwiJHtyZXN1bHQkMS5zdGVwLmRpc3BsYXlOYW1lIHx8IHJlc3VsdCQxLnN0ZXAuaWR9XCIgdG8gcnVuOyB0aW1lZCBvdXRgIH0pLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcInN0ZXAtcmFuXCI6IChyZXN1bHQkMSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RlcCA9IG9wRGF0YVVuZGVmaW5lZFRvTnVsbChyZXN1bHQkMS5zdGVwKTtcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHN0YXR1czogMjA2LFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0XHRcdFx0XHRcdFx0Li4udHlwZW9mIHJlc3VsdCQxLnJldHJpYWJsZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHtcblx0XHRcdFx0XHRcdFx0XHRcdFtoZWFkZXJLZXlzLk5vUmV0cnldOiByZXN1bHQkMS5yZXRyaWFibGUgPyBcImZhbHNlXCIgOiBcInRydWVcIixcblx0XHRcdFx0XHRcdFx0XHRcdC4uLnR5cGVvZiByZXN1bHQkMS5yZXRyaWFibGUgPT09IFwic3RyaW5nXCIgPyB7IFtoZWFkZXJLZXlzLlJldHJ5QWZ0ZXJdOiByZXN1bHQkMS5yZXRyaWFibGUgfSA6IHt9XG5cdFx0XHRcdFx0XHRcdFx0fSA6IHt9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeShbc3RlcF0pLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcInN0ZXBzLWZvdW5kXCI6IChyZXN1bHQkMSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RlcHMgPSByZXN1bHQkMS5zdGVwcy5tYXAob3BEYXRhVW5kZWZpbmVkVG9OdWxsKTtcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHN0YXR1czogMjA2LFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeShzdGVwcyksXG5cdFx0XHRcdFx0XHRcdHZlcnNpb246IHZlcnNpb24kMVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFwiY2hhbmdlLW1vZGVcIjogKHJlc3VsdCQxKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IDUwMCxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFtoZWFkZXJLZXlzLk5vUmV0cnldOiBcInRydWVcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoeyBlcnJvcjogYFdlIHdhbnRlZCB0byBjaGFuZ2UgbW9kZSB0byBcIiR7cmVzdWx0JDEudG99XCIsIGJ1dCB0aGlzIGlzIG5vdCBzdXBwb3J0ZWQgd2l0aGluIHRoZSBJbm5nZXN0Q29tbUhhbmRsZXIuIFRoaXMgaXMgYSBidWcgaW4gdGhlIElubmdlc3QgU0RLLmAgfSksXG5cdFx0XHRcdFx0XHRcdHZlcnNpb246IHZlcnNpb24kMVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1bc3RlcE91dHB1dC50eXBlXTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgaGFuZGxlcihzdGVwT3V0cHV0KTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0dGhpcy5sb2coXCJlcnJvclwiLCBcIkVycm9yIGhhbmRsaW5nIGV4ZWN1dGlvbiByZXN1bHRcIiwgZXJyKTtcblx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGNvbnN0IGVudiA9IChhd2FpdCBnZXRIZWFkZXJzKCkpW2hlYWRlcktleXMuRW52aXJvbm1lbnRdID8/IG51bGw7XG5cdFx0XHRpZiAobWV0aG9kID09PSBcIkdFVFwiKSByZXR1cm4ge1xuXHRcdFx0XHRzdGF0dXM6IDIwMCxcblx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KGF3YWl0IHRoaXMuaW50cm9zcGVjdGlvbkJvZHkoe1xuXHRcdFx0XHRcdGFjdGlvbnMsXG5cdFx0XHRcdFx0ZW52LFxuXHRcdFx0XHRcdHNpZ25hdHVyZVZhbGlkYXRpb24sXG5cdFx0XHRcdFx0dXJsXG5cdFx0XHRcdH0pKSxcblx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHRcdFx0XHR2ZXJzaW9uOiB2b2lkIDBcblx0XHRcdH07XG5cdFx0XHRpZiAobWV0aG9kID09PSBcIlBVVFwiKSB7XG5cdFx0XHRcdGNvbnN0IFtkZXBsb3lJZCwgaW5CYW5kU3luY1JlcXVlc3RlZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbYWN0aW9ucy5xdWVyeVN0cmluZ1dpdGhEZWZhdWx0cyhcInByb2Nlc3NpbmcgZGVwbG95bWVudCByZXF1ZXN0XCIsIHF1ZXJ5S2V5cy5EZXBsb3lJZCkudGhlbigoZGVwbG95SWQkMSkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBkZXBsb3lJZCQxID09PSBcInVuZGVmaW5lZFwiID8gdm9pZCAwIDogZGVwbG95SWQkMTtcblx0XHRcdFx0fSksIFByb21pc2UucmVzb2x2ZShwYXJzZUFzQm9vbGVhbih0aGlzLmVudltlbnZLZXlzLklubmdlc3RBbGxvd0luQmFuZFN5bmNdKSkudGhlbigoYWxsb3dJbkJhbmRTeW5jKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGFsbG93SW5CYW5kU3luYyAhPT0gdm9pZCAwICYmICFhbGxvd0luQmFuZFN5bmMpIHJldHVybiBzeW5jS2luZC5PdXRPZkJhbmQ7XG5cdFx0XHRcdFx0cmV0dXJuIGFjdGlvbnMuaGVhZGVycyhcInByb2Nlc3NpbmcgZGVwbG95bWVudCByZXF1ZXN0XCIsIGhlYWRlcktleXMuSW5uZ2VzdFN5bmNLaW5kKTtcblx0XHRcdFx0fSkudGhlbigoa2luZCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBraW5kID09PSBzeW5jS2luZC5JbkJhbmQ7XG5cdFx0XHRcdH0pXSk7XG5cdFx0XHRcdGlmIChpbkJhbmRTeW5jUmVxdWVzdGVkKSB7XG5cdFx0XHRcdFx0aWYgKGlzTWlzc2luZ0JvZHkpIHtcblx0XHRcdFx0XHRcdHRoaXMubG9nKFwiZXJyb3JcIiwgXCJNaXNzaW5nIGJvZHkgd2hlbiBzeW5jaW5nLCBwb3NzaWJseSBkdWUgdG8gbWlzc2luZyByZXF1ZXN0IGJvZHkgbWlkZGxld2FyZVwiKTtcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHN0YXR1czogNTAwLFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeShzZXJpYWxpemVFcnJvcigvKiBAX19QVVJFX18gKi8gbmV3IEVycm9yKFwiTWlzc2luZyByZXF1ZXN0IGJvZHkgd2hlbiBzeW5jaW5nLCBwb3NzaWJseSBkdWUgdG8gbWlzc2luZyByZXF1ZXN0IGJvZHkgbWlkZGxld2FyZVwiKSkpLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiB2b2lkIDBcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICghKGF3YWl0IHNpZ25hdHVyZVZhbGlkYXRpb24pLnN1Y2Nlc3MpIHJldHVybiB7XG5cdFx0XHRcdFx0XHRzdGF0dXM6IDQwMSxcblx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeSh7IGNvZGU6IFwic2lnX3ZlcmlmaWNhdGlvbl9mYWlsZWRcIiB9KSxcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcblx0XHRcdFx0XHRcdHZlcnNpb246IHZvaWQgMFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gaW5CYW5kU3luY1JlcXVlc3RCb2R5U2NoZW1hLnNhZmVQYXJzZShib2R5KTtcblx0XHRcdFx0XHRpZiAoIXJlcy5zdWNjZXNzKSByZXR1cm4ge1xuXHRcdFx0XHRcdFx0c3RhdHVzOiA0MDAsXG5cdFx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0XHRjb2RlOiBcImludmFsaWRfcmVxdWVzdFwiLFxuXHRcdFx0XHRcdFx0XHRtZXNzYWdlOiByZXMuZXJyb3IubWVzc2FnZVxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiB2b2lkIDBcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHVybCA9IHRoaXMucmVxVXJsKG5ldyBVUkwocmVzLmRhdGEudXJsKSk7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdHN0YXR1czogMjAwLFxuXHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KGF3YWl0IHRoaXMuaW5CYW5kUmVnaXN0ZXJCb2R5KHtcblx0XHRcdFx0XHRcdFx0YWN0aW9ucyxcblx0XHRcdFx0XHRcdFx0ZGVwbG95SWQsXG5cdFx0XHRcdFx0XHRcdGVudixcblx0XHRcdFx0XHRcdFx0c2lnbmF0dXJlVmFsaWRhdGlvbixcblx0XHRcdFx0XHRcdFx0dXJsXG5cdFx0XHRcdFx0XHR9KSksXG5cdFx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcdFx0XHRbaGVhZGVyS2V5cy5Jbm5nZXN0U3luY0tpbmRdOiBzeW5jS2luZC5JbkJhbmRcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiB2b2lkIDBcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHsgc3RhdHVzLCBtZXNzYWdlLCBtb2RpZmllZCB9ID0gYXdhaXQgdGhpcy5yZWdpc3Rlcih0aGlzLnJlcVVybCh1cmwpLCBkZXBsb3lJZCwgZ2V0SGVhZGVycyk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0c3RhdHVzLFxuXHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0XHRtZXNzYWdlLFxuXHRcdFx0XHRcdFx0bW9kaWZpZWRcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0XHRcdFtoZWFkZXJLZXlzLklubmdlc3RTeW5jS2luZF06IHN5bmNLaW5kLk91dE9mQmFuZFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dmVyc2lvbjogdm9pZCAwXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdGF0dXM6IDUwMCxcblx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHtcblx0XHRcdFx0XHR0eXBlOiBcImludGVybmFsXCIsXG5cdFx0XHRcdFx0Li4uc2VyaWFsaXplRXJyb3IoZXJyKVxuXHRcdFx0XHR9KSxcblx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHRcdFx0XHR2ZXJzaW9uOiB2b2lkIDBcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRzdGF0dXM6IDQwNSxcblx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0bWVzc2FnZTogXCJObyBhY3Rpb24gZm91bmQ7IHJlcXVlc3Qgd2FzIGxpa2VseSBub3QgUE9TVCwgUFVULCBvciBHRVRcIixcblx0XHRcdFx0bW9kZTogdGhpcy5fbW9kZVxuXHRcdFx0fSksXG5cdFx0XHRoZWFkZXJzOiB7fSxcblx0XHRcdHZlcnNpb246IHZvaWQgMFxuXHRcdH07XG5cdH1cblx0cnVuU3RlcCh7IGFjdGlvbnMsIGZ1bmN0aW9uSWQsIHN0ZXBJZCwgZGF0YSwgdGltZXIsIHJlcUFyZ3MsIGhlYWRlcnMsIGZuLCBmb3JjZUV4ZWN1dGlvbiB9KSB7XG5cdFx0aWYgKCFmbikgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBmdW5jdGlvbiB3aXRoIElEIFwiJHtmdW5jdGlvbklkfVwiYCk7XG5cdFx0Y29uc3QgaW1tZWRpYXRlRm5EYXRhID0gcGFyc2VGbkRhdGEoZGF0YSk7XG5cdFx0bGV0IHsgdmVyc2lvbjogdmVyc2lvbiQxLCBzZGtEZWNpZGVkIH0gPSBpbW1lZGlhdGVGbkRhdGE7XG5cdFx0aWYgKHZlcnNpb24kMSA9PT0gRXhlY3V0aW9uVmVyc2lvbi5WMSAmJiBzZGtEZWNpZGVkICYmIGZuLmZuW1wic2hvdWxkT3B0aW1pemVQYXJhbGxlbGlzbVwiXT8uKCkpIHZlcnNpb24kMSA9IEV4ZWN1dGlvblZlcnNpb24uVjI7XG5cdFx0Y29uc3QgcmVzdWx0ID0gcnVuQXNQcm9taXNlKGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IGFueUZuRGF0YSA9IGF3YWl0IGZldGNoQWxsRm5EYXRhKHtcblx0XHRcdFx0ZGF0YTogaW1tZWRpYXRlRm5EYXRhLFxuXHRcdFx0XHRhcGk6IHRoaXMuY2xpZW50W1wiaW5uZ2VzdEFwaVwiXSxcblx0XHRcdFx0dmVyc2lvbjogdmVyc2lvbiQxXG5cdFx0XHR9KTtcblx0XHRcdGlmICghYW55Rm5EYXRhLm9rKSB0aHJvdyBuZXcgRXJyb3IoYW55Rm5EYXRhLmVycm9yKTtcblx0XHRcdGNvbnN0IGNyZWF0ZVJlc3BvbnNlID0gZm9yY2VFeGVjdXRpb24gJiYgYWN0aW9ucy5leHBlcmltZW50YWxUcmFuc2Zvcm1TeW5jUmVzcG9uc2UgPyAoZGF0YSQxKSA9PiBhY3Rpb25zLmV4cGVyaW1lbnRhbFRyYW5zZm9ybVN5bmNSZXNwb25zZShcImNyZWF0ZWQgc3luYy0+YXN5bmMgcmVzcG9uc2VcIiwgZGF0YSQxKS50aGVuKChyZXMpID0+ICh7XG5cdFx0XHRcdC4uLnJlcyxcblx0XHRcdFx0dmVyc2lvbjogdmVyc2lvbiQxXG5cdFx0XHR9KSkgOiB2b2lkIDA7XG5cdFx0XHRjb25zdCBleGVjdXRpb25PcHRpb25zID0gYXdhaXQgKChzKSA9PiBzKSh7XG5cdFx0XHRcdFtFeGVjdXRpb25WZXJzaW9uLlYwXTogKHsgZXZlbnQsIGV2ZW50cywgc3RlcHMsIGN0eCwgdmVyc2lvbjogdmVyc2lvbiQyIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCBzdGVwU3RhdGUgPSBPYmplY3QuZW50cmllcyhzdGVwcyA/PyB7fSkucmVkdWNlKChhY2MsIFtpZCwgZGF0YSQxXSkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0Li4uYWNjLFxuXHRcdFx0XHRcdFx0XHRbaWRdOiB7XG5cdFx0XHRcdFx0XHRcdFx0aWQsXG5cdFx0XHRcdFx0XHRcdFx0ZGF0YTogZGF0YSQxXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSwge30pO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDIsXG5cdFx0XHRcdFx0XHRwYXJ0aWFsT3B0aW9uczoge1xuXHRcdFx0XHRcdFx0XHRjbGllbnQ6IHRoaXMuY2xpZW50LFxuXHRcdFx0XHRcdFx0XHRydW5JZDogY3R4Py5ydW5faWQgfHwgXCJcIixcblx0XHRcdFx0XHRcdFx0c3RlcE1vZGU6IFN0ZXBNb2RlLkFzeW5jLFxuXHRcdFx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnQsXG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnRzLFxuXHRcdFx0XHRcdFx0XHRcdHJ1bklkOiBjdHg/LnJ1bl9pZCB8fCBcIlwiLFxuXHRcdFx0XHRcdFx0XHRcdGF0dGVtcHQ6IGN0eD8uYXR0ZW1wdCA/PyAwXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHN0ZXBTdGF0ZSxcblx0XHRcdFx0XHRcdFx0cmVxdWVzdGVkUnVuU3RlcDogc3RlcElkID09PSBcInN0ZXBcIiA/IHZvaWQgMCA6IHN0ZXBJZCB8fCB2b2lkIDAsXG5cdFx0XHRcdFx0XHRcdHRpbWVyLFxuXHRcdFx0XHRcdFx0XHRpc0ZhaWx1cmVIYW5kbGVyOiBmbi5vbkZhaWx1cmUsXG5cdFx0XHRcdFx0XHRcdHN0ZXBDb21wbGV0aW9uT3JkZXI6IGN0eD8uc3RhY2s/LnN0YWNrID8/IFtdLFxuXHRcdFx0XHRcdFx0XHRyZXFBcmdzLFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVSZXNwb25zZVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFtFeGVjdXRpb25WZXJzaW9uLlYxXTogKHsgZXZlbnQsIGV2ZW50cywgc3RlcHMsIGN0eCwgdmVyc2lvbjogdmVyc2lvbiQyIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCBzdGVwU3RhdGUgPSBPYmplY3QuZW50cmllcyhzdGVwcyA/PyB7fSkucmVkdWNlKChhY2MsIFtpZCwgcmVzdWx0JDFdKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHQuLi5hY2MsXG5cdFx0XHRcdFx0XHRcdFtpZF06IHJlc3VsdCQxLnR5cGUgPT09IFwiZGF0YVwiID8ge1xuXHRcdFx0XHRcdFx0XHRcdGlkLFxuXHRcdFx0XHRcdFx0XHRcdGRhdGE6IHJlc3VsdCQxLmRhdGFcblx0XHRcdFx0XHRcdFx0fSA6IHJlc3VsdCQxLnR5cGUgPT09IFwiaW5wdXRcIiA/IHtcblx0XHRcdFx0XHRcdFx0XHRpZCxcblx0XHRcdFx0XHRcdFx0XHRpbnB1dDogcmVzdWx0JDEuaW5wdXRcblx0XHRcdFx0XHRcdFx0fSA6IHtcblx0XHRcdFx0XHRcdFx0XHRpZCxcblx0XHRcdFx0XHRcdFx0XHRlcnJvcjogcmVzdWx0JDEuZXJyb3Jcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9LCB7fSk7XG5cdFx0XHRcdFx0Y29uc3QgcmVxdWVzdGVkUnVuU3RlcCA9IHN0ZXBJZCA9PT0gXCJzdGVwXCIgPyB2b2lkIDAgOiBzdGVwSWQgfHwgdm9pZCAwO1xuXHRcdFx0XHRcdGNvbnN0IGNoZWNrcG9pbnRpbmdDb25maWcgPSBmbi5mbltcInNob3VsZEFzeW5jQ2hlY2twb2ludFwiXShyZXF1ZXN0ZWRSdW5TdGVwLCBjdHg/LmZuX2lkLCBCb29sZWFuKGN0eD8uZGlzYWJsZV9pbW1lZGlhdGVfZXhlY3V0aW9uKSk7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdHZlcnNpb246IHZlcnNpb24kMixcblx0XHRcdFx0XHRcdHBhcnRpYWxPcHRpb25zOiB7XG5cdFx0XHRcdFx0XHRcdGNsaWVudDogdGhpcy5jbGllbnQsXG5cdFx0XHRcdFx0XHRcdHJ1bklkOiBjdHg/LnJ1bl9pZCB8fCBcIlwiLFxuXHRcdFx0XHRcdFx0XHRzdGVwTW9kZTogY2hlY2twb2ludGluZ0NvbmZpZyA/IFN0ZXBNb2RlLkFzeW5jQ2hlY2twb2ludGluZyA6IFN0ZXBNb2RlLkFzeW5jLFxuXHRcdFx0XHRcdFx0XHRjaGVja3BvaW50aW5nQ29uZmlnLFxuXHRcdFx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnQsXG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnRzLFxuXHRcdFx0XHRcdFx0XHRcdHJ1bklkOiBjdHg/LnJ1bl9pZCB8fCBcIlwiLFxuXHRcdFx0XHRcdFx0XHRcdGF0dGVtcHQ6IGN0eD8uYXR0ZW1wdCA/PyAwLFxuXHRcdFx0XHRcdFx0XHRcdG1heEF0dGVtcHRzOiBjdHg/Lm1heF9hdHRlbXB0c1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRpbnRlcm5hbEZuSWQ6IGN0eD8uZm5faWQsXG5cdFx0XHRcdFx0XHRcdHF1ZXVlSXRlbUlkOiBjdHg/LnFpX2lkLFxuXHRcdFx0XHRcdFx0XHRzdGVwU3RhdGUsXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RlZFJ1blN0ZXAsXG5cdFx0XHRcdFx0XHRcdHRpbWVyLFxuXHRcdFx0XHRcdFx0XHRpc0ZhaWx1cmVIYW5kbGVyOiBmbi5vbkZhaWx1cmUsXG5cdFx0XHRcdFx0XHRcdGRpc2FibGVJbW1lZGlhdGVFeGVjdXRpb246IGN0eD8uZGlzYWJsZV9pbW1lZGlhdGVfZXhlY3V0aW9uLFxuXHRcdFx0XHRcdFx0XHRzdGVwQ29tcGxldGlvbk9yZGVyOiBjdHg/LnN0YWNrPy5zdGFjayA/PyBbXSxcblx0XHRcdFx0XHRcdFx0cmVxQXJncyxcblx0XHRcdFx0XHRcdFx0aGVhZGVycyxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlUmVzcG9uc2Vcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRbRXhlY3V0aW9uVmVyc2lvbi5WMl06ICh7IGV2ZW50LCBldmVudHMsIHN0ZXBzLCBjdHgsIHZlcnNpb246IHZlcnNpb24kMiB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qgc3RlcFN0YXRlID0gT2JqZWN0LmVudHJpZXMoc3RlcHMgPz8ge30pLnJlZHVjZSgoYWNjLCBbaWQsIHJlc3VsdCQxXSkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0Li4uYWNjLFxuXHRcdFx0XHRcdFx0XHRbaWRdOiByZXN1bHQkMS50eXBlID09PSBcImRhdGFcIiA/IHtcblx0XHRcdFx0XHRcdFx0XHRpZCxcblx0XHRcdFx0XHRcdFx0XHRkYXRhOiByZXN1bHQkMS5kYXRhXG5cdFx0XHRcdFx0XHRcdH0gOiByZXN1bHQkMS50eXBlID09PSBcImlucHV0XCIgPyB7XG5cdFx0XHRcdFx0XHRcdFx0aWQsXG5cdFx0XHRcdFx0XHRcdFx0aW5wdXQ6IHJlc3VsdCQxLmlucHV0XG5cdFx0XHRcdFx0XHRcdH0gOiB7XG5cdFx0XHRcdFx0XHRcdFx0aWQsXG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IHJlc3VsdCQxLmVycm9yXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSwge30pO1xuXHRcdFx0XHRcdGNvbnN0IHJlcXVlc3RlZFJ1blN0ZXAgPSBzdGVwSWQgPT09IFwic3RlcFwiID8gdm9pZCAwIDogc3RlcElkIHx8IHZvaWQgMDtcblx0XHRcdFx0XHRjb25zdCBjaGVja3BvaW50aW5nQ29uZmlnID0gZm4uZm5bXCJzaG91bGRBc3luY0NoZWNrcG9pbnRcIl0ocmVxdWVzdGVkUnVuU3RlcCwgY3R4Py5mbl9pZCwgQm9vbGVhbihjdHg/LmRpc2FibGVfaW1tZWRpYXRlX2V4ZWN1dGlvbikpO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDIsXG5cdFx0XHRcdFx0XHRwYXJ0aWFsT3B0aW9uczoge1xuXHRcdFx0XHRcdFx0XHRjbGllbnQ6IHRoaXMuY2xpZW50LFxuXHRcdFx0XHRcdFx0XHRydW5JZDogY3R4Py5ydW5faWQgfHwgXCJcIixcblx0XHRcdFx0XHRcdFx0c3RlcE1vZGU6IGNoZWNrcG9pbnRpbmdDb25maWcgPyBTdGVwTW9kZS5Bc3luY0NoZWNrcG9pbnRpbmcgOiBTdGVwTW9kZS5Bc3luYyxcblx0XHRcdFx0XHRcdFx0Y2hlY2twb2ludGluZ0NvbmZpZyxcblx0XHRcdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0XHRcdGV2ZW50LFxuXHRcdFx0XHRcdFx0XHRcdGV2ZW50cyxcblx0XHRcdFx0XHRcdFx0XHRydW5JZDogY3R4Py5ydW5faWQgfHwgXCJcIixcblx0XHRcdFx0XHRcdFx0XHRhdHRlbXB0OiBjdHg/LmF0dGVtcHQgPz8gMCxcblx0XHRcdFx0XHRcdFx0XHRtYXhBdHRlbXB0czogY3R4Py5tYXhfYXR0ZW1wdHNcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0aW50ZXJuYWxGbklkOiBjdHg/LmZuX2lkLFxuXHRcdFx0XHRcdFx0XHRxdWV1ZUl0ZW1JZDogY3R4Py5xaV9pZCxcblx0XHRcdFx0XHRcdFx0c3RlcFN0YXRlLFxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0ZWRSdW5TdGVwLFxuXHRcdFx0XHRcdFx0XHR0aW1lcixcblx0XHRcdFx0XHRcdFx0aXNGYWlsdXJlSGFuZGxlcjogZm4ub25GYWlsdXJlLFxuXHRcdFx0XHRcdFx0XHRkaXNhYmxlSW1tZWRpYXRlRXhlY3V0aW9uOiBjdHg/LmRpc2FibGVfaW1tZWRpYXRlX2V4ZWN1dGlvbixcblx0XHRcdFx0XHRcdFx0c3RlcENvbXBsZXRpb25PcmRlcjogY3R4Py5zdGFjaz8uc3RhY2sgPz8gW10sXG5cdFx0XHRcdFx0XHRcdHJlcUFyZ3MsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnMsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZVJlc3BvbnNlXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0fSlbdmVyc2lvbiQxXShhbnlGbkRhdGEudmFsdWUpO1xuXHRcdFx0cmV0dXJuIGZuLmZuW1wiY3JlYXRlRXhlY3V0aW9uXCJdKGV4ZWN1dGlvbk9wdGlvbnMpLnN0YXJ0KCk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHZlcnNpb246IHZlcnNpb24kMSxcblx0XHRcdHJlc3VsdFxuXHRcdH07XG5cdH1cblx0Y29uZmlncyh1cmwpIHtcblx0XHRjb25zdCBjb25maWdzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnJhd0ZucykucmVkdWNlKChhY2MsIGZuKSA9PiBbLi4uYWNjLCAuLi5mbltcImdldENvbmZpZ1wiXSh7XG5cdFx0XHRiYXNlVXJsOiB1cmwsXG5cdFx0XHRhcHBQcmVmaXg6IHRoaXMuaWRcblx0XHR9KV0sIFtdKTtcblx0XHRmb3IgKGNvbnN0IGNvbmZpZyBvZiBjb25maWdzKSB7XG5cdFx0XHRjb25zdCBjaGVjayA9IGZ1bmN0aW9uQ29uZmlnU2NoZW1hLnNhZmVQYXJzZShjb25maWcpO1xuXHRcdFx0aWYgKCFjaGVjay5zdWNjZXNzKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9ycyA9IGNoZWNrLmVycm9yLmVycm9ycy5tYXAoKGVycikgPT4gZXJyLm1lc3NhZ2UpLmpvaW4oXCI7IFwiKTtcblx0XHRcdFx0dGhpcy5sb2coXCJ3YXJuXCIsIGBDb25maWcgaW52YWxpZCBmb3IgZnVuY3Rpb24gXCIke2NvbmZpZy5pZH1cIiA6ICR7ZXJyb3JzfWApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY29uZmlncztcblx0fVxuXHQvKipcblx0KiBSZXR1cm4gYW4gSW5uZ2VzdCBzZXJ2ZSBlbmRwb2ludCBVUkwgZ2l2ZW4gYSBwb3RlbnRpYWwgYHBhdGhgIGFuZCBgaG9zdGAuXG5cdCpcblx0KiBXaWxsIGF1dG9tYXRpY2FsbHkgdXNlIHRoZSBgc2VydmVIb3N0YCBhbmQgYHNlcnZlUGF0aGAgaWYgdGhleSBoYXZlIGJlZW5cblx0KiBzZXQgd2hlbiByZWdpc3RlcmluZy5cblx0Ki9cblx0cmVxVXJsKHVybCkge1xuXHRcdGxldCByZXQgPSBuZXcgVVJMKHVybCk7XG5cdFx0Y29uc3Qgc2VydmVIb3N0ID0gdGhpcy5zZXJ2ZUhvc3QgfHwgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0U2VydmVIb3N0XTtcblx0XHRjb25zdCBzZXJ2ZVBhdGggPSB0aGlzLnNlcnZlUGF0aCB8fCB0aGlzLmVudltlbnZLZXlzLklubmdlc3RTZXJ2ZVBhdGhdO1xuXHRcdGlmIChzZXJ2ZVBhdGgpIHJldC5wYXRobmFtZSA9IHNlcnZlUGF0aDtcblx0XHRpZiAoc2VydmVIb3N0KSByZXQgPSBuZXcgVVJMKHJldC5wYXRobmFtZSArIHJldC5zZWFyY2gsIHNlcnZlSG9zdCk7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXHRyZWdpc3RlckJvZHkoeyB1cmwsIGRlcGxveUlkIH0pIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dXJsOiB1cmwuaHJlZixcblx0XHRcdGRlcGxveVR5cGU6IFwicGluZ1wiLFxuXHRcdFx0ZnJhbWV3b3JrOiB0aGlzLmZyYW1ld29ya05hbWUsXG5cdFx0XHRhcHBOYW1lOiB0aGlzLmlkLFxuXHRcdFx0ZnVuY3Rpb25zOiB0aGlzLmNvbmZpZ3ModXJsKSxcblx0XHRcdHNkazogYGpzOnYke3ZlcnNpb259YCxcblx0XHRcdHY6IFwiMC4xXCIsXG5cdFx0XHRkZXBsb3lJZDogZGVwbG95SWQgfHwgdm9pZCAwLFxuXHRcdFx0Y2FwYWJpbGl0aWVzOiB7XG5cdFx0XHRcdHRydXN0X3Byb2JlOiBcInYxXCIsXG5cdFx0XHRcdGNvbm5lY3Q6IFwidjFcIlxuXHRcdFx0fSxcblx0XHRcdGFwcFZlcnNpb246IHRoaXMuY2xpZW50LmFwcFZlcnNpb25cblx0XHR9O1xuXHR9XG5cdGFzeW5jIGluQmFuZFJlZ2lzdGVyQm9keSh7IGFjdGlvbnMsIGRlcGxveUlkLCBlbnYsIHNpZ25hdHVyZVZhbGlkYXRpb24sIHVybCB9KSB7XG5cdFx0Y29uc3QgcmVnaXN0ZXJCb2R5ID0gdGhpcy5yZWdpc3RlckJvZHkoe1xuXHRcdFx0ZGVwbG95SWQsXG5cdFx0XHR1cmxcblx0XHR9KTtcblx0XHRjb25zdCBpbnRyb3NwZWN0aW9uQm9keSA9IGF3YWl0IHRoaXMuaW50cm9zcGVjdGlvbkJvZHkoe1xuXHRcdFx0YWN0aW9ucyxcblx0XHRcdGVudixcblx0XHRcdHNpZ25hdHVyZVZhbGlkYXRpb24sXG5cdFx0XHR1cmxcblx0XHR9KTtcblx0XHRjb25zdCBib2R5ID0ge1xuXHRcdFx0YXBwX2lkOiB0aGlzLmlkLFxuXHRcdFx0YXBwVmVyc2lvbjogdGhpcy5jbGllbnQuYXBwVmVyc2lvbixcblx0XHRcdGNhcGFiaWxpdGllczogcmVnaXN0ZXJCb2R5LmNhcGFiaWxpdGllcyxcblx0XHRcdGVudixcblx0XHRcdGZyYW1ld29yazogcmVnaXN0ZXJCb2R5LmZyYW1ld29yayxcblx0XHRcdGZ1bmN0aW9uczogcmVnaXN0ZXJCb2R5LmZ1bmN0aW9ucyxcblx0XHRcdGluc3BlY3Rpb246IGludHJvc3BlY3Rpb25Cb2R5LFxuXHRcdFx0cGxhdGZvcm06IGdldFBsYXRmb3JtTmFtZSh7XG5cdFx0XHRcdC4uLmFsbFByb2Nlc3NFbnYoKSxcblx0XHRcdFx0Li4udGhpcy5lbnZcblx0XHRcdH0pLFxuXHRcdFx0c2RrX2F1dGhvcjogXCJpbm5nZXN0XCIsXG5cdFx0XHRzZGtfbGFuZ3VhZ2U6IFwiXCIsXG5cdFx0XHRzZGtfdmVyc2lvbjogXCJcIixcblx0XHRcdHNkazogcmVnaXN0ZXJCb2R5LnNkayxcblx0XHRcdHVybDogcmVnaXN0ZXJCb2R5LnVybFxuXHRcdH07XG5cdFx0aWYgKFwiYXV0aGVudGljYXRpb25fc3VjY2VlZGVkXCIgaW4gaW50cm9zcGVjdGlvbkJvZHkgJiYgaW50cm9zcGVjdGlvbkJvZHkuYXV0aGVudGljYXRpb25fc3VjY2VlZGVkKSB7XG5cdFx0XHRib2R5LnNka19sYW5ndWFnZSA9IGludHJvc3BlY3Rpb25Cb2R5LnNka19sYW5ndWFnZTtcblx0XHRcdGJvZHkuc2RrX3ZlcnNpb24gPSBpbnRyb3NwZWN0aW9uQm9keS5zZGtfdmVyc2lvbjtcblx0XHR9XG5cdFx0cmV0dXJuIGJvZHk7XG5cdH1cblx0YXN5bmMgaW50cm9zcGVjdGlvbkJvZHkoeyBhY3Rpb25zLCBlbnYsIHNpZ25hdHVyZVZhbGlkYXRpb24sIHVybCB9KSB7XG5cdFx0Y29uc3QgcmVnaXN0ZXJCb2R5ID0gdGhpcy5yZWdpc3RlckJvZHkoe1xuXHRcdFx0dXJsOiB0aGlzLnJlcVVybCh1cmwpLFxuXHRcdFx0ZGVwbG95SWQ6IG51bGxcblx0XHR9KTtcblx0XHRpZiAoIXRoaXMuX21vZGUpIHRocm93IG5ldyBFcnJvcihcIk5vIG1vZGUgc2V0OyBjYW5ub3QgaW50cm9zcGVjdCB3aXRob3V0IG1vZGVcIik7XG5cdFx0bGV0IGludHJvc3BlY3Rpb24gPSB7XG5cdFx0XHRleHRyYTogeyBpc19tb2RlX2V4cGxpY2l0OiB0aGlzLl9tb2RlLmlzRXhwbGljaXQgfSxcblx0XHRcdGhhc19ldmVudF9rZXk6IHRoaXMuY2xpZW50W1wiZXZlbnRLZXlTZXRcIl0oKSxcblx0XHRcdGhhc19zaWduaW5nX2tleTogQm9vbGVhbih0aGlzLnNpZ25pbmdLZXkpLFxuXHRcdFx0ZnVuY3Rpb25fY291bnQ6IHJlZ2lzdGVyQm9keS5mdW5jdGlvbnMubGVuZ3RoLFxuXHRcdFx0bW9kZTogdGhpcy5fbW9kZS50eXBlLFxuXHRcdFx0c2NoZW1hX3ZlcnNpb246IFwiMjAyNC0wNS0yNFwiXG5cdFx0fTtcblx0XHRpZiAodGhpcy5fbW9kZS50eXBlID09PSBcImNsb3VkXCIpIHRyeSB7XG5cdFx0XHRpZiAoIShhd2FpdCBzaWduYXR1cmVWYWxpZGF0aW9uKS5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IoXCJTaWduYXR1cmUgdmFsaWRhdGlvbiBmYWlsZWRcIik7XG5cdFx0XHRpbnRyb3NwZWN0aW9uID0ge1xuXHRcdFx0XHQuLi5pbnRyb3NwZWN0aW9uLFxuXHRcdFx0XHRhdXRoZW50aWNhdGlvbl9zdWNjZWVkZWQ6IHRydWUsXG5cdFx0XHRcdGFwaV9vcmlnaW46IHRoaXMuYXBpQmFzZVVybCxcblx0XHRcdFx0YXBwX2lkOiB0aGlzLmlkLFxuXHRcdFx0XHRjYXBhYmlsaXRpZXM6IHtcblx0XHRcdFx0XHR0cnVzdF9wcm9iZTogXCJ2MVwiLFxuXHRcdFx0XHRcdGNvbm5lY3Q6IFwidjFcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRlbnYsXG5cdFx0XHRcdGV2ZW50X2FwaV9vcmlnaW46IHRoaXMuZXZlbnRBcGlCYXNlVXJsLFxuXHRcdFx0XHRldmVudF9rZXlfaGFzaDogdGhpcy5oYXNoZWRFdmVudEtleSA/PyBudWxsLFxuXHRcdFx0XHRleHRyYToge1xuXHRcdFx0XHRcdC4uLmludHJvc3BlY3Rpb24uZXh0cmEsXG5cdFx0XHRcdFx0aXNfc3RyZWFtaW5nOiBhd2FpdCB0aGlzLnNob3VsZFN0cmVhbShhY3Rpb25zKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmcmFtZXdvcms6IHRoaXMuZnJhbWV3b3JrTmFtZSxcblx0XHRcdFx0c2RrX2xhbmd1YWdlOiBcImpzXCIsXG5cdFx0XHRcdHNka192ZXJzaW9uOiB2ZXJzaW9uLFxuXHRcdFx0XHRzZXJ2ZV9vcmlnaW46IHRoaXMuc2VydmVIb3N0ID8/IG51bGwsXG5cdFx0XHRcdHNlcnZlX3BhdGg6IHRoaXMuc2VydmVQYXRoID8/IG51bGwsXG5cdFx0XHRcdHNpZ25pbmdfa2V5X2ZhbGxiYWNrX2hhc2g6IHRoaXMuaGFzaGVkU2lnbmluZ0tleUZhbGxiYWNrID8/IG51bGwsXG5cdFx0XHRcdHNpZ25pbmdfa2V5X2hhc2g6IHRoaXMuaGFzaGVkU2lnbmluZ0tleSA/PyBudWxsXG5cdFx0XHR9O1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0aW50cm9zcGVjdGlvbiA9IHsgLi4uaW50cm9zcGVjdGlvbiB9O1xuXHRcdH1cblx0XHRyZXR1cm4gaW50cm9zcGVjdGlvbjtcblx0fVxuXHRhc3luYyByZWdpc3Rlcih1cmwsIGRlcGxveUlkLCBnZXRIZWFkZXJzKSB7XG5cdFx0Y29uc3QgYm9keSA9IHRoaXMucmVnaXN0ZXJCb2R5KHtcblx0XHRcdHVybCxcblx0XHRcdGRlcGxveUlkXG5cdFx0fSk7XG5cdFx0bGV0IHJlcztcblx0XHRsZXQgcmVnaXN0ZXJVUkwgPSBuZXcgVVJMKHRoaXMuaW5uZ2VzdFJlZ2lzdGVyVXJsLmhyZWYpO1xuXHRcdGlmICh0aGlzLl9tb2RlICYmIHRoaXMuX21vZGUuaXNJbmZlcnJlZCAmJiB0aGlzLl9tb2RlLmlzRGV2KSB7XG5cdFx0XHRjb25zdCBob3N0ID0gZGV2U2VydmVySG9zdCh0aGlzLmVudik7XG5cdFx0XHRpZiAoYXdhaXQgZGV2U2VydmVyQXZhaWxhYmxlKGhvc3QsIHRoaXMuZmV0Y2gpKSByZWdpc3RlclVSTCA9IGRldlNlcnZlclVybChob3N0LCBcIi9mbi9yZWdpc3RlclwiKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuX21vZGU/LmV4cGxpY2l0RGV2VXJsKSByZWdpc3RlclVSTCA9IGRldlNlcnZlclVybCh0aGlzLl9tb2RlLmV4cGxpY2l0RGV2VXJsLmhyZWYsIFwiL2ZuL3JlZ2lzdGVyXCIpO1xuXHRcdGlmIChkZXBsb3lJZCkgcmVnaXN0ZXJVUkwuc2VhcmNoUGFyYW1zLnNldChxdWVyeUtleXMuRGVwbG95SWQsIGRlcGxveUlkKTtcblx0XHR0cnkge1xuXHRcdFx0cmVzID0gYXdhaXQgZmV0Y2hXaXRoQXV0aEZhbGxiYWNrKHtcblx0XHRcdFx0YXV0aFRva2VuOiB0aGlzLmhhc2hlZFNpZ25pbmdLZXksXG5cdFx0XHRcdGF1dGhUb2tlbkZhbGxiYWNrOiB0aGlzLmhhc2hlZFNpZ25pbmdLZXlGYWxsYmFjayxcblx0XHRcdFx0ZmV0Y2g6IHRoaXMuZmV0Y2gsXG5cdFx0XHRcdHVybDogcmVnaXN0ZXJVUkwuaHJlZixcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KGJvZHkpLFxuXHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdC4uLmF3YWl0IGdldEhlYWRlcnMoKSxcblx0XHRcdFx0XHRcdFtoZWFkZXJLZXlzLklubmdlc3RTeW5jS2luZF06IHN5bmNLaW5kLk91dE9mQmFuZFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVkaXJlY3Q6IFwiZm9sbG93XCJcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHR0aGlzLmxvZyhcImVycm9yXCIsIGVycik7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdGF0dXM6IDUwMCxcblx0XHRcdFx0bWVzc2FnZTogYEZhaWxlZCB0byByZWdpc3RlciR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBgOyAke2Vyci5tZXNzYWdlfWAgOiBcIlwifWAsXG5cdFx0XHRcdG1vZGlmaWVkOiBmYWxzZVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0Y29uc3QgcmF3ID0gYXdhaXQgcmVzLnRleHQoKTtcblx0XHRsZXQgZGF0YSA9IHt9O1xuXHRcdHRyeSB7XG5cdFx0XHRkYXRhID0gSlNPTi5wYXJzZShyYXcpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dGhpcy5sb2coXCJ3YXJuXCIsIFwiQ291bGRuJ3QgdW5wYWNrIHJlZ2lzdGVyIHJlc3BvbnNlOlwiLCBlcnIpO1xuXHRcdFx0bGV0IG1lc3NhZ2UgPSBcIkZhaWxlZCB0byByZWdpc3RlclwiO1xuXHRcdFx0aWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSBtZXNzYWdlICs9IGA7ICR7ZXJyLm1lc3NhZ2V9YDtcblx0XHRcdG1lc3NhZ2UgKz0gYDsgc3RhdHVzIGNvZGU6ICR7cmVzLnN0YXR1c31gO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0c3RhdHVzOiA1MDAsXG5cdFx0XHRcdG1lc3NhZ2UsXG5cdFx0XHRcdG1vZGlmaWVkOiBmYWxzZVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0bGV0IHN0YXR1cztcblx0XHRsZXQgZXJyb3I7XG5cdFx0bGV0IHNraXBwZWQ7XG5cdFx0bGV0IG1vZGlmaWVkO1xuXHRcdHRyeSB7XG5cdFx0XHQoe3N0YXR1cywgZXJyb3IsIHNraXBwZWQsIG1vZGlmaWVkfSA9IHJlZ2lzdGVyUmVzU2NoZW1hLnBhcnNlKGRhdGEpKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdHRoaXMubG9nKFwid2FyblwiLCBcIkludmFsaWQgcmVnaXN0ZXIgcmVzcG9uc2Ugc2NoZW1hOlwiLCBlcnIpO1xuXHRcdFx0bGV0IG1lc3NhZ2UgPSBcIkZhaWxlZCB0byByZWdpc3RlclwiO1xuXHRcdFx0aWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSBtZXNzYWdlICs9IGA7ICR7ZXJyLm1lc3NhZ2V9YDtcblx0XHRcdG1lc3NhZ2UgKz0gYDsgc3RhdHVzIGNvZGU6ICR7cmVzLnN0YXR1c31gO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0c3RhdHVzOiA1MDAsXG5cdFx0XHRcdG1lc3NhZ2UsXG5cdFx0XHRcdG1vZGlmaWVkOiBmYWxzZVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aWYgKCFza2lwcGVkKSB0aGlzLmxvZyhcImRlYnVnXCIsIFwicmVnaXN0ZXJlZCBpbm5nZXN0IGZ1bmN0aW9uczpcIiwgcmVzLnN0YXR1cywgcmVzLnN0YXR1c1RleHQsIGRhdGEpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRzdGF0dXMsXG5cdFx0XHRtZXNzYWdlOiBlcnJvcixcblx0XHRcdG1vZGlmaWVkXG5cdFx0fTtcblx0fVxuXHQvKipcblx0KiBHaXZlbiBhbiBlbnZpcm9ubWVudCwgdXBzZXJ0IGFueSBtaXNzaW5nIGtleXMuIFRoaXMgaXMgdXNlZnVsIGluXG5cdCogc2l0dWF0aW9ucyB3aGVyZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHBhc3NlZCBkaXJlY3RseSB0byBoYW5kbGVycyBvclxuXHQqIGFyZSBvdGhlcndpc2UgZGlmZmljdWx0IHRvIGFjY2VzcyBkdXJpbmcgaW5pdGlhbGl6YXRpb24uXG5cdCovXG5cdHVwc2VydEtleXNGcm9tRW52KCkge1xuXHRcdGlmICh0aGlzLmVudltlbnZLZXlzLklubmdlc3RTaWduaW5nS2V5XSkge1xuXHRcdFx0aWYgKCF0aGlzLnNpZ25pbmdLZXkpIHRoaXMuc2lnbmluZ0tleSA9IFN0cmluZyh0aGlzLmVudltlbnZLZXlzLklubmdlc3RTaWduaW5nS2V5XSk7XG5cdFx0XHR0aGlzLmNsaWVudFtcImlubmdlc3RBcGlcIl0uc2V0U2lnbmluZ0tleSh0aGlzLnNpZ25pbmdLZXkpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0U2lnbmluZ0tleUZhbGxiYWNrXSkge1xuXHRcdFx0aWYgKCF0aGlzLnNpZ25pbmdLZXlGYWxsYmFjaykgdGhpcy5zaWduaW5nS2V5RmFsbGJhY2sgPSBTdHJpbmcodGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0U2lnbmluZ0tleUZhbGxiYWNrXSk7XG5cdFx0XHR0aGlzLmNsaWVudFtcImlubmdlc3RBcGlcIl0uc2V0U2lnbmluZ0tleUZhbGxiYWNrKHRoaXMuc2lnbmluZ0tleUZhbGxiYWNrKTtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLmNsaWVudFtcImV2ZW50S2V5U2V0XCJdKCkgJiYgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0RXZlbnRLZXldKSB0aGlzLmNsaWVudC5zZXRFdmVudEtleShTdHJpbmcodGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0RXZlbnRLZXldKSk7XG5cdFx0aWYgKHRoaXMuZW52W2VudktleXMuSW5uZ2VzdERldlNlcnZlclVybF0pIHRoaXMubG9nKFwid2FyblwiLCBgVXNlIG9mICR7ZW52S2V5cy5Jbm5nZXN0RGV2U2VydmVyVXJsfSBoYXMgYmVlbiBkZXByZWNhdGVkIGluIHYzOyBwbGVhc2UgdXNlICR7ZW52S2V5cy5Jbm5nZXN0QmFzZVVybH0gaW5zdGVhZC4gU2VlIGh0dHBzOi8vd3d3Lmlubmdlc3QuY29tL2RvY3Mvc2RrL21pZ3JhdGlvbmApO1xuXHR9XG5cdC8qKlxuXHQqIFZhbGlkYXRlIHRoZSBzaWduYXR1cmUgb2YgYSByZXF1ZXN0IGFuZCByZXR1cm4gdGhlIHNpZ25pbmcga2V5IHVzZWQgdG9cblx0KiB2YWxpZGF0ZSBpdC5cblx0Ki9cblx0YXN5bmMgdmFsaWRhdGVTaWduYXR1cmUoc2lnLCBib2R5KSB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLnNraXBTaWduYXR1cmVWYWxpZGF0aW9uKSByZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0XHRrZXlVc2VkOiBcIlwiXG5cdFx0XHR9O1xuXHRcdFx0aWYgKHRoaXMuX21vZGUgJiYgIXRoaXMuX21vZGUuaXNDbG91ZCkgcmV0dXJuIHtcblx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdFx0a2V5VXNlZDogXCJcIlxuXHRcdFx0fTtcblx0XHRcdGlmICghdGhpcy5zaWduaW5nS2V5KSB0aHJvdyBuZXcgRXJyb3IoYE5vIHNpZ25pbmcga2V5IGZvdW5kIGluIGNsaWVudCBvcHRpb25zIG9yICR7ZW52S2V5cy5Jbm5nZXN0U2lnbmluZ0tleX0gZW52IHZhci4gRmluZCB5b3VyIGtleXMgYXQgaHR0cHM6Ly9hcHAuaW5uZ2VzdC5jb20vc2VjcmV0c2ApO1xuXHRcdFx0aWYgKCFzaWcpIHRocm93IG5ldyBFcnJvcihgTm8gJHtoZWFkZXJLZXlzLlNpZ25hdHVyZX0gcHJvdmlkZWRgKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHN1Y2Nlc3M6IHRydWUsXG5cdFx0XHRcdGtleVVzZWQ6IG5ldyBSZXF1ZXN0U2lnbmF0dXJlKHNpZykudmVyaWZ5U2lnbmF0dXJlKHtcblx0XHRcdFx0XHRib2R5LFxuXHRcdFx0XHRcdGFsbG93RXhwaXJlZFNpZ25hdHVyZXM6IHRoaXMuYWxsb3dFeHBpcmVkU2lnbmF0dXJlcyxcblx0XHRcdFx0XHRzaWduaW5nS2V5OiB0aGlzLnNpZ25pbmdLZXksXG5cdFx0XHRcdFx0c2lnbmluZ0tleUZhbGxiYWNrOiB0aGlzLnNpZ25pbmdLZXlGYWxsYmFja1xuXHRcdFx0XHR9KVxuXHRcdFx0fTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0XHRlcnJcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cdGdldFJlc3BvbnNlU2lnbmF0dXJlKGtleSwgYm9keSkge1xuXHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0cmV0dXJuIGB0PSR7bm93fSZzPSR7c2lnbkRhdGFXaXRoS2V5KGJvZHksIGtleSwgbm93LnRvU3RyaW5nKCkpfWA7XG5cdH1cblx0LyoqXG5cdCogTG9nIHRvIHN0ZG91dC9zdGRlcnIgaWYgdGhlIGxvZyBsZXZlbCBpcyBzZXQgdG8gaW5jbHVkZSB0aGUgZ2l2ZW4gbGV2ZWwuXG5cdCogVGhlIGRlZmF1bHQgbG9nIGxldmVsIGlzIGBcImluZm9cImAuXG5cdCpcblx0KiBUaGlzIGlzIGFuIGFic3RyYWN0aW9uIG92ZXIgYGNvbnNvbGUubG9nYCBhbmQgd2lsbCB0cnkgdG8gdXNlIHRoZSBjb3JyZWN0XG5cdCogbWV0aG9kIGZvciB0aGUgZ2l2ZW4gbG9nIGxldmVsLiAgRm9yIGV4YW1wbGUsIGBsb2coXCJlcnJvclwiLCBcImZvb1wiKWAgd2lsbFxuXHQqIGNhbGwgYGNvbnNvbGUuZXJyb3IoXCJmb29cIilgLlxuXHQqL1xuXHRsb2cobGV2ZWwsIC4uLmFyZ3MpIHtcblx0XHRjb25zdCBsb2dMZXZlbHMkMSA9IFtcblx0XHRcdFwiZGVidWdcIixcblx0XHRcdFwiaW5mb1wiLFxuXHRcdFx0XCJ3YXJuXCIsXG5cdFx0XHRcImVycm9yXCIsXG5cdFx0XHRcImZhdGFsXCIsXG5cdFx0XHRcInNpbGVudFwiXG5cdFx0XTtcblx0XHRjb25zdCBsb2dMZXZlbFNldHRpbmcgPSBsb2dMZXZlbHMkMS5pbmRleE9mKHRoaXMubG9nTGV2ZWwpO1xuXHRcdGlmIChsb2dMZXZlbHMkMS5pbmRleE9mKGxldmVsKSA+PSBsb2dMZXZlbFNldHRpbmcpIHtcblx0XHRcdGxldCBsb2dnZXIgPSBjb25zb2xlLmxvZztcblx0XHRcdGlmIChPYmplY3QuaGFzT3duKGNvbnNvbGUsIGxldmVsKSkgbG9nZ2VyID0gY29uc29sZVtsZXZlbF07XG5cdFx0XHRsb2dnZXIoYCR7bG9nUHJlZml4fSAke2xldmVsfSAtYCwgLi4uYXJncyk7XG5cdFx0fVxuXHR9XG59O1xudmFyIFJlcXVlc3RTaWduYXR1cmUgPSBjbGFzcyB7XG5cdHRpbWVzdGFtcDtcblx0c2lnbmF0dXJlO1xuXHRjb25zdHJ1Y3RvcihzaWcpIHtcblx0XHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNpZyk7XG5cdFx0dGhpcy50aW1lc3RhbXAgPSBwYXJhbXMuZ2V0KFwidFwiKSB8fCBcIlwiO1xuXHRcdHRoaXMuc2lnbmF0dXJlID0gcGFyYW1zLmdldChcInNcIikgfHwgXCJcIjtcblx0XHRpZiAoIXRoaXMudGltZXN0YW1wIHx8ICF0aGlzLnNpZ25hdHVyZSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkICR7aGVhZGVyS2V5cy5TaWduYXR1cmV9IHByb3ZpZGVkYCk7XG5cdH1cblx0aGFzRXhwaXJlZChhbGxvd0V4cGlyZWRTaWduYXR1cmVzKSB7XG5cdFx0aWYgKGFsbG93RXhwaXJlZFNpZ25hdHVyZXMpIHJldHVybiBmYWxzZTtcblx0XHRyZXR1cm4gRGF0ZS5ub3coKSAtICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoTnVtYmVyLnBhcnNlSW50KHRoaXMudGltZXN0YW1wKSAqIDFlMykpLnZhbHVlT2YoKSA+IDFlMyAqIDYwICogNTtcblx0fVxuXHQjdmVyaWZ5U2lnbmF0dXJlKHsgYm9keSwgc2lnbmluZ0tleSwgYWxsb3dFeHBpcmVkU2lnbmF0dXJlcyB9KSB7XG5cdFx0aWYgKHRoaXMuaGFzRXhwaXJlZChhbGxvd0V4cGlyZWRTaWduYXR1cmVzKSkgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIGhhcyBleHBpcmVkXCIpO1xuXHRcdGlmIChzaWduRGF0YVdpdGhLZXkoYm9keSwgc2lnbmluZ0tleSwgdGhpcy50aW1lc3RhbXApICE9PSB0aGlzLnNpZ25hdHVyZSkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzaWduYXR1cmVcIik7XG5cdH1cblx0dmVyaWZ5U2lnbmF0dXJlKHsgYm9keSwgc2lnbmluZ0tleSwgc2lnbmluZ0tleUZhbGxiYWNrLCBhbGxvd0V4cGlyZWRTaWduYXR1cmVzIH0pIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy4jdmVyaWZ5U2lnbmF0dXJlKHtcblx0XHRcdFx0Ym9keSxcblx0XHRcdFx0c2lnbmluZ0tleSxcblx0XHRcdFx0YWxsb3dFeHBpcmVkU2lnbmF0dXJlc1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gc2lnbmluZ0tleTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGlmICghc2lnbmluZ0tleUZhbGxiYWNrKSB0aHJvdyBlcnI7XG5cdFx0XHR0aGlzLiN2ZXJpZnlTaWduYXR1cmUoe1xuXHRcdFx0XHRib2R5LFxuXHRcdFx0XHRzaWduaW5nS2V5OiBzaWduaW5nS2V5RmFsbGJhY2ssXG5cdFx0XHRcdGFsbG93RXhwaXJlZFNpZ25hdHVyZXNcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHNpZ25pbmdLZXlGYWxsYmFjaztcblx0XHR9XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSW5uZ2VzdENvbW1IYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5nZXN0Q29tbUhhbmRsZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestCommHandler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestFunction.js":
/*!************************************************************!*\
  !*** ./node_modules/inngest/components/InngestFunction.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestFunction: () => (/* binding */ InngestFunction)\n/* harmony export */ });\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _execution_v0_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./execution/v0.js */ \"(rsc)/./node_modules/inngest/components/execution/v0.js\");\n/* harmony import */ var _execution_v2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./execution/v2.js */ \"(rsc)/./node_modules/inngest/components/execution/v2.js\");\n/* harmony import */ var _execution_v1_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./execution/v1.js */ \"(rsc)/./node_modules/inngest/components/execution/v1.js\");\n\n\n\n\n\n\n//#region src/components/InngestFunction.ts\n/**\n* A stateless Inngest function, wrapping up function configuration and any\n* in-memory steps to run when triggered.\n*\n* This function can be \"registered\" to create a handler that Inngest can\n* trigger remotely.\n*\n* @public\n*/\nvar InngestFunction = class InngestFunction {\n\tstatic stepId = \"step\";\n\tstatic failureSuffix = \"-failure\";\n\tget [Symbol.toStringTag]() {\n\t\treturn InngestFunction.Tag;\n\t}\n\topts;\n\tfn;\n\tonFailureFn;\n\tclient;\n\tmiddleware;\n\t/**\n\t* A stateless Inngest function, wrapping up function configuration and any\n\t* in-memory steps to run when triggered.\n\t*\n\t* This function can be \"registered\" to create a handler that Inngest can\n\t* trigger remotely.\n\t*/\n\tconstructor(client, opts, fn) {\n\t\tthis.client = client;\n\t\tthis.opts = opts;\n\t\tthis.fn = fn;\n\t\tthis.onFailureFn = this.opts.onFailure;\n\t\tthis.middleware = this.client[\"initializeMiddleware\"](this.opts.middleware, {\n\t\t\tregisterInput: { fn: this },\n\t\t\tprefixStack: this.client[\"middleware\"]\n\t\t});\n\t}\n\t/**\n\t* The generated or given ID for this function.\n\t*/\n\tid(prefix) {\n\t\treturn [prefix, this.opts.id].filter(Boolean).join(\"-\");\n\t}\n\t/**\n\t* The generated or given ID for this function, prefixed with the app ID. This\n\t* is used for routing invokes and identifying the function across apps.\n\t*/\n\tget absoluteId() {\n\t\treturn this.id(this.client.id);\n\t}\n\t/**\n\t* The name of this function as it will appear in the Inngest Cloud UI.\n\t*/\n\tget name() {\n\t\treturn this.opts.name || this.id();\n\t}\n\t/**\n\t* The description of this function.\n\t*/\n\tget description() {\n\t\treturn this.opts.description;\n\t}\n\t/**\n\t* Retrieve the Inngest config for this function.\n\t*/\n\tgetConfig({ baseUrl, appPrefix, isConnect }) {\n\t\tconst fnId = this.id(appPrefix);\n\t\tconst stepUrl = new URL(baseUrl.href);\n\t\tstepUrl.searchParams.set(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.queryKeys.FnId, fnId);\n\t\tstepUrl.searchParams.set(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.queryKeys.StepId, InngestFunction.stepId);\n\t\tconst { retries: attempts, cancelOn, idempotency, batchEvents, rateLimit, throttle, concurrency, debounce, timeouts, priority, singleton } = this.opts;\n\t\t/**\n\t\t* Convert retries into the format required when defining function\n\t\t* configuration.\n\t\t*/\n\t\tconst retries = typeof attempts === \"undefined\" ? void 0 : { attempts };\n\t\tconst fn = {\n\t\t\tid: fnId,\n\t\t\tname: this.name,\n\t\t\ttriggers: (this.opts.triggers ?? []).map((trigger) => {\n\t\t\t\tif (\"event\" in trigger) return {\n\t\t\t\t\tevent: trigger.event,\n\t\t\t\t\texpression: trigger.if\n\t\t\t\t};\n\t\t\t\treturn { cron: trigger.cron };\n\t\t\t}),\n\t\t\tsteps: { [InngestFunction.stepId]: {\n\t\t\t\tid: InngestFunction.stepId,\n\t\t\t\tname: InngestFunction.stepId,\n\t\t\t\truntime: {\n\t\t\t\t\ttype: isConnect ? \"ws\" : \"http\",\n\t\t\t\t\turl: stepUrl.href\n\t\t\t\t},\n\t\t\t\tretries\n\t\t\t} },\n\t\t\tidempotency,\n\t\t\tbatchEvents,\n\t\t\trateLimit,\n\t\t\tthrottle,\n\t\t\tconcurrency,\n\t\t\tdebounce,\n\t\t\tpriority,\n\t\t\ttimeouts,\n\t\t\tsingleton\n\t\t};\n\t\tif (cancelOn) fn.cancel = cancelOn.map(({ event, timeout, if: ifStr, match }) => {\n\t\t\tconst ret = { event };\n\t\t\tif (timeout) ret.timeout = (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__.timeStr)(timeout);\n\t\t\tif (match) ret.if = `event.${match} == async.${match}`;\n\t\t\telse if (ifStr) ret.if = ifStr;\n\t\t\treturn ret;\n\t\t}, []);\n\t\tconst config = [fn];\n\t\tif (this.onFailureFn) {\n\t\t\tconst id = `${fn.id}${InngestFunction.failureSuffix}`;\n\t\t\tconst name = `${fn.name ?? fn.id} (failure)`;\n\t\t\tconst failureStepUrl = new URL(stepUrl.href);\n\t\t\tfailureStepUrl.searchParams.set(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.queryKeys.FnId, id);\n\t\t\tconfig.push({\n\t\t\t\tid,\n\t\t\t\tname,\n\t\t\t\ttriggers: [{\n\t\t\t\t\tevent: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.internalEvents.FunctionFailed,\n\t\t\t\t\texpression: `event.data.function_id == '${fnId}'`\n\t\t\t\t}],\n\t\t\t\tsteps: { [InngestFunction.stepId]: {\n\t\t\t\t\tid: InngestFunction.stepId,\n\t\t\t\t\tname: InngestFunction.stepId,\n\t\t\t\t\truntime: {\n\t\t\t\t\t\ttype: \"http\",\n\t\t\t\t\t\turl: failureStepUrl.href\n\t\t\t\t\t},\n\t\t\t\t\tretries: { attempts: 1 }\n\t\t\t\t} }\n\t\t\t});\n\t\t}\n\t\treturn config;\n\t}\n\tcreateExecution(opts) {\n\t\tconst options = {\n\t\t\tfn: this,\n\t\t\t...opts.partialOptions\n\t\t};\n\t\treturn {\n\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionVersion.V2]: () => (0,_execution_v2_js__WEBPACK_IMPORTED_MODULE_2__.createV2InngestExecution)(options),\n\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionVersion.V1]: () => (0,_execution_v1_js__WEBPACK_IMPORTED_MODULE_3__.createV1InngestExecution)(options),\n\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionVersion.V0]: () => (0,_execution_v0_js__WEBPACK_IMPORTED_MODULE_4__.createV0InngestExecution)(options)\n\t\t}[opts.version]();\n\t}\n\tshouldOptimizeParallelism() {\n\t\treturn this.opts.optimizeParallelism ?? this.client[\"options\"].optimizeParallelism ?? false;\n\t}\n\tshouldAsyncCheckpoint(requestedRunStep, internalFnId, disableImmediateExecution) {\n\t\tif (requestedRunStep || !internalFnId || disableImmediateExecution) return;\n\t\treturn this.opts.checkpointing ?? this.client[\"options\"].checkpointing ?? this.opts.experimentalCheckpointing ?? this.client[\"options\"].experimentalCheckpointing;\n\t}\n};\n(function(_InngestFunction) {\n\t_InngestFunction.Tag = \"Inngest.Function\";\n})(InngestFunction || (InngestFunction = {}));\n\n//#endregion\n\n//# sourceMappingURL=InngestFunction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RGdW5jdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBbUY7QUFDbkM7QUFDYTtBQUNBO0FBQ0E7O0FBRTdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0JBQStCO0FBQzVDO0FBQ0E7QUFDQSwyQkFBMkIseURBQVM7QUFDcEMsMkJBQTJCLHlEQUFTO0FBQ3BDLFVBQVUsbUlBQW1JO0FBQzdJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsSUFBSTtBQUNKLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGtDQUFrQztBQUM5RSxpQkFBaUI7QUFDakIsOEJBQThCLDREQUFPO0FBQ3JDLGdDQUFnQyxPQUFPLFdBQVcsTUFBTTtBQUN4RDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTSxFQUFFLDhCQUE4QjtBQUN2RCxtQkFBbUIsa0JBQWtCO0FBQ3JDO0FBQ0EsbUNBQW1DLHlEQUFTO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBYztBQUMxQiwrQ0FBK0MsS0FBSztBQUNwRCxLQUFLO0FBQ0wsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sZ0JBQWdCO0FBQ2hCO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0VBQWdCLFlBQVksMEVBQXdCO0FBQ3hELElBQUksZ0VBQWdCLFlBQVksMEVBQXdCO0FBQ3hELElBQUksZ0VBQWdCLFlBQVksMEVBQXdCO0FBQ3hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQ0FBMEM7O0FBRTNDO0FBQzJCO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RGdW5jdGlvbi5qcz84MDIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV4ZWN1dGlvblZlcnNpb24sIGludGVybmFsRXZlbnRzLCBxdWVyeUtleXMgfSBmcm9tIFwiLi4vaGVscGVycy9jb25zdHMuanNcIjtcbmltcG9ydCB7IHRpbWVTdHIgfSBmcm9tIFwiLi4vaGVscGVycy9zdHJpbmdzLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVWMElubmdlc3RFeGVjdXRpb24gfSBmcm9tIFwiLi9leGVjdXRpb24vdjAuanNcIjtcbmltcG9ydCB7IGNyZWF0ZVYySW5uZ2VzdEV4ZWN1dGlvbiB9IGZyb20gXCIuL2V4ZWN1dGlvbi92Mi5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlVjFJbm5nZXN0RXhlY3V0aW9uIH0gZnJvbSBcIi4vZXhlY3V0aW9uL3YxLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9Jbm5nZXN0RnVuY3Rpb24udHNcbi8qKlxuKiBBIHN0YXRlbGVzcyBJbm5nZXN0IGZ1bmN0aW9uLCB3cmFwcGluZyB1cCBmdW5jdGlvbiBjb25maWd1cmF0aW9uIGFuZCBhbnlcbiogaW4tbWVtb3J5IHN0ZXBzIHRvIHJ1biB3aGVuIHRyaWdnZXJlZC5cbipcbiogVGhpcyBmdW5jdGlvbiBjYW4gYmUgXCJyZWdpc3RlcmVkXCIgdG8gY3JlYXRlIGEgaGFuZGxlciB0aGF0IElubmdlc3QgY2FuXG4qIHRyaWdnZXIgcmVtb3RlbHkuXG4qXG4qIEBwdWJsaWNcbiovXG52YXIgSW5uZ2VzdEZ1bmN0aW9uID0gY2xhc3MgSW5uZ2VzdEZ1bmN0aW9uIHtcblx0c3RhdGljIHN0ZXBJZCA9IFwic3RlcFwiO1xuXHRzdGF0aWMgZmFpbHVyZVN1ZmZpeCA9IFwiLWZhaWx1cmVcIjtcblx0Z2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuXHRcdHJldHVybiBJbm5nZXN0RnVuY3Rpb24uVGFnO1xuXHR9XG5cdG9wdHM7XG5cdGZuO1xuXHRvbkZhaWx1cmVGbjtcblx0Y2xpZW50O1xuXHRtaWRkbGV3YXJlO1xuXHQvKipcblx0KiBBIHN0YXRlbGVzcyBJbm5nZXN0IGZ1bmN0aW9uLCB3cmFwcGluZyB1cCBmdW5jdGlvbiBjb25maWd1cmF0aW9uIGFuZCBhbnlcblx0KiBpbi1tZW1vcnkgc3RlcHMgdG8gcnVuIHdoZW4gdHJpZ2dlcmVkLlxuXHQqXG5cdCogVGhpcyBmdW5jdGlvbiBjYW4gYmUgXCJyZWdpc3RlcmVkXCIgdG8gY3JlYXRlIGEgaGFuZGxlciB0aGF0IElubmdlc3QgY2FuXG5cdCogdHJpZ2dlciByZW1vdGVseS5cblx0Ki9cblx0Y29uc3RydWN0b3IoY2xpZW50LCBvcHRzLCBmbikge1xuXHRcdHRoaXMuY2xpZW50ID0gY2xpZW50O1xuXHRcdHRoaXMub3B0cyA9IG9wdHM7XG5cdFx0dGhpcy5mbiA9IGZuO1xuXHRcdHRoaXMub25GYWlsdXJlRm4gPSB0aGlzLm9wdHMub25GYWlsdXJlO1xuXHRcdHRoaXMubWlkZGxld2FyZSA9IHRoaXMuY2xpZW50W1wiaW5pdGlhbGl6ZU1pZGRsZXdhcmVcIl0odGhpcy5vcHRzLm1pZGRsZXdhcmUsIHtcblx0XHRcdHJlZ2lzdGVySW5wdXQ6IHsgZm46IHRoaXMgfSxcblx0XHRcdHByZWZpeFN0YWNrOiB0aGlzLmNsaWVudFtcIm1pZGRsZXdhcmVcIl1cblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBUaGUgZ2VuZXJhdGVkIG9yIGdpdmVuIElEIGZvciB0aGlzIGZ1bmN0aW9uLlxuXHQqL1xuXHRpZChwcmVmaXgpIHtcblx0XHRyZXR1cm4gW3ByZWZpeCwgdGhpcy5vcHRzLmlkXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIi1cIik7XG5cdH1cblx0LyoqXG5cdCogVGhlIGdlbmVyYXRlZCBvciBnaXZlbiBJRCBmb3IgdGhpcyBmdW5jdGlvbiwgcHJlZml4ZWQgd2l0aCB0aGUgYXBwIElELiBUaGlzXG5cdCogaXMgdXNlZCBmb3Igcm91dGluZyBpbnZva2VzIGFuZCBpZGVudGlmeWluZyB0aGUgZnVuY3Rpb24gYWNyb3NzIGFwcHMuXG5cdCovXG5cdGdldCBhYnNvbHV0ZUlkKCkge1xuXHRcdHJldHVybiB0aGlzLmlkKHRoaXMuY2xpZW50LmlkKTtcblx0fVxuXHQvKipcblx0KiBUaGUgbmFtZSBvZiB0aGlzIGZ1bmN0aW9uIGFzIGl0IHdpbGwgYXBwZWFyIGluIHRoZSBJbm5nZXN0IENsb3VkIFVJLlxuXHQqL1xuXHRnZXQgbmFtZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5vcHRzLm5hbWUgfHwgdGhpcy5pZCgpO1xuXHR9XG5cdC8qKlxuXHQqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGlzIGZ1bmN0aW9uLlxuXHQqL1xuXHRnZXQgZGVzY3JpcHRpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMub3B0cy5kZXNjcmlwdGlvbjtcblx0fVxuXHQvKipcblx0KiBSZXRyaWV2ZSB0aGUgSW5uZ2VzdCBjb25maWcgZm9yIHRoaXMgZnVuY3Rpb24uXG5cdCovXG5cdGdldENvbmZpZyh7IGJhc2VVcmwsIGFwcFByZWZpeCwgaXNDb25uZWN0IH0pIHtcblx0XHRjb25zdCBmbklkID0gdGhpcy5pZChhcHBQcmVmaXgpO1xuXHRcdGNvbnN0IHN0ZXBVcmwgPSBuZXcgVVJMKGJhc2VVcmwuaHJlZik7XG5cdFx0c3RlcFVybC5zZWFyY2hQYXJhbXMuc2V0KHF1ZXJ5S2V5cy5GbklkLCBmbklkKTtcblx0XHRzdGVwVXJsLnNlYXJjaFBhcmFtcy5zZXQocXVlcnlLZXlzLlN0ZXBJZCwgSW5uZ2VzdEZ1bmN0aW9uLnN0ZXBJZCk7XG5cdFx0Y29uc3QgeyByZXRyaWVzOiBhdHRlbXB0cywgY2FuY2VsT24sIGlkZW1wb3RlbmN5LCBiYXRjaEV2ZW50cywgcmF0ZUxpbWl0LCB0aHJvdHRsZSwgY29uY3VycmVuY3ksIGRlYm91bmNlLCB0aW1lb3V0cywgcHJpb3JpdHksIHNpbmdsZXRvbiB9ID0gdGhpcy5vcHRzO1xuXHRcdC8qKlxuXHRcdCogQ29udmVydCByZXRyaWVzIGludG8gdGhlIGZvcm1hdCByZXF1aXJlZCB3aGVuIGRlZmluaW5nIGZ1bmN0aW9uXG5cdFx0KiBjb25maWd1cmF0aW9uLlxuXHRcdCovXG5cdFx0Y29uc3QgcmV0cmllcyA9IHR5cGVvZiBhdHRlbXB0cyA9PT0gXCJ1bmRlZmluZWRcIiA/IHZvaWQgMCA6IHsgYXR0ZW1wdHMgfTtcblx0XHRjb25zdCBmbiA9IHtcblx0XHRcdGlkOiBmbklkLFxuXHRcdFx0bmFtZTogdGhpcy5uYW1lLFxuXHRcdFx0dHJpZ2dlcnM6ICh0aGlzLm9wdHMudHJpZ2dlcnMgPz8gW10pLm1hcCgodHJpZ2dlcikgPT4ge1xuXHRcdFx0XHRpZiAoXCJldmVudFwiIGluIHRyaWdnZXIpIHJldHVybiB7XG5cdFx0XHRcdFx0ZXZlbnQ6IHRyaWdnZXIuZXZlbnQsXG5cdFx0XHRcdFx0ZXhwcmVzc2lvbjogdHJpZ2dlci5pZlxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4geyBjcm9uOiB0cmlnZ2VyLmNyb24gfTtcblx0XHRcdH0pLFxuXHRcdFx0c3RlcHM6IHsgW0lubmdlc3RGdW5jdGlvbi5zdGVwSWRdOiB7XG5cdFx0XHRcdGlkOiBJbm5nZXN0RnVuY3Rpb24uc3RlcElkLFxuXHRcdFx0XHRuYW1lOiBJbm5nZXN0RnVuY3Rpb24uc3RlcElkLFxuXHRcdFx0XHRydW50aW1lOiB7XG5cdFx0XHRcdFx0dHlwZTogaXNDb25uZWN0ID8gXCJ3c1wiIDogXCJodHRwXCIsXG5cdFx0XHRcdFx0dXJsOiBzdGVwVXJsLmhyZWZcblx0XHRcdFx0fSxcblx0XHRcdFx0cmV0cmllc1xuXHRcdFx0fSB9LFxuXHRcdFx0aWRlbXBvdGVuY3ksXG5cdFx0XHRiYXRjaEV2ZW50cyxcblx0XHRcdHJhdGVMaW1pdCxcblx0XHRcdHRocm90dGxlLFxuXHRcdFx0Y29uY3VycmVuY3ksXG5cdFx0XHRkZWJvdW5jZSxcblx0XHRcdHByaW9yaXR5LFxuXHRcdFx0dGltZW91dHMsXG5cdFx0XHRzaW5nbGV0b25cblx0XHR9O1xuXHRcdGlmIChjYW5jZWxPbikgZm4uY2FuY2VsID0gY2FuY2VsT24ubWFwKCh7IGV2ZW50LCB0aW1lb3V0LCBpZjogaWZTdHIsIG1hdGNoIH0pID0+IHtcblx0XHRcdGNvbnN0IHJldCA9IHsgZXZlbnQgfTtcblx0XHRcdGlmICh0aW1lb3V0KSByZXQudGltZW91dCA9IHRpbWVTdHIodGltZW91dCk7XG5cdFx0XHRpZiAobWF0Y2gpIHJldC5pZiA9IGBldmVudC4ke21hdGNofSA9PSBhc3luYy4ke21hdGNofWA7XG5cdFx0XHRlbHNlIGlmIChpZlN0cikgcmV0LmlmID0gaWZTdHI7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0sIFtdKTtcblx0XHRjb25zdCBjb25maWcgPSBbZm5dO1xuXHRcdGlmICh0aGlzLm9uRmFpbHVyZUZuKSB7XG5cdFx0XHRjb25zdCBpZCA9IGAke2ZuLmlkfSR7SW5uZ2VzdEZ1bmN0aW9uLmZhaWx1cmVTdWZmaXh9YDtcblx0XHRcdGNvbnN0IG5hbWUgPSBgJHtmbi5uYW1lID8/IGZuLmlkfSAoZmFpbHVyZSlgO1xuXHRcdFx0Y29uc3QgZmFpbHVyZVN0ZXBVcmwgPSBuZXcgVVJMKHN0ZXBVcmwuaHJlZik7XG5cdFx0XHRmYWlsdXJlU3RlcFVybC5zZWFyY2hQYXJhbXMuc2V0KHF1ZXJ5S2V5cy5GbklkLCBpZCk7XG5cdFx0XHRjb25maWcucHVzaCh7XG5cdFx0XHRcdGlkLFxuXHRcdFx0XHRuYW1lLFxuXHRcdFx0XHR0cmlnZ2VyczogW3tcblx0XHRcdFx0XHRldmVudDogaW50ZXJuYWxFdmVudHMuRnVuY3Rpb25GYWlsZWQsXG5cdFx0XHRcdFx0ZXhwcmVzc2lvbjogYGV2ZW50LmRhdGEuZnVuY3Rpb25faWQgPT0gJyR7Zm5JZH0nYFxuXHRcdFx0XHR9XSxcblx0XHRcdFx0c3RlcHM6IHsgW0lubmdlc3RGdW5jdGlvbi5zdGVwSWRdOiB7XG5cdFx0XHRcdFx0aWQ6IElubmdlc3RGdW5jdGlvbi5zdGVwSWQsXG5cdFx0XHRcdFx0bmFtZTogSW5uZ2VzdEZ1bmN0aW9uLnN0ZXBJZCxcblx0XHRcdFx0XHRydW50aW1lOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImh0dHBcIixcblx0XHRcdFx0XHRcdHVybDogZmFpbHVyZVN0ZXBVcmwuaHJlZlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmV0cmllczogeyBhdHRlbXB0czogMSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiBjb25maWc7XG5cdH1cblx0Y3JlYXRlRXhlY3V0aW9uKG9wdHMpIHtcblx0XHRjb25zdCBvcHRpb25zID0ge1xuXHRcdFx0Zm46IHRoaXMsXG5cdFx0XHQuLi5vcHRzLnBhcnRpYWxPcHRpb25zXG5cdFx0fTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0W0V4ZWN1dGlvblZlcnNpb24uVjJdOiAoKSA9PiBjcmVhdGVWMklubmdlc3RFeGVjdXRpb24ob3B0aW9ucyksXG5cdFx0XHRbRXhlY3V0aW9uVmVyc2lvbi5WMV06ICgpID0+IGNyZWF0ZVYxSW5uZ2VzdEV4ZWN1dGlvbihvcHRpb25zKSxcblx0XHRcdFtFeGVjdXRpb25WZXJzaW9uLlYwXTogKCkgPT4gY3JlYXRlVjBJbm5nZXN0RXhlY3V0aW9uKG9wdGlvbnMpXG5cdFx0fVtvcHRzLnZlcnNpb25dKCk7XG5cdH1cblx0c2hvdWxkT3B0aW1pemVQYXJhbGxlbGlzbSgpIHtcblx0XHRyZXR1cm4gdGhpcy5vcHRzLm9wdGltaXplUGFyYWxsZWxpc20gPz8gdGhpcy5jbGllbnRbXCJvcHRpb25zXCJdLm9wdGltaXplUGFyYWxsZWxpc20gPz8gZmFsc2U7XG5cdH1cblx0c2hvdWxkQXN5bmNDaGVja3BvaW50KHJlcXVlc3RlZFJ1blN0ZXAsIGludGVybmFsRm5JZCwgZGlzYWJsZUltbWVkaWF0ZUV4ZWN1dGlvbikge1xuXHRcdGlmIChyZXF1ZXN0ZWRSdW5TdGVwIHx8ICFpbnRlcm5hbEZuSWQgfHwgZGlzYWJsZUltbWVkaWF0ZUV4ZWN1dGlvbikgcmV0dXJuO1xuXHRcdHJldHVybiB0aGlzLm9wdHMuY2hlY2twb2ludGluZyA/PyB0aGlzLmNsaWVudFtcIm9wdGlvbnNcIl0uY2hlY2twb2ludGluZyA/PyB0aGlzLm9wdHMuZXhwZXJpbWVudGFsQ2hlY2twb2ludGluZyA/PyB0aGlzLmNsaWVudFtcIm9wdGlvbnNcIl0uZXhwZXJpbWVudGFsQ2hlY2twb2ludGluZztcblx0fVxufTtcbihmdW5jdGlvbihfSW5uZ2VzdEZ1bmN0aW9uKSB7XG5cdF9Jbm5nZXN0RnVuY3Rpb24uVGFnID0gXCJJbm5nZXN0LkZ1bmN0aW9uXCI7XG59KShJbm5nZXN0RnVuY3Rpb24gfHwgKElubmdlc3RGdW5jdGlvbiA9IHt9KSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSW5uZ2VzdEZ1bmN0aW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5nZXN0RnVuY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestFunction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestFunctionReference.js":
/*!*********************************************************************!*\
  !*** ./node_modules/inngest/components/InngestFunctionReference.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestFunctionReference: () => (/* binding */ InngestFunctionReference),\n/* harmony export */   referenceFunction: () => (/* binding */ referenceFunction)\n/* harmony export */ });\n//#region src/components/InngestFunctionReference.ts\n/**\n* A reference to an `InngestFunction` that can be used to represent both local\n* and remote functions without pulling in the full function definition (i.e.\n* dependencies).\n*\n* These references can be invoked in the same manner as a regular\n* `InngestFunction`.\n*\n* To create a reference function, use the {@link referenceFunction} helper.\n*\n* @public\n*/\nvar InngestFunctionReference = class InngestFunctionReference {\n\tget [Symbol.toStringTag]() {\n\t\treturn InngestFunctionReference.Tag;\n\t}\n\tconstructor(opts) {\n\t\tthis.opts = opts;\n\t}\n};\n/**\n* Create a reference to an `InngestFunction` that can be used to represent both\n* local and remote functions without pulling in the full function definition\n* (i.e. dependencies).\n*\n* These references can be invoked in the same manner as a regular\n* `InngestFunction`.\n*\n* @public\n*/\nconst referenceFunction = ({ functionId, appId }) => {\n\treturn new InngestFunctionReference({\n\t\tfunctionId,\n\t\tappId\n\t});\n};\n(function(_InngestFunctionReference) {\n\t_InngestFunctionReference.Tag = \"Inngest.FunctionReference\";\n})(InngestFunctionReference || (InngestFunctionReference = {}));\n\n//#endregion\n\n//# sourceMappingURL=InngestFunctionReference.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RGdW5jdGlvblJlZmVyZW5jZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx5QkFBeUI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1CQUFtQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0REFBNEQ7O0FBRTdEO0FBQ3VEO0FBQ3ZEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RGdW5jdGlvblJlZmVyZW5jZS5qcz8yNTc4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9Jbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2UudHNcbi8qKlxuKiBBIHJlZmVyZW5jZSB0byBhbiBgSW5uZ2VzdEZ1bmN0aW9uYCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcHJlc2VudCBib3RoIGxvY2FsXG4qIGFuZCByZW1vdGUgZnVuY3Rpb25zIHdpdGhvdXQgcHVsbGluZyBpbiB0aGUgZnVsbCBmdW5jdGlvbiBkZWZpbml0aW9uIChpLmUuXG4qIGRlcGVuZGVuY2llcykuXG4qXG4qIFRoZXNlIHJlZmVyZW5jZXMgY2FuIGJlIGludm9rZWQgaW4gdGhlIHNhbWUgbWFubmVyIGFzIGEgcmVndWxhclxuKiBgSW5uZ2VzdEZ1bmN0aW9uYC5cbipcbiogVG8gY3JlYXRlIGEgcmVmZXJlbmNlIGZ1bmN0aW9uLCB1c2UgdGhlIHtAbGluayByZWZlcmVuY2VGdW5jdGlvbn0gaGVscGVyLlxuKlxuKiBAcHVibGljXG4qL1xudmFyIElubmdlc3RGdW5jdGlvblJlZmVyZW5jZSA9IGNsYXNzIElubmdlc3RGdW5jdGlvblJlZmVyZW5jZSB7XG5cdGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcblx0XHRyZXR1cm4gSW5uZ2VzdEZ1bmN0aW9uUmVmZXJlbmNlLlRhZztcblx0fVxuXHRjb25zdHJ1Y3RvcihvcHRzKSB7XG5cdFx0dGhpcy5vcHRzID0gb3B0cztcblx0fVxufTtcbi8qKlxuKiBDcmVhdGUgYSByZWZlcmVuY2UgdG8gYW4gYElubmdlc3RGdW5jdGlvbmAgdGhhdCBjYW4gYmUgdXNlZCB0byByZXByZXNlbnQgYm90aFxuKiBsb2NhbCBhbmQgcmVtb3RlIGZ1bmN0aW9ucyB3aXRob3V0IHB1bGxpbmcgaW4gdGhlIGZ1bGwgZnVuY3Rpb24gZGVmaW5pdGlvblxuKiAoaS5lLiBkZXBlbmRlbmNpZXMpLlxuKlxuKiBUaGVzZSByZWZlcmVuY2VzIGNhbiBiZSBpbnZva2VkIGluIHRoZSBzYW1lIG1hbm5lciBhcyBhIHJlZ3VsYXJcbiogYElubmdlc3RGdW5jdGlvbmAuXG4qXG4qIEBwdWJsaWNcbiovXG5jb25zdCByZWZlcmVuY2VGdW5jdGlvbiA9ICh7IGZ1bmN0aW9uSWQsIGFwcElkIH0pID0+IHtcblx0cmV0dXJuIG5ldyBJbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2Uoe1xuXHRcdGZ1bmN0aW9uSWQsXG5cdFx0YXBwSWRcblx0fSk7XG59O1xuKGZ1bmN0aW9uKF9Jbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2UpIHtcblx0X0lubmdlc3RGdW5jdGlvblJlZmVyZW5jZS5UYWcgPSBcIklubmdlc3QuRnVuY3Rpb25SZWZlcmVuY2VcIjtcbn0pKElubmdlc3RGdW5jdGlvblJlZmVyZW5jZSB8fCAoSW5uZ2VzdEZ1bmN0aW9uUmVmZXJlbmNlID0ge30pKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBJbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2UsIHJlZmVyZW5jZUZ1bmN0aW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestFunctionReference.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestMetadata.js":
/*!************************************************************!*\
  !*** ./node_modules/inngest/components/InngestMetadata.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UnscopedMetadataBuilder: () => (/* binding */ UnscopedMetadataBuilder),\n/* harmony export */   metadataMiddleware: () => (/* binding */ metadataMiddleware),\n/* harmony export */   metadataSymbol: () => (/* binding */ metadataSymbol)\n/* harmony export */ });\n/* harmony import */ var _execution_als_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./execution/als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n\n\n\n//#region src/components/InngestMetadata.ts\n/**\n* Configures and sends metadata updates.\n*\n* It sends metadata updates via step opcodes if the metadata is\n* configured to be attached to the current run/step/step attempt\n* and `update` is called inside of `step.run`.\n*\n* Otherwise it sends updates via the Inngest API.\n*/\nvar UnscopedMetadataBuilder = class UnscopedMetadataBuilder {\n\tconstructor(client, config = {}) {\n\t\tthis.client = client;\n\t\tthis.config = config;\n\t}\n\trun(id) {\n\t\treturn new UnscopedMetadataBuilder(this.client, {\n\t\t\t...this.config,\n\t\t\trunId: id ?? null\n\t\t});\n\t}\n\tstep(id, index) {\n\t\treturn new UnscopedMetadataBuilder(this.client, {\n\t\t\t...this.config,\n\t\t\tstepId: id ?? null,\n\t\t\tstepIndex: index ?? 0\n\t\t});\n\t}\n\tattempt(attempt) {\n\t\treturn new UnscopedMetadataBuilder(this.client, {\n\t\t\t...this.config,\n\t\t\tattempt: attempt ?? null\n\t\t});\n\t}\n\tspan(id) {\n\t\treturn new UnscopedMetadataBuilder(this.client, {\n\t\t\t...this.config,\n\t\t\tspanId: id\n\t\t});\n\t}\n\tasync update(values, kind = \"default\") {\n\t\tawait performOp(this.client, this.config, values, `userland.${kind}`, \"merge\");\n\t}\n\ttoJSON() {\n\t\treturn this.config;\n\t}\n};\n/**\n* Creates a `MetadataTarget` based on the current execution context and the `BuilderConfig` created using\n* `MetadataBuilder`.\n*/\nfunction buildTarget(config, ctx) {\n\tconst ctxExecution = ctx?.execution;\n\tconst ctxRunId = ctxExecution?.ctx?.runId;\n\tconst ctxStepId = ctxExecution?.executingStep?.id;\n\tconst ctxAttempt = ctxExecution?.ctx?.attempt;\n\tconst targetRunId = config.runId ?? ctxRunId;\n\tif (!targetRunId) throw new Error(\"No run context available\");\n\tconst isSameRunAsCtx = ctxRunId !== void 0 && targetRunId === ctxRunId;\n\tconst stepCtxReason = !ctxExecution ? \"no function execution context is available\" : !ctxExecution.executingStep ? \"you are not inside a step.run() callback\" : \"you are targeting a different run\";\n\tif (config.attempt === null && (!isSameRunAsCtx || !ctxExecution?.executingStep)) throw new Error(`attempt() was called without a value, but ${stepCtxReason}`);\n\tif (config.stepId === null && (!isSameRunAsCtx || !ctxExecution?.executingStep)) throw new Error(`step() was called without a value, but ${stepCtxReason}`);\n\tif (config.spanId !== void 0) return {\n\t\trun_id: targetRunId,\n\t\tstep_id: config.stepId ?? ctxStepId,\n\t\tstep_index: config.stepIndex,\n\t\tstep_attempt: config.attempt ?? ctxAttempt,\n\t\tspan_id: config.spanId\n\t};\n\telse if (config.attempt !== void 0) return {\n\t\trun_id: targetRunId,\n\t\tstep_id: config.stepId ?? ctxStepId,\n\t\tstep_index: config.stepIndex,\n\t\tstep_attempt: config.attempt ?? ctxAttempt\n\t};\n\telse if (config.stepId !== void 0) return {\n\t\trun_id: targetRunId,\n\t\tstep_id: config.stepId ?? ctxStepId,\n\t\tstep_index: config.stepIndex\n\t};\n\telse if (config.runId !== void 0) return { run_id: targetRunId };\n\telse if (ctxStepId && ctxAttempt !== void 0) return {\n\t\trun_id: targetRunId,\n\t\tstep_id: ctxStepId,\n\t\tstep_attempt: ctxAttempt\n\t};\n\telse return { run_id: targetRunId };\n}\n/**\n* Creates a metadata array payload for API calls.\n*/\nfunction createMetadataPayload(kind, op, metadata) {\n\treturn [{\n\t\tkind,\n\t\top,\n\t\tvalues: metadata\n\t}];\n}\n/**\n* Sends metadata update via REST API to a specific target.\n*/\nasync function sendMetadataViaAPI(client, target, kind, op, metadata, headers) {\n\tconst metadataArray = createMetadataPayload(kind, op, metadata);\n\tawait client[\"updateMetadata\"]({\n\t\ttarget,\n\t\tmetadata: metadataArray,\n\t\theaders\n\t});\n}\nfunction getBatchScope(config) {\n\tif (config.spanId !== void 0) return \"extended_trace\";\n\tif (config.attempt !== void 0) return \"step_attempt\";\n\tif (config.stepId !== void 0) return \"step\";\n\tif (config.runId !== void 0) return \"run\";\n\treturn \"step_attempt\";\n}\nasync function performOp(client, config, values, kind, op) {\n\tconst ctx = await (0,_execution_als_js__WEBPACK_IMPORTED_MODULE_0__.getAsyncCtx)();\n\tconst target = buildTarget(config, ctx);\n\tconst isInsideRun = !!ctx?.execution;\n\tconst isInsideStep = !!ctx?.execution?.executingStep;\n\tif (isInsideRun && !isInsideStep) console.warn(\"inngest: metadata.update() called outside of a step. This metadata may be lost on retries. Wrap the call in step.run() for durable metadata.\");\n\tconst runId = config.runId ?? ctx?.execution?.ctx?.runId;\n\tconst stepId = config.stepId ?? ctx?.execution?.executingStep?.id;\n\tconst attempt = config.attempt ?? ctx?.execution?.ctx?.attempt;\n\tif (runId === ctx?.execution?.ctx?.runId && stepId === ctx?.execution?.executingStep?.id && attempt === ctx?.execution?.ctx?.attempt && !config.spanId) {\n\t\tconst executingStep = ctx?.execution?.executingStep;\n\t\tconst execInstance = ctx?.execution?.instance;\n\t\tconst scope = getBatchScope(config);\n\t\tif (executingStep?.id && execInstance && execInstance.addMetadata(executingStep.id, kind, scope, op, values)) return;\n\t}\n\tawait sendMetadataViaAPI(client, target, kind, op, values, (ctx?.execution?.instance)?.options?.headers ?? void 0);\n}\nconst metadataSymbol = Symbol.for(\"inngest.step.metadata\");\n/**\n* Middleware that enables the experimental step.metadata() feature.\n*\n* @example\n* ```ts\n* import { metadataMiddleware } from \"inngest/experimental\";\n*\n* const inngest = new Inngest({\n*   id: \"my-app\",\n*   middleware: [metadataMiddleware()],\n* });\n* ```\n*/\nconst metadataMiddleware = () => {\n\treturn new _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.InngestMiddleware({\n\t\tname: \"Inngest: Experimental Metadata\",\n\t\tinit({ client }) {\n\t\t\tclient[\"experimentalMetadataEnabled\"] = true;\n\t\t\treturn { onFunctionRun() {\n\t\t\t\treturn { transformInput(input) {\n\t\t\t\t\treturn { ctx: { step: {\n\t\t\t\t\t\t...input.ctx.step,\n\t\t\t\t\t\tmetadata: input.ctx.step[metadataSymbol]\n\t\t\t\t\t} } };\n\t\t\t\t} };\n\t\t\t} };\n\t\t}\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=InngestMetadata.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RNZXRhZGF0YS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpRDtBQUNVOztBQUUzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdFQUFnRSxLQUFLO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdKQUFnSixjQUFjO0FBQzlKLDRJQUE0SSxjQUFjO0FBQzFKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsOERBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvRUFBaUI7QUFDN0I7QUFDQSxTQUFTLFFBQVE7QUFDakI7QUFDQSxZQUFZO0FBQ1osYUFBYTtBQUNiLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDdUU7QUFDdkUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvSW5uZ2VzdE1ldGFkYXRhLmpzP2E3MzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXN5bmNDdHggfSBmcm9tIFwiLi9leGVjdXRpb24vYWxzLmpzXCI7XG5pbXBvcnQgeyBJbm5nZXN0TWlkZGxld2FyZSB9IGZyb20gXCIuL0lubmdlc3RNaWRkbGV3YXJlLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9Jbm5nZXN0TWV0YWRhdGEudHNcbi8qKlxuKiBDb25maWd1cmVzIGFuZCBzZW5kcyBtZXRhZGF0YSB1cGRhdGVzLlxuKlxuKiBJdCBzZW5kcyBtZXRhZGF0YSB1cGRhdGVzIHZpYSBzdGVwIG9wY29kZXMgaWYgdGhlIG1ldGFkYXRhIGlzXG4qIGNvbmZpZ3VyZWQgdG8gYmUgYXR0YWNoZWQgdG8gdGhlIGN1cnJlbnQgcnVuL3N0ZXAvc3RlcCBhdHRlbXB0XG4qIGFuZCBgdXBkYXRlYCBpcyBjYWxsZWQgaW5zaWRlIG9mIGBzdGVwLnJ1bmAuXG4qXG4qIE90aGVyd2lzZSBpdCBzZW5kcyB1cGRhdGVzIHZpYSB0aGUgSW5uZ2VzdCBBUEkuXG4qL1xudmFyIFVuc2NvcGVkTWV0YWRhdGFCdWlsZGVyID0gY2xhc3MgVW5zY29wZWRNZXRhZGF0YUJ1aWxkZXIge1xuXHRjb25zdHJ1Y3RvcihjbGllbnQsIGNvbmZpZyA9IHt9KSB7XG5cdFx0dGhpcy5jbGllbnQgPSBjbGllbnQ7XG5cdFx0dGhpcy5jb25maWcgPSBjb25maWc7XG5cdH1cblx0cnVuKGlkKSB7XG5cdFx0cmV0dXJuIG5ldyBVbnNjb3BlZE1ldGFkYXRhQnVpbGRlcih0aGlzLmNsaWVudCwge1xuXHRcdFx0Li4udGhpcy5jb25maWcsXG5cdFx0XHRydW5JZDogaWQgPz8gbnVsbFxuXHRcdH0pO1xuXHR9XG5cdHN0ZXAoaWQsIGluZGV4KSB7XG5cdFx0cmV0dXJuIG5ldyBVbnNjb3BlZE1ldGFkYXRhQnVpbGRlcih0aGlzLmNsaWVudCwge1xuXHRcdFx0Li4udGhpcy5jb25maWcsXG5cdFx0XHRzdGVwSWQ6IGlkID8/IG51bGwsXG5cdFx0XHRzdGVwSW5kZXg6IGluZGV4ID8/IDBcblx0XHR9KTtcblx0fVxuXHRhdHRlbXB0KGF0dGVtcHQpIHtcblx0XHRyZXR1cm4gbmV3IFVuc2NvcGVkTWV0YWRhdGFCdWlsZGVyKHRoaXMuY2xpZW50LCB7XG5cdFx0XHQuLi50aGlzLmNvbmZpZyxcblx0XHRcdGF0dGVtcHQ6IGF0dGVtcHQgPz8gbnVsbFxuXHRcdH0pO1xuXHR9XG5cdHNwYW4oaWQpIHtcblx0XHRyZXR1cm4gbmV3IFVuc2NvcGVkTWV0YWRhdGFCdWlsZGVyKHRoaXMuY2xpZW50LCB7XG5cdFx0XHQuLi50aGlzLmNvbmZpZyxcblx0XHRcdHNwYW5JZDogaWRcblx0XHR9KTtcblx0fVxuXHRhc3luYyB1cGRhdGUodmFsdWVzLCBraW5kID0gXCJkZWZhdWx0XCIpIHtcblx0XHRhd2FpdCBwZXJmb3JtT3AodGhpcy5jbGllbnQsIHRoaXMuY29uZmlnLCB2YWx1ZXMsIGB1c2VybGFuZC4ke2tpbmR9YCwgXCJtZXJnZVwiKTtcblx0fVxuXHR0b0pTT04oKSB7XG5cdFx0cmV0dXJuIHRoaXMuY29uZmlnO1xuXHR9XG59O1xuLyoqXG4qIENyZWF0ZXMgYSBgTWV0YWRhdGFUYXJnZXRgIGJhc2VkIG9uIHRoZSBjdXJyZW50IGV4ZWN1dGlvbiBjb250ZXh0IGFuZCB0aGUgYEJ1aWxkZXJDb25maWdgIGNyZWF0ZWQgdXNpbmdcbiogYE1ldGFkYXRhQnVpbGRlcmAuXG4qL1xuZnVuY3Rpb24gYnVpbGRUYXJnZXQoY29uZmlnLCBjdHgpIHtcblx0Y29uc3QgY3R4RXhlY3V0aW9uID0gY3R4Py5leGVjdXRpb247XG5cdGNvbnN0IGN0eFJ1bklkID0gY3R4RXhlY3V0aW9uPy5jdHg/LnJ1bklkO1xuXHRjb25zdCBjdHhTdGVwSWQgPSBjdHhFeGVjdXRpb24/LmV4ZWN1dGluZ1N0ZXA/LmlkO1xuXHRjb25zdCBjdHhBdHRlbXB0ID0gY3R4RXhlY3V0aW9uPy5jdHg/LmF0dGVtcHQ7XG5cdGNvbnN0IHRhcmdldFJ1bklkID0gY29uZmlnLnJ1bklkID8/IGN0eFJ1bklkO1xuXHRpZiAoIXRhcmdldFJ1bklkKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBydW4gY29udGV4dCBhdmFpbGFibGVcIik7XG5cdGNvbnN0IGlzU2FtZVJ1bkFzQ3R4ID0gY3R4UnVuSWQgIT09IHZvaWQgMCAmJiB0YXJnZXRSdW5JZCA9PT0gY3R4UnVuSWQ7XG5cdGNvbnN0IHN0ZXBDdHhSZWFzb24gPSAhY3R4RXhlY3V0aW9uID8gXCJubyBmdW5jdGlvbiBleGVjdXRpb24gY29udGV4dCBpcyBhdmFpbGFibGVcIiA6ICFjdHhFeGVjdXRpb24uZXhlY3V0aW5nU3RlcCA/IFwieW91IGFyZSBub3QgaW5zaWRlIGEgc3RlcC5ydW4oKSBjYWxsYmFja1wiIDogXCJ5b3UgYXJlIHRhcmdldGluZyBhIGRpZmZlcmVudCBydW5cIjtcblx0aWYgKGNvbmZpZy5hdHRlbXB0ID09PSBudWxsICYmICghaXNTYW1lUnVuQXNDdHggfHwgIWN0eEV4ZWN1dGlvbj8uZXhlY3V0aW5nU3RlcCkpIHRocm93IG5ldyBFcnJvcihgYXR0ZW1wdCgpIHdhcyBjYWxsZWQgd2l0aG91dCBhIHZhbHVlLCBidXQgJHtzdGVwQ3R4UmVhc29ufWApO1xuXHRpZiAoY29uZmlnLnN0ZXBJZCA9PT0gbnVsbCAmJiAoIWlzU2FtZVJ1bkFzQ3R4IHx8ICFjdHhFeGVjdXRpb24/LmV4ZWN1dGluZ1N0ZXApKSB0aHJvdyBuZXcgRXJyb3IoYHN0ZXAoKSB3YXMgY2FsbGVkIHdpdGhvdXQgYSB2YWx1ZSwgYnV0ICR7c3RlcEN0eFJlYXNvbn1gKTtcblx0aWYgKGNvbmZpZy5zcGFuSWQgIT09IHZvaWQgMCkgcmV0dXJuIHtcblx0XHRydW5faWQ6IHRhcmdldFJ1bklkLFxuXHRcdHN0ZXBfaWQ6IGNvbmZpZy5zdGVwSWQgPz8gY3R4U3RlcElkLFxuXHRcdHN0ZXBfaW5kZXg6IGNvbmZpZy5zdGVwSW5kZXgsXG5cdFx0c3RlcF9hdHRlbXB0OiBjb25maWcuYXR0ZW1wdCA/PyBjdHhBdHRlbXB0LFxuXHRcdHNwYW5faWQ6IGNvbmZpZy5zcGFuSWRcblx0fTtcblx0ZWxzZSBpZiAoY29uZmlnLmF0dGVtcHQgIT09IHZvaWQgMCkgcmV0dXJuIHtcblx0XHRydW5faWQ6IHRhcmdldFJ1bklkLFxuXHRcdHN0ZXBfaWQ6IGNvbmZpZy5zdGVwSWQgPz8gY3R4U3RlcElkLFxuXHRcdHN0ZXBfaW5kZXg6IGNvbmZpZy5zdGVwSW5kZXgsXG5cdFx0c3RlcF9hdHRlbXB0OiBjb25maWcuYXR0ZW1wdCA/PyBjdHhBdHRlbXB0XG5cdH07XG5cdGVsc2UgaWYgKGNvbmZpZy5zdGVwSWQgIT09IHZvaWQgMCkgcmV0dXJuIHtcblx0XHRydW5faWQ6IHRhcmdldFJ1bklkLFxuXHRcdHN0ZXBfaWQ6IGNvbmZpZy5zdGVwSWQgPz8gY3R4U3RlcElkLFxuXHRcdHN0ZXBfaW5kZXg6IGNvbmZpZy5zdGVwSW5kZXhcblx0fTtcblx0ZWxzZSBpZiAoY29uZmlnLnJ1bklkICE9PSB2b2lkIDApIHJldHVybiB7IHJ1bl9pZDogdGFyZ2V0UnVuSWQgfTtcblx0ZWxzZSBpZiAoY3R4U3RlcElkICYmIGN0eEF0dGVtcHQgIT09IHZvaWQgMCkgcmV0dXJuIHtcblx0XHRydW5faWQ6IHRhcmdldFJ1bklkLFxuXHRcdHN0ZXBfaWQ6IGN0eFN0ZXBJZCxcblx0XHRzdGVwX2F0dGVtcHQ6IGN0eEF0dGVtcHRcblx0fTtcblx0ZWxzZSByZXR1cm4geyBydW5faWQ6IHRhcmdldFJ1bklkIH07XG59XG4vKipcbiogQ3JlYXRlcyBhIG1ldGFkYXRhIGFycmF5IHBheWxvYWQgZm9yIEFQSSBjYWxscy5cbiovXG5mdW5jdGlvbiBjcmVhdGVNZXRhZGF0YVBheWxvYWQoa2luZCwgb3AsIG1ldGFkYXRhKSB7XG5cdHJldHVybiBbe1xuXHRcdGtpbmQsXG5cdFx0b3AsXG5cdFx0dmFsdWVzOiBtZXRhZGF0YVxuXHR9XTtcbn1cbi8qKlxuKiBTZW5kcyBtZXRhZGF0YSB1cGRhdGUgdmlhIFJFU1QgQVBJIHRvIGEgc3BlY2lmaWMgdGFyZ2V0LlxuKi9cbmFzeW5jIGZ1bmN0aW9uIHNlbmRNZXRhZGF0YVZpYUFQSShjbGllbnQsIHRhcmdldCwga2luZCwgb3AsIG1ldGFkYXRhLCBoZWFkZXJzKSB7XG5cdGNvbnN0IG1ldGFkYXRhQXJyYXkgPSBjcmVhdGVNZXRhZGF0YVBheWxvYWQoa2luZCwgb3AsIG1ldGFkYXRhKTtcblx0YXdhaXQgY2xpZW50W1widXBkYXRlTWV0YWRhdGFcIl0oe1xuXHRcdHRhcmdldCxcblx0XHRtZXRhZGF0YTogbWV0YWRhdGFBcnJheSxcblx0XHRoZWFkZXJzXG5cdH0pO1xufVxuZnVuY3Rpb24gZ2V0QmF0Y2hTY29wZShjb25maWcpIHtcblx0aWYgKGNvbmZpZy5zcGFuSWQgIT09IHZvaWQgMCkgcmV0dXJuIFwiZXh0ZW5kZWRfdHJhY2VcIjtcblx0aWYgKGNvbmZpZy5hdHRlbXB0ICE9PSB2b2lkIDApIHJldHVybiBcInN0ZXBfYXR0ZW1wdFwiO1xuXHRpZiAoY29uZmlnLnN0ZXBJZCAhPT0gdm9pZCAwKSByZXR1cm4gXCJzdGVwXCI7XG5cdGlmIChjb25maWcucnVuSWQgIT09IHZvaWQgMCkgcmV0dXJuIFwicnVuXCI7XG5cdHJldHVybiBcInN0ZXBfYXR0ZW1wdFwiO1xufVxuYXN5bmMgZnVuY3Rpb24gcGVyZm9ybU9wKGNsaWVudCwgY29uZmlnLCB2YWx1ZXMsIGtpbmQsIG9wKSB7XG5cdGNvbnN0IGN0eCA9IGF3YWl0IGdldEFzeW5jQ3R4KCk7XG5cdGNvbnN0IHRhcmdldCA9IGJ1aWxkVGFyZ2V0KGNvbmZpZywgY3R4KTtcblx0Y29uc3QgaXNJbnNpZGVSdW4gPSAhIWN0eD8uZXhlY3V0aW9uO1xuXHRjb25zdCBpc0luc2lkZVN0ZXAgPSAhIWN0eD8uZXhlY3V0aW9uPy5leGVjdXRpbmdTdGVwO1xuXHRpZiAoaXNJbnNpZGVSdW4gJiYgIWlzSW5zaWRlU3RlcCkgY29uc29sZS53YXJuKFwiaW5uZ2VzdDogbWV0YWRhdGEudXBkYXRlKCkgY2FsbGVkIG91dHNpZGUgb2YgYSBzdGVwLiBUaGlzIG1ldGFkYXRhIG1heSBiZSBsb3N0IG9uIHJldHJpZXMuIFdyYXAgdGhlIGNhbGwgaW4gc3RlcC5ydW4oKSBmb3IgZHVyYWJsZSBtZXRhZGF0YS5cIik7XG5cdGNvbnN0IHJ1bklkID0gY29uZmlnLnJ1bklkID8/IGN0eD8uZXhlY3V0aW9uPy5jdHg/LnJ1bklkO1xuXHRjb25zdCBzdGVwSWQgPSBjb25maWcuc3RlcElkID8/IGN0eD8uZXhlY3V0aW9uPy5leGVjdXRpbmdTdGVwPy5pZDtcblx0Y29uc3QgYXR0ZW1wdCA9IGNvbmZpZy5hdHRlbXB0ID8/IGN0eD8uZXhlY3V0aW9uPy5jdHg/LmF0dGVtcHQ7XG5cdGlmIChydW5JZCA9PT0gY3R4Py5leGVjdXRpb24/LmN0eD8ucnVuSWQgJiYgc3RlcElkID09PSBjdHg/LmV4ZWN1dGlvbj8uZXhlY3V0aW5nU3RlcD8uaWQgJiYgYXR0ZW1wdCA9PT0gY3R4Py5leGVjdXRpb24/LmN0eD8uYXR0ZW1wdCAmJiAhY29uZmlnLnNwYW5JZCkge1xuXHRcdGNvbnN0IGV4ZWN1dGluZ1N0ZXAgPSBjdHg/LmV4ZWN1dGlvbj8uZXhlY3V0aW5nU3RlcDtcblx0XHRjb25zdCBleGVjSW5zdGFuY2UgPSBjdHg/LmV4ZWN1dGlvbj8uaW5zdGFuY2U7XG5cdFx0Y29uc3Qgc2NvcGUgPSBnZXRCYXRjaFNjb3BlKGNvbmZpZyk7XG5cdFx0aWYgKGV4ZWN1dGluZ1N0ZXA/LmlkICYmIGV4ZWNJbnN0YW5jZSAmJiBleGVjSW5zdGFuY2UuYWRkTWV0YWRhdGEoZXhlY3V0aW5nU3RlcC5pZCwga2luZCwgc2NvcGUsIG9wLCB2YWx1ZXMpKSByZXR1cm47XG5cdH1cblx0YXdhaXQgc2VuZE1ldGFkYXRhVmlhQVBJKGNsaWVudCwgdGFyZ2V0LCBraW5kLCBvcCwgdmFsdWVzLCAoY3R4Py5leGVjdXRpb24/Lmluc3RhbmNlKT8ub3B0aW9ucz8uaGVhZGVycyA/PyB2b2lkIDApO1xufVxuY29uc3QgbWV0YWRhdGFTeW1ib2wgPSBTeW1ib2wuZm9yKFwiaW5uZ2VzdC5zdGVwLm1ldGFkYXRhXCIpO1xuLyoqXG4qIE1pZGRsZXdhcmUgdGhhdCBlbmFibGVzIHRoZSBleHBlcmltZW50YWwgc3RlcC5tZXRhZGF0YSgpIGZlYXR1cmUuXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IG1ldGFkYXRhTWlkZGxld2FyZSB9IGZyb20gXCJpbm5nZXN0L2V4cGVyaW1lbnRhbFwiO1xuKlxuKiBjb25zdCBpbm5nZXN0ID0gbmV3IElubmdlc3Qoe1xuKiAgIGlkOiBcIm15LWFwcFwiLFxuKiAgIG1pZGRsZXdhcmU6IFttZXRhZGF0YU1pZGRsZXdhcmUoKV0sXG4qIH0pO1xuKiBgYGBcbiovXG5jb25zdCBtZXRhZGF0YU1pZGRsZXdhcmUgPSAoKSA9PiB7XG5cdHJldHVybiBuZXcgSW5uZ2VzdE1pZGRsZXdhcmUoe1xuXHRcdG5hbWU6IFwiSW5uZ2VzdDogRXhwZXJpbWVudGFsIE1ldGFkYXRhXCIsXG5cdFx0aW5pdCh7IGNsaWVudCB9KSB7XG5cdFx0XHRjbGllbnRbXCJleHBlcmltZW50YWxNZXRhZGF0YUVuYWJsZWRcIl0gPSB0cnVlO1xuXHRcdFx0cmV0dXJuIHsgb25GdW5jdGlvblJ1bigpIHtcblx0XHRcdFx0cmV0dXJuIHsgdHJhbnNmb3JtSW5wdXQoaW5wdXQpIHtcblx0XHRcdFx0XHRyZXR1cm4geyBjdHg6IHsgc3RlcDoge1xuXHRcdFx0XHRcdFx0Li4uaW5wdXQuY3R4LnN0ZXAsXG5cdFx0XHRcdFx0XHRtZXRhZGF0YTogaW5wdXQuY3R4LnN0ZXBbbWV0YWRhdGFTeW1ib2xdXG5cdFx0XHRcdFx0fSB9IH07XG5cdFx0XHRcdH0gfTtcblx0XHRcdH0gfTtcblx0XHR9XG5cdH0pO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBVbnNjb3BlZE1ldGFkYXRhQnVpbGRlciwgbWV0YWRhdGFNaWRkbGV3YXJlLCBtZXRhZGF0YVN5bWJvbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5uZ2VzdE1ldGFkYXRhLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestMetadata.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestMiddleware.js":
/*!**************************************************************!*\
  !*** ./node_modules/inngest/components/InngestMiddleware.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestMiddleware: () => (/* binding */ InngestMiddleware),\n/* harmony export */   getHookStack: () => (/* binding */ getHookStack)\n/* harmony export */ });\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n\n\n//#region src/components/InngestMiddleware.ts\n/**\n* A middleware that can be registered with Inngest to hook into various\n* lifecycles of the SDK and affect input and output of Inngest functionality.\n*\n* See {@link https://innge.st/middleware}\n*\n* @example\n*\n* ```ts\n* export const inngest = new Inngest({\n*   middleware: [\n*     new InngestMiddleware({\n*       name: \"My Middleware\",\n*       init: () => {\n*         // ...\n*       }\n*     })\n*   ]\n* });\n* ```\n*\n* @public\n*/\nvar InngestMiddleware = class InngestMiddleware {\n\tget [Symbol.toStringTag]() {\n\t\treturn InngestMiddleware.Tag;\n\t}\n\t/**\n\t* The name of this middleware. Used primarily for debugging and logging\n\t* purposes.\n\t*/\n\tname;\n\t/**\n\t* This function is used to initialize your middleware and register any hooks\n\t* you want to use. It will be called once when the SDK is initialized, and\n\t* should be used to store any state you want to use in other parts of your\n\t* middleware.\n\t*\n\t* It can be synchronous or asynchronous, in which case the client will wait\n\t* for it to resolve before continuing to initialize the next middleware.\n\t*\n\t* Multiple clients could be used in the same application with differing\n\t* middleware, so do not store state in global variables or assume that your\n\t* middleware will only be used once.\n\t*\n\t* Must return an object detailing the hooks you want to register.\n\t*/\n\tinit;\n\tconstructor({ name, init }) {\n\t\tthis.name = name;\n\t\tthis.init = init;\n\t}\n};\n(function(_InngestMiddleware) {\n\t_InngestMiddleware.Tag = \"Inngest.Middleware\";\n})(InngestMiddleware || (InngestMiddleware = {}));\n/**\n* Given some middleware and an entrypoint, runs the initializer for the given\n* `key` and returns functions that will pass arguments through a stack of each\n* given hook in a middleware's lifecycle.\n*\n* Lets the middleware initialize before starting.\n*/\nconst getHookStack = async (middleware, key, arg, transforms) => {\n\tconst hookDirs = hookDirections[key];\n\tif (!hookDirs) throw new Error(`No hook directions found for key \"${String(key)}\". This is likely a bug in the Inngest SDK.`);\n\tconst hooksRegistered = await (await middleware).reduce((acc, mw) => {\n\t\tconst fn = mw[key];\n\t\tif (fn) return [...acc, fn];\n\t\treturn acc;\n\t}, []).reduce(async (acc, fn) => {\n\t\treturn [...await acc, await fn(arg)];\n\t}, Promise.resolve([]));\n\tconst ret = {};\n\tfor (const hook of hooksRegistered) {\n\t\tconst hookKeys = Object.keys(hook);\n\t\tfor (const key$1 of hookKeys) {\n\t\t\tlet fns = [hook[key$1]];\n\t\t\tconst existingWaterfall = ret[key$1];\n\t\t\tif (existingWaterfall) if (hookDirs[key$1] === \"forward\") fns = [existingWaterfall, hook[key$1]];\n\t\t\telse fns = [hook[key$1], existingWaterfall];\n\t\t\tconst transform = transforms[key$1];\n\t\t\tret[key$1] = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_0__.waterfall)(fns, transform);\n\t\t}\n\t}\n\tfor (const k of Object.keys(ret)) {\n\t\tconst key$1 = k;\n\t\tret[key$1] = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_0__.cacheFn)(ret[key$1]);\n\t}\n\treturn ret;\n};\n/**\n* The direction of each hook that exists in the middleware lifecycle.\n* This is used to determine whether hooks found in a stack run forwards or\n* backwards, creating onion-like behaviour.\n*/\nconst hookDirections = {\n\tonFunctionRun: {\n\t\ttransformInput: \"forward\",\n\t\tbeforeMemoization: \"forward\",\n\t\tafterMemoization: \"backward\",\n\t\tbeforeExecution: \"forward\",\n\t\tafterExecution: \"backward\",\n\t\ttransformOutput: \"backward\",\n\t\tbeforeResponse: \"forward\",\n\t\tfinished: \"forward\"\n\t},\n\tonSendEvent: {\n\t\ttransformInput: \"forward\",\n\t\ttransformOutput: \"backward\"\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=InngestMiddleware.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RNaWRkbGV3YXJlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2RDs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFlBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLFlBQVk7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMyQztBQUMzQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvY29tcG9uZW50cy9Jbm5nZXN0TWlkZGxld2FyZS5qcz8yZjU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNhY2hlRm4sIHdhdGVyZmFsbCB9IGZyb20gXCIuLi9oZWxwZXJzL2Z1bmN0aW9ucy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvSW5uZ2VzdE1pZGRsZXdhcmUudHNcbi8qKlxuKiBBIG1pZGRsZXdhcmUgdGhhdCBjYW4gYmUgcmVnaXN0ZXJlZCB3aXRoIElubmdlc3QgdG8gaG9vayBpbnRvIHZhcmlvdXNcbiogbGlmZWN5Y2xlcyBvZiB0aGUgU0RLIGFuZCBhZmZlY3QgaW5wdXQgYW5kIG91dHB1dCBvZiBJbm5nZXN0IGZ1bmN0aW9uYWxpdHkuXG4qXG4qIFNlZSB7QGxpbmsgaHR0cHM6Ly9pbm5nZS5zdC9taWRkbGV3YXJlfVxuKlxuKiBAZXhhbXBsZVxuKlxuKiBgYGB0c1xuKiBleHBvcnQgY29uc3QgaW5uZ2VzdCA9IG5ldyBJbm5nZXN0KHtcbiogICBtaWRkbGV3YXJlOiBbXG4qICAgICBuZXcgSW5uZ2VzdE1pZGRsZXdhcmUoe1xuKiAgICAgICBuYW1lOiBcIk15IE1pZGRsZXdhcmVcIixcbiogICAgICAgaW5pdDogKCkgPT4ge1xuKiAgICAgICAgIC8vIC4uLlxuKiAgICAgICB9XG4qICAgICB9KVxuKiAgIF1cbiogfSk7XG4qIGBgYFxuKlxuKiBAcHVibGljXG4qL1xudmFyIElubmdlc3RNaWRkbGV3YXJlID0gY2xhc3MgSW5uZ2VzdE1pZGRsZXdhcmUge1xuXHRnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG5cdFx0cmV0dXJuIElubmdlc3RNaWRkbGV3YXJlLlRhZztcblx0fVxuXHQvKipcblx0KiBUaGUgbmFtZSBvZiB0aGlzIG1pZGRsZXdhcmUuIFVzZWQgcHJpbWFyaWx5IGZvciBkZWJ1Z2dpbmcgYW5kIGxvZ2dpbmdcblx0KiBwdXJwb3Nlcy5cblx0Ki9cblx0bmFtZTtcblx0LyoqXG5cdCogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGluaXRpYWxpemUgeW91ciBtaWRkbGV3YXJlIGFuZCByZWdpc3RlciBhbnkgaG9va3Ncblx0KiB5b3Ugd2FudCB0byB1c2UuIEl0IHdpbGwgYmUgY2FsbGVkIG9uY2Ugd2hlbiB0aGUgU0RLIGlzIGluaXRpYWxpemVkLCBhbmRcblx0KiBzaG91bGQgYmUgdXNlZCB0byBzdG9yZSBhbnkgc3RhdGUgeW91IHdhbnQgdG8gdXNlIGluIG90aGVyIHBhcnRzIG9mIHlvdXJcblx0KiBtaWRkbGV3YXJlLlxuXHQqXG5cdCogSXQgY2FuIGJlIHN5bmNocm9ub3VzIG9yIGFzeW5jaHJvbm91cywgaW4gd2hpY2ggY2FzZSB0aGUgY2xpZW50IHdpbGwgd2FpdFxuXHQqIGZvciBpdCB0byByZXNvbHZlIGJlZm9yZSBjb250aW51aW5nIHRvIGluaXRpYWxpemUgdGhlIG5leHQgbWlkZGxld2FyZS5cblx0KlxuXHQqIE11bHRpcGxlIGNsaWVudHMgY291bGQgYmUgdXNlZCBpbiB0aGUgc2FtZSBhcHBsaWNhdGlvbiB3aXRoIGRpZmZlcmluZ1xuXHQqIG1pZGRsZXdhcmUsIHNvIGRvIG5vdCBzdG9yZSBzdGF0ZSBpbiBnbG9iYWwgdmFyaWFibGVzIG9yIGFzc3VtZSB0aGF0IHlvdXJcblx0KiBtaWRkbGV3YXJlIHdpbGwgb25seSBiZSB1c2VkIG9uY2UuXG5cdCpcblx0KiBNdXN0IHJldHVybiBhbiBvYmplY3QgZGV0YWlsaW5nIHRoZSBob29rcyB5b3Ugd2FudCB0byByZWdpc3Rlci5cblx0Ki9cblx0aW5pdDtcblx0Y29uc3RydWN0b3IoeyBuYW1lLCBpbml0IH0pIHtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHRcdHRoaXMuaW5pdCA9IGluaXQ7XG5cdH1cbn07XG4oZnVuY3Rpb24oX0lubmdlc3RNaWRkbGV3YXJlKSB7XG5cdF9Jbm5nZXN0TWlkZGxld2FyZS5UYWcgPSBcIklubmdlc3QuTWlkZGxld2FyZVwiO1xufSkoSW5uZ2VzdE1pZGRsZXdhcmUgfHwgKElubmdlc3RNaWRkbGV3YXJlID0ge30pKTtcbi8qKlxuKiBHaXZlbiBzb21lIG1pZGRsZXdhcmUgYW5kIGFuIGVudHJ5cG9pbnQsIHJ1bnMgdGhlIGluaXRpYWxpemVyIGZvciB0aGUgZ2l2ZW5cbiogYGtleWAgYW5kIHJldHVybnMgZnVuY3Rpb25zIHRoYXQgd2lsbCBwYXNzIGFyZ3VtZW50cyB0aHJvdWdoIGEgc3RhY2sgb2YgZWFjaFxuKiBnaXZlbiBob29rIGluIGEgbWlkZGxld2FyZSdzIGxpZmVjeWNsZS5cbipcbiogTGV0cyB0aGUgbWlkZGxld2FyZSBpbml0aWFsaXplIGJlZm9yZSBzdGFydGluZy5cbiovXG5jb25zdCBnZXRIb29rU3RhY2sgPSBhc3luYyAobWlkZGxld2FyZSwga2V5LCBhcmcsIHRyYW5zZm9ybXMpID0+IHtcblx0Y29uc3QgaG9va0RpcnMgPSBob29rRGlyZWN0aW9uc1trZXldO1xuXHRpZiAoIWhvb2tEaXJzKSB0aHJvdyBuZXcgRXJyb3IoYE5vIGhvb2sgZGlyZWN0aW9ucyBmb3VuZCBmb3Iga2V5IFwiJHtTdHJpbmcoa2V5KX1cIi4gVGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gdGhlIElubmdlc3QgU0RLLmApO1xuXHRjb25zdCBob29rc1JlZ2lzdGVyZWQgPSBhd2FpdCAoYXdhaXQgbWlkZGxld2FyZSkucmVkdWNlKChhY2MsIG13KSA9PiB7XG5cdFx0Y29uc3QgZm4gPSBtd1trZXldO1xuXHRcdGlmIChmbikgcmV0dXJuIFsuLi5hY2MsIGZuXTtcblx0XHRyZXR1cm4gYWNjO1xuXHR9LCBbXSkucmVkdWNlKGFzeW5jIChhY2MsIGZuKSA9PiB7XG5cdFx0cmV0dXJuIFsuLi5hd2FpdCBhY2MsIGF3YWl0IGZuKGFyZyldO1xuXHR9LCBQcm9taXNlLnJlc29sdmUoW10pKTtcblx0Y29uc3QgcmV0ID0ge307XG5cdGZvciAoY29uc3QgaG9vayBvZiBob29rc1JlZ2lzdGVyZWQpIHtcblx0XHRjb25zdCBob29rS2V5cyA9IE9iamVjdC5rZXlzKGhvb2spO1xuXHRcdGZvciAoY29uc3Qga2V5JDEgb2YgaG9va0tleXMpIHtcblx0XHRcdGxldCBmbnMgPSBbaG9va1trZXkkMV1dO1xuXHRcdFx0Y29uc3QgZXhpc3RpbmdXYXRlcmZhbGwgPSByZXRba2V5JDFdO1xuXHRcdFx0aWYgKGV4aXN0aW5nV2F0ZXJmYWxsKSBpZiAoaG9va0RpcnNba2V5JDFdID09PSBcImZvcndhcmRcIikgZm5zID0gW2V4aXN0aW5nV2F0ZXJmYWxsLCBob29rW2tleSQxXV07XG5cdFx0XHRlbHNlIGZucyA9IFtob29rW2tleSQxXSwgZXhpc3RpbmdXYXRlcmZhbGxdO1xuXHRcdFx0Y29uc3QgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1trZXkkMV07XG5cdFx0XHRyZXRba2V5JDFdID0gd2F0ZXJmYWxsKGZucywgdHJhbnNmb3JtKTtcblx0XHR9XG5cdH1cblx0Zm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHJldCkpIHtcblx0XHRjb25zdCBrZXkkMSA9IGs7XG5cdFx0cmV0W2tleSQxXSA9IGNhY2hlRm4ocmV0W2tleSQxXSk7XG5cdH1cblx0cmV0dXJuIHJldDtcbn07XG4vKipcbiogVGhlIGRpcmVjdGlvbiBvZiBlYWNoIGhvb2sgdGhhdCBleGlzdHMgaW4gdGhlIG1pZGRsZXdhcmUgbGlmZWN5Y2xlLlxuKiBUaGlzIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgaG9va3MgZm91bmQgaW4gYSBzdGFjayBydW4gZm9yd2FyZHMgb3JcbiogYmFja3dhcmRzLCBjcmVhdGluZyBvbmlvbi1saWtlIGJlaGF2aW91ci5cbiovXG5jb25zdCBob29rRGlyZWN0aW9ucyA9IHtcblx0b25GdW5jdGlvblJ1bjoge1xuXHRcdHRyYW5zZm9ybUlucHV0OiBcImZvcndhcmRcIixcblx0XHRiZWZvcmVNZW1vaXphdGlvbjogXCJmb3J3YXJkXCIsXG5cdFx0YWZ0ZXJNZW1vaXphdGlvbjogXCJiYWNrd2FyZFwiLFxuXHRcdGJlZm9yZUV4ZWN1dGlvbjogXCJmb3J3YXJkXCIsXG5cdFx0YWZ0ZXJFeGVjdXRpb246IFwiYmFja3dhcmRcIixcblx0XHR0cmFuc2Zvcm1PdXRwdXQ6IFwiYmFja3dhcmRcIixcblx0XHRiZWZvcmVSZXNwb25zZTogXCJmb3J3YXJkXCIsXG5cdFx0ZmluaXNoZWQ6IFwiZm9yd2FyZFwiXG5cdH0sXG5cdG9uU2VuZEV2ZW50OiB7XG5cdFx0dHJhbnNmb3JtSW5wdXQ6IFwiZm9yd2FyZFwiLFxuXHRcdHRyYW5zZm9ybU91dHB1dDogXCJiYWNrd2FyZFwiXG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSW5uZ2VzdE1pZGRsZXdhcmUsIGdldEhvb2tTdGFjayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5uZ2VzdE1pZGRsZXdhcmUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestMiddleware.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestStepTools.js":
/*!*************************************************************!*\
  !*** ./node_modules/inngest/components/InngestStepTools.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   STEP_INDEXING_SUFFIX: () => (/* binding */ STEP_INDEXING_SUFFIX),\n/* harmony export */   createStepTools: () => (/* binding */ createStepTools),\n/* harmony export */   gatewaySymbol: () => (/* binding */ gatewaySymbol),\n/* harmony export */   getStepOptions: () => (/* binding */ getStepOptions),\n/* harmony export */   invokePayloadSchema: () => (/* binding */ invokePayloadSchema),\n/* harmony export */   step: () => (/* binding */ step)\n/* harmony export */ });\n/* harmony import */ var _execution_als_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./execution/als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _InngestMetadata_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InngestMetadata.js */ \"(rsc)/./node_modules/inngest/components/InngestMetadata.js\");\n/* harmony import */ var _helpers_temporal_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/temporal.js */ \"(rsc)/./node_modules/inngest/helpers/temporal.js\");\n/* harmony import */ var _Fetch_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Fetch.js */ \"(rsc)/./node_modules/inngest/components/Fetch.js\");\n/* harmony import */ var _InngestFunction_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./InngestFunction.js */ \"(rsc)/./node_modules/inngest/components/InngestFunction.js\");\n/* harmony import */ var _InngestFunctionReference_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./InngestFunctionReference.js */ \"(rsc)/./node_modules/inngest/components/InngestFunctionReference.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _inngest_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @inngest/ai */ \"(rsc)/./node_modules/@inngest/ai/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/InngestStepTools.ts\nconst getStepOptions = (options) => {\n\tif (typeof options === \"string\") return { id: options };\n\treturn options;\n};\n/**\n* Suffix used to namespace steps that are automatically indexed.\n*/\nconst STEP_INDEXING_SUFFIX = \":\";\n/**\n* Create a new set of step function tools ready to be used in a step function.\n* This function should be run and a fresh set of tools provided every time a\n* function is run.\n*\n* An op stack (function state) is passed in as well as some mutable properties\n* that the tools can use to submit a new op.\n*/\nconst createStepTools = (client, execution, stepHandler) => {\n\t/**\n\t* A local helper used to create tools that can be used to submit an op.\n\t*\n\t* When using this function, a generic type should be provided which is the\n\t* function signature exposed to the user.\n\t*/\n\tconst createTool = (matchOp, opts) => {\n\t\treturn (async (...args) => {\n\t\t\treturn stepHandler({\n\t\t\t\targs,\n\t\t\t\tmatchOp,\n\t\t\t\topts\n\t\t\t});\n\t\t});\n\t};\n\t/**\n\t* Create a new step run tool that can be used to run a step function using\n\t* `step.run()` as a shim.\n\t*/\n\tconst createStepRun = (type) => {\n\t\treturn createTool(({ id, name }, _fn, ...input) => {\n\t\t\tconst opts = {\n\t\t\t\t...input.length ? { input } : {},\n\t\t\t\t...type ? { type } : {}\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Sync,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.StepPlanned,\n\t\t\t\tname: id,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\t...Object.keys(opts).length ? { opts } : {},\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}, { fn: (_, fn, ...input) => fn(...input) });\n\t};\n\t/**\n\t* Creates a metadata builder wrapper for step.metadata(\"id\").\n\t* Uses MetadataBuilder for config accumulation, but wraps .update() in tools.run() for memoization.\n\t*/\n\tconst createStepMetadataWrapper = (memoizationId, builder) => {\n\t\tif (!client[\"experimentalMetadataEnabled\"]) throw new Error(\"step.metadata() is experimental. Enable it by adding metadataMiddleware() from \\\"inngest/experimental\\\" to your client middleware.\");\n\t\tconst withBuilder = (next) => createStepMetadataWrapper(memoizationId, next);\n\t\tif (!builder) builder = new _InngestMetadata_js__WEBPACK_IMPORTED_MODULE_2__.UnscopedMetadataBuilder(client).run();\n\t\treturn {\n\t\t\trun: (runId) => withBuilder(builder.run(runId)),\n\t\t\tstep: (stepId, index) => withBuilder(builder.step(stepId, index)),\n\t\t\tattempt: (attemptIndex) => withBuilder(builder.attempt(attemptIndex)),\n\t\t\tspan: (spanId) => withBuilder(builder.span(spanId)),\n\t\t\tupdate: async (values, kind = \"default\") => {\n\t\t\t\tawait tools.run(memoizationId, async () => {\n\t\t\t\t\tawait builder.update(values, kind);\n\t\t\t\t});\n\t\t\t},\n\t\t\tdo: async (fn) => {\n\t\t\t\tawait tools.run(memoizationId, async () => {\n\t\t\t\t\tawait fn(builder);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\t/**\n\t* Define the set of tools the user has access to for their step functions.\n\t*\n\t* Each key is the function name and is expected to run `createTool` and pass\n\t* a generic type for that function as it will appear in the user's code.\n\t*/\n\tconst tools = {\n\t\tsendEvent: createTool(({ id, name }) => {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Sync,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.StepPlanned,\n\t\t\t\tname: \"sendEvent\",\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\topts: { type: \"step.sendEvent\" },\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}, { fn: (_idOrOptions, payload) => {\n\t\t\treturn client[\"_send\"]({\n\t\t\t\tpayload,\n\t\t\t\theaders: execution[\"options\"][\"headers\"]\n\t\t\t});\n\t\t} }),\n\t\twaitForSignal: createTool(({ id, name }, opts) => {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.WaitForSignal,\n\t\t\t\tname: opts.signal,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\topts: {\n\t\t\t\t\tsignal: opts.signal,\n\t\t\t\t\ttimeout: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__.timeStr)(opts.timeout),\n\t\t\t\t\tconflict: opts.onConflict\n\t\t\t\t},\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}),\n\t\tsendSignal: createTool(({ id, name }, opts) => {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Sync,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.StepPlanned,\n\t\t\t\tname: \"sendSignal\",\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\topts: {\n\t\t\t\t\ttype: \"step.sendSignal\",\n\t\t\t\t\tsignal: opts.signal\n\t\t\t\t},\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}, { fn: (_idOrOptions, opts) => {\n\t\t\treturn client[\"_sendSignal\"]({\n\t\t\t\tsignal: opts.signal,\n\t\t\t\tdata: opts.data,\n\t\t\t\theaders: execution[\"options\"][\"headers\"]\n\t\t\t});\n\t\t} }),\n\t\twaitForEvent: createTool(({ id, name }, opts) => {\n\t\t\tconst matchOpts = { timeout: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__.timeStr)(typeof opts === \"string\" ? opts : opts.timeout) };\n\t\t\tif (typeof opts !== \"string\") {\n\t\t\t\tif (opts?.match) matchOpts.if = `event.${opts.match} == async.${opts.match}`;\n\t\t\t\telse if (opts?.if) matchOpts.if = opts.if;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.WaitForEvent,\n\t\t\t\tname: opts.event,\n\t\t\t\topts: matchOpts,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}),\n\t\trun: createStepRun(),\n\t\tai: {\n\t\t\tinfer: createTool(({ id, name }, options) => {\n\t\t\t\tconst { model, body, ...rest } = options;\n\t\t\t\tconst modelCopy = { ...model };\n\t\t\t\toptions.model.onCall?.(modelCopy, options.body);\n\t\t\t\treturn {\n\t\t\t\t\tid,\n\t\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.AiGateway,\n\t\t\t\t\tdisplayName: name ?? id,\n\t\t\t\t\topts: {\n\t\t\t\t\t\ttype: \"step.ai.infer\",\n\t\t\t\t\t\turl: modelCopy.url,\n\t\t\t\t\t\theaders: modelCopy.headers,\n\t\t\t\t\t\tauth_key: modelCopy.authKey,\n\t\t\t\t\t\tformat: modelCopy.format,\n\t\t\t\t\t\tbody,\n\t\t\t\t\t\t...rest\n\t\t\t\t\t},\n\t\t\t\t\tuserland: { id }\n\t\t\t\t};\n\t\t\t}),\n\t\t\twrap: createStepRun(\"step.ai.wrap\"),\n\t\t\tmodels: { ..._inngest_ai__WEBPACK_IMPORTED_MODULE_0__.models }\n\t\t},\n\t\tsleep: createTool(({ id, name }, time) => {\n\t\t\t/**\n\t\t\t* The presence of this operation in the returned stack indicates that the\n\t\t\t* sleep is over and we should continue execution.\n\t\t\t*/\n\t\t\tconst msTimeStr = (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__.timeStr)((0,_helpers_temporal_js__WEBPACK_IMPORTED_MODULE_4__.isTemporalDuration)(time) ? time.total({ unit: \"milliseconds\" }) : time);\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.Sleep,\n\t\t\t\tname: msTimeStr,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}),\n\t\tsleepUntil: createTool(({ id, name }, time) => {\n\t\t\ttry {\n\t\t\t\tconst iso = (0,_helpers_temporal_js__WEBPACK_IMPORTED_MODULE_4__.getISOString)(time);\n\t\t\t\t/**\n\t\t\t\t* The presence of this operation in the returned stack indicates that the\n\t\t\t\t* sleep is over and we should continue execution.\n\t\t\t\t*/\n\t\t\t\treturn {\n\t\t\t\t\tid,\n\t\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.Sleep,\n\t\t\t\t\tname: iso,\n\t\t\t\t\tdisplayName: name ?? id,\n\t\t\t\t\tuserland: { id }\n\t\t\t\t};\n\t\t\t} catch (err) {\n\t\t\t\t/**\n\t\t\t\t* If we're here, it's because the date is invalid. We'll throw a custom\n\t\t\t\t* error here to standardise this response.\n\t\t\t\t*/\n\t\t\t\tconsole.warn(\"Invalid `Date`, date string, `Temporal.Instant`, or `Temporal.ZonedDateTime` passed to sleepUntil;\", err);\n\t\t\t\tthrow new Error(`Invalid \\`Date\\`, date string, \\`Temporal.Instant\\`, or \\`Temporal.ZonedDateTime\\` passed to sleepUntil: ${time}`);\n\t\t\t}\n\t\t}),\n\t\tinvoke: createTool(({ id, name }, invokeOpts) => {\n\t\t\tconst optsSchema = invokePayloadSchema.extend({ timeout: zod_v3__WEBPACK_IMPORTED_MODULE_5__.union([\n\t\t\t\tzod_v3__WEBPACK_IMPORTED_MODULE_5__.number(),\n\t\t\t\tzod_v3__WEBPACK_IMPORTED_MODULE_5__.string(),\n\t\t\t\tzod_v3__WEBPACK_IMPORTED_MODULE_5__.date()\n\t\t\t]).optional() });\n\t\t\tconst parsedFnOpts = optsSchema.extend({\n\t\t\t\t_type: zod_v3__WEBPACK_IMPORTED_MODULE_5__.literal(\"fullId\").optional().default(\"fullId\"),\n\t\t\t\tfunction: zod_v3__WEBPACK_IMPORTED_MODULE_5__.string().min(1)\n\t\t\t}).or(optsSchema.extend({\n\t\t\t\t_type: zod_v3__WEBPACK_IMPORTED_MODULE_5__.literal(\"fnInstance\").optional().default(\"fnInstance\"),\n\t\t\t\tfunction: zod_v3__WEBPACK_IMPORTED_MODULE_5__[\"instanceof\"](_InngestFunction_js__WEBPACK_IMPORTED_MODULE_6__.InngestFunction)\n\t\t\t})).or(optsSchema.extend({\n\t\t\t\t_type: zod_v3__WEBPACK_IMPORTED_MODULE_5__.literal(\"refInstance\").optional().default(\"refInstance\"),\n\t\t\t\tfunction: zod_v3__WEBPACK_IMPORTED_MODULE_5__[\"instanceof\"](_InngestFunctionReference_js__WEBPACK_IMPORTED_MODULE_7__.InngestFunctionReference)\n\t\t\t})).safeParse(invokeOpts);\n\t\t\tif (!parsedFnOpts.success) throw new Error(`Invalid invocation options passed to invoke; must include either a function or functionId.`);\n\t\t\tconst { _type, function: fn, data, user, v, timeout } = parsedFnOpts.data;\n\t\t\tconst opts = {\n\t\t\t\tpayload: {\n\t\t\t\t\tdata,\n\t\t\t\t\tuser,\n\t\t\t\t\tv\n\t\t\t\t},\n\t\t\t\tfunction_id: \"\",\n\t\t\t\ttimeout: typeof timeout === \"undefined\" ? void 0 : (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__.timeStr)(timeout)\n\t\t\t};\n\t\t\tswitch (_type) {\n\t\t\t\tcase \"fnInstance\":\n\t\t\t\t\topts.function_id = fn.id(fn[\"client\"].id);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"fullId\":\n\t\t\t\t\tconsole.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_8__.logPrefix} Invoking function with \\`function: string\\` is deprecated and will be removed in v4.0.0; use an imported function or \\`referenceFunction()\\` instead. See https://innge.st/ts-referencing-functions`);\n\t\t\t\t\topts.function_id = fn;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"refInstance\":\n\t\t\t\t\topts.function_id = [fn.opts.appId || client.id, fn.opts.functionId].filter(Boolean).join(\"-\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.InvokeFunction,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\topts,\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}),\n\t\tfetch: _Fetch_js__WEBPACK_IMPORTED_MODULE_9__.fetch\n\t};\n\ttools[_InngestMetadata_js__WEBPACK_IMPORTED_MODULE_2__.metadataSymbol] = (memoizationId) => createStepMetadataWrapper(memoizationId);\n\ttools[gatewaySymbol] = createTool(({ id, name }, input, init) => {\n\t\tconst url = input instanceof Request ? input.url : input.toString();\n\t\tconst headers = {};\n\t\tif (input instanceof Request) input.headers.forEach((value, key) => {\n\t\t\theaders[key] = value;\n\t\t});\n\t\telse if (init?.headers) new Headers(init.headers).forEach((value, key) => {\n\t\t\theaders[key] = value;\n\t\t});\n\t\treturn {\n\t\t\tid,\n\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.Gateway,\n\t\t\tdisplayName: name ?? id,\n\t\t\topts: {\n\t\t\t\turl,\n\t\t\t\tmethod: init?.method ?? \"GET\",\n\t\t\t\theaders,\n\t\t\t\tbody: init?.body\n\t\t\t},\n\t\t\tuserland: { id }\n\t\t};\n\t});\n\treturn tools;\n};\nconst gatewaySymbol = Symbol.for(\"inngest.step.gateway\");\n/**\n* A generic set of step tools that can be used without typing information about\n* the client used to create them.\n*\n* These tools use AsyncLocalStorage to track the context in which they are\n* used, and will throw an error if used outside of an Inngest context.\n*\n* The intention of these high-level tools is to allow usage of Inngest step\n* tools within API endpoints, though they can still be used within regular\n* Inngest functions as well.\n*/\nconst step = {\n\tfetch: null,\n\tai: {\n\t\tinfer: (...args) => getDeferredStepTooling().then((tools) => tools.ai.infer(...args)),\n\t\twrap: (...args) => getDeferredStepTooling().then((tools) => tools.ai.wrap(...args)),\n\t\tmodels: { ..._inngest_ai__WEBPACK_IMPORTED_MODULE_0__.models }\n\t},\n\tinvoke: (...args) => getDeferredStepTooling().then((tools) => tools.invoke(...args)),\n\trun: (...args) => getDeferredStepTooling().then((tools) => tools.run(...args)),\n\tsendEvent: (...args) => getDeferredStepTooling().then((tools) => tools.sendEvent(...args)),\n\tsendSignal: (...args) => getDeferredStepTooling().then((tools) => tools.sendSignal(...args)),\n\tsleep: (...args) => getDeferredStepTooling().then((tools) => tools.sleep(...args)),\n\tsleepUntil: (...args) => getDeferredStepTooling().then((tools) => tools.sleepUntil(...args)),\n\twaitForEvent: (...args) => getDeferredStepTooling().then((tools) => tools.waitForEvent(...args)),\n\twaitForSignal: (...args) => getDeferredStepTooling().then((tools) => tools.waitForSignal(...args))\n};\n/**\n* An internal function used to retrieve or create step tooling for the current\n* execution context.\n*\n* Note that this requires an existing context to create the step tooling;\n* something must declare the Inngest execution context before this can be used.\n*/\nconst getDeferredStepTooling = async () => {\n\tconst ctx = await (0,_execution_als_js__WEBPACK_IMPORTED_MODULE_10__.getAsyncCtx)();\n\tif (!ctx) throw new Error(\"`step` tools can only be used within Inngest function executions; no context was found\");\n\tif (!ctx.app) throw new Error(\"`step` tools can only be used within Inngest function executions; no Inngest client was found in the execution context\");\n\tif (!ctx.execution) throw new Error(\"`step` tools can only be used within Inngest function executions; no execution context was found\");\n\treturn ctx.execution.ctx.step;\n};\n/**\n* The event payload portion of the options for `step.invoke()`. This does not\n* include non-payload options like `timeout` or the function to invoke.\n*/\nconst invokePayloadSchema = zod_v3__WEBPACK_IMPORTED_MODULE_5__.object({\n\tdata: zod_v3__WEBPACK_IMPORTED_MODULE_5__.record(zod_v3__WEBPACK_IMPORTED_MODULE_5__.any()).optional(),\n\tuser: zod_v3__WEBPACK_IMPORTED_MODULE_5__.record(zod_v3__WEBPACK_IMPORTED_MODULE_5__.any()).optional(),\n\tv: zod_v3__WEBPACK_IMPORTED_MODULE_5__.string().optional()\n});\n\n//#endregion\n\n//# sourceMappingURL=InngestStepTools.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RTdGVwVG9vbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUQ7QUFDQTtBQUNFO0FBQ0g7QUFDK0I7QUFDTDtBQUN2QztBQUNvQjtBQUNrQjtBQUM5QztBQUNVOztBQUVyQztBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFVBQVU7QUFDakM7QUFDQSx3QkFBd0IsUUFBUSxJQUFJO0FBQ3BDLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0NBQVE7QUFDbEIsUUFBUSxpREFBVTtBQUNsQjtBQUNBO0FBQ0Esb0NBQW9DLE9BQU8sSUFBSTtBQUMvQyxnQkFBZ0I7QUFDaEI7QUFDQSxHQUFHLElBQUksdUNBQXVDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsd0VBQXVCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixVQUFVO0FBQ3JDO0FBQ0E7QUFDQSxVQUFVLCtDQUFRO0FBQ2xCLFFBQVEsaURBQVU7QUFDbEI7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDLGdCQUFnQjtBQUNoQjtBQUNBLEdBQUcsSUFBSTtBQUNQO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osZUFBZTtBQUNmO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxHQUFHLCtDQUFNO0FBQ3JCLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLCtEQUFXO0FBQzlCLDhGQUE4RjtBQUM5RixrR0FBa0c7QUFDbEcsd0dBQXdHO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwQ0FBUTtBQUNwQyxPQUFPLDBDQUFRLENBQUMsdUNBQUs7QUFDckIsT0FBTywwQ0FBUSxDQUFDLHVDQUFLO0FBQ3JCLElBQUksMENBQVE7QUFDWixDQUFDOztBQUVEO0FBQzJHO0FBQzNHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RTdGVwVG9vbHMuanM/OTYzYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBc3luY0N0eCB9IGZyb20gXCIuL2V4ZWN1dGlvbi9hbHMuanNcIjtcbmltcG9ydCB7IGxvZ1ByZWZpeCB9IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0cy5qc1wiO1xuaW1wb3J0IHsgU3RlcE1vZGUsIFN0ZXBPcENvZGUgfSBmcm9tIFwiLi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IHRpbWVTdHIgfSBmcm9tIFwiLi4vaGVscGVycy9zdHJpbmdzLmpzXCI7XG5pbXBvcnQgeyBVbnNjb3BlZE1ldGFkYXRhQnVpbGRlciwgbWV0YWRhdGFTeW1ib2wgfSBmcm9tIFwiLi9Jbm5nZXN0TWV0YWRhdGEuanNcIjtcbmltcG9ydCB7IGdldElTT1N0cmluZywgaXNUZW1wb3JhbER1cmF0aW9uIH0gZnJvbSBcIi4uL2hlbHBlcnMvdGVtcG9yYWwuanNcIjtcbmltcG9ydCB7IGZldGNoIH0gZnJvbSBcIi4vRmV0Y2guanNcIjtcbmltcG9ydCB7IElubmdlc3RGdW5jdGlvbiB9IGZyb20gXCIuL0lubmdlc3RGdW5jdGlvbi5qc1wiO1xuaW1wb3J0IHsgSW5uZ2VzdEZ1bmN0aW9uUmVmZXJlbmNlIH0gZnJvbSBcIi4vSW5uZ2VzdEZ1bmN0aW9uUmVmZXJlbmNlLmpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92M1wiO1xuaW1wb3J0IHsgbW9kZWxzIH0gZnJvbSBcIkBpbm5nZXN0L2FpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9Jbm5nZXN0U3RlcFRvb2xzLnRzXG5jb25zdCBnZXRTdGVwT3B0aW9ucyA9IChvcHRpb25zKSA9PiB7XG5cdGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHsgaWQ6IG9wdGlvbnMgfTtcblx0cmV0dXJuIG9wdGlvbnM7XG59O1xuLyoqXG4qIFN1ZmZpeCB1c2VkIHRvIG5hbWVzcGFjZSBzdGVwcyB0aGF0IGFyZSBhdXRvbWF0aWNhbGx5IGluZGV4ZWQuXG4qL1xuY29uc3QgU1RFUF9JTkRFWElOR19TVUZGSVggPSBcIjpcIjtcbi8qKlxuKiBDcmVhdGUgYSBuZXcgc2V0IG9mIHN0ZXAgZnVuY3Rpb24gdG9vbHMgcmVhZHkgdG8gYmUgdXNlZCBpbiBhIHN0ZXAgZnVuY3Rpb24uXG4qIFRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIHJ1biBhbmQgYSBmcmVzaCBzZXQgb2YgdG9vbHMgcHJvdmlkZWQgZXZlcnkgdGltZSBhXG4qIGZ1bmN0aW9uIGlzIHJ1bi5cbipcbiogQW4gb3Agc3RhY2sgKGZ1bmN0aW9uIHN0YXRlKSBpcyBwYXNzZWQgaW4gYXMgd2VsbCBhcyBzb21lIG11dGFibGUgcHJvcGVydGllc1xuKiB0aGF0IHRoZSB0b29scyBjYW4gdXNlIHRvIHN1Ym1pdCBhIG5ldyBvcC5cbiovXG5jb25zdCBjcmVhdGVTdGVwVG9vbHMgPSAoY2xpZW50LCBleGVjdXRpb24sIHN0ZXBIYW5kbGVyKSA9PiB7XG5cdC8qKlxuXHQqIEEgbG9jYWwgaGVscGVyIHVzZWQgdG8gY3JlYXRlIHRvb2xzIHRoYXQgY2FuIGJlIHVzZWQgdG8gc3VibWl0IGFuIG9wLlxuXHQqXG5cdCogV2hlbiB1c2luZyB0aGlzIGZ1bmN0aW9uLCBhIGdlbmVyaWMgdHlwZSBzaG91bGQgYmUgcHJvdmlkZWQgd2hpY2ggaXMgdGhlXG5cdCogZnVuY3Rpb24gc2lnbmF0dXJlIGV4cG9zZWQgdG8gdGhlIHVzZXIuXG5cdCovXG5cdGNvbnN0IGNyZWF0ZVRvb2wgPSAobWF0Y2hPcCwgb3B0cykgPT4ge1xuXHRcdHJldHVybiAoYXN5bmMgKC4uLmFyZ3MpID0+IHtcblx0XHRcdHJldHVybiBzdGVwSGFuZGxlcih7XG5cdFx0XHRcdGFyZ3MsXG5cdFx0XHRcdG1hdGNoT3AsXG5cdFx0XHRcdG9wdHNcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXHQvKipcblx0KiBDcmVhdGUgYSBuZXcgc3RlcCBydW4gdG9vbCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJ1biBhIHN0ZXAgZnVuY3Rpb24gdXNpbmdcblx0KiBgc3RlcC5ydW4oKWAgYXMgYSBzaGltLlxuXHQqL1xuXHRjb25zdCBjcmVhdGVTdGVwUnVuID0gKHR5cGUpID0+IHtcblx0XHRyZXR1cm4gY3JlYXRlVG9vbCgoeyBpZCwgbmFtZSB9LCBfZm4sIC4uLmlucHV0KSA9PiB7XG5cdFx0XHRjb25zdCBvcHRzID0ge1xuXHRcdFx0XHQuLi5pbnB1dC5sZW5ndGggPyB7IGlucHV0IH0gOiB7fSxcblx0XHRcdFx0Li4udHlwZSA/IHsgdHlwZSB9IDoge31cblx0XHRcdH07XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRpZCxcblx0XHRcdFx0bW9kZTogU3RlcE1vZGUuU3luYyxcblx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcFBsYW5uZWQsXG5cdFx0XHRcdG5hbWU6IGlkLFxuXHRcdFx0XHRkaXNwbGF5TmFtZTogbmFtZSA/PyBpZCxcblx0XHRcdFx0Li4uT2JqZWN0LmtleXMob3B0cykubGVuZ3RoID8geyBvcHRzIH0gOiB7fSxcblx0XHRcdFx0dXNlcmxhbmQ6IHsgaWQgfVxuXHRcdFx0fTtcblx0XHR9LCB7IGZuOiAoXywgZm4sIC4uLmlucHV0KSA9PiBmbiguLi5pbnB1dCkgfSk7XG5cdH07XG5cdC8qKlxuXHQqIENyZWF0ZXMgYSBtZXRhZGF0YSBidWlsZGVyIHdyYXBwZXIgZm9yIHN0ZXAubWV0YWRhdGEoXCJpZFwiKS5cblx0KiBVc2VzIE1ldGFkYXRhQnVpbGRlciBmb3IgY29uZmlnIGFjY3VtdWxhdGlvbiwgYnV0IHdyYXBzIC51cGRhdGUoKSBpbiB0b29scy5ydW4oKSBmb3IgbWVtb2l6YXRpb24uXG5cdCovXG5cdGNvbnN0IGNyZWF0ZVN0ZXBNZXRhZGF0YVdyYXBwZXIgPSAobWVtb2l6YXRpb25JZCwgYnVpbGRlcikgPT4ge1xuXHRcdGlmICghY2xpZW50W1wiZXhwZXJpbWVudGFsTWV0YWRhdGFFbmFibGVkXCJdKSB0aHJvdyBuZXcgRXJyb3IoXCJzdGVwLm1ldGFkYXRhKCkgaXMgZXhwZXJpbWVudGFsLiBFbmFibGUgaXQgYnkgYWRkaW5nIG1ldGFkYXRhTWlkZGxld2FyZSgpIGZyb20gXFxcImlubmdlc3QvZXhwZXJpbWVudGFsXFxcIiB0byB5b3VyIGNsaWVudCBtaWRkbGV3YXJlLlwiKTtcblx0XHRjb25zdCB3aXRoQnVpbGRlciA9IChuZXh0KSA9PiBjcmVhdGVTdGVwTWV0YWRhdGFXcmFwcGVyKG1lbW9pemF0aW9uSWQsIG5leHQpO1xuXHRcdGlmICghYnVpbGRlcikgYnVpbGRlciA9IG5ldyBVbnNjb3BlZE1ldGFkYXRhQnVpbGRlcihjbGllbnQpLnJ1bigpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRydW46IChydW5JZCkgPT4gd2l0aEJ1aWxkZXIoYnVpbGRlci5ydW4ocnVuSWQpKSxcblx0XHRcdHN0ZXA6IChzdGVwSWQsIGluZGV4KSA9PiB3aXRoQnVpbGRlcihidWlsZGVyLnN0ZXAoc3RlcElkLCBpbmRleCkpLFxuXHRcdFx0YXR0ZW1wdDogKGF0dGVtcHRJbmRleCkgPT4gd2l0aEJ1aWxkZXIoYnVpbGRlci5hdHRlbXB0KGF0dGVtcHRJbmRleCkpLFxuXHRcdFx0c3BhbjogKHNwYW5JZCkgPT4gd2l0aEJ1aWxkZXIoYnVpbGRlci5zcGFuKHNwYW5JZCkpLFxuXHRcdFx0dXBkYXRlOiBhc3luYyAodmFsdWVzLCBraW5kID0gXCJkZWZhdWx0XCIpID0+IHtcblx0XHRcdFx0YXdhaXQgdG9vbHMucnVuKG1lbW9pemF0aW9uSWQsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRhd2FpdCBidWlsZGVyLnVwZGF0ZSh2YWx1ZXMsIGtpbmQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHRkbzogYXN5bmMgKGZuKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHRvb2xzLnJ1bihtZW1vaXphdGlvbklkLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0YXdhaXQgZm4oYnVpbGRlcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cdH07XG5cdC8qKlxuXHQqIERlZmluZSB0aGUgc2V0IG9mIHRvb2xzIHRoZSB1c2VyIGhhcyBhY2Nlc3MgdG8gZm9yIHRoZWlyIHN0ZXAgZnVuY3Rpb25zLlxuXHQqXG5cdCogRWFjaCBrZXkgaXMgdGhlIGZ1bmN0aW9uIG5hbWUgYW5kIGlzIGV4cGVjdGVkIHRvIHJ1biBgY3JlYXRlVG9vbGAgYW5kIHBhc3Ncblx0KiBhIGdlbmVyaWMgdHlwZSBmb3IgdGhhdCBmdW5jdGlvbiBhcyBpdCB3aWxsIGFwcGVhciBpbiB0aGUgdXNlcidzIGNvZGUuXG5cdCovXG5cdGNvbnN0IHRvb2xzID0ge1xuXHRcdHNlbmRFdmVudDogY3JlYXRlVG9vbCgoeyBpZCwgbmFtZSB9KSA9PiB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRpZCxcblx0XHRcdFx0bW9kZTogU3RlcE1vZGUuU3luYyxcblx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcFBsYW5uZWQsXG5cdFx0XHRcdG5hbWU6IFwic2VuZEV2ZW50XCIsXG5cdFx0XHRcdGRpc3BsYXlOYW1lOiBuYW1lID8/IGlkLFxuXHRcdFx0XHRvcHRzOiB7IHR5cGU6IFwic3RlcC5zZW5kRXZlbnRcIiB9LFxuXHRcdFx0XHR1c2VybGFuZDogeyBpZCB9XG5cdFx0XHR9O1xuXHRcdH0sIHsgZm46IChfaWRPck9wdGlvbnMsIHBheWxvYWQpID0+IHtcblx0XHRcdHJldHVybiBjbGllbnRbXCJfc2VuZFwiXSh7XG5cdFx0XHRcdHBheWxvYWQsXG5cdFx0XHRcdGhlYWRlcnM6IGV4ZWN1dGlvbltcIm9wdGlvbnNcIl1bXCJoZWFkZXJzXCJdXG5cdFx0XHR9KTtcblx0XHR9IH0pLFxuXHRcdHdhaXRGb3JTaWduYWw6IGNyZWF0ZVRvb2woKHsgaWQsIG5hbWUgfSwgb3B0cykgPT4ge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aWQsXG5cdFx0XHRcdG1vZGU6IFN0ZXBNb2RlLkFzeW5jLFxuXHRcdFx0XHRvcDogU3RlcE9wQ29kZS5XYWl0Rm9yU2lnbmFsLFxuXHRcdFx0XHRuYW1lOiBvcHRzLnNpZ25hbCxcblx0XHRcdFx0ZGlzcGxheU5hbWU6IG5hbWUgPz8gaWQsXG5cdFx0XHRcdG9wdHM6IHtcblx0XHRcdFx0XHRzaWduYWw6IG9wdHMuc2lnbmFsLFxuXHRcdFx0XHRcdHRpbWVvdXQ6IHRpbWVTdHIob3B0cy50aW1lb3V0KSxcblx0XHRcdFx0XHRjb25mbGljdDogb3B0cy5vbkNvbmZsaWN0XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVzZXJsYW5kOiB7IGlkIH1cblx0XHRcdH07XG5cdFx0fSksXG5cdFx0c2VuZFNpZ25hbDogY3JlYXRlVG9vbCgoeyBpZCwgbmFtZSB9LCBvcHRzKSA9PiB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRpZCxcblx0XHRcdFx0bW9kZTogU3RlcE1vZGUuU3luYyxcblx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcFBsYW5uZWQsXG5cdFx0XHRcdG5hbWU6IFwic2VuZFNpZ25hbFwiLFxuXHRcdFx0XHRkaXNwbGF5TmFtZTogbmFtZSA/PyBpZCxcblx0XHRcdFx0b3B0czoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RlcC5zZW5kU2lnbmFsXCIsXG5cdFx0XHRcdFx0c2lnbmFsOiBvcHRzLnNpZ25hbFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR1c2VybGFuZDogeyBpZCB9XG5cdFx0XHR9O1xuXHRcdH0sIHsgZm46IChfaWRPck9wdGlvbnMsIG9wdHMpID0+IHtcblx0XHRcdHJldHVybiBjbGllbnRbXCJfc2VuZFNpZ25hbFwiXSh7XG5cdFx0XHRcdHNpZ25hbDogb3B0cy5zaWduYWwsXG5cdFx0XHRcdGRhdGE6IG9wdHMuZGF0YSxcblx0XHRcdFx0aGVhZGVyczogZXhlY3V0aW9uW1wib3B0aW9uc1wiXVtcImhlYWRlcnNcIl1cblx0XHRcdH0pO1xuXHRcdH0gfSksXG5cdFx0d2FpdEZvckV2ZW50OiBjcmVhdGVUb29sKCh7IGlkLCBuYW1lIH0sIG9wdHMpID0+IHtcblx0XHRcdGNvbnN0IG1hdGNoT3B0cyA9IHsgdGltZW91dDogdGltZVN0cih0eXBlb2Ygb3B0cyA9PT0gXCJzdHJpbmdcIiA/IG9wdHMgOiBvcHRzLnRpbWVvdXQpIH07XG5cdFx0XHRpZiAodHlwZW9mIG9wdHMgIT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0aWYgKG9wdHM/Lm1hdGNoKSBtYXRjaE9wdHMuaWYgPSBgZXZlbnQuJHtvcHRzLm1hdGNofSA9PSBhc3luYy4ke29wdHMubWF0Y2h9YDtcblx0XHRcdFx0ZWxzZSBpZiAob3B0cz8uaWYpIG1hdGNoT3B0cy5pZiA9IG9wdHMuaWY7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRpZCxcblx0XHRcdFx0bW9kZTogU3RlcE1vZGUuQXN5bmMsXG5cdFx0XHRcdG9wOiBTdGVwT3BDb2RlLldhaXRGb3JFdmVudCxcblx0XHRcdFx0bmFtZTogb3B0cy5ldmVudCxcblx0XHRcdFx0b3B0czogbWF0Y2hPcHRzLFxuXHRcdFx0XHRkaXNwbGF5TmFtZTogbmFtZSA/PyBpZCxcblx0XHRcdFx0dXNlcmxhbmQ6IHsgaWQgfVxuXHRcdFx0fTtcblx0XHR9KSxcblx0XHRydW46IGNyZWF0ZVN0ZXBSdW4oKSxcblx0XHRhaToge1xuXHRcdFx0aW5mZXI6IGNyZWF0ZVRvb2woKHsgaWQsIG5hbWUgfSwgb3B0aW9ucykgPT4ge1xuXHRcdFx0XHRjb25zdCB7IG1vZGVsLCBib2R5LCAuLi5yZXN0IH0gPSBvcHRpb25zO1xuXHRcdFx0XHRjb25zdCBtb2RlbENvcHkgPSB7IC4uLm1vZGVsIH07XG5cdFx0XHRcdG9wdGlvbnMubW9kZWwub25DYWxsPy4obW9kZWxDb3B5LCBvcHRpb25zLmJvZHkpO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGlkLFxuXHRcdFx0XHRcdG1vZGU6IFN0ZXBNb2RlLkFzeW5jLFxuXHRcdFx0XHRcdG9wOiBTdGVwT3BDb2RlLkFpR2F0ZXdheSxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogbmFtZSA/PyBpZCxcblx0XHRcdFx0XHRvcHRzOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0ZXAuYWkuaW5mZXJcIixcblx0XHRcdFx0XHRcdHVybDogbW9kZWxDb3B5LnVybCxcblx0XHRcdFx0XHRcdGhlYWRlcnM6IG1vZGVsQ29weS5oZWFkZXJzLFxuXHRcdFx0XHRcdFx0YXV0aF9rZXk6IG1vZGVsQ29weS5hdXRoS2V5LFxuXHRcdFx0XHRcdFx0Zm9ybWF0OiBtb2RlbENvcHkuZm9ybWF0LFxuXHRcdFx0XHRcdFx0Ym9keSxcblx0XHRcdFx0XHRcdC4uLnJlc3Rcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHVzZXJsYW5kOiB7IGlkIH1cblx0XHRcdFx0fTtcblx0XHRcdH0pLFxuXHRcdFx0d3JhcDogY3JlYXRlU3RlcFJ1bihcInN0ZXAuYWkud3JhcFwiKSxcblx0XHRcdG1vZGVsczogeyAuLi5tb2RlbHMgfVxuXHRcdH0sXG5cdFx0c2xlZXA6IGNyZWF0ZVRvb2woKHsgaWQsIG5hbWUgfSwgdGltZSkgPT4ge1xuXHRcdFx0LyoqXG5cdFx0XHQqIFRoZSBwcmVzZW5jZSBvZiB0aGlzIG9wZXJhdGlvbiBpbiB0aGUgcmV0dXJuZWQgc3RhY2sgaW5kaWNhdGVzIHRoYXQgdGhlXG5cdFx0XHQqIHNsZWVwIGlzIG92ZXIgYW5kIHdlIHNob3VsZCBjb250aW51ZSBleGVjdXRpb24uXG5cdFx0XHQqL1xuXHRcdFx0Y29uc3QgbXNUaW1lU3RyID0gdGltZVN0cihpc1RlbXBvcmFsRHVyYXRpb24odGltZSkgPyB0aW1lLnRvdGFsKHsgdW5pdDogXCJtaWxsaXNlY29uZHNcIiB9KSA6IHRpbWUpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aWQsXG5cdFx0XHRcdG1vZGU6IFN0ZXBNb2RlLkFzeW5jLFxuXHRcdFx0XHRvcDogU3RlcE9wQ29kZS5TbGVlcCxcblx0XHRcdFx0bmFtZTogbXNUaW1lU3RyLFxuXHRcdFx0XHRkaXNwbGF5TmFtZTogbmFtZSA/PyBpZCxcblx0XHRcdFx0dXNlcmxhbmQ6IHsgaWQgfVxuXHRcdFx0fTtcblx0XHR9KSxcblx0XHRzbGVlcFVudGlsOiBjcmVhdGVUb29sKCh7IGlkLCBuYW1lIH0sIHRpbWUpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IGlzbyA9IGdldElTT1N0cmluZyh0aW1lKTtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogVGhlIHByZXNlbmNlIG9mIHRoaXMgb3BlcmF0aW9uIGluIHRoZSByZXR1cm5lZCBzdGFjayBpbmRpY2F0ZXMgdGhhdCB0aGVcblx0XHRcdFx0KiBzbGVlcCBpcyBvdmVyIGFuZCB3ZSBzaG91bGQgY29udGludWUgZXhlY3V0aW9uLlxuXHRcdFx0XHQqL1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGlkLFxuXHRcdFx0XHRcdG1vZGU6IFN0ZXBNb2RlLkFzeW5jLFxuXHRcdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlNsZWVwLFxuXHRcdFx0XHRcdG5hbWU6IGlzbyxcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogbmFtZSA/PyBpZCxcblx0XHRcdFx0XHR1c2VybGFuZDogeyBpZCB9XG5cdFx0XHRcdH07XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogSWYgd2UncmUgaGVyZSwgaXQncyBiZWNhdXNlIHRoZSBkYXRlIGlzIGludmFsaWQuIFdlJ2xsIHRocm93IGEgY3VzdG9tXG5cdFx0XHRcdCogZXJyb3IgaGVyZSB0byBzdGFuZGFyZGlzZSB0aGlzIHJlc3BvbnNlLlxuXHRcdFx0XHQqL1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJJbnZhbGlkIGBEYXRlYCwgZGF0ZSBzdHJpbmcsIGBUZW1wb3JhbC5JbnN0YW50YCwgb3IgYFRlbXBvcmFsLlpvbmVkRGF0ZVRpbWVgIHBhc3NlZCB0byBzbGVlcFVudGlsO1wiLCBlcnIpO1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgXFxgRGF0ZVxcYCwgZGF0ZSBzdHJpbmcsIFxcYFRlbXBvcmFsLkluc3RhbnRcXGAsIG9yIFxcYFRlbXBvcmFsLlpvbmVkRGF0ZVRpbWVcXGAgcGFzc2VkIHRvIHNsZWVwVW50aWw6ICR7dGltZX1gKTtcblx0XHRcdH1cblx0XHR9KSxcblx0XHRpbnZva2U6IGNyZWF0ZVRvb2woKHsgaWQsIG5hbWUgfSwgaW52b2tlT3B0cykgPT4ge1xuXHRcdFx0Y29uc3Qgb3B0c1NjaGVtYSA9IGludm9rZVBheWxvYWRTY2hlbWEuZXh0ZW5kKHsgdGltZW91dDogei51bmlvbihbXG5cdFx0XHRcdHoubnVtYmVyKCksXG5cdFx0XHRcdHouc3RyaW5nKCksXG5cdFx0XHRcdHouZGF0ZSgpXG5cdFx0XHRdKS5vcHRpb25hbCgpIH0pO1xuXHRcdFx0Y29uc3QgcGFyc2VkRm5PcHRzID0gb3B0c1NjaGVtYS5leHRlbmQoe1xuXHRcdFx0XHRfdHlwZTogei5saXRlcmFsKFwiZnVsbElkXCIpLm9wdGlvbmFsKCkuZGVmYXVsdChcImZ1bGxJZFwiKSxcblx0XHRcdFx0ZnVuY3Rpb246IHouc3RyaW5nKCkubWluKDEpXG5cdFx0XHR9KS5vcihvcHRzU2NoZW1hLmV4dGVuZCh7XG5cdFx0XHRcdF90eXBlOiB6LmxpdGVyYWwoXCJmbkluc3RhbmNlXCIpLm9wdGlvbmFsKCkuZGVmYXVsdChcImZuSW5zdGFuY2VcIiksXG5cdFx0XHRcdGZ1bmN0aW9uOiB6Lmluc3RhbmNlb2YoSW5uZ2VzdEZ1bmN0aW9uKVxuXHRcdFx0fSkpLm9yKG9wdHNTY2hlbWEuZXh0ZW5kKHtcblx0XHRcdFx0X3R5cGU6IHoubGl0ZXJhbChcInJlZkluc3RhbmNlXCIpLm9wdGlvbmFsKCkuZGVmYXVsdChcInJlZkluc3RhbmNlXCIpLFxuXHRcdFx0XHRmdW5jdGlvbjogei5pbnN0YW5jZW9mKElubmdlc3RGdW5jdGlvblJlZmVyZW5jZSlcblx0XHRcdH0pKS5zYWZlUGFyc2UoaW52b2tlT3B0cyk7XG5cdFx0XHRpZiAoIXBhcnNlZEZuT3B0cy5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaW52b2NhdGlvbiBvcHRpb25zIHBhc3NlZCB0byBpbnZva2U7IG11c3QgaW5jbHVkZSBlaXRoZXIgYSBmdW5jdGlvbiBvciBmdW5jdGlvbklkLmApO1xuXHRcdFx0Y29uc3QgeyBfdHlwZSwgZnVuY3Rpb246IGZuLCBkYXRhLCB1c2VyLCB2LCB0aW1lb3V0IH0gPSBwYXJzZWRGbk9wdHMuZGF0YTtcblx0XHRcdGNvbnN0IG9wdHMgPSB7XG5cdFx0XHRcdHBheWxvYWQ6IHtcblx0XHRcdFx0XHRkYXRhLFxuXHRcdFx0XHRcdHVzZXIsXG5cdFx0XHRcdFx0dlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbl9pZDogXCJcIixcblx0XHRcdFx0dGltZW91dDogdHlwZW9mIHRpbWVvdXQgPT09IFwidW5kZWZpbmVkXCIgPyB2b2lkIDAgOiB0aW1lU3RyKHRpbWVvdXQpXG5cdFx0XHR9O1xuXHRcdFx0c3dpdGNoIChfdHlwZSkge1xuXHRcdFx0XHRjYXNlIFwiZm5JbnN0YW5jZVwiOlxuXHRcdFx0XHRcdG9wdHMuZnVuY3Rpb25faWQgPSBmbi5pZChmbltcImNsaWVudFwiXS5pZCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJmdWxsSWRcIjpcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oYCR7bG9nUHJlZml4fSBJbnZva2luZyBmdW5jdGlvbiB3aXRoIFxcYGZ1bmN0aW9uOiBzdHJpbmdcXGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHY0LjAuMDsgdXNlIGFuIGltcG9ydGVkIGZ1bmN0aW9uIG9yIFxcYHJlZmVyZW5jZUZ1bmN0aW9uKClcXGAgaW5zdGVhZC4gU2VlIGh0dHBzOi8vaW5uZ2Uuc3QvdHMtcmVmZXJlbmNpbmctZnVuY3Rpb25zYCk7XG5cdFx0XHRcdFx0b3B0cy5mdW5jdGlvbl9pZCA9IGZuO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicmVmSW5zdGFuY2VcIjpcblx0XHRcdFx0XHRvcHRzLmZ1bmN0aW9uX2lkID0gW2ZuLm9wdHMuYXBwSWQgfHwgY2xpZW50LmlkLCBmbi5vcHRzLmZ1bmN0aW9uSWRdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiLVwiKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGlkLFxuXHRcdFx0XHRtb2RlOiBTdGVwTW9kZS5Bc3luYyxcblx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuSW52b2tlRnVuY3Rpb24sXG5cdFx0XHRcdGRpc3BsYXlOYW1lOiBuYW1lID8/IGlkLFxuXHRcdFx0XHRvcHRzLFxuXHRcdFx0XHR1c2VybGFuZDogeyBpZCB9XG5cdFx0XHR9O1xuXHRcdH0pLFxuXHRcdGZldGNoXG5cdH07XG5cdHRvb2xzW21ldGFkYXRhU3ltYm9sXSA9IChtZW1vaXphdGlvbklkKSA9PiBjcmVhdGVTdGVwTWV0YWRhdGFXcmFwcGVyKG1lbW9pemF0aW9uSWQpO1xuXHR0b29sc1tnYXRld2F5U3ltYm9sXSA9IGNyZWF0ZVRvb2woKHsgaWQsIG5hbWUgfSwgaW5wdXQsIGluaXQpID0+IHtcblx0XHRjb25zdCB1cmwgPSBpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QgPyBpbnB1dC51cmwgOiBpbnB1dC50b1N0cmluZygpO1xuXHRcdGNvbnN0IGhlYWRlcnMgPSB7fTtcblx0XHRpZiAoaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0KSBpbnB1dC5oZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcblx0XHRcdGhlYWRlcnNba2V5XSA9IHZhbHVlO1xuXHRcdH0pO1xuXHRcdGVsc2UgaWYgKGluaXQ/LmhlYWRlcnMpIG5ldyBIZWFkZXJzKGluaXQuaGVhZGVycykuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuXHRcdFx0aGVhZGVyc1trZXldID0gdmFsdWU7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGlkLFxuXHRcdFx0bW9kZTogU3RlcE1vZGUuQXN5bmMsXG5cdFx0XHRvcDogU3RlcE9wQ29kZS5HYXRld2F5LFxuXHRcdFx0ZGlzcGxheU5hbWU6IG5hbWUgPz8gaWQsXG5cdFx0XHRvcHRzOiB7XG5cdFx0XHRcdHVybCxcblx0XHRcdFx0bWV0aG9kOiBpbml0Py5tZXRob2QgPz8gXCJHRVRcIixcblx0XHRcdFx0aGVhZGVycyxcblx0XHRcdFx0Ym9keTogaW5pdD8uYm9keVxuXHRcdFx0fSxcblx0XHRcdHVzZXJsYW5kOiB7IGlkIH1cblx0XHR9O1xuXHR9KTtcblx0cmV0dXJuIHRvb2xzO1xufTtcbmNvbnN0IGdhdGV3YXlTeW1ib2wgPSBTeW1ib2wuZm9yKFwiaW5uZ2VzdC5zdGVwLmdhdGV3YXlcIik7XG4vKipcbiogQSBnZW5lcmljIHNldCBvZiBzdGVwIHRvb2xzIHRoYXQgY2FuIGJlIHVzZWQgd2l0aG91dCB0eXBpbmcgaW5mb3JtYXRpb24gYWJvdXRcbiogdGhlIGNsaWVudCB1c2VkIHRvIGNyZWF0ZSB0aGVtLlxuKlxuKiBUaGVzZSB0b29scyB1c2UgQXN5bmNMb2NhbFN0b3JhZ2UgdG8gdHJhY2sgdGhlIGNvbnRleHQgaW4gd2hpY2ggdGhleSBhcmVcbiogdXNlZCwgYW5kIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdXNlZCBvdXRzaWRlIG9mIGFuIElubmdlc3QgY29udGV4dC5cbipcbiogVGhlIGludGVudGlvbiBvZiB0aGVzZSBoaWdoLWxldmVsIHRvb2xzIGlzIHRvIGFsbG93IHVzYWdlIG9mIElubmdlc3Qgc3RlcFxuKiB0b29scyB3aXRoaW4gQVBJIGVuZHBvaW50cywgdGhvdWdoIHRoZXkgY2FuIHN0aWxsIGJlIHVzZWQgd2l0aGluIHJlZ3VsYXJcbiogSW5uZ2VzdCBmdW5jdGlvbnMgYXMgd2VsbC5cbiovXG5jb25zdCBzdGVwID0ge1xuXHRmZXRjaDogbnVsbCxcblx0YWk6IHtcblx0XHRpbmZlcjogKC4uLmFyZ3MpID0+IGdldERlZmVycmVkU3RlcFRvb2xpbmcoKS50aGVuKCh0b29scykgPT4gdG9vbHMuYWkuaW5mZXIoLi4uYXJncykpLFxuXHRcdHdyYXA6ICguLi5hcmdzKSA9PiBnZXREZWZlcnJlZFN0ZXBUb29saW5nKCkudGhlbigodG9vbHMpID0+IHRvb2xzLmFpLndyYXAoLi4uYXJncykpLFxuXHRcdG1vZGVsczogeyAuLi5tb2RlbHMgfVxuXHR9LFxuXHRpbnZva2U6ICguLi5hcmdzKSA9PiBnZXREZWZlcnJlZFN0ZXBUb29saW5nKCkudGhlbigodG9vbHMpID0+IHRvb2xzLmludm9rZSguLi5hcmdzKSksXG5cdHJ1bjogKC4uLmFyZ3MpID0+IGdldERlZmVycmVkU3RlcFRvb2xpbmcoKS50aGVuKCh0b29scykgPT4gdG9vbHMucnVuKC4uLmFyZ3MpKSxcblx0c2VuZEV2ZW50OiAoLi4uYXJncykgPT4gZ2V0RGVmZXJyZWRTdGVwVG9vbGluZygpLnRoZW4oKHRvb2xzKSA9PiB0b29scy5zZW5kRXZlbnQoLi4uYXJncykpLFxuXHRzZW5kU2lnbmFsOiAoLi4uYXJncykgPT4gZ2V0RGVmZXJyZWRTdGVwVG9vbGluZygpLnRoZW4oKHRvb2xzKSA9PiB0b29scy5zZW5kU2lnbmFsKC4uLmFyZ3MpKSxcblx0c2xlZXA6ICguLi5hcmdzKSA9PiBnZXREZWZlcnJlZFN0ZXBUb29saW5nKCkudGhlbigodG9vbHMpID0+IHRvb2xzLnNsZWVwKC4uLmFyZ3MpKSxcblx0c2xlZXBVbnRpbDogKC4uLmFyZ3MpID0+IGdldERlZmVycmVkU3RlcFRvb2xpbmcoKS50aGVuKCh0b29scykgPT4gdG9vbHMuc2xlZXBVbnRpbCguLi5hcmdzKSksXG5cdHdhaXRGb3JFdmVudDogKC4uLmFyZ3MpID0+IGdldERlZmVycmVkU3RlcFRvb2xpbmcoKS50aGVuKCh0b29scykgPT4gdG9vbHMud2FpdEZvckV2ZW50KC4uLmFyZ3MpKSxcblx0d2FpdEZvclNpZ25hbDogKC4uLmFyZ3MpID0+IGdldERlZmVycmVkU3RlcFRvb2xpbmcoKS50aGVuKCh0b29scykgPT4gdG9vbHMud2FpdEZvclNpZ25hbCguLi5hcmdzKSlcbn07XG4vKipcbiogQW4gaW50ZXJuYWwgZnVuY3Rpb24gdXNlZCB0byByZXRyaWV2ZSBvciBjcmVhdGUgc3RlcCB0b29saW5nIGZvciB0aGUgY3VycmVudFxuKiBleGVjdXRpb24gY29udGV4dC5cbipcbiogTm90ZSB0aGF0IHRoaXMgcmVxdWlyZXMgYW4gZXhpc3RpbmcgY29udGV4dCB0byBjcmVhdGUgdGhlIHN0ZXAgdG9vbGluZztcbiogc29tZXRoaW5nIG11c3QgZGVjbGFyZSB0aGUgSW5uZ2VzdCBleGVjdXRpb24gY29udGV4dCBiZWZvcmUgdGhpcyBjYW4gYmUgdXNlZC5cbiovXG5jb25zdCBnZXREZWZlcnJlZFN0ZXBUb29saW5nID0gYXN5bmMgKCkgPT4ge1xuXHRjb25zdCBjdHggPSBhd2FpdCBnZXRBc3luY0N0eCgpO1xuXHRpZiAoIWN0eCkgdGhyb3cgbmV3IEVycm9yKFwiYHN0ZXBgIHRvb2xzIGNhbiBvbmx5IGJlIHVzZWQgd2l0aGluIElubmdlc3QgZnVuY3Rpb24gZXhlY3V0aW9uczsgbm8gY29udGV4dCB3YXMgZm91bmRcIik7XG5cdGlmICghY3R4LmFwcCkgdGhyb3cgbmV3IEVycm9yKFwiYHN0ZXBgIHRvb2xzIGNhbiBvbmx5IGJlIHVzZWQgd2l0aGluIElubmdlc3QgZnVuY3Rpb24gZXhlY3V0aW9uczsgbm8gSW5uZ2VzdCBjbGllbnQgd2FzIGZvdW5kIGluIHRoZSBleGVjdXRpb24gY29udGV4dFwiKTtcblx0aWYgKCFjdHguZXhlY3V0aW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJgc3RlcGAgdG9vbHMgY2FuIG9ubHkgYmUgdXNlZCB3aXRoaW4gSW5uZ2VzdCBmdW5jdGlvbiBleGVjdXRpb25zOyBubyBleGVjdXRpb24gY29udGV4dCB3YXMgZm91bmRcIik7XG5cdHJldHVybiBjdHguZXhlY3V0aW9uLmN0eC5zdGVwO1xufTtcbi8qKlxuKiBUaGUgZXZlbnQgcGF5bG9hZCBwb3J0aW9uIG9mIHRoZSBvcHRpb25zIGZvciBgc3RlcC5pbnZva2UoKWAuIFRoaXMgZG9lcyBub3RcbiogaW5jbHVkZSBub24tcGF5bG9hZCBvcHRpb25zIGxpa2UgYHRpbWVvdXRgIG9yIHRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4qL1xuY29uc3QgaW52b2tlUGF5bG9hZFNjaGVtYSA9IHoub2JqZWN0KHtcblx0ZGF0YTogei5yZWNvcmQoei5hbnkoKSkub3B0aW9uYWwoKSxcblx0dXNlcjogei5yZWNvcmQoei5hbnkoKSkub3B0aW9uYWwoKSxcblx0djogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBTVEVQX0lOREVYSU5HX1NVRkZJWCwgY3JlYXRlU3RlcFRvb2xzLCBnYXRld2F5U3ltYm9sLCBnZXRTdGVwT3B0aW9ucywgaW52b2tlUGF5bG9hZFNjaGVtYSwgc3RlcCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5uZ2VzdFN0ZXBUb29scy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestStepTools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/NonRetriableError.js":
/*!**************************************************************!*\
  !*** ./node_modules/inngest/components/NonRetriableError.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NonRetriableError: () => (/* binding */ NonRetriableError)\n/* harmony export */ });\n//#region src/components/NonRetriableError.ts\n/**\n* An error that, when thrown, indicates to Inngest that the function should\n* cease all execution and not retry.\n*\n* A `message` must be provided, and an optional `cause` can be provided to\n* provide more context to the error.\n*\n* @public\n*/\nvar NonRetriableError = class extends Error {\n\t/**\n\t* The underlying cause of the error, if any.\n\t*\n\t* This will be serialized and sent to Inngest.\n\t*/\n\tcause;\n\tconstructor(message, options) {\n\t\tsuper(message);\n\t\tthis.cause = options?.cause;\n\t\tthis.name = \"NonRetriableError\";\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=NonRetriableError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL05vblJldHJpYWJsZUVycm9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL05vblJldHJpYWJsZUVycm9yLmpzPzdhZTAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jb21wb25lbnRzL05vblJldHJpYWJsZUVycm9yLnRzXG4vKipcbiogQW4gZXJyb3IgdGhhdCwgd2hlbiB0aHJvd24sIGluZGljYXRlcyB0byBJbm5nZXN0IHRoYXQgdGhlIGZ1bmN0aW9uIHNob3VsZFxuKiBjZWFzZSBhbGwgZXhlY3V0aW9uIGFuZCBub3QgcmV0cnkuXG4qXG4qIEEgYG1lc3NhZ2VgIG11c3QgYmUgcHJvdmlkZWQsIGFuZCBhbiBvcHRpb25hbCBgY2F1c2VgIGNhbiBiZSBwcm92aWRlZCB0b1xuKiBwcm92aWRlIG1vcmUgY29udGV4dCB0byB0aGUgZXJyb3IuXG4qXG4qIEBwdWJsaWNcbiovXG52YXIgTm9uUmV0cmlhYmxlRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcblx0LyoqXG5cdCogVGhlIHVuZGVybHlpbmcgY2F1c2Ugb2YgdGhlIGVycm9yLCBpZiBhbnkuXG5cdCpcblx0KiBUaGlzIHdpbGwgYmUgc2VyaWFsaXplZCBhbmQgc2VudCB0byBJbm5nZXN0LlxuXHQqL1xuXHRjYXVzZTtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgb3B0aW9ucykge1xuXHRcdHN1cGVyKG1lc3NhZ2UpO1xuXHRcdHRoaXMuY2F1c2UgPSBvcHRpb25zPy5jYXVzZTtcblx0XHR0aGlzLm5hbWUgPSBcIk5vblJldHJpYWJsZUVycm9yXCI7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgTm9uUmV0cmlhYmxlRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5vblJldHJpYWJsZUVycm9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/NonRetriableError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/RetryAfterError.js":
/*!************************************************************!*\
  !*** ./node_modules/inngest/components/RetryAfterError.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RetryAfterError: () => (/* binding */ RetryAfterError)\n/* harmony export */ });\n/* harmony import */ var ms__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ms */ \"(rsc)/./node_modules/ms/index.js\");\n\n\n//#region src/components/RetryAfterError.ts\n/**\n* An error that, when thrown, indicates to Inngest that the function should be\n* retried after a given amount of time.\n*\n* A `message` must be provided, as well as a `retryAfter` parameter, which can\n* be a `number` of milliseconds, an `ms`-compatible time string, or a `Date`.\n*\n* An optional `cause` can be provided to provide more context to the error.\n*\n* @public\n*/\nvar RetryAfterError = class extends Error {\n\t/**\n\t* The underlying cause of the error, if any.\n\t*\n\t* This will be serialized and sent to Inngest.\n\t*/\n\tcause;\n\t/**\n\t* The time after which the function should be retried. Represents either a\n\t* number of milliseconds or a RFC3339 date.\n\t*/\n\tretryAfter;\n\tconstructor(message, retryAfter, options) {\n\t\tsuper(message);\n\t\tif (retryAfter instanceof Date) this.retryAfter = retryAfter.toISOString();\n\t\telse {\n\t\t\tconst seconds = `${Math.ceil((typeof retryAfter === \"string\" ? ms__WEBPACK_IMPORTED_MODULE_0__(retryAfter) : retryAfter) / 1e3)}`;\n\t\t\tif (!isFinite(Number(seconds))) throw new Error(\"retryAfter must be a number of milliseconds, a ms-compatible string, or a Date\");\n\t\t\tthis.retryAfter = seconds;\n\t\t}\n\t\tthis.cause = options?.cause;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=RetryAfterError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL1JldHJ5QWZ0ZXJFcnJvci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvQjs7QUFFcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNENBQTRDLCtCQUFFLGtDQUFrQztBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvUmV0cnlBZnRlckVycm9yLmpzPzE0OGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvUmV0cnlBZnRlckVycm9yLnRzXG4vKipcbiogQW4gZXJyb3IgdGhhdCwgd2hlbiB0aHJvd24sIGluZGljYXRlcyB0byBJbm5nZXN0IHRoYXQgdGhlIGZ1bmN0aW9uIHNob3VsZCBiZVxuKiByZXRyaWVkIGFmdGVyIGEgZ2l2ZW4gYW1vdW50IG9mIHRpbWUuXG4qXG4qIEEgYG1lc3NhZ2VgIG11c3QgYmUgcHJvdmlkZWQsIGFzIHdlbGwgYXMgYSBgcmV0cnlBZnRlcmAgcGFyYW1ldGVyLCB3aGljaCBjYW5cbiogYmUgYSBgbnVtYmVyYCBvZiBtaWxsaXNlY29uZHMsIGFuIGBtc2AtY29tcGF0aWJsZSB0aW1lIHN0cmluZywgb3IgYSBgRGF0ZWAuXG4qXG4qIEFuIG9wdGlvbmFsIGBjYXVzZWAgY2FuIGJlIHByb3ZpZGVkIHRvIHByb3ZpZGUgbW9yZSBjb250ZXh0IHRvIHRoZSBlcnJvci5cbipcbiogQHB1YmxpY1xuKi9cbnZhciBSZXRyeUFmdGVyRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcblx0LyoqXG5cdCogVGhlIHVuZGVybHlpbmcgY2F1c2Ugb2YgdGhlIGVycm9yLCBpZiBhbnkuXG5cdCpcblx0KiBUaGlzIHdpbGwgYmUgc2VyaWFsaXplZCBhbmQgc2VudCB0byBJbm5nZXN0LlxuXHQqL1xuXHRjYXVzZTtcblx0LyoqXG5cdCogVGhlIHRpbWUgYWZ0ZXIgd2hpY2ggdGhlIGZ1bmN0aW9uIHNob3VsZCBiZSByZXRyaWVkLiBSZXByZXNlbnRzIGVpdGhlciBhXG5cdCogbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBvciBhIFJGQzMzMzkgZGF0ZS5cblx0Ki9cblx0cmV0cnlBZnRlcjtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgcmV0cnlBZnRlciwgb3B0aW9ucykge1xuXHRcdHN1cGVyKG1lc3NhZ2UpO1xuXHRcdGlmIChyZXRyeUFmdGVyIGluc3RhbmNlb2YgRGF0ZSkgdGhpcy5yZXRyeUFmdGVyID0gcmV0cnlBZnRlci50b0lTT1N0cmluZygpO1xuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3Qgc2Vjb25kcyA9IGAke01hdGguY2VpbCgodHlwZW9mIHJldHJ5QWZ0ZXIgPT09IFwic3RyaW5nXCIgPyBtcyhyZXRyeUFmdGVyKSA6IHJldHJ5QWZ0ZXIpIC8gMWUzKX1gO1xuXHRcdFx0aWYgKCFpc0Zpbml0ZShOdW1iZXIoc2Vjb25kcykpKSB0aHJvdyBuZXcgRXJyb3IoXCJyZXRyeUFmdGVyIG11c3QgYmUgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhIG1zLWNvbXBhdGlibGUgc3RyaW5nLCBvciBhIERhdGVcIik7XG5cdFx0XHR0aGlzLnJldHJ5QWZ0ZXIgPSBzZWNvbmRzO1xuXHRcdH1cblx0XHR0aGlzLmNhdXNlID0gb3B0aW9ucz8uY2F1c2U7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgUmV0cnlBZnRlckVycm9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXRyeUFmdGVyRXJyb3IuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/RetryAfterError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/StepError.js":
/*!******************************************************!*\
  !*** ./node_modules/inngest/components/StepError.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StepError: () => (/* binding */ StepError)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n\n\n\n//#region src/components/StepError.ts\n/**\n* An error that represents a step exhausting all retries and failing. This is\n* thrown by an Inngest step if it fails.\n*\n* It's synonymous with an `Error`, with the addition of the `stepId` that\n* failed.\n*\n* @public\n*/\nvar StepError = class extends Error {\n\tcause;\n\tconstructor(stepId, err) {\n\t\tconst parsedErr = _types_js__WEBPACK_IMPORTED_MODULE_0__.jsonErrorSchema.parse(err);\n\t\tsuper(parsedErr.message);\n\t\tthis.stepId = stepId;\n\t\tthis.name = parsedErr.name;\n\t\tthis.stepId = stepId;\n\t\tthis.stack = parsedErr.stack ?? void 0;\n\t\tthis.cause = parsedErr.cause ? (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_1__.deserializeError)(parsedErr.cause, true) : void 0;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=StepError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL1N0ZXBFcnJvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFDVTs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0RBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxvRUFBZ0I7QUFDakQ7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvY29tcG9uZW50cy9TdGVwRXJyb3IuanM/YzJjYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc29uRXJyb3JTY2hlbWEgfSBmcm9tIFwiLi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IGRlc2VyaWFsaXplRXJyb3IgfSBmcm9tIFwiLi4vaGVscGVycy9lcnJvcnMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jb21wb25lbnRzL1N0ZXBFcnJvci50c1xuLyoqXG4qIEFuIGVycm9yIHRoYXQgcmVwcmVzZW50cyBhIHN0ZXAgZXhoYXVzdGluZyBhbGwgcmV0cmllcyBhbmQgZmFpbGluZy4gVGhpcyBpc1xuKiB0aHJvd24gYnkgYW4gSW5uZ2VzdCBzdGVwIGlmIGl0IGZhaWxzLlxuKlxuKiBJdCdzIHN5bm9ueW1vdXMgd2l0aCBhbiBgRXJyb3JgLCB3aXRoIHRoZSBhZGRpdGlvbiBvZiB0aGUgYHN0ZXBJZGAgdGhhdFxuKiBmYWlsZWQuXG4qXG4qIEBwdWJsaWNcbiovXG52YXIgU3RlcEVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG5cdGNhdXNlO1xuXHRjb25zdHJ1Y3RvcihzdGVwSWQsIGVycikge1xuXHRcdGNvbnN0IHBhcnNlZEVyciA9IGpzb25FcnJvclNjaGVtYS5wYXJzZShlcnIpO1xuXHRcdHN1cGVyKHBhcnNlZEVyci5tZXNzYWdlKTtcblx0XHR0aGlzLnN0ZXBJZCA9IHN0ZXBJZDtcblx0XHR0aGlzLm5hbWUgPSBwYXJzZWRFcnIubmFtZTtcblx0XHR0aGlzLnN0ZXBJZCA9IHN0ZXBJZDtcblx0XHR0aGlzLnN0YWNrID0gcGFyc2VkRXJyLnN0YWNrID8/IHZvaWQgMDtcblx0XHR0aGlzLmNhdXNlID0gcGFyc2VkRXJyLmNhdXNlID8gZGVzZXJpYWxpemVFcnJvcihwYXJzZWRFcnIuY2F1c2UsIHRydWUpIDogdm9pZCAwO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFN0ZXBFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RlcEVycm9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/StepError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/InngestExecution.js":
/*!***********************************************************************!*\
  !*** ./node_modules/inngest/components/execution/InngestExecution.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestExecution: () => (/* binding */ InngestExecution),\n/* harmony export */   InngestExecution_exports: () => (/* binding */ InngestExecution_exports),\n/* harmony export */   PREFERRED_EXECUTION_VERSION: () => (/* binding */ PREFERRED_EXECUTION_VERSION)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\");\n\n\n\n\n//#region src/components/execution/InngestExecution.ts\nvar InngestExecution_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_1__.__export)({\n\tExecutionVersion: () => _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion,\n\tInngestExecution: () => InngestExecution,\n\tPREFERRED_EXECUTION_VERSION: () => PREFERRED_EXECUTION_VERSION\n});\n/**\n* The preferred execution version that will be used by the SDK when handling\n* brand new runs where the Executor is allowing us to choose.\n*\n* Changing this should not ever be a breaking change, as this will only change\n* new runs, not existing ones.\n*/\nconst PREFERRED_EXECUTION_VERSION = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1;\nvar InngestExecution = class {\n\tdebug;\n\tconstructor(options) {\n\t\tthis.options = options;\n\t\tthis.debug = debug__WEBPACK_IMPORTED_MODULE_0__(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.debugPrefix}:${this.options.runId}`);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=InngestExecution.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi9Jbm5nZXN0RXhlY3V0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4RDtBQUNVO0FBQzlDOztBQUUxQjtBQUNBLCtDQUErQyxzRUFBUTtBQUN2RCx5QkFBeUIsZ0VBQWdCO0FBQ3pDO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsZ0VBQWdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQ0FBSyxJQUFJLDJEQUFXLENBQUMsR0FBRyxtQkFBbUI7QUFDMUQ7QUFDQTs7QUFFQTtBQUNtRjtBQUNuRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvY29tcG9uZW50cy9leGVjdXRpb24vSW5uZ2VzdEV4ZWN1dGlvbi5qcz8zODQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uLy4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IEV4ZWN1dGlvblZlcnNpb24sIGRlYnVnUHJlZml4IH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvY29uc3RzLmpzXCI7XG5pbXBvcnQgRGVidWcgZnJvbSBcImRlYnVnXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9leGVjdXRpb24vSW5uZ2VzdEV4ZWN1dGlvbi50c1xudmFyIElubmdlc3RFeGVjdXRpb25fZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7XG5cdEV4ZWN1dGlvblZlcnNpb246ICgpID0+IEV4ZWN1dGlvblZlcnNpb24sXG5cdElubmdlc3RFeGVjdXRpb246ICgpID0+IElubmdlc3RFeGVjdXRpb24sXG5cdFBSRUZFUlJFRF9FWEVDVVRJT05fVkVSU0lPTjogKCkgPT4gUFJFRkVSUkVEX0VYRUNVVElPTl9WRVJTSU9OXG59KTtcbi8qKlxuKiBUaGUgcHJlZmVycmVkIGV4ZWN1dGlvbiB2ZXJzaW9uIHRoYXQgd2lsbCBiZSB1c2VkIGJ5IHRoZSBTREsgd2hlbiBoYW5kbGluZ1xuKiBicmFuZCBuZXcgcnVucyB3aGVyZSB0aGUgRXhlY3V0b3IgaXMgYWxsb3dpbmcgdXMgdG8gY2hvb3NlLlxuKlxuKiBDaGFuZ2luZyB0aGlzIHNob3VsZCBub3QgZXZlciBiZSBhIGJyZWFraW5nIGNoYW5nZSwgYXMgdGhpcyB3aWxsIG9ubHkgY2hhbmdlXG4qIG5ldyBydW5zLCBub3QgZXhpc3Rpbmcgb25lcy5cbiovXG5jb25zdCBQUkVGRVJSRURfRVhFQ1VUSU9OX1ZFUlNJT04gPSBFeGVjdXRpb25WZXJzaW9uLlYxO1xudmFyIElubmdlc3RFeGVjdXRpb24gPSBjbGFzcyB7XG5cdGRlYnVnO1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLmRlYnVnID0gRGVidWcoYCR7ZGVidWdQcmVmaXh9OiR7dGhpcy5vcHRpb25zLnJ1bklkfWApO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IElubmdlc3RFeGVjdXRpb24sIElubmdlc3RFeGVjdXRpb25fZXhwb3J0cywgUFJFRkVSUkVEX0VYRUNVVElPTl9WRVJTSU9OIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5nZXN0RXhlY3V0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/als.js":
/*!**********************************************************!*\
  !*** ./node_modules/inngest/components/execution/als.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAsyncCtx: () => (/* binding */ getAsyncCtx),\n/* harmony export */   getAsyncLocalStorage: () => (/* binding */ getAsyncLocalStorage)\n/* harmony export */ });\n//#region src/components/execution/als.ts\n/**\n* A local-only symbol used as a key in global state to store the async local\n* storage instance.\n*/\nconst alsSymbol = Symbol.for(\"inngest:als\");\n/**\n* Retrieve the async context for the current execution.\n*/\nconst getAsyncCtx = async () => {\n\treturn getAsyncLocalStorage().then((als) => als.getStore());\n};\n/**\n* Get a singleton instance of `AsyncLocalStorage` used to store and retrieve\n* async context for the current execution.\n*/\nconst getAsyncLocalStorage = async () => {\n\tglobalThis[alsSymbol] ??= new Promise(async (resolve) => {\n\t\ttry {\n\t\t\tconst { AsyncLocalStorage } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:async_hooks */ \"node:async_hooks\", 19));\n\t\t\tresolve(new AsyncLocalStorage());\n\t\t} catch (_err) {\n\t\t\tconsole.warn(\"node:async_hooks is not supported in this runtime. Experimental async context is disabled.\");\n\t\t\tresolve({\n\t\t\t\tgetStore: () => void 0,\n\t\t\t\trun: (_, fn) => fn()\n\t\t\t});\n\t\t}\n\t});\n\treturn globalThis[alsSymbol];\n};\n\n//#endregion\n\n//# sourceMappingURL=als.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi9hbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsb0JBQW9CLFFBQVEsc0lBQTBCO0FBQ2pFO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDNkM7QUFDN0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvZXhlY3V0aW9uL2Fscy5qcz9kMmE3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9leGVjdXRpb24vYWxzLnRzXG4vKipcbiogQSBsb2NhbC1vbmx5IHN5bWJvbCB1c2VkIGFzIGEga2V5IGluIGdsb2JhbCBzdGF0ZSB0byBzdG9yZSB0aGUgYXN5bmMgbG9jYWxcbiogc3RvcmFnZSBpbnN0YW5jZS5cbiovXG5jb25zdCBhbHNTeW1ib2wgPSBTeW1ib2wuZm9yKFwiaW5uZ2VzdDphbHNcIik7XG4vKipcbiogUmV0cmlldmUgdGhlIGFzeW5jIGNvbnRleHQgZm9yIHRoZSBjdXJyZW50IGV4ZWN1dGlvbi5cbiovXG5jb25zdCBnZXRBc3luY0N0eCA9IGFzeW5jICgpID0+IHtcblx0cmV0dXJuIGdldEFzeW5jTG9jYWxTdG9yYWdlKCkudGhlbigoYWxzKSA9PiBhbHMuZ2V0U3RvcmUoKSk7XG59O1xuLyoqXG4qIEdldCBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBgQXN5bmNMb2NhbFN0b3JhZ2VgIHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlXG4qIGFzeW5jIGNvbnRleHQgZm9yIHRoZSBjdXJyZW50IGV4ZWN1dGlvbi5cbiovXG5jb25zdCBnZXRBc3luY0xvY2FsU3RvcmFnZSA9IGFzeW5jICgpID0+IHtcblx0Z2xvYmFsVGhpc1thbHNTeW1ib2xdID8/PSBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSkgPT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB7IEFzeW5jTG9jYWxTdG9yYWdlIH0gPSBhd2FpdCBpbXBvcnQoXCJub2RlOmFzeW5jX2hvb2tzXCIpO1xuXHRcdFx0cmVzb2x2ZShuZXcgQXN5bmNMb2NhbFN0b3JhZ2UoKSk7XG5cdFx0fSBjYXRjaCAoX2Vycikge1xuXHRcdFx0Y29uc29sZS53YXJuKFwibm9kZTphc3luY19ob29rcyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgcnVudGltZS4gRXhwZXJpbWVudGFsIGFzeW5jIGNvbnRleHQgaXMgZGlzYWJsZWQuXCIpO1xuXHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdGdldFN0b3JlOiAoKSA9PiB2b2lkIDAsXG5cdFx0XHRcdHJ1bjogKF8sIGZuKSA9PiBmbigpXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gZ2xvYmFsVGhpc1thbHNTeW1ib2xdO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRBc3luY0N0eCwgZ2V0QXN5bmNMb2NhbFN0b3JhZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFscy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/als.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/otel/access.js":
/*!******************************************************************!*\
  !*** ./node_modules/inngest/components/execution/otel/access.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientProcessorMap: () => (/* binding */ clientProcessorMap)\n/* harmony export */ });\n//#region src/components/execution/otel/access.ts\n/**\n* A map of Inngest clients to their OTel span processors. This is used to\n* ensure that we only create one span processor per client, and that we can\n* access the span processor from the client without exposing the OTel\n* libraries to the user.\n*/\nconst clientProcessorMap = /* @__PURE__ */ new WeakMap();\n\n//#endregion\n\n//# sourceMappingURL=access.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi9vdGVsL2FjY2Vzcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM4QjtBQUM5QiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvY29tcG9uZW50cy9leGVjdXRpb24vb3RlbC9hY2Nlc3MuanM/MTBkOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvZXhlY3V0aW9uL290ZWwvYWNjZXNzLnRzXG4vKipcbiogQSBtYXAgb2YgSW5uZ2VzdCBjbGllbnRzIHRvIHRoZWlyIE9UZWwgc3BhbiBwcm9jZXNzb3JzLiBUaGlzIGlzIHVzZWQgdG9cbiogZW5zdXJlIHRoYXQgd2Ugb25seSBjcmVhdGUgb25lIHNwYW4gcHJvY2Vzc29yIHBlciBjbGllbnQsIGFuZCB0aGF0IHdlIGNhblxuKiBhY2Nlc3MgdGhlIHNwYW4gcHJvY2Vzc29yIGZyb20gdGhlIGNsaWVudCB3aXRob3V0IGV4cG9zaW5nIHRoZSBPVGVsXG4qIGxpYnJhcmllcyB0byB0aGUgdXNlci5cbiovXG5jb25zdCBjbGllbnRQcm9jZXNzb3JNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjbGllbnRQcm9jZXNzb3JNYXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFjY2Vzcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/otel/access.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/v0.js":
/*!*********************************************************!*\
  !*** ./node_modules/inngest/components/execution/v0.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createV0InngestExecution: () => (/* binding */ createV0InngestExecution),\n/* harmony export */   v0_exports: () => (/* binding */ v0_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _InngestExecution_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../NonRetriableError.js */ \"(rsc)/./node_modules/inngest/components/NonRetriableError.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../RetryAfterError.js */ \"(rsc)/./node_modules/inngest/components/RetryAfterError.js\");\n/* harmony import */ var _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../InngestStepTools.js */ \"(rsc)/./node_modules/inngest/components/InngestStepTools.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n/* harmony import */ var canonicalize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! canonicalize */ \"(rsc)/./node_modules/canonicalize/lib/canonicalize.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/execution/v0.ts\nvar v0_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_2__.__export)({\n\tV0InngestExecution: () => V0InngestExecution,\n\t_internals: () => _internals,\n\tcreateV0InngestExecution: () => createV0InngestExecution\n});\nconst { sha1 } = hash_js__WEBPACK_IMPORTED_MODULE_0__;\nconst createV0InngestExecution = (options) => {\n\treturn new V0InngestExecution(options);\n};\nvar V0InngestExecution = class extends _InngestExecution_js__WEBPACK_IMPORTED_MODULE_3__.InngestExecution {\n\tversion = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V0;\n\tstate;\n\texecution;\n\tuserFnToRun;\n\tfnArg;\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tthis.userFnToRun = this.getUserFnToRun();\n\t\tthis.state = this.createExecutionState();\n\t\tthis.fnArg = this.createFnArg();\n\t}\n\taddMetadata(_stepId, _kind, _scope, _op, _values) {\n\t\treturn false;\n\t}\n\tstart() {\n\t\tthis.debug(\"starting V0 execution\");\n\t\treturn this.execution ??= this._start().then((result) => {\n\t\t\tthis.debug(\"result:\", result);\n\t\t\treturn result;\n\t\t});\n\t}\n\tasync _start() {\n\t\tthis.state.hooks = await this.initializeMiddleware();\n\t\ttry {\n\t\t\tawait this.transformInput();\n\t\t\tawait this.state.hooks.beforeMemoization?.();\n\t\t\tif (this.state.opStack.length === 0 && !this.options.requestedRunStep) {\n\t\t\t\tawait this.state.hooks.afterMemoization?.();\n\t\t\t\tawait this.state.hooks.beforeExecution?.();\n\t\t\t}\n\t\t\tconst userFnPromise = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__.runAsPromise)(() => this.userFnToRun(this.fnArg));\n\t\t\tlet pos = -1;\n\t\t\tdo {\n\t\t\t\tif (pos >= 0) {\n\t\t\t\t\tif (!this.options.requestedRunStep && pos === this.state.opStack.length - 1) {\n\t\t\t\t\t\tawait this.state.hooks.afterMemoization?.();\n\t\t\t\t\t\tawait this.state.hooks.beforeExecution?.();\n\t\t\t\t\t}\n\t\t\t\t\tthis.state.tickOps = {};\n\t\t\t\t\tconst incomingOp = this.state.opStack[pos];\n\t\t\t\t\tthis.state.currentOp = this.state.allFoundOps[incomingOp.id];\n\t\t\t\t\tif (!this.state.currentOp)\n /**\n\t\t\t\t\t* We're trying to resume the function, but we can't find where to go.\n\t\t\t\t\t*\n\t\t\t\t\t* This means that either the function has changed or there are async\n\t\t\t\t\t* actions in-between steps that we haven't noticed in previous\n\t\t\t\t\t* executions.\n\t\t\t\t\t*\n\t\t\t\t\t* Whichever the case, this is bad and we can't continue in this\n\t\t\t\t\t* undefined state.\n\t\t\t\t\t*/\n\t\t\t\t\tthrow new _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.prettyError)({\n\t\t\t\t\t\twhatHappened: \" Your function was stopped from running\",\n\t\t\t\t\t\twhy: \"We couldn't resume your function's state because it may have changed since the run started or there are async actions in-between steps that we haven't noticed in previous executions.\",\n\t\t\t\t\t\tconsequences: \"Continuing to run the function may result in unexpected behaviour, so we've stopped your function to ensure nothing unexpected happened!\",\n\t\t\t\t\t\ttoFixNow: \"Ensure that your function is either entirely step-based or entirely non-step-based, by either wrapping all asynchronous logic in `step.run()` calls or by removing all `step.*()` calls.\",\n\t\t\t\t\t\totherwise: \"For more information on why step functions work in this manner, see https://www.inngest.com/docs/functions/multi-step#gotchas\",\n\t\t\t\t\t\tstack: true,\n\t\t\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.ErrCode.NON_DETERMINISTIC_FUNCTION\n\t\t\t\t\t}));\n\t\t\t\t\tthis.state.currentOp.fulfilled = true;\n\t\t\t\t\tif (typeof incomingOp.data !== \"undefined\") this.state.currentOp.resolve(incomingOp.data);\n\t\t\t\t\telse this.state.currentOp.reject(incomingOp.error);\n\t\t\t\t}\n\t\t\t\tawait (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__.resolveAfterPending)();\n\t\t\t\tthis.state.reset();\n\t\t\t\tpos++;\n\t\t\t} while (pos < this.state.opStack.length);\n\t\t\tawait this.state.hooks.afterMemoization?.();\n\t\t\tconst discoveredOps = Object.values(this.state.tickOps).map(tickOpToOutgoing);\n\t\t\tconst runStep = this.options.requestedRunStep || this.getEarlyExecRunStep(discoveredOps);\n\t\t\tif (runStep) {\n\t\t\t\tconst userFnOp = this.state.allFoundOps[runStep];\n\t\t\t\tconst stepToRun = userFnOp?.fn;\n\t\t\t\tif (!stepToRun) throw new Error(`Bad stack; executor requesting to run unknown step \"${runStep}\"`);\n\t\t\t\tconst outgoingUserFnOp = {\n\t\t\t\t\t...tickOpToOutgoing(userFnOp),\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.Step\n\t\t\t\t};\n\t\t\t\tawait this.state.hooks.beforeExecution?.();\n\t\t\t\tthis.state.executingStep = true;\n\t\t\t\tconst { type: _type, ...rest } = await (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__.runAsPromise)(stepToRun).finally(() => {\n\t\t\t\t\tthis.state.executingStep = false;\n\t\t\t\t}).catch(async (error) => {\n\t\t\t\t\treturn await this.transformOutput({ error }, outgoingUserFnOp);\n\t\t\t\t}).then(async (data) => {\n\t\t\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t\t\t\treturn await this.transformOutput({ data }, outgoingUserFnOp);\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"step-ran\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tstep: {\n\t\t\t\t\t\t...outgoingUserFnOp,\n\t\t\t\t\t\t...rest\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (!discoveredOps.length) {\n\t\t\t\tconst fnRet = await Promise.race([userFnPromise.then((data) => ({\n\t\t\t\t\ttype: \"complete\",\n\t\t\t\t\tdata\n\t\t\t\t})), (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__.resolveNextTick)().then(() => ({ type: \"incomplete\" }))]);\n\t\t\t\tif (fnRet.type === \"complete\") {\n\t\t\t\t\tawait this.state.hooks.afterExecution?.();\n\t\t\t\t\tif (Object.values(this.state.allFoundOps).every((op) => {\n\t\t\t\t\t\treturn op.fulfilled;\n\t\t\t\t\t})) return await this.transformOutput({ data: fnRet.data });\n\t\t\t\t} else if (!this.state.hasUsedTools) {\n\t\t\t\t\tthis.state.nonStepFnDetected = true;\n\t\t\t\t\tconst data = await userFnPromise;\n\t\t\t\t\tawait this.state.hooks.afterExecution?.();\n\t\t\t\t\treturn await this.transformOutput({ data });\n\t\t\t\t} else if (!Object.values(this.state.allFoundOps).some((op) => {\n\t\t\t\t\treturn op.fulfilled === false;\n\t\t\t\t})) throw new _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.functionStoppedRunningErr)(_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.ErrCode.ASYNC_DETECTED_AFTER_MEMOIZATION));\n\t\t\t}\n\t\t\tawait this.state.hooks.afterExecution?.();\n\t\t\treturn {\n\t\t\t\ttype: \"steps-found\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\tsteps: discoveredOps\n\t\t\t};\n\t\t} catch (error) {\n\t\t\treturn await this.transformOutput({ error });\n\t\t} finally {\n\t\t\tawait this.state.hooks.beforeResponse?.();\n\t\t}\n\t}\n\tasync initializeMiddleware() {\n\t\tconst ctx = this.options.data;\n\t\treturn await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_9__.getHookStack)(this.options.fn[\"middleware\"], \"onFunctionRun\", {\n\t\t\tctx,\n\t\t\tfn: this.options.fn,\n\t\t\tsteps: Object.values(this.options.stepState),\n\t\t\treqArgs: this.options.reqArgs\n\t\t}, {\n\t\t\ttransformInput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tctx: {\n\t\t\t\t\t\t...prev.ctx,\n\t\t\t\t\t\t...output?.ctx\n\t\t\t\t\t},\n\t\t\t\t\tfn: this.options.fn,\n\t\t\t\t\tsteps: prev.steps.map((step, i) => ({\n\t\t\t\t\t\t...step,\n\t\t\t\t\t\t...output?.steps?.[i]\n\t\t\t\t\t})),\n\t\t\t\t\treqArgs: prev.reqArgs\n\t\t\t\t};\n\t\t\t},\n\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tresult: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t},\n\t\t\t\t\tstep: prev.step\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n\tcreateExecutionState() {\n\t\tconst state = {\n\t\t\tallFoundOps: {},\n\t\t\ttickOps: {},\n\t\t\ttickOpHashes: {},\n\t\t\tcurrentOp: void 0,\n\t\t\thasUsedTools: false,\n\t\t\treset: () => {\n\t\t\t\tstate.tickOpHashes = {};\n\t\t\t\tstate.allFoundOps = {\n\t\t\t\t\t...state.allFoundOps,\n\t\t\t\t\t...state.tickOps\n\t\t\t\t};\n\t\t\t},\n\t\t\tnonStepFnDetected: false,\n\t\t\texecutingStep: false,\n\t\t\topStack: this.options.stepCompletionOrder.reduce((acc, stepId) => {\n\t\t\t\tconst stepState = this.options.stepState[stepId];\n\t\t\t\tif (!stepState) return acc;\n\t\t\t\treturn [...acc, stepState];\n\t\t\t}, [])\n\t\t};\n\t\treturn state;\n\t}\n\tget ops() {\n\t\treturn Object.fromEntries(Object.entries(this.state.allFoundOps).map(([id, op]) => [id, {\n\t\t\tid: op.id,\n\t\t\trawArgs: op.rawArgs,\n\t\t\tdata: op.data,\n\t\t\terror: op.error,\n\t\t\tfulfilled: op.fulfilled,\n\t\t\tseen: true\n\t\t}]));\n\t}\n\tgetUserFnToRun() {\n\t\tif (!this.options.isFailureHandler) return this.options.fn[\"fn\"];\n\t\tif (!this.options.fn[\"onFailureFn\"])\n /**\n\t\t* Somehow, we've ended up detecting that this is a failure handler but\n\t\t* doesn't have an `onFailure` function. This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Cannot find function `onFailure` handler\");\n\t\treturn this.options.fn[\"onFailureFn\"];\n\t}\n\tcreateFnArg() {\n\t\tthis.state.tickOps = this.state.allFoundOps;\n\t\t/**\n\t\t* Create a unique hash of an operation using only a subset of the operation's\n\t\t* properties; will never use `data` and will guarantee the order of the\n\t\t* object so we don't rely on individual tools for that.\n\t\t*\n\t\t* If the operation already contains an ID, the current ID will be used\n\t\t* instead, so that users can provide their own IDs.\n\t\t*/\n\t\tconst hashOp = (op) => {\n\t\t\t/**\n\t\t\t* It's difficult for v0 to understand whether or not an op has\n\t\t\t* historically contained a custom ID, as all step usage now require them.\n\t\t\t*\n\t\t\t* For this reason, we make the assumption that steps in v0 do not have a\n\t\t\t* custom ID and generate one for them as we would in all recommendations\n\t\t\t* and examples.\n\t\t\t*/\n\t\t\tconst obj = {\n\t\t\t\tparent: this.state.currentOp?.id ?? null,\n\t\t\t\top: op.op,\n\t\t\t\tname: op.name,\n\t\t\t\topts: op.op === _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepPlanned ? null : op.opts ?? null\n\t\t\t};\n\t\t\tconst collisionHash = _internals.hashData(obj);\n\t\t\tconst pos = this.state.tickOpHashes[collisionHash] = (this.state.tickOpHashes[collisionHash] ?? -1) + 1;\n\t\t\treturn {\n\t\t\t\t...op,\n\t\t\t\tid: _internals.hashData({\n\t\t\t\t\tpos,\n\t\t\t\t\t...obj\n\t\t\t\t})\n\t\t\t};\n\t\t};\n\t\tconst stepHandler = ({ args, matchOp, opts }) => {\n\t\t\tif (this.state.nonStepFnDetected) throw new _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.functionStoppedRunningErr)(_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.ErrCode.STEP_USED_AFTER_ASYNC));\n\t\t\tif (this.state.executingStep) throw new _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.prettyError)({\n\t\t\t\twhatHappened: \"Your function was stopped from running\",\n\t\t\t\twhy: \"We detected that you have nested `step.*` tooling.\",\n\t\t\t\tconsequences: \"Nesting `step.*` tooling is not supported.\",\n\t\t\t\tstack: true,\n\t\t\t\ttoFixNow: \"Make sure you're not using `step.*` tooling inside of other `step.*` tooling. If you need to compose steps together, you can create a new async function and call it from within your step function, or use promise chaining.\",\n\t\t\t\totherwise: \"For more information on step functions with Inngest, see https://www.inngest.com/docs/functions/multi-step\",\n\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.ErrCode.NESTING_STEPS\n\t\t\t}));\n\t\t\tthis.state.hasUsedTools = true;\n\t\t\tconst opId = hashOp(matchOp((0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_10__.getStepOptions)(args[0]), ...args.slice(1)));\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.state.tickOps[opId.id] = {\n\t\t\t\t\t...opId,\n\t\t\t\t\t...opts?.fn ? { fn: () => opts.fn?.(...args) } : {},\n\t\t\t\t\trawArgs: args,\n\t\t\t\t\tresolve,\n\t\t\t\t\treject,\n\t\t\t\t\tfulfilled: false\n\t\t\t\t};\n\t\t\t});\n\t\t};\n\t\tconst step = (0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_10__.createStepTools)(this.options.client, this, stepHandler);\n\t\tlet fnArg = {\n\t\t\t...this.options.data,\n\t\t\tstep\n\t\t};\n\t\tif (this.options.isFailureHandler) {\n\t\t\tconst eventData = zod_v3__WEBPACK_IMPORTED_MODULE_11__.object({ error: _types_js__WEBPACK_IMPORTED_MODULE_8__.jsonErrorSchema }).parse(fnArg.event?.data);\n\t\t\tfnArg = {\n\t\t\t\t...fnArg,\n\t\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.deserializeError)(eventData.error)\n\t\t\t};\n\t\t}\n\t\treturn this.options.transformCtx?.(fnArg) ?? fnArg;\n\t}\n\t/**\n\t* Using middleware, transform input before running.\n\t*/\n\tasync transformInput() {\n\t\tconst inputMutations = await this.state.hooks?.transformInput?.({\n\t\t\tctx: { ...this.fnArg },\n\t\t\tsteps: Object.values(this.options.stepState),\n\t\t\tfn: this.options.fn,\n\t\t\treqArgs: this.options.reqArgs\n\t\t});\n\t\tif (inputMutations?.ctx) this.fnArg = inputMutations.ctx;\n\t\tif (inputMutations?.steps) this.state.opStack = [...inputMutations.steps];\n\t}\n\tgetEarlyExecRunStep(ops) {\n\t\tif (ops.length !== 1) return;\n\t\tconst op = ops[0];\n\t\tif (op && op.op === _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepPlanned) return op.id;\n\t}\n\t/**\n\t* Using middleware, transform output before returning.\n\t*/\n\tasync transformOutput(dataOrError, step) {\n\t\tconst output = { ...dataOrError };\n\t\tif (typeof output.error !== \"undefined\") output.data = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.serializeError)(output.error);\n\t\tconst transformedOutput = await this.state.hooks?.transformOutput?.({\n\t\t\tresult: { ...output },\n\t\t\tstep\n\t\t});\n\t\tconst { data, error } = {\n\t\t\t...output,\n\t\t\t...transformedOutput?.result\n\t\t};\n\t\tif (!step) await this.state.hooks?.finished?.({ result: { ...typeof error !== \"undefined\" ? { error } : { data } } });\n\t\tif (typeof error !== \"undefined\") {\n\t\t\t/**\n\t\t\t* Ensure we give middleware the chance to decide on retriable behaviour\n\t\t\t* by looking at the error returned from output transformation.\n\t\t\t*/\n\t\t\tlet retriable = !(error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError);\n\t\t\tif (retriable && error instanceof _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_12__.RetryAfterError) retriable = error.retryAfter;\n\t\t\tconst serializedError = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.serializeError)(error);\n\t\t\treturn {\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\terror: serializedError,\n\t\t\t\tretriable\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\ttype: \"function-resolved\",\n\t\t\tctx: this.fnArg,\n\t\t\tops: this.ops,\n\t\t\tdata: (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_13__.undefinedToNull)(data)\n\t\t};\n\t}\n};\nconst tickOpToOutgoing = (op) => {\n\treturn {\n\t\top: op.op,\n\t\tid: op.id,\n\t\tname: op.name,\n\t\topts: op.opts\n\t};\n};\nconst hashData = (op) => {\n\treturn sha1().update(canonicalize__WEBPACK_IMPORTED_MODULE_1__(op)).digest(\"hex\");\n};\n/**\n* Exported for testing.\n*/\nconst _internals = { hashData };\n\n//#endregion\n\n//# sourceMappingURL=v0.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi92MC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQThEO0FBQ0g7QUFDRTtBQUNKO0FBQ0c7QUFDZ0U7QUFDL0Q7QUFDTjtBQUN3QztBQUN2QztBQUNpQjtBQUM5QztBQUNFO0FBQ1c7O0FBRXhDO0FBQ0EsaUNBQWlDLHNFQUFRO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxRQUFRLE9BQU8sRUFBRSxvQ0FBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsa0VBQWdCO0FBQ3ZELFdBQVcsZ0VBQWdCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrRUFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9FQUFpQixDQUFDLCtEQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdURBQU87QUFDbkIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5RUFBbUI7QUFDN0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsMkNBQTJDLFFBQVE7QUFDbkc7QUFDQTtBQUNBLFNBQVMsaURBQVU7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1QkFBdUIsUUFBUSxrRUFBWTtBQUN2RDtBQUNBLEtBQUs7QUFDTCx5Q0FBeUMsT0FBTztBQUNoRCxL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QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVFQUFlO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5Q0FBWTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDZ0Q7QUFDaEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvZXhlY3V0aW9uL3YwLmpzPzc3OTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgRXhlY3V0aW9uVmVyc2lvbiB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL2NvbnN0cy5qc1wiO1xuaW1wb3J0IHsgU3RlcE9wQ29kZSwganNvbkVycm9yU2NoZW1hIH0gZnJvbSBcIi4uLy4uL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBJbm5nZXN0RXhlY3V0aW9uIH0gZnJvbSBcIi4vSW5uZ2VzdEV4ZWN1dGlvbi5qc1wiO1xuaW1wb3J0IHsgTm9uUmV0cmlhYmxlRXJyb3IgfSBmcm9tIFwiLi4vTm9uUmV0cmlhYmxlRXJyb3IuanNcIjtcbmltcG9ydCB7IEVyckNvZGUsIGRlc2VyaWFsaXplRXJyb3IsIGZ1bmN0aW9uU3RvcHBlZFJ1bm5pbmdFcnIsIHByZXR0eUVycm9yLCBzZXJpYWxpemVFcnJvciB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgdW5kZWZpbmVkVG9OdWxsIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvZnVuY3Rpb25zLmpzXCI7XG5pbXBvcnQgeyBnZXRIb29rU3RhY2sgfSBmcm9tIFwiLi4vSW5uZ2VzdE1pZGRsZXdhcmUuanNcIjtcbmltcG9ydCB7IHJlc29sdmVBZnRlclBlbmRpbmcsIHJlc29sdmVOZXh0VGljaywgcnVuQXNQcm9taXNlIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvcHJvbWlzZXMuanNcIjtcbmltcG9ydCB7IFJldHJ5QWZ0ZXJFcnJvciB9IGZyb20gXCIuLi9SZXRyeUFmdGVyRXJyb3IuanNcIjtcbmltcG9ydCB7IGNyZWF0ZVN0ZXBUb29scywgZ2V0U3RlcE9wdGlvbnMgfSBmcm9tIFwiLi4vSW5uZ2VzdFN0ZXBUb29scy5qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjNcIjtcbmltcG9ydCBoYXNoanMgZnJvbSBcImhhc2guanNcIjtcbmltcG9ydCBjYW5vbmljYWxpemUgZnJvbSBcImNhbm9uaWNhbGl6ZVwiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvZXhlY3V0aW9uL3YwLnRzXG52YXIgdjBfZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7XG5cdFYwSW5uZ2VzdEV4ZWN1dGlvbjogKCkgPT4gVjBJbm5nZXN0RXhlY3V0aW9uLFxuXHRfaW50ZXJuYWxzOiAoKSA9PiBfaW50ZXJuYWxzLFxuXHRjcmVhdGVWMElubmdlc3RFeGVjdXRpb246ICgpID0+IGNyZWF0ZVYwSW5uZ2VzdEV4ZWN1dGlvblxufSk7XG5jb25zdCB7IHNoYTEgfSA9IGhhc2hqcztcbmNvbnN0IGNyZWF0ZVYwSW5uZ2VzdEV4ZWN1dGlvbiA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiBuZXcgVjBJbm5nZXN0RXhlY3V0aW9uKG9wdGlvbnMpO1xufTtcbnZhciBWMElubmdlc3RFeGVjdXRpb24gPSBjbGFzcyBleHRlbmRzIElubmdlc3RFeGVjdXRpb24ge1xuXHR2ZXJzaW9uID0gRXhlY3V0aW9uVmVyc2lvbi5WMDtcblx0c3RhdGU7XG5cdGV4ZWN1dGlvbjtcblx0dXNlckZuVG9SdW47XG5cdGZuQXJnO1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0c3VwZXIob3B0aW9ucyk7XG5cdFx0dGhpcy51c2VyRm5Ub1J1biA9IHRoaXMuZ2V0VXNlckZuVG9SdW4oKTtcblx0XHR0aGlzLnN0YXRlID0gdGhpcy5jcmVhdGVFeGVjdXRpb25TdGF0ZSgpO1xuXHRcdHRoaXMuZm5BcmcgPSB0aGlzLmNyZWF0ZUZuQXJnKCk7XG5cdH1cblx0YWRkTWV0YWRhdGEoX3N0ZXBJZCwgX2tpbmQsIF9zY29wZSwgX29wLCBfdmFsdWVzKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHN0YXJ0KCkge1xuXHRcdHRoaXMuZGVidWcoXCJzdGFydGluZyBWMCBleGVjdXRpb25cIik7XG5cdFx0cmV0dXJuIHRoaXMuZXhlY3V0aW9uID8/PSB0aGlzLl9zdGFydCgpLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0dGhpcy5kZWJ1ZyhcInJlc3VsdDpcIiwgcmVzdWx0KTtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgX3N0YXJ0KCkge1xuXHRcdHRoaXMuc3RhdGUuaG9va3MgPSBhd2FpdCB0aGlzLmluaXRpYWxpemVNaWRkbGV3YXJlKCk7XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMudHJhbnNmb3JtSW5wdXQoKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3MuYmVmb3JlTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0aWYgKHRoaXMuc3RhdGUub3BTdGFjay5sZW5ndGggPT09IDAgJiYgIXRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3MuYWZ0ZXJNZW1vaXphdGlvbj8uKCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3MuYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHVzZXJGblByb21pc2UgPSBydW5Bc1Byb21pc2UoKCkgPT4gdGhpcy51c2VyRm5Ub1J1bih0aGlzLmZuQXJnKSk7XG5cdFx0XHRsZXQgcG9zID0gLTE7XG5cdFx0XHRkbyB7XG5cdFx0XHRcdGlmIChwb3MgPj0gMCkge1xuXHRcdFx0XHRcdGlmICghdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXAgJiYgcG9zID09PSB0aGlzLnN0YXRlLm9wU3RhY2subGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3MuYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5zdGF0ZS50aWNrT3BzID0ge307XG5cdFx0XHRcdFx0Y29uc3QgaW5jb21pbmdPcCA9IHRoaXMuc3RhdGUub3BTdGFja1twb3NdO1xuXHRcdFx0XHRcdHRoaXMuc3RhdGUuY3VycmVudE9wID0gdGhpcy5zdGF0ZS5hbGxGb3VuZE9wc1tpbmNvbWluZ09wLmlkXTtcblx0XHRcdFx0XHRpZiAoIXRoaXMuc3RhdGUuY3VycmVudE9wKVxuIC8qKlxuXHRcdFx0XHRcdCogV2UncmUgdHJ5aW5nIHRvIHJlc3VtZSB0aGUgZnVuY3Rpb24sIGJ1dCB3ZSBjYW4ndCBmaW5kIHdoZXJlIHRvIGdvLlxuXHRcdFx0XHRcdCpcblx0XHRcdFx0XHQqIFRoaXMgbWVhbnMgdGhhdCBlaXRoZXIgdGhlIGZ1bmN0aW9uIGhhcyBjaGFuZ2VkIG9yIHRoZXJlIGFyZSBhc3luY1xuXHRcdFx0XHRcdCogYWN0aW9ucyBpbi1iZXR3ZWVuIHN0ZXBzIHRoYXQgd2UgaGF2ZW4ndCBub3RpY2VkIGluIHByZXZpb3VzXG5cdFx0XHRcdFx0KiBleGVjdXRpb25zLlxuXHRcdFx0XHRcdCpcblx0XHRcdFx0XHQqIFdoaWNoZXZlciB0aGUgY2FzZSwgdGhpcyBpcyBiYWQgYW5kIHdlIGNhbid0IGNvbnRpbnVlIGluIHRoaXNcblx0XHRcdFx0XHQqIHVuZGVmaW5lZCBzdGF0ZS5cblx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdHRocm93IG5ldyBOb25SZXRyaWFibGVFcnJvcihwcmV0dHlFcnJvcih7XG5cdFx0XHRcdFx0XHR3aGF0SGFwcGVuZWQ6IFwiIFlvdXIgZnVuY3Rpb24gd2FzIHN0b3BwZWQgZnJvbSBydW5uaW5nXCIsXG5cdFx0XHRcdFx0XHR3aHk6IFwiV2UgY291bGRuJ3QgcmVzdW1lIHlvdXIgZnVuY3Rpb24ncyBzdGF0ZSBiZWNhdXNlIGl0IG1heSBoYXZlIGNoYW5nZWQgc2luY2UgdGhlIHJ1biBzdGFydGVkIG9yIHRoZXJlIGFyZSBhc3luYyBhY3Rpb25zIGluLWJldHdlZW4gc3RlcHMgdGhhdCB3ZSBoYXZlbid0IG5vdGljZWQgaW4gcHJldmlvdXMgZXhlY3V0aW9ucy5cIixcblx0XHRcdFx0XHRcdGNvbnNlcXVlbmNlczogXCJDb250aW51aW5nIHRvIHJ1biB0aGUgZnVuY3Rpb24gbWF5IHJlc3VsdCBpbiB1bmV4cGVjdGVkIGJlaGF2aW91ciwgc28gd2UndmUgc3RvcHBlZCB5b3VyIGZ1bmN0aW9uIHRvIGVuc3VyZSBub3RoaW5nIHVuZXhwZWN0ZWQgaGFwcGVuZWQhXCIsXG5cdFx0XHRcdFx0XHR0b0ZpeE5vdzogXCJFbnN1cmUgdGhhdCB5b3VyIGZ1bmN0aW9uIGlzIGVpdGhlciBlbnRpcmVseSBzdGVwLWJhc2VkIG9yIGVudGlyZWx5IG5vbi1zdGVwLWJhc2VkLCBieSBlaXRoZXIgd3JhcHBpbmcgYWxsIGFzeW5jaHJvbm91cyBsb2dpYyBpbiBgc3RlcC5ydW4oKWAgY2FsbHMgb3IgYnkgcmVtb3ZpbmcgYWxsIGBzdGVwLiooKWAgY2FsbHMuXCIsXG5cdFx0XHRcdFx0XHRvdGhlcndpc2U6IFwiRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gd2h5IHN0ZXAgZnVuY3Rpb25zIHdvcmsgaW4gdGhpcyBtYW5uZXIsIHNlZSBodHRwczovL3d3dy5pbm5nZXN0LmNvbS9kb2NzL2Z1bmN0aW9ucy9tdWx0aS1zdGVwI2dvdGNoYXNcIixcblx0XHRcdFx0XHRcdHN0YWNrOiB0cnVlLFxuXHRcdFx0XHRcdFx0Y29kZTogRXJyQ29kZS5OT05fREVURVJNSU5JU1RJQ19GVU5DVElPTlxuXHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0XHR0aGlzLnN0YXRlLmN1cnJlbnRPcC5mdWxmaWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgaW5jb21pbmdPcC5kYXRhICE9PSBcInVuZGVmaW5lZFwiKSB0aGlzLnN0YXRlLmN1cnJlbnRPcC5yZXNvbHZlKGluY29taW5nT3AuZGF0YSk7XG5cdFx0XHRcdFx0ZWxzZSB0aGlzLnN0YXRlLmN1cnJlbnRPcC5yZWplY3QoaW5jb21pbmdPcC5lcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgcmVzb2x2ZUFmdGVyUGVuZGluZygpO1xuXHRcdFx0XHR0aGlzLnN0YXRlLnJlc2V0KCk7XG5cdFx0XHRcdHBvcysrO1xuXHRcdFx0fSB3aGlsZSAocG9zIDwgdGhpcy5zdGF0ZS5vcFN0YWNrLmxlbmd0aCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzLmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0Y29uc3QgZGlzY292ZXJlZE9wcyA9IE9iamVjdC52YWx1ZXModGhpcy5zdGF0ZS50aWNrT3BzKS5tYXAodGlja09wVG9PdXRnb2luZyk7XG5cdFx0XHRjb25zdCBydW5TdGVwID0gdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXAgfHwgdGhpcy5nZXRFYXJseUV4ZWNSdW5TdGVwKGRpc2NvdmVyZWRPcHMpO1xuXHRcdFx0aWYgKHJ1blN0ZXApIHtcblx0XHRcdFx0Y29uc3QgdXNlckZuT3AgPSB0aGlzLnN0YXRlLmFsbEZvdW5kT3BzW3J1blN0ZXBdO1xuXHRcdFx0XHRjb25zdCBzdGVwVG9SdW4gPSB1c2VyRm5PcD8uZm47XG5cdFx0XHRcdGlmICghc3RlcFRvUnVuKSB0aHJvdyBuZXcgRXJyb3IoYEJhZCBzdGFjazsgZXhlY3V0b3IgcmVxdWVzdGluZyB0byBydW4gdW5rbm93biBzdGVwIFwiJHtydW5TdGVwfVwiYCk7XG5cdFx0XHRcdGNvbnN0IG91dGdvaW5nVXNlckZuT3AgPSB7XG5cdFx0XHRcdFx0Li4udGlja09wVG9PdXRnb2luZyh1c2VyRm5PcCksXG5cdFx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzLmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRcdHRoaXMuc3RhdGUuZXhlY3V0aW5nU3RlcCA9IHRydWU7XG5cdFx0XHRcdGNvbnN0IHsgdHlwZTogX3R5cGUsIC4uLnJlc3QgfSA9IGF3YWl0IHJ1bkFzUHJvbWlzZShzdGVwVG9SdW4pLmZpbmFsbHkoKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuc3RhdGUuZXhlY3V0aW5nU3RlcCA9IGZhbHNlO1xuXHRcdFx0XHR9KS5jYXRjaChhc3luYyAoZXJyb3IpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoeyBlcnJvciB9LCBvdXRnb2luZ1VzZXJGbk9wKTtcblx0XHRcdFx0fSkudGhlbihhc3luYyAoZGF0YSkgPT4ge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyRXhlY3V0aW9uPy4oKTtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoeyBkYXRhIH0sIG91dGdvaW5nVXNlckZuT3ApO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcInN0ZXAtcmFuXCIsXG5cdFx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdFx0c3RlcDoge1xuXHRcdFx0XHRcdFx0Li4ub3V0Z29pbmdVc2VyRm5PcCxcblx0XHRcdFx0XHRcdC4uLnJlc3Rcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWRpc2NvdmVyZWRPcHMubGVuZ3RoKSB7XG5cdFx0XHRcdGNvbnN0IGZuUmV0ID0gYXdhaXQgUHJvbWlzZS5yYWNlKFt1c2VyRm5Qcm9taXNlLnRoZW4oKGRhdGEpID0+ICh7XG5cdFx0XHRcdFx0dHlwZTogXCJjb21wbGV0ZVwiLFxuXHRcdFx0XHRcdGRhdGFcblx0XHRcdFx0fSkpLCByZXNvbHZlTmV4dFRpY2soKS50aGVuKCgpID0+ICh7IHR5cGU6IFwiaW5jb21wbGV0ZVwiIH0pKV0pO1xuXHRcdFx0XHRpZiAoZm5SZXQudHlwZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcy5hZnRlckV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRcdFx0aWYgKE9iamVjdC52YWx1ZXModGhpcy5zdGF0ZS5hbGxGb3VuZE9wcykuZXZlcnkoKG9wKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gb3AuZnVsZmlsbGVkO1xuXHRcdFx0XHRcdH0pKSByZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoeyBkYXRhOiBmblJldC5kYXRhIH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCF0aGlzLnN0YXRlLmhhc1VzZWRUb29scykge1xuXHRcdFx0XHRcdHRoaXMuc3RhdGUubm9uU3RlcEZuRGV0ZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB1c2VyRm5Qcm9taXNlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3MuYWZ0ZXJFeGVjdXRpb24/LigpO1xuXHRcdFx0XHRcdHJldHVybiBhd2FpdCB0aGlzLnRyYW5zZm9ybU91dHB1dCh7IGRhdGEgfSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIU9iamVjdC52YWx1ZXModGhpcy5zdGF0ZS5hbGxGb3VuZE9wcykuc29tZSgob3ApID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gb3AuZnVsZmlsbGVkID09PSBmYWxzZTtcblx0XHRcdFx0fSkpIHRocm93IG5ldyBOb25SZXRyaWFibGVFcnJvcihmdW5jdGlvblN0b3BwZWRSdW5uaW5nRXJyKEVyckNvZGUuQVNZTkNfREVURUNURURfQUZURVJfTUVNT0laQVRJT04pKTtcblx0XHRcdH1cblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3MuYWZ0ZXJFeGVjdXRpb24/LigpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dHlwZTogXCJzdGVwcy1mb3VuZFwiLFxuXHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdHN0ZXBzOiBkaXNjb3ZlcmVkT3BzXG5cdFx0XHR9O1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoeyBlcnJvciB9KTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcy5iZWZvcmVSZXNwb25zZT8uKCk7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIGluaXRpYWxpemVNaWRkbGV3YXJlKCkge1xuXHRcdGNvbnN0IGN0eCA9IHRoaXMub3B0aW9ucy5kYXRhO1xuXHRcdHJldHVybiBhd2FpdCBnZXRIb29rU3RhY2sodGhpcy5vcHRpb25zLmZuW1wibWlkZGxld2FyZVwiXSwgXCJvbkZ1bmN0aW9uUnVuXCIsIHtcblx0XHRcdGN0eCxcblx0XHRcdGZuOiB0aGlzLm9wdGlvbnMuZm4sXG5cdFx0XHRzdGVwczogT2JqZWN0LnZhbHVlcyh0aGlzLm9wdGlvbnMuc3RlcFN0YXRlKSxcblx0XHRcdHJlcUFyZ3M6IHRoaXMub3B0aW9ucy5yZXFBcmdzXG5cdFx0fSwge1xuXHRcdFx0dHJhbnNmb3JtSW5wdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRjdHg6IHtcblx0XHRcdFx0XHRcdC4uLnByZXYuY3R4LFxuXHRcdFx0XHRcdFx0Li4ub3V0cHV0Py5jdHhcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZuOiB0aGlzLm9wdGlvbnMuZm4sXG5cdFx0XHRcdFx0c3RlcHM6IHByZXYuc3RlcHMubWFwKChzdGVwLCBpKSA9PiAoe1xuXHRcdFx0XHRcdFx0Li4uc3RlcCxcblx0XHRcdFx0XHRcdC4uLm91dHB1dD8uc3RlcHM/LltpXVxuXHRcdFx0XHRcdH0pKSxcblx0XHRcdFx0XHRyZXFBcmdzOiBwcmV2LnJlcUFyZ3Ncblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cdFx0XHR0cmFuc2Zvcm1PdXRwdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRyZXN1bHQ6IHtcblx0XHRcdFx0XHRcdC4uLnByZXYucmVzdWx0LFxuXHRcdFx0XHRcdFx0Li4ub3V0cHV0Py5yZXN1bHRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN0ZXA6IHByZXYuc3RlcFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdGNyZWF0ZUV4ZWN1dGlvblN0YXRlKCkge1xuXHRcdGNvbnN0IHN0YXRlID0ge1xuXHRcdFx0YWxsRm91bmRPcHM6IHt9LFxuXHRcdFx0dGlja09wczoge30sXG5cdFx0XHR0aWNrT3BIYXNoZXM6IHt9LFxuXHRcdFx0Y3VycmVudE9wOiB2b2lkIDAsXG5cdFx0XHRoYXNVc2VkVG9vbHM6IGZhbHNlLFxuXHRcdFx0cmVzZXQ6ICgpID0+IHtcblx0XHRcdFx0c3RhdGUudGlja09wSGFzaGVzID0ge307XG5cdFx0XHRcdHN0YXRlLmFsbEZvdW5kT3BzID0ge1xuXHRcdFx0XHRcdC4uLnN0YXRlLmFsbEZvdW5kT3BzLFxuXHRcdFx0XHRcdC4uLnN0YXRlLnRpY2tPcHNcblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cdFx0XHRub25TdGVwRm5EZXRlY3RlZDogZmFsc2UsXG5cdFx0XHRleGVjdXRpbmdTdGVwOiBmYWxzZSxcblx0XHRcdG9wU3RhY2s6IHRoaXMub3B0aW9ucy5zdGVwQ29tcGxldGlvbk9yZGVyLnJlZHVjZSgoYWNjLCBzdGVwSWQpID0+IHtcblx0XHRcdFx0Y29uc3Qgc3RlcFN0YXRlID0gdGhpcy5vcHRpb25zLnN0ZXBTdGF0ZVtzdGVwSWRdO1xuXHRcdFx0XHRpZiAoIXN0ZXBTdGF0ZSkgcmV0dXJuIGFjYztcblx0XHRcdFx0cmV0dXJuIFsuLi5hY2MsIHN0ZXBTdGF0ZV07XG5cdFx0XHR9LCBbXSlcblx0XHR9O1xuXHRcdHJldHVybiBzdGF0ZTtcblx0fVxuXHRnZXQgb3BzKCkge1xuXHRcdHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModGhpcy5zdGF0ZS5hbGxGb3VuZE9wcykubWFwKChbaWQsIG9wXSkgPT4gW2lkLCB7XG5cdFx0XHRpZDogb3AuaWQsXG5cdFx0XHRyYXdBcmdzOiBvcC5yYXdBcmdzLFxuXHRcdFx0ZGF0YTogb3AuZGF0YSxcblx0XHRcdGVycm9yOiBvcC5lcnJvcixcblx0XHRcdGZ1bGZpbGxlZDogb3AuZnVsZmlsbGVkLFxuXHRcdFx0c2VlbjogdHJ1ZVxuXHRcdH1dKSk7XG5cdH1cblx0Z2V0VXNlckZuVG9SdW4oKSB7XG5cdFx0aWYgKCF0aGlzLm9wdGlvbnMuaXNGYWlsdXJlSGFuZGxlcikgcmV0dXJuIHRoaXMub3B0aW9ucy5mbltcImZuXCJdO1xuXHRcdGlmICghdGhpcy5vcHRpb25zLmZuW1wib25GYWlsdXJlRm5cIl0pXG4gLyoqXG5cdFx0KiBTb21laG93LCB3ZSd2ZSBlbmRlZCB1cCBkZXRlY3RpbmcgdGhhdCB0aGlzIGlzIGEgZmFpbHVyZSBoYW5kbGVyIGJ1dFxuXHRcdCogZG9lc24ndCBoYXZlIGFuIGBvbkZhaWx1cmVgIGZ1bmN0aW9uLiBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4uXG5cdFx0Ki9cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBmdW5jdGlvbiBgb25GYWlsdXJlYCBoYW5kbGVyXCIpO1xuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMuZm5bXCJvbkZhaWx1cmVGblwiXTtcblx0fVxuXHRjcmVhdGVGbkFyZygpIHtcblx0XHR0aGlzLnN0YXRlLnRpY2tPcHMgPSB0aGlzLnN0YXRlLmFsbEZvdW5kT3BzO1xuXHRcdC8qKlxuXHRcdCogQ3JlYXRlIGEgdW5pcXVlIGhhc2ggb2YgYW4gb3BlcmF0aW9uIHVzaW5nIG9ubHkgYSBzdWJzZXQgb2YgdGhlIG9wZXJhdGlvbidzXG5cdFx0KiBwcm9wZXJ0aWVzOyB3aWxsIG5ldmVyIHVzZSBgZGF0YWAgYW5kIHdpbGwgZ3VhcmFudGVlIHRoZSBvcmRlciBvZiB0aGVcblx0XHQqIG9iamVjdCBzbyB3ZSBkb24ndCByZWx5IG9uIGluZGl2aWR1YWwgdG9vbHMgZm9yIHRoYXQuXG5cdFx0KlxuXHRcdCogSWYgdGhlIG9wZXJhdGlvbiBhbHJlYWR5IGNvbnRhaW5zIGFuIElELCB0aGUgY3VycmVudCBJRCB3aWxsIGJlIHVzZWRcblx0XHQqIGluc3RlYWQsIHNvIHRoYXQgdXNlcnMgY2FuIHByb3ZpZGUgdGhlaXIgb3duIElEcy5cblx0XHQqL1xuXHRcdGNvbnN0IGhhc2hPcCA9IChvcCkgPT4ge1xuXHRcdFx0LyoqXG5cdFx0XHQqIEl0J3MgZGlmZmljdWx0IGZvciB2MCB0byB1bmRlcnN0YW5kIHdoZXRoZXIgb3Igbm90IGFuIG9wIGhhc1xuXHRcdFx0KiBoaXN0b3JpY2FsbHkgY29udGFpbmVkIGEgY3VzdG9tIElELCBhcyBhbGwgc3RlcCB1c2FnZSBub3cgcmVxdWlyZSB0aGVtLlxuXHRcdFx0KlxuXHRcdFx0KiBGb3IgdGhpcyByZWFzb24sIHdlIG1ha2UgdGhlIGFzc3VtcHRpb24gdGhhdCBzdGVwcyBpbiB2MCBkbyBub3QgaGF2ZSBhXG5cdFx0XHQqIGN1c3RvbSBJRCBhbmQgZ2VuZXJhdGUgb25lIGZvciB0aGVtIGFzIHdlIHdvdWxkIGluIGFsbCByZWNvbW1lbmRhdGlvbnNcblx0XHRcdCogYW5kIGV4YW1wbGVzLlxuXHRcdFx0Ki9cblx0XHRcdGNvbnN0IG9iaiA9IHtcblx0XHRcdFx0cGFyZW50OiB0aGlzLnN0YXRlLmN1cnJlbnRPcD8uaWQgPz8gbnVsbCxcblx0XHRcdFx0b3A6IG9wLm9wLFxuXHRcdFx0XHRuYW1lOiBvcC5uYW1lLFxuXHRcdFx0XHRvcHRzOiBvcC5vcCA9PT0gU3RlcE9wQ29kZS5TdGVwUGxhbm5lZCA/IG51bGwgOiBvcC5vcHRzID8/IG51bGxcblx0XHRcdH07XG5cdFx0XHRjb25zdCBjb2xsaXNpb25IYXNoID0gX2ludGVybmFscy5oYXNoRGF0YShvYmopO1xuXHRcdFx0Y29uc3QgcG9zID0gdGhpcy5zdGF0ZS50aWNrT3BIYXNoZXNbY29sbGlzaW9uSGFzaF0gPSAodGhpcy5zdGF0ZS50aWNrT3BIYXNoZXNbY29sbGlzaW9uSGFzaF0gPz8gLTEpICsgMTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLm9wLFxuXHRcdFx0XHRpZDogX2ludGVybmFscy5oYXNoRGF0YSh7XG5cdFx0XHRcdFx0cG9zLFxuXHRcdFx0XHRcdC4uLm9ialxuXHRcdFx0XHR9KVxuXHRcdFx0fTtcblx0XHR9O1xuXHRcdGNvbnN0IHN0ZXBIYW5kbGVyID0gKHsgYXJncywgbWF0Y2hPcCwgb3B0cyB9KSA9PiB7XG5cdFx0XHRpZiAodGhpcy5zdGF0ZS5ub25TdGVwRm5EZXRlY3RlZCkgdGhyb3cgbmV3IE5vblJldHJpYWJsZUVycm9yKGZ1bmN0aW9uU3RvcHBlZFJ1bm5pbmdFcnIoRXJyQ29kZS5TVEVQX1VTRURfQUZURVJfQVNZTkMpKTtcblx0XHRcdGlmICh0aGlzLnN0YXRlLmV4ZWN1dGluZ1N0ZXApIHRocm93IG5ldyBOb25SZXRyaWFibGVFcnJvcihwcmV0dHlFcnJvcih7XG5cdFx0XHRcdHdoYXRIYXBwZW5lZDogXCJZb3VyIGZ1bmN0aW9uIHdhcyBzdG9wcGVkIGZyb20gcnVubmluZ1wiLFxuXHRcdFx0XHR3aHk6IFwiV2UgZGV0ZWN0ZWQgdGhhdCB5b3UgaGF2ZSBuZXN0ZWQgYHN0ZXAuKmAgdG9vbGluZy5cIixcblx0XHRcdFx0Y29uc2VxdWVuY2VzOiBcIk5lc3RpbmcgYHN0ZXAuKmAgdG9vbGluZyBpcyBub3Qgc3VwcG9ydGVkLlwiLFxuXHRcdFx0XHRzdGFjazogdHJ1ZSxcblx0XHRcdFx0dG9GaXhOb3c6IFwiTWFrZSBzdXJlIHlvdSdyZSBub3QgdXNpbmcgYHN0ZXAuKmAgdG9vbGluZyBpbnNpZGUgb2Ygb3RoZXIgYHN0ZXAuKmAgdG9vbGluZy4gSWYgeW91IG5lZWQgdG8gY29tcG9zZSBzdGVwcyB0b2dldGhlciwgeW91IGNhbiBjcmVhdGUgYSBuZXcgYXN5bmMgZnVuY3Rpb24gYW5kIGNhbGwgaXQgZnJvbSB3aXRoaW4geW91ciBzdGVwIGZ1bmN0aW9uLCBvciB1c2UgcHJvbWlzZSBjaGFpbmluZy5cIixcblx0XHRcdFx0b3RoZXJ3aXNlOiBcIkZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHN0ZXAgZnVuY3Rpb25zIHdpdGggSW5uZ2VzdCwgc2VlIGh0dHBzOi8vd3d3Lmlubmdlc3QuY29tL2RvY3MvZnVuY3Rpb25zL211bHRpLXN0ZXBcIixcblx0XHRcdFx0Y29kZTogRXJyQ29kZS5ORVNUSU5HX1NURVBTXG5cdFx0XHR9KSk7XG5cdFx0XHR0aGlzLnN0YXRlLmhhc1VzZWRUb29scyA9IHRydWU7XG5cdFx0XHRjb25zdCBvcElkID0gaGFzaE9wKG1hdGNoT3AoZ2V0U3RlcE9wdGlvbnMoYXJnc1swXSksIC4uLmFyZ3Muc2xpY2UoMSkpKTtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdHRoaXMuc3RhdGUudGlja09wc1tvcElkLmlkXSA9IHtcblx0XHRcdFx0XHQuLi5vcElkLFxuXHRcdFx0XHRcdC4uLm9wdHM/LmZuID8geyBmbjogKCkgPT4gb3B0cy5mbj8uKC4uLmFyZ3MpIH0gOiB7fSxcblx0XHRcdFx0XHRyYXdBcmdzOiBhcmdzLFxuXHRcdFx0XHRcdHJlc29sdmUsXG5cdFx0XHRcdFx0cmVqZWN0LFxuXHRcdFx0XHRcdGZ1bGZpbGxlZDogZmFsc2Vcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0Y29uc3Qgc3RlcCA9IGNyZWF0ZVN0ZXBUb29scyh0aGlzLm9wdGlvbnMuY2xpZW50LCB0aGlzLCBzdGVwSGFuZGxlcik7XG5cdFx0bGV0IGZuQXJnID0ge1xuXHRcdFx0Li4udGhpcy5vcHRpb25zLmRhdGEsXG5cdFx0XHRzdGVwXG5cdFx0fTtcblx0XHRpZiAodGhpcy5vcHRpb25zLmlzRmFpbHVyZUhhbmRsZXIpIHtcblx0XHRcdGNvbnN0IGV2ZW50RGF0YSA9IHoub2JqZWN0KHsgZXJyb3I6IGpzb25FcnJvclNjaGVtYSB9KS5wYXJzZShmbkFyZy5ldmVudD8uZGF0YSk7XG5cdFx0XHRmbkFyZyA9IHtcblx0XHRcdFx0Li4uZm5BcmcsXG5cdFx0XHRcdGVycm9yOiBkZXNlcmlhbGl6ZUVycm9yKGV2ZW50RGF0YS5lcnJvcilcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMudHJhbnNmb3JtQ3R4Py4oZm5BcmcpID8/IGZuQXJnO1xuXHR9XG5cdC8qKlxuXHQqIFVzaW5nIG1pZGRsZXdhcmUsIHRyYW5zZm9ybSBpbnB1dCBiZWZvcmUgcnVubmluZy5cblx0Ki9cblx0YXN5bmMgdHJhbnNmb3JtSW5wdXQoKSB7XG5cdFx0Y29uc3QgaW5wdXRNdXRhdGlvbnMgPSBhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy50cmFuc2Zvcm1JbnB1dD8uKHtcblx0XHRcdGN0eDogeyAuLi50aGlzLmZuQXJnIH0sXG5cdFx0XHRzdGVwczogT2JqZWN0LnZhbHVlcyh0aGlzLm9wdGlvbnMuc3RlcFN0YXRlKSxcblx0XHRcdGZuOiB0aGlzLm9wdGlvbnMuZm4sXG5cdFx0XHRyZXFBcmdzOiB0aGlzLm9wdGlvbnMucmVxQXJnc1xuXHRcdH0pO1xuXHRcdGlmIChpbnB1dE11dGF0aW9ucz8uY3R4KSB0aGlzLmZuQXJnID0gaW5wdXRNdXRhdGlvbnMuY3R4O1xuXHRcdGlmIChpbnB1dE11dGF0aW9ucz8uc3RlcHMpIHRoaXMuc3RhdGUub3BTdGFjayA9IFsuLi5pbnB1dE11dGF0aW9ucy5zdGVwc107XG5cdH1cblx0Z2V0RWFybHlFeGVjUnVuU3RlcChvcHMpIHtcblx0XHRpZiAob3BzLmxlbmd0aCAhPT0gMSkgcmV0dXJuO1xuXHRcdGNvbnN0IG9wID0gb3BzWzBdO1xuXHRcdGlmIChvcCAmJiBvcC5vcCA9PT0gU3RlcE9wQ29kZS5TdGVwUGxhbm5lZCkgcmV0dXJuIG9wLmlkO1xuXHR9XG5cdC8qKlxuXHQqIFVzaW5nIG1pZGRsZXdhcmUsIHRyYW5zZm9ybSBvdXRwdXQgYmVmb3JlIHJldHVybmluZy5cblx0Ki9cblx0YXN5bmMgdHJhbnNmb3JtT3V0cHV0KGRhdGFPckVycm9yLCBzdGVwKSB7XG5cdFx0Y29uc3Qgb3V0cHV0ID0geyAuLi5kYXRhT3JFcnJvciB9O1xuXHRcdGlmICh0eXBlb2Ygb3V0cHV0LmVycm9yICE9PSBcInVuZGVmaW5lZFwiKSBvdXRwdXQuZGF0YSA9IHNlcmlhbGl6ZUVycm9yKG91dHB1dC5lcnJvcik7XG5cdFx0Y29uc3QgdHJhbnNmb3JtZWRPdXRwdXQgPSBhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy50cmFuc2Zvcm1PdXRwdXQ/Lih7XG5cdFx0XHRyZXN1bHQ6IHsgLi4ub3V0cHV0IH0sXG5cdFx0XHRzdGVwXG5cdFx0fSk7XG5cdFx0Y29uc3QgeyBkYXRhLCBlcnJvciB9ID0ge1xuXHRcdFx0Li4ub3V0cHV0LFxuXHRcdFx0Li4udHJhbnNmb3JtZWRPdXRwdXQ/LnJlc3VsdFxuXHRcdH07XG5cdFx0aWYgKCFzdGVwKSBhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5maW5pc2hlZD8uKHsgcmVzdWx0OiB7IC4uLnR5cGVvZiBlcnJvciAhPT0gXCJ1bmRlZmluZWRcIiA/IHsgZXJyb3IgfSA6IHsgZGF0YSB9IH0gfSk7XG5cdFx0aWYgKHR5cGVvZiBlcnJvciAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0LyoqXG5cdFx0XHQqIEVuc3VyZSB3ZSBnaXZlIG1pZGRsZXdhcmUgdGhlIGNoYW5jZSB0byBkZWNpZGUgb24gcmV0cmlhYmxlIGJlaGF2aW91clxuXHRcdFx0KiBieSBsb29raW5nIGF0IHRoZSBlcnJvciByZXR1cm5lZCBmcm9tIG91dHB1dCB0cmFuc2Zvcm1hdGlvbi5cblx0XHRcdCovXG5cdFx0XHRsZXQgcmV0cmlhYmxlID0gIShlcnJvciBpbnN0YW5jZW9mIE5vblJldHJpYWJsZUVycm9yKTtcblx0XHRcdGlmIChyZXRyaWFibGUgJiYgZXJyb3IgaW5zdGFuY2VvZiBSZXRyeUFmdGVyRXJyb3IpIHJldHJpYWJsZSA9IGVycm9yLnJldHJ5QWZ0ZXI7XG5cdFx0XHRjb25zdCBzZXJpYWxpemVkRXJyb3IgPSBzZXJpYWxpemVFcnJvcihlcnJvcik7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiBcImZ1bmN0aW9uLXJlamVjdGVkXCIsXG5cdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdFx0ZXJyb3I6IHNlcmlhbGl6ZWRFcnJvcixcblx0XHRcdFx0cmV0cmlhYmxlXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZXNvbHZlZFwiLFxuXHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdGRhdGE6IHVuZGVmaW5lZFRvTnVsbChkYXRhKVxuXHRcdH07XG5cdH1cbn07XG5jb25zdCB0aWNrT3BUb091dGdvaW5nID0gKG9wKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0b3A6IG9wLm9wLFxuXHRcdGlkOiBvcC5pZCxcblx0XHRuYW1lOiBvcC5uYW1lLFxuXHRcdG9wdHM6IG9wLm9wdHNcblx0fTtcbn07XG5jb25zdCBoYXNoRGF0YSA9IChvcCkgPT4ge1xuXHRyZXR1cm4gc2hhMSgpLnVwZGF0ZShjYW5vbmljYWxpemUob3ApKS5kaWdlc3QoXCJoZXhcIik7XG59O1xuLyoqXG4qIEV4cG9ydGVkIGZvciB0ZXN0aW5nLlxuKi9cbmNvbnN0IF9pbnRlcm5hbHMgPSB7IGhhc2hEYXRhIH07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlVjBJbm5nZXN0RXhlY3V0aW9uLCB2MF9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12MC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/v0.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/v1.js":
/*!*********************************************************!*\
  !*** ./node_modules/inngest/components/execution/v1.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _internals: () => (/* binding */ _internals),\n/* harmony export */   createV1InngestExecution: () => (/* binding */ createV1InngestExecution),\n/* harmony export */   v1_exports: () => (/* binding */ v1_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _als_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../version.js */ \"(rsc)/./node_modules/inngest/version.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _InngestExecution_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../NonRetriableError.js */ \"(rsc)/./node_modules/inngest/components/NonRetriableError.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n/* harmony import */ var _otel_access_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./otel/access.js */ \"(rsc)/./node_modules/inngest/components/execution/otel/access.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _helpers_temporal_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../helpers/temporal.js */ \"(rsc)/./node_modules/inngest/helpers/temporal.js\");\n/* harmony import */ var _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../RetryAfterError.js */ \"(rsc)/./node_modules/inngest/components/RetryAfterError.js\");\n/* harmony import */ var _StepError_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../StepError.js */ \"(rsc)/./node_modules/inngest/components/StepError.js\");\n/* harmony import */ var _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../InngestStepTools.js */ \"(rsc)/./node_modules/inngest/components/InngestStepTools.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _opentelemetry_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @opentelemetry/api */ \"(rsc)/./node_modules/@opentelemetry/api/build/esm/trace-api.js\");\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n/* harmony import */ var ms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ms */ \"(rsc)/./node_modules/ms/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/execution/v1.ts\nvar v1_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_2__.__export)({\n\t_internals: () => _internals,\n\tcreateV1InngestExecution: () => createV1InngestExecution\n});\nconst { sha1 } = hash_js__WEBPACK_IMPORTED_MODULE_0__;\nconst createV1InngestExecution = (options) => {\n\treturn new V1InngestExecution(options);\n};\nvar V1InngestExecution = class extends _InngestExecution_js__WEBPACK_IMPORTED_MODULE_3__.InngestExecution {\n\tversion = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V1;\n\tstate;\n\tfnArg;\n\tcheckpointHandlers;\n\ttimeoutDuration = 1e3 * 10;\n\texecution;\n\tuserFnToRun;\n\t/**\n\t* If we're supposed to run a particular step via `requestedRunStep`, this\n\t* will be a `Promise` that resolves after no steps have been found for\n\t* `timeoutDuration` milliseconds.\n\t*\n\t* If we're not supposed to run a particular step, this will be `undefined`.\n\t*/\n\ttimeout;\n\t/**\n\t* If we're checkpointing and have been given a maximum runtime, this will be\n\t* a `Promise` that resolves after that duration has elapsed, allowing us to\n\t* ensure that we end the execution in good time, especially in serverless\n\t* environments.\n\t*/\n\tcheckpointingMaxRuntimeTimer;\n\tconstructor(rawOptions) {\n\t\tconst options = {\n\t\t\t...rawOptions,\n\t\t\tstepMode: rawOptions.stepMode ?? _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async\n\t\t};\n\t\tsuper(options);\n\t\t/**\n\t\t* Check we have everything we need for checkpointing\n\t\t*/\n\t\tif (this.options.stepMode === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync) {\n\t\t\tif (!this.options.createResponse) throw new Error(\"createResponse is required for sync step mode\");\n\t\t}\n\t\tthis.userFnToRun = this.getUserFnToRun();\n\t\tthis.state = this.createExecutionState();\n\t\tthis.fnArg = this.createFnArg();\n\t\tthis.checkpointHandlers = this.createCheckpointHandlers();\n\t\tthis.initializeTimer(this.state);\n\t\tthis.initializeCheckpointRuntimeTimer(this.state);\n\t\tthis.debug(\"created new V1 execution for run;\", this.options.requestedRunStep ? `wanting to run step \"${this.options.requestedRunStep}\"` : \"discovering steps\");\n\t\tthis.debug(\"existing state keys:\", Object.keys(this.state.stepState));\n\t}\n\t/**\n\t* Idempotently start the execution of the user's function.\n\t*/\n\tstart() {\n\t\tif (!this.execution) {\n\t\t\tthis.debug(\"starting V1 execution\");\n\t\t\tconst tracer = _opentelemetry_api__WEBPACK_IMPORTED_MODULE_6__.trace.getTracer(\"inngest\", _version_js__WEBPACK_IMPORTED_MODULE_7__.version);\n\t\t\tthis.execution = (0,_als_js__WEBPACK_IMPORTED_MODULE_8__.getAsyncLocalStorage)().then((als) => {\n\t\t\t\treturn als.run({\n\t\t\t\t\tapp: this.options.client,\n\t\t\t\t\texecution: {\n\t\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\t\tinstance: this\n\t\t\t\t\t}\n\t\t\t\t}, async () => {\n\t\t\t\t\treturn tracer.startActiveSpan(\"inngest.execution\", (span) => {\n\t\t\t\t\t\t_otel_access_js__WEBPACK_IMPORTED_MODULE_9__.clientProcessorMap.get(this.options.client)?.declareStartingSpan({\n\t\t\t\t\t\t\tspan,\n\t\t\t\t\t\t\trunId: this.options.runId,\n\t\t\t\t\t\t\ttraceparent: this.options.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.TraceParent],\n\t\t\t\t\t\t\ttracestate: this.options.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.TraceState]\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn this._start().then((result) => {\n\t\t\t\t\t\t\tthis.debug(\"result:\", result);\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t\tspan.end();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this.execution;\n\t}\n\taddMetadata(stepId, kind, scope, op, values) {\n\t\tif (!this.state.metadata) this.state.metadata = /* @__PURE__ */ new Map();\n\t\tconst updates = this.state.metadata.get(stepId) ?? [];\n\t\tupdates.push({\n\t\t\tkind,\n\t\t\tscope,\n\t\t\top,\n\t\t\tvalues\n\t\t});\n\t\tthis.state.metadata.set(stepId, updates);\n\t\treturn true;\n\t}\n\t/**\n\t* Starts execution of the user's function and the core loop.\n\t*/\n\tasync _start() {\n\t\ttry {\n\t\t\tconst allCheckpointHandler = this.getCheckpointHandler(\"\");\n\t\t\tthis.state.hooks = await this.initializeMiddleware();\n\t\t\tawait this.startExecution();\n\t\t\tlet i = 0;\n\t\t\tfor await (const checkpoint of this.state.loop) {\n\t\t\t\tawait allCheckpointHandler(checkpoint, i);\n\t\t\t\tconst result = await this.getCheckpointHandler(checkpoint.type)(checkpoint, i++);\n\t\t\t\tif (result) return result;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\treturn await this.transformOutput({ error });\n\t\t} finally {\n\t\t\tthis.state.loop.return();\n\t\t\tawait this.state.hooks?.beforeResponse?.();\n\t\t}\n\t\t/**\n\t\t* If we're here, the generator somehow finished without returning a value.\n\t\t* This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Core loop finished without returning a value\");\n\t}\n\tasync checkpoint(steps) {\n\t\tif (this.options.stepMode === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync) if (!this.state.checkpointedRun) {\n\t\t\tconst res = await this.options.client[\"inngestApi\"].checkpointNewRun({\n\t\t\t\trunId: this.fnArg.runId,\n\t\t\t\tevent: this.fnArg.event,\n\t\t\t\tsteps\n\t\t\t});\n\t\t\tthis.state.checkpointedRun = {\n\t\t\t\tappId: res.data.app_id,\n\t\t\t\tfnId: res.data.fn_id,\n\t\t\t\ttoken: res.data.token\n\t\t\t};\n\t\t} else await this.options.client[\"inngestApi\"].checkpointSteps({\n\t\t\tappId: this.state.checkpointedRun.appId,\n\t\t\tfnId: this.state.checkpointedRun.fnId,\n\t\t\trunId: this.fnArg.runId,\n\t\t\tsteps\n\t\t});\n\t\telse if (this.options.stepMode === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.AsyncCheckpointing) {\n\t\t\tif (!this.options.queueItemId) throw new Error(\"Missing queueItemId for async checkpointing. This is a bug in the Inngest SDK.\");\n\t\t\tif (!this.options.internalFnId) throw new Error(\"Missing internalFnId for async checkpointing. This is a bug in the Inngest SDK.\");\n\t\t\tawait this.options.client[\"inngestApi\"].checkpointStepsAsync({\n\t\t\t\trunId: this.fnArg.runId,\n\t\t\t\tfnId: this.options.internalFnId,\n\t\t\t\tqueueItemId: this.options.queueItemId,\n\t\t\t\tsteps\n\t\t\t});\n\t\t} else throw new Error(\"Checkpointing is only supported in Sync and AsyncCheckpointing step modes. This is a bug in the Inngest SDK.\");\n\t}\n\tasync checkpointAndSwitchToAsync(steps) {\n\t\tawait this.checkpoint(steps);\n\t\tif (!this.state.checkpointedRun?.token) throw new Error(\"Failed to checkpoint and switch to async mode\");\n\t\treturn {\n\t\t\ttype: \"change-mode\",\n\t\t\tctx: this.fnArg,\n\t\t\tops: this.ops,\n\t\t\tto: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async,\n\t\t\ttoken: this.state.checkpointedRun?.token\n\t\t};\n\t}\n\t/**\n\t* Returns whether we're in the final attempt of execution, or `null` if we\n\t* can't determine this in the SDK.\n\t*/\n\tinFinalAttempt() {\n\t\tif (typeof this.fnArg.maxAttempts !== \"number\") return null;\n\t\treturn this.fnArg.attempt + 1 >= this.fnArg.maxAttempts;\n\t}\n\t/**\n\t* Creates a handler for every checkpoint type, defining what to do when we\n\t* reach that checkpoint in the core loop.\n\t*/\n\tcreateCheckpointHandlers() {\n\t\tconst commonCheckpointHandler = (checkpoint) => {\n\t\t\tthis.debug(`${this.options.stepMode} checkpoint:`, checkpoint);\n\t\t};\n\t\tconst stepRanHandler = async (stepResult) => {\n\t\t\tconst transformResult = await this.transformOutput(stepResult);\n\t\t\t/**\n\t\t\t* Transforming output will always return either function rejection or\n\t\t\t* resolution. In most cases, this can be immediately returned, but in\n\t\t\t* this particular case we want to handle it differently.\n\t\t\t*/\n\t\t\tif (transformResult.type === \"function-resolved\") return {\n\t\t\t\ttype: \"step-ran\",\n\t\t\t\tctx: transformResult.ctx,\n\t\t\t\tops: transformResult.ops,\n\t\t\t\tstep: {\n\t\t\t\t\t...stepResult,\n\t\t\t\t\tdata: transformResult.data\n\t\t\t\t}\n\t\t\t};\n\t\t\telse if (transformResult.type === \"function-rejected\") {\n\t\t\t\tconst stepForResponse = {\n\t\t\t\t\t...stepResult,\n\t\t\t\t\terror: transformResult.error\n\t\t\t\t};\n\t\t\t\tif (stepResult.op === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepFailed) {\n\t\t\t\t\tconst ser = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.serializeError)(transformResult.error);\n\t\t\t\t\tstepForResponse.data = {\n\t\t\t\t\t\t__serialized: true,\n\t\t\t\t\t\tname: ser.name,\n\t\t\t\t\t\tmessage: ser.message,\n\t\t\t\t\t\tstack: \"\"\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"step-ran\",\n\t\t\t\t\tctx: transformResult.ctx,\n\t\t\t\t\tops: transformResult.ops,\n\t\t\t\t\tretriable: transformResult.retriable,\n\t\t\t\t\tstep: stepForResponse\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn transformResult;\n\t\t};\n\t\tconst maybeReturnNewSteps = async () => {\n\t\t\tconst newSteps = await this.filterNewSteps(Array.from(this.state.steps.values()));\n\t\t\tif (newSteps) return {\n\t\t\t\ttype: \"steps-found\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\tsteps: newSteps\n\t\t\t};\n\t\t};\n\t\tconst syncHandlers = {\n\t\t\t\"\": commonCheckpointHandler,\n\t\t\t\"function-resolved\": async (checkpoint, i) => {\n\t\t\t\tawait this.checkpoint([{\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.RunComplete,\n\t\t\t\t\tid: _internals.hashId(\"complete\"),\n\t\t\t\t\tdata: await this.options.createResponse(checkpoint.data)\n\t\t\t\t}]);\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"function-resolved\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tdata: checkpoint.data\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"function-rejected\": (checkpoint) => {\n\t\t\t\tif (this.inFinalAttempt()) return {\n\t\t\t\t\ttype: \"function-rejected\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\terror: checkpoint.error,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tretriable: false\n\t\t\t\t};\n\t\t\t\treturn this.checkpointAndSwitchToAsync([{\n\t\t\t\t\tid: _internals.hashId(\"complete\"),\n\t\t\t\t\tdisplayName: \"complete\",\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepError,\n\t\t\t\t\terror: checkpoint.error\n\t\t\t\t}]);\n\t\t\t},\n\t\t\t\"step-not-found\": ({ step }) => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"function-rejected\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\terror: /* @__PURE__ */ new Error(\"Step not found when checkpointing; this should never happen\"),\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tretriable: false\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"steps-found\": async ({ steps }) => {\n\t\t\t\tif (steps.length !== 1 || steps[0].mode !== _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync) return this.checkpointAndSwitchToAsync(steps.map((step) => ({\n\t\t\t\t\t...step,\n\t\t\t\t\tid: step.hashedId\n\t\t\t\t})));\n\t\t\t\tconst result = await this.executeStep(steps[0]);\n\t\t\t\tif (result.error) return this.checkpointAndSwitchToAsync([result]);\n\t\t\t\tawait this.checkpoint([this.resumeStepWithResult(result)]);\n\t\t\t},\n\t\t\t\"checkpointing-runtime-reached\": () => {\n\t\t\t\treturn this.checkpointAndSwitchToAsync([{\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.DiscoveryRequest,\n\t\t\t\t\tid: _internals.hashId(\"discovery-request\")\n\t\t\t\t}]);\n\t\t\t}\n\t\t};\n\t\tconst asyncHandlers = {\n\t\t\t\"\": commonCheckpointHandler,\n\t\t\t\"function-resolved\": async ({ data }) => {\n\t\t\t\tif (this.options.createResponse) data = await this.options.createResponse(data);\n\t\t\t\treturn await this.transformOutput({ data });\n\t\t\t},\n\t\t\t\"function-rejected\": async (checkpoint) => {\n\t\t\t\treturn await this.transformOutput({ error: checkpoint.error });\n\t\t\t},\n\t\t\t\"steps-found\": async ({ steps }) => {\n\t\t\t\tconst stepResult = await this.tryExecuteStep(steps);\n\t\t\t\tif (stepResult) return stepRanHandler(stepResult);\n\t\t\t\treturn maybeReturnNewSteps();\n\t\t\t},\n\t\t\t\"step-not-found\": ({ step }) => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"step-not-found\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tstep\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"checkpointing-runtime-reached\": () => {\n\t\t\t\tthrow new Error(\"Checkpointing maximum runtime reached, but this is not in a checkpointing step mode. This is a bug in the Inngest SDK.\");\n\t\t\t}\n\t\t};\n\t\tconst asyncCheckpointingHandlers = {\n\t\t\t\"\": commonCheckpointHandler,\n\t\t\t\"function-resolved\": async (checkpoint, i) => {\n\t\t\t\tconst output = await asyncHandlers[\"function-resolved\"](checkpoint, i);\n\t\t\t\tif (output?.type === \"function-resolved\") return {\n\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\tctx: output.ctx,\n\t\t\t\t\tops: output.ops,\n\t\t\t\t\tsteps: [{\n\t\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.RunComplete,\n\t\t\t\t\t\tid: _internals.hashId(\"complete\"),\n\t\t\t\t\t\tdata: output.data\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"function-rejected\": asyncHandlers[\"function-rejected\"],\n\t\t\t\"step-not-found\": asyncHandlers[\"step-not-found\"],\n\t\t\t\"steps-found\": async ({ steps }) => {\n\t\t\t\tif (this.options.requestedRunStep) {\n\t\t\t\t\tthis.debug(\"async checkpointing looking for step to run, so attempting to find it\");\n\t\t\t\t\tconst step = steps.find((s) => s.hashedId === this.options.requestedRunStep && s.fn);\n\t\t\t\t\tif (step) {\n\t\t\t\t\t\tconst stepResult = await this.executeStep(step);\n\t\t\t\t\t\tif (stepResult) return stepRanHandler(stepResult);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst { stepsToResume, newSteps } = steps.reduce((acc, step) => {\n\t\t\t\t\tif (!step.hasStepState) acc.newSteps.push(step);\n\t\t\t\t\telse if (!step.fulfilled) acc.stepsToResume.push(step);\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {\n\t\t\t\t\tstepsToResume: [],\n\t\t\t\t\tnewSteps: []\n\t\t\t\t});\n\t\t\t\tthis.debug(\"split found steps in to:\", {\n\t\t\t\t\tstepsToResume: stepsToResume.length,\n\t\t\t\t\tnewSteps: newSteps.length\n\t\t\t\t});\n\t\t\t\tif (!this.options.requestedRunStep && newSteps.length) {\n\t\t\t\t\tconst stepResult = await this.tryExecuteStep(newSteps);\n\t\t\t\t\tif (stepResult) {\n\t\t\t\t\t\tthis.debug(`executed step \"${stepResult.id}\" successfully`);\n\t\t\t\t\t\tif (stepResult.error) return stepRanHandler(stepResult);\n\t\t\t\t\t\tthis.debug(\"checkpointing and resuming execution after step run\");\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.checkpoint([this.resumeStepWithResult(stepResult)]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tthis.debug(\"error checkpointing after step run, so falling back to async\", err);\n\t\t\t\t\t\t\treturn stepRanHandler(stepResult);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn maybeReturnNewSteps();\n\t\t\t\t}\n\t\t\t\tif (stepsToResume.length) {\n\t\t\t\t\tthis.debug(`resuming ${stepsToResume.length} steps`);\n\t\t\t\t\tfor (const st of stepsToResume) this.resumeStepWithResult({\n\t\t\t\t\t\t...st,\n\t\t\t\t\t\tid: st.hashedId\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"checkpointing-runtime-reached\": async () => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tsteps: [{\n\t\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.DiscoveryRequest,\n\t\t\t\t\t\tid: _internals.hashId(\"discovery-request\")\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\treturn {\n\t\t\t[_types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async]: asyncHandlers,\n\t\t\t[_types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync]: syncHandlers,\n\t\t\t[_types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.AsyncCheckpointing]: asyncCheckpointingHandlers\n\t\t};\n\t}\n\tgetCheckpointHandler(type) {\n\t\treturn this.checkpointHandlers[this.options.stepMode][type];\n\t}\n\tasync tryExecuteStep(steps) {\n\t\tconst hashedStepIdToRun = this.options.requestedRunStep || this.getEarlyExecRunStep(steps);\n\t\tif (!hashedStepIdToRun) return;\n\t\tconst step = steps.find((step$1) => step$1.hashedId === hashedStepIdToRun && step$1.fn);\n\t\tif (step) return await this.executeStep(step);\n\t\tthis.timeout?.reset();\n\t}\n\t/**\n\t* Given a list of outgoing ops, decide if we can execute an op early and\n\t* return the ID of the step to execute if we can.\n\t*/\n\tgetEarlyExecRunStep(steps) {\n\t\t/**\n\t\t* We may have been disabled due to parallelism, in which case we can't\n\t\t* immediately execute unless explicitly requested.\n\t\t*/\n\t\tif (this.options.disableImmediateExecution) return;\n\t\tconst unfulfilledSteps = steps.filter((step) => !step.fulfilled);\n\t\tif (unfulfilledSteps.length !== 1) return;\n\t\tconst op = unfulfilledSteps[0];\n\t\tif (op && op.op === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepPlanned) return op.hashedId;\n\t}\n\tasync filterNewSteps(foundSteps) {\n\t\tif (this.options.requestedRunStep) return;\n\t\tconst newSteps = foundSteps.reduce((acc, step) => {\n\t\t\tif (!step.hasStepState) acc.push(step);\n\t\t\treturn acc;\n\t\t}, []);\n\t\tif (!newSteps.length) return;\n\t\t/**\n\t\t* We're finishing up; let's trigger the last of the hooks.\n\t\t*/\n\t\tawait this.state.hooks?.afterMemoization?.();\n\t\tawait this.state.hooks?.beforeExecution?.();\n\t\tawait this.state.hooks?.afterExecution?.();\n\t\tconst stepList = newSteps.map((step) => ({\n\t\t\tdisplayName: step.displayName,\n\t\t\top: step.op,\n\t\t\tid: step.hashedId,\n\t\t\tname: step.name,\n\t\t\topts: step.opts,\n\t\t\tuserland: step.userland\n\t\t}));\n\t\t/**\n\t\t* We also run `onSendEvent` middleware hooks against `step.invoke()` steps\n\t\t* to ensure that their `data` is transformed correctly.\n\t\t*/\n\t\treturn await this.transformNewSteps(stepList);\n\t}\n\t/**\n\t* Using middleware, transform any newly-found steps before returning them to\n\t* an Inngest Server.\n\t*/\n\tasync transformNewSteps(steps) {\n\t\treturn Promise.all(steps.map(async (step) => {\n\t\t\tif (step.op !== _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.InvokeFunction) return step;\n\t\t\t/**\n\t\t\t* For each event being sent, create a new `onSendEvent` hook stack to\n\t\t\t* process it. We do this as middleware hooks are intended to run once\n\t\t\t* during each lifecycle (onFunctionRun or onSendEvent) and here, a hook\n\t\t\t* is run for every single event.\n\t\t\t*\n\t\t\t* This is done because a developer can use this hook to filter out\n\t\t\t* events entirely; if we batch all of the events together, we can't\n\t\t\t* tell which ones were filtered out if we're processing >1 invocation\n\t\t\t* here.\n\t\t\t*/\n\t\t\tconst transformedPayload = await (await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_11__.getHookStack)(this.options.fn[\"middleware\"], \"onSendEvent\", void 0, {\n\t\t\t\ttransformInput: (prev, output) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t...output\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\t\treturn { result: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t} };\n\t\t\t\t}\n\t\t\t})).transformInput?.({ payloads: [{\n\t\t\t\t...step.opts?.payload ?? {},\n\t\t\t\tname: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.internalEvents.FunctionInvoked\n\t\t\t}] });\n\t\t\tconst newPayload = _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__.invokePayloadSchema.parse(transformedPayload?.payloads?.[0] ?? {});\n\t\t\treturn {\n\t\t\t\t...step,\n\t\t\t\topts: {\n\t\t\t\t\t...step.opts,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\t...step.opts?.payload ?? {},\n\t\t\t\t\t\t...newPayload\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}));\n\t}\n\tasync executeStep({ id, name, opts, fn, displayName, userland, hashedId }) {\n\t\tthis.debug(`preparing to execute step \"${id}\"`);\n\t\tthis.timeout?.clear();\n\t\tawait this.state.hooks?.afterMemoization?.();\n\t\tawait this.state.hooks?.beforeExecution?.();\n\t\tconst outgoingOp = {\n\t\t\tid: hashedId,\n\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepRun,\n\t\t\tname,\n\t\t\topts,\n\t\t\tdisplayName,\n\t\t\tuserland\n\t\t};\n\t\tthis.state.executingStep = outgoingOp;\n\t\tconst store = await (0,_als_js__WEBPACK_IMPORTED_MODULE_8__.getAsyncCtx)();\n\t\tif (store?.execution) store.execution.executingStep = {\n\t\t\tid,\n\t\t\tname: displayName\n\t\t};\n\t\tthis.debug(`executing step \"${id}\"`);\n\t\tlet interval;\n\t\treturn (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.goIntervalTiming)(() => (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.runAsPromise)(fn)).finally(async () => {\n\t\t\tthis.debug(`finished executing step \"${id}\"`);\n\t\t\tdelete this.state.executingStep;\n\t\t\tif (store?.execution) delete store.execution.executingStep;\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t}).then(async ({ resultPromise, interval: _interval }) => {\n\t\t\tinterval = _interval;\n\t\t\tconst metadata = this.state.metadata?.get(id);\n\t\t\treturn {\n\t\t\t\t...outgoingOp,\n\t\t\t\tdata: await resultPromise,\n\t\t\t\t...metadata && metadata.length > 0 ? { metadata } : {}\n\t\t\t};\n\t\t}).catch((error) => {\n\t\t\tlet errorIsRetriable = true;\n\t\t\tif (error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_14__.NonRetriableError) errorIsRetriable = false;\n\t\t\telse if (this.fnArg.maxAttempts && this.fnArg?.maxAttempts - 1 === this.fnArg.attempt) errorIsRetriable = false;\n\t\t\tconst metadata = this.state.metadata?.get(id);\n\t\t\tif (errorIsRetriable) return {\n\t\t\t\t...outgoingOp,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepError,\n\t\t\t\terror,\n\t\t\t\t...metadata && metadata.length > 0 ? { metadata } : {}\n\t\t\t};\n\t\t\telse return {\n\t\t\t\t...outgoingOp,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepFailed,\n\t\t\t\terror,\n\t\t\t\t...metadata && metadata.length > 0 ? { metadata } : {}\n\t\t\t};\n\t\t}).then((op) => ({\n\t\t\t...op,\n\t\t\ttiming: interval\n\t\t}));\n\t}\n\t/**\n\t* Starts execution of the user's function, including triggering checkpoints\n\t* and middleware hooks where appropriate.\n\t*/\n\tasync startExecution() {\n\t\t/**\n\t\t* Mutate input as neccessary based on middleware.\n\t\t*/\n\t\tawait this.transformInput();\n\t\t/**\n\t\t* Start the timer to time out the run if needed.\n\t\t*/\n\t\tthis.timeout?.start();\n\t\tthis.checkpointingMaxRuntimeTimer?.start();\n\t\tawait this.state.hooks?.beforeMemoization?.();\n\t\t/**\n\t\t* If we had no state to begin with, immediately end the memoization phase.\n\t\t*/\n\t\tif (this.state.allStateUsed()) {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t}\n\t\t/**\n\t\t* Trigger the user's function.\n\t\t*/\n\t\t(0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.runAsPromise)(() => this.userFnToRun(this.fnArg)).finally(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t}).then((data) => {\n\t\t\tthis.state.setCheckpoint({\n\t\t\t\ttype: \"function-resolved\",\n\t\t\t\tdata\n\t\t\t});\n\t\t}).catch((error) => {\n\t\t\tthis.state.setCheckpoint({\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\terror\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t* Using middleware, transform input before running.\n\t*/\n\tasync transformInput() {\n\t\tconst inputMutations = await this.state.hooks?.transformInput?.({\n\t\t\tctx: { ...this.fnArg },\n\t\t\tsteps: Object.values(this.state.stepState),\n\t\t\tfn: this.options.fn,\n\t\t\treqArgs: this.options.reqArgs\n\t\t});\n\t\tif (inputMutations?.ctx) this.fnArg = inputMutations.ctx;\n\t\tif (inputMutations?.steps) this.state.stepState = Object.fromEntries(inputMutations.steps.map((step) => [step.id, step]));\n\t}\n\t/**\n\t* Using middleware, transform output before returning.\n\t*/\n\tasync transformOutput(dataOrError) {\n\t\tconst output = { ...dataOrError };\n\t\tconst isStepExecution = Boolean(this.state.executingStep);\n\t\tconst transformedOutput = await this.state.hooks?.transformOutput?.({\n\t\t\tresult: { ...output },\n\t\t\tstep: this.state.executingStep\n\t\t});\n\t\tconst { data, error } = {\n\t\t\t...output,\n\t\t\t...transformedOutput?.result\n\t\t};\n\t\tif (!isStepExecution) await this.state.hooks?.finished?.({ result: { ...typeof error !== \"undefined\" ? { error } : { data } } });\n\t\tif (typeof error !== \"undefined\") {\n\t\t\t/**\n\t\t\t* Ensure we give middleware the chance to decide on retriable behaviour\n\t\t\t* by looking at the error returned from output transformation.\n\t\t\t*/\n\t\t\tlet retriable = !(error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_14__.NonRetriableError || error instanceof _StepError_js__WEBPACK_IMPORTED_MODULE_15__.StepError && error === this.state.recentlyRejectedStepError);\n\t\t\tif (retriable && error instanceof _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_16__.RetryAfterError) retriable = error.retryAfter;\n\t\t\tconst serializedError = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.minifyPrettyError)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.serializeError)(error));\n\t\t\treturn {\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\terror: serializedError,\n\t\t\t\tretriable\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\ttype: \"function-resolved\",\n\t\t\tctx: this.fnArg,\n\t\t\tops: this.ops,\n\t\t\tdata: (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_17__.undefinedToNull)(data)\n\t\t};\n\t}\n\tcreateExecutionState() {\n\t\tconst d = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.createDeferredPromiseWithStack)();\n\t\tlet checkpointResolve = d.deferred.resolve;\n\t\tconst checkpointResults = d.results;\n\t\tconst loop = (async function* (cleanUp) {\n\t\t\ttry {\n\t\t\t\twhile (true) {\n\t\t\t\t\tconst res = (await checkpointResults.next()).value;\n\t\t\t\t\tif (res) yield res;\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tcleanUp?.();\n\t\t\t}\n\t\t})(() => {\n\t\t\tthis.timeout?.clear();\n\t\t\tthis.checkpointingMaxRuntimeTimer?.clear();\n\t\t\tcheckpointResults.return();\n\t\t});\n\t\tconst stepsToFulfill = Object.keys(this.options.stepState).length;\n\t\treturn {\n\t\t\tstepState: this.options.stepState,\n\t\t\tstepsToFulfill,\n\t\t\tsteps: /* @__PURE__ */ new Map(),\n\t\t\tloop,\n\t\t\thasSteps: Boolean(stepsToFulfill),\n\t\t\tstepCompletionOrder: [...this.options.stepCompletionOrder],\n\t\t\tremainingStepsToBeSeen: new Set(this.options.stepCompletionOrder),\n\t\t\tsetCheckpoint: (checkpoint) => {\n\t\t\t\t({resolve: checkpointResolve} = checkpointResolve(checkpoint));\n\t\t\t},\n\t\t\tallStateUsed: () => {\n\t\t\t\treturn this.state.remainingStepsToBeSeen.size === 0;\n\t\t\t},\n\t\t\tmetadata: /* @__PURE__ */ new Map()\n\t\t};\n\t}\n\tget ops() {\n\t\treturn Object.fromEntries(this.state.steps);\n\t}\n\tcreateFnArg() {\n\t\tconst step = this.createStepTools();\n\t\tlet fnArg = {\n\t\t\t...this.options.data,\n\t\t\tstep\n\t\t};\n\t\t/**\n\t\t* Handle use of the `onFailure` option by deserializing the error.\n\t\t*/\n\t\tif (this.options.isFailureHandler) {\n\t\t\tconst eventData = zod_v3__WEBPACK_IMPORTED_MODULE_18__.object({ error: _types_js__WEBPACK_IMPORTED_MODULE_5__.jsonErrorSchema }).parse(fnArg.event?.data);\n\t\t\tfnArg = {\n\t\t\t\t...fnArg,\n\t\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.deserializeError)(eventData.error)\n\t\t\t};\n\t\t}\n\t\treturn this.options.transformCtx?.(fnArg) ?? fnArg;\n\t}\n\tcreateStepTools() {\n\t\t/**\n\t\t* A list of steps that have been found and are being rolled up before being\n\t\t* reported to the core loop.\n\t\t*/\n\t\tconst foundStepsToReport = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A map of the subset of found steps to report that have not yet been\n\t\t* handled. Used for fast access to steps that need to be handled in order.\n\t\t*/\n\t\tconst unhandledFoundStepsToReport = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A map of the latest sequential step indexes found for each step ID. Used\n\t\t* to ensure that we don't index steps in parallel.\n\t\t*\n\t\t* Note that these must be sequential; if we've seen or assigned `a:1`,\n\t\t* `a:2` and `a:4`, the latest sequential step index is `2`.\n\t\t*\n\t\t*/\n\t\tconst expectedNextStepIndexes = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* An ordered list of step IDs that have yet to be handled in this\n\t\t* execution. Used to ensure that we handle steps in the order they were\n\t\t* found and based on the `stepCompletionOrder` in this execution's state.\n\t\t*/\n\t\tconst remainingStepCompletionOrder = this.state.stepCompletionOrder.slice();\n\t\t/**\n\t\t* A promise that's used to ensure that step reporting cannot be run more than\n\t\t* once in a given asynchronous time span.\n\t\t*/\n\t\tlet foundStepsReportPromise;\n\t\t/**\n\t\t* A promise that's used to represent middleware hooks running before\n\t\t* execution.\n\t\t*/\n\t\tlet beforeExecHooksPromise;\n\t\t/**\n\t\t* A flag used to ensure that we only warn about parallel indexing once per\n\t\t* execution to avoid spamming the console.\n\t\t*/\n\t\tlet warnOfParallelIndexing = false;\n\t\t/**\n\t\t* Counts the number of times we've extended this tick.\n\t\t*/\n\t\tlet tickExtensionCount = 0;\n\t\t/**\n\t\t* Given a colliding step ID, maybe warn the user about parallel indexing.\n\t\t*/\n\t\tconst maybeWarnOfParallelIndexing = (userlandCollisionId) => {\n\t\t\tif (warnOfParallelIndexing) return;\n\t\t\tconst hashedCollisionId = _internals.hashId(userlandCollisionId);\n\t\t\tif (this.state.steps.has(hashedCollisionId)) {\n\t\t\t\tif (!foundStepsToReport.has(hashedCollisionId)) {\n\t\t\t\t\twarnOfParallelIndexing = true;\n\t\t\t\t\tthis.options.client[\"warnMetadata\"]({ run_id: this.fnArg.runId }, _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.ErrCode.AUTOMATIC_PARALLEL_INDEXING, (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.prettyError)({\n\t\t\t\t\t\ttype: \"warn\",\n\t\t\t\t\t\twhatHappened: \"We detected that you have multiple steps with the same ID.\",\n\t\t\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.ErrCode.AUTOMATIC_PARALLEL_INDEXING,\n\t\t\t\t\t\twhy: `This can happen if you're using the same ID for multiple steps across different chains of parallel work. We found the issue with step \"${userlandCollisionId}\".`,\n\t\t\t\t\t\treassurance: \"Your function is still running, though it may exhibit unexpected behaviour.\",\n\t\t\t\t\t\tconsequences: \"Using the same IDs across parallel chains of work can cause unexpected behaviour.\",\n\t\t\t\t\t\ttoFixNow: \"We recommend using a unique ID for each step, especially those happening in parallel.\"\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t* A helper used to report steps to the core loop. Used after adding an item\n\t\t* to `foundStepsToReport`.\n\t\t*/\n\t\tconst reportNextTick = () => {\n\t\t\tif (foundStepsReportPromise) return;\n\t\t\tlet extensionPromise;\n\t\t\tif (++tickExtensionCount >= 10) {\n\t\t\t\ttickExtensionCount = 0;\n\t\t\t\textensionPromise = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.resolveNextTick)();\n\t\t\t} else extensionPromise = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.resolveAfterPending)();\n\t\t\tfoundStepsReportPromise = extensionPromise.then(() => beforeExecHooksPromise).then(() => {\n\t\t\t\tfoundStepsReportPromise = void 0;\n\t\t\t\tfor (let i = 0; i < remainingStepCompletionOrder.length; i++) {\n\t\t\t\t\tconst nextStepId = remainingStepCompletionOrder[i];\n\t\t\t\t\tif (!nextStepId) continue;\n\t\t\t\t\tif (unhandledFoundStepsToReport.get(nextStepId)?.handle()) {\n\t\t\t\t\t\tremainingStepCompletionOrder.splice(i, 1);\n\t\t\t\t\t\tunhandledFoundStepsToReport.delete(nextStepId);\n\t\t\t\t\t\treportNextTick();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst steps = [...foundStepsToReport.values()];\n\t\t\t\tfoundStepsToReport.clear();\n\t\t\t\tunhandledFoundStepsToReport.clear();\n\t\t\t\tthis.state.setCheckpoint({\n\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\tsteps\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\t/**\n\t\t* A helper used to push a step to the list of steps to report.\n\t\t*/\n\t\tconst pushStepToReport = (step) => {\n\t\t\tfoundStepsToReport.set(step.hashedId, step);\n\t\t\tunhandledFoundStepsToReport.set(step.hashedId, step);\n\t\t\treportNextTick();\n\t\t};\n\t\tconst stepHandler = async ({ args, matchOp, opts }) => {\n\t\t\tawait beforeExecHooksPromise;\n\t\t\tconst opId = matchOp((0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__.getStepOptions)(args[0]), ...args.slice(1));\n\t\t\tif (this.state.executingStep)\n /**\n\t\t\t* If a step is found after asynchronous actions during another step's\n\t\t\t* execution, everything is fine. The problem here is if we've found\n\t\t\t* that a step nested inside another a step, which is something we don't\n\t\t\t* support at the time of writing.\n\t\t\t*\n\t\t\t* In this case, we could use something like Async Hooks to understand\n\t\t\t* how the step is being triggered, though this isn't available in all\n\t\t\t* environments.\n\t\t\t*\n\t\t\t* Therefore, we'll only show a warning here to indicate that this is\n\t\t\t* potentially an issue.\n\t\t\t*/\n\t\t\tthis.options.client[\"warnMetadata\"]({ run_id: this.fnArg.runId }, _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.ErrCode.NESTING_STEPS, (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.prettyError)({\n\t\t\t\twhatHappened: `We detected that you have nested \\`step.*\\` tooling in \\`${opId.displayName ?? opId.id}\\``,\n\t\t\t\tconsequences: \"Nesting `step.*` tooling is not supported.\",\n\t\t\t\ttype: \"warn\",\n\t\t\t\treassurance: \"It's possible to see this warning if steps are separated by regular asynchronous calls, which is fine.\",\n\t\t\t\tstack: true,\n\t\t\t\ttoFixNow: \"Make sure you're not using `step.*` tooling inside of other `step.*` tooling. If you need to compose steps together, you can create a new async function and call it from within your step function, or use promise chaining.\",\n\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.ErrCode.NESTING_STEPS\n\t\t\t}));\n\t\t\tif (this.state.steps.has(_internals.hashId(opId.id))) {\n\t\t\t\tconst originalId = opId.id;\n\t\t\t\tmaybeWarnOfParallelIndexing(originalId);\n\t\t\t\tconst expectedNextIndex = expectedNextStepIndexes.get(originalId) ?? 1;\n\t\t\t\tfor (let i = expectedNextIndex;; i++) {\n\t\t\t\t\tconst newId = originalId + _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__.STEP_INDEXING_SUFFIX + i;\n\t\t\t\t\tif (!this.state.steps.has(_internals.hashId(newId))) {\n\t\t\t\t\t\texpectedNextStepIndexes.set(originalId, i + 1);\n\t\t\t\t\t\topId.id = newId;\n\t\t\t\t\t\topId.userland.index = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst { promise, resolve, reject } = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.createDeferredPromise)();\n\t\t\tconst hashedId = _internals.hashId(opId.id);\n\t\t\tconst stepState = this.state.stepState[hashedId];\n\t\t\tlet isFulfilled = false;\n\t\t\tif (stepState) {\n\t\t\t\tstepState.seen = true;\n\t\t\t\tthis.state.remainingStepsToBeSeen.delete(hashedId);\n\t\t\t\tif (typeof stepState.input === \"undefined\") isFulfilled = true;\n\t\t\t}\n\t\t\tlet extraOpts;\n\t\t\tlet fnArgs = [...args];\n\t\t\tif (typeof stepState?.input !== \"undefined\" && Array.isArray(stepState.input)) switch (opId.op) {\n\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepPlanned:\n\t\t\t\t\tfnArgs = [...args.slice(0, 2), ...stepState.input];\n\t\t\t\t\textraOpts = { input: [...stepState.input] };\n\t\t\t\t\tbreak;\n\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.AiGateway:\n\t\t\t\t\textraOpts = { body: {\n\t\t\t\t\t\t...typeof opId.opts?.body === \"object\" ? { ...opId.opts.body } : {},\n\t\t\t\t\t\t...stepState.input[0]\n\t\t\t\t\t} };\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst step = {\n\t\t\t\t...opId,\n\t\t\t\topts: {\n\t\t\t\t\t...opId.opts,\n\t\t\t\t\t...extraOpts\n\t\t\t\t},\n\t\t\t\trawArgs: fnArgs,\n\t\t\t\thashedId,\n\t\t\t\tinput: stepState?.input,\n\t\t\t\tfn: opts?.fn ? () => opts.fn?.(...fnArgs) : void 0,\n\t\t\t\tpromise,\n\t\t\t\tfulfilled: isFulfilled,\n\t\t\t\thasStepState: Boolean(stepState),\n\t\t\t\tdisplayName: opId.displayName ?? opId.id,\n\t\t\t\thandled: false,\n\t\t\t\thandle: () => {\n\t\t\t\t\tif (step.handled) return false;\n\t\t\t\t\tthis.debug(`handling step \"${hashedId}\"`);\n\t\t\t\t\tstep.handled = true;\n\t\t\t\t\tconst result = this.state.stepState[hashedId];\n\t\t\t\t\tif (step.fulfilled && result) {\n\t\t\t\t\t\tresult.fulfilled = true;\n\t\t\t\t\t\tPromise.all([\n\t\t\t\t\t\t\tresult.data,\n\t\t\t\t\t\t\tresult.error,\n\t\t\t\t\t\t\tresult.input\n\t\t\t\t\t\t]).then(() => {\n\t\t\t\t\t\t\tif (typeof result.data !== \"undefined\") resolve(result.data);\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthis.state.recentlyRejectedStepError = new _StepError_js__WEBPACK_IMPORTED_MODULE_15__.StepError(opId.id, result.error);\n\t\t\t\t\t\t\t\treject(this.state.recentlyRejectedStepError);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.state.steps.set(hashedId, step);\n\t\t\tthis.state.hasSteps = true;\n\t\t\tpushStepToReport(step);\n\t\t\t/**\n\t\t\t* If this is the last piece of state we had, we've now finished\n\t\t\t* memoizing.\n\t\t\t*/\n\t\t\tif (!beforeExecHooksPromise && this.state.allStateUsed()) await (beforeExecHooksPromise = (async () => {\n\t\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\t})());\n\t\t\treturn promise;\n\t\t};\n\t\treturn (0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__.createStepTools)(this.options.client, this, stepHandler);\n\t}\n\tresumeStepWithResult(resultOp) {\n\t\tconst userlandStep = this.state.steps.get(resultOp.id);\n\t\tif (!userlandStep) throw new Error(\"Step not found in memoization state during async checkpointing; this should never happen and is a bug in the Inngest SDK\");\n\t\tuserlandStep.data = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_17__.undefinedToNull)(resultOp.data);\n\t\tuserlandStep.timing = resultOp.timing;\n\t\tuserlandStep.fulfilled = true;\n\t\tuserlandStep.hasStepState = true;\n\t\tuserlandStep.op = resultOp.op;\n\t\tuserlandStep.id = resultOp.id;\n\t\tthis.state.stepState[resultOp.id] = userlandStep;\n\t\tuserlandStep.handle();\n\t\treturn userlandStep;\n\t}\n\tgetUserFnToRun() {\n\t\tif (!this.options.isFailureHandler) return this.options.fn[\"fn\"];\n\t\tif (!this.options.fn[\"onFailureFn\"])\n /**\n\t\t* Somehow, we've ended up detecting that this is a failure handler but\n\t\t* doesn't have an `onFailure` function. This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Cannot find function `onFailure` handler\");\n\t\treturn this.options.fn[\"onFailureFn\"];\n\t}\n\tinitializeTimer(state) {\n\t\tif (!this.options.requestedRunStep) return;\n\t\tthis.timeout = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.createTimeoutPromise)(this.timeoutDuration);\n\t\tthis.timeout.then(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t\tstate.setCheckpoint({\n\t\t\t\ttype: \"step-not-found\",\n\t\t\t\tstep: {\n\t\t\t\t\tid: this.options.requestedRunStep,\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepNotFound\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tinitializeCheckpointRuntimeTimer(state) {\n\t\tif (!this.options.checkpointingConfig) return;\n\t\tif (typeof this.options.checkpointingConfig === \"boolean\") return;\n\t\tif (!this.options.checkpointingConfig.maxRuntime) return;\n\t\tconst maxRuntimeMs = (0,_helpers_temporal_js__WEBPACK_IMPORTED_MODULE_19__.isTemporalDuration)(this.options.checkpointingConfig.maxRuntime) ? this.options.checkpointingConfig.maxRuntime.total({ unit: \"milliseconds\" }) : typeof this.options.checkpointingConfig.maxRuntime === \"string\" ? ms__WEBPACK_IMPORTED_MODULE_1__(this.options.checkpointingConfig.maxRuntime) : this.options.checkpointingConfig.maxRuntime;\n\t\tif (!Number.isFinite(maxRuntimeMs) || maxRuntimeMs <= 0) return;\n\t\tthis.checkpointingMaxRuntimeTimer = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.createTimeoutPromise)(maxRuntimeMs);\n\t\tthis.checkpointingMaxRuntimeTimer.then(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t\tstate.setCheckpoint({ type: \"checkpointing-runtime-reached\" });\n\t\t});\n\t}\n\tasync initializeMiddleware() {\n\t\tconst ctx = this.options.data;\n\t\treturn await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_11__.getHookStack)(this.options.fn[\"middleware\"], \"onFunctionRun\", {\n\t\t\tctx,\n\t\t\tfn: this.options.fn,\n\t\t\tsteps: Object.values(this.options.stepState),\n\t\t\treqArgs: this.options.reqArgs\n\t\t}, {\n\t\t\ttransformInput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tctx: {\n\t\t\t\t\t\t...prev.ctx,\n\t\t\t\t\t\t...output?.ctx\n\t\t\t\t\t},\n\t\t\t\t\tfn: this.options.fn,\n\t\t\t\t\tsteps: prev.steps.map((step, i) => ({\n\t\t\t\t\t\t...step,\n\t\t\t\t\t\t...output?.steps?.[i]\n\t\t\t\t\t})),\n\t\t\t\t\treqArgs: prev.reqArgs\n\t\t\t\t};\n\t\t\t},\n\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tresult: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t},\n\t\t\t\t\tstep: prev.step\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n};\nconst hashId = (id) => {\n\treturn sha1().update(id).digest(\"hex\");\n};\nconst hashOp = (op) => {\n\treturn {\n\t\t...op,\n\t\tid: hashId(op.id)\n\t};\n};\n/**\n* Exported for testing.\n*/\nconst _internals = {\n\thashOp,\n\thashId\n};\n\n//#endregion\n\n//# sourceMappingURL=v1.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi92MS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RDtBQUNEO0FBQ2xCO0FBQzRDO0FBQ2hCO0FBQ2Q7QUFDRztBQUN3RDtBQUN2RDtBQUNOO0FBQ0Q7QUFDd0k7QUFDL0g7QUFDUDtBQUNaO0FBQ3dFO0FBQ3pGO0FBQ2dCO0FBQ2Q7QUFDVDs7QUFFcEI7QUFDQSxpQ0FBaUMsc0VBQVE7QUFDekM7QUFDQTtBQUNBLENBQUM7QUFDRCxRQUFRLE9BQU8sRUFBRSxvQ0FBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsa0VBQWdCO0FBQ3ZELFdBQVcsZ0VBQWdCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywrQ0FBUTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLCtDQUFRO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsMkRBQTJELDhCQUE4QjtBQUN4STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFEQUFLLHNCQUFzQixnREFBTztBQUNwRCxvQkFBb0IsNkRBQW9CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLE1BQU0sK0RBQWtCO0FBQ3hCO0FBQ0E7QUFDQSx5Q0FBeUMsMERBQVU7QUFDbkQsd0NBQXdDLDBEQUFVO0FBQ2xELE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNB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TUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNEQ7QUFDNUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvZXhlY3V0aW9uL3YxLmpzPzAyNDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgZ2V0QXN5bmNDdHgsIGdldEFzeW5jTG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vYWxzLmpzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uLy4uL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IEV4ZWN1dGlvblZlcnNpb24sIGhlYWRlcktleXMsIGludGVybmFsRXZlbnRzIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvY29uc3RzLmpzXCI7XG5pbXBvcnQgeyBTdGVwTW9kZSwgU3RlcE9wQ29kZSwganNvbkVycm9yU2NoZW1hIH0gZnJvbSBcIi4uLy4uL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBJbm5nZXN0RXhlY3V0aW9uIH0gZnJvbSBcIi4vSW5uZ2VzdEV4ZWN1dGlvbi5qc1wiO1xuaW1wb3J0IHsgTm9uUmV0cmlhYmxlRXJyb3IgfSBmcm9tIFwiLi4vTm9uUmV0cmlhYmxlRXJyb3IuanNcIjtcbmltcG9ydCB7IEVyckNvZGUsIGRlc2VyaWFsaXplRXJyb3IsIG1pbmlmeVByZXR0eUVycm9yLCBwcmV0dHlFcnJvciwgc2VyaWFsaXplRXJyb3IgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IHVuZGVmaW5lZFRvTnVsbCB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL2Z1bmN0aW9ucy5qc1wiO1xuaW1wb3J0IHsgZ2V0SG9va1N0YWNrIH0gZnJvbSBcIi4uL0lubmdlc3RNaWRkbGV3YXJlLmpzXCI7XG5pbXBvcnQgeyBjbGllbnRQcm9jZXNzb3JNYXAgfSBmcm9tIFwiLi9vdGVsL2FjY2Vzcy5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRGVmZXJyZWRQcm9taXNlLCBjcmVhdGVEZWZlcnJlZFByb21pc2VXaXRoU3RhY2ssIGNyZWF0ZVRpbWVvdXRQcm9taXNlLCBnb0ludGVydmFsVGltaW5nLCByZXNvbHZlQWZ0ZXJQZW5kaW5nLCByZXNvbHZlTmV4dFRpY2ssIHJ1bkFzUHJvbWlzZSB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL3Byb21pc2VzLmpzXCI7XG5pbXBvcnQgeyBpc1RlbXBvcmFsRHVyYXRpb24gfSBmcm9tIFwiLi4vLi4vaGVscGVycy90ZW1wb3JhbC5qc1wiO1xuaW1wb3J0IHsgUmV0cnlBZnRlckVycm9yIH0gZnJvbSBcIi4uL1JldHJ5QWZ0ZXJFcnJvci5qc1wiO1xuaW1wb3J0IHsgU3RlcEVycm9yIH0gZnJvbSBcIi4uL1N0ZXBFcnJvci5qc1wiO1xuaW1wb3J0IHsgU1RFUF9JTkRFWElOR19TVUZGSVgsIGNyZWF0ZVN0ZXBUb29scywgZ2V0U3RlcE9wdGlvbnMsIGludm9rZVBheWxvYWRTY2hlbWEgfSBmcm9tIFwiLi4vSW5uZ2VzdFN0ZXBUb29scy5qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjNcIjtcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSBcIkBvcGVudGVsZW1ldHJ5L2FwaVwiO1xuaW1wb3J0IGhhc2hqcyBmcm9tIFwiaGFzaC5qc1wiO1xuaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvZXhlY3V0aW9uL3YxLnRzXG52YXIgdjFfZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7XG5cdF9pbnRlcm5hbHM6ICgpID0+IF9pbnRlcm5hbHMsXG5cdGNyZWF0ZVYxSW5uZ2VzdEV4ZWN1dGlvbjogKCkgPT4gY3JlYXRlVjFJbm5nZXN0RXhlY3V0aW9uXG59KTtcbmNvbnN0IHsgc2hhMSB9ID0gaGFzaGpzO1xuY29uc3QgY3JlYXRlVjFJbm5nZXN0RXhlY3V0aW9uID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIG5ldyBWMUlubmdlc3RFeGVjdXRpb24ob3B0aW9ucyk7XG59O1xudmFyIFYxSW5uZ2VzdEV4ZWN1dGlvbiA9IGNsYXNzIGV4dGVuZHMgSW5uZ2VzdEV4ZWN1dGlvbiB7XG5cdHZlcnNpb24gPSBFeGVjdXRpb25WZXJzaW9uLlYxO1xuXHRzdGF0ZTtcblx0Zm5Bcmc7XG5cdGNoZWNrcG9pbnRIYW5kbGVycztcblx0dGltZW91dER1cmF0aW9uID0gMWUzICogMTA7XG5cdGV4ZWN1dGlvbjtcblx0dXNlckZuVG9SdW47XG5cdC8qKlxuXHQqIElmIHdlJ3JlIHN1cHBvc2VkIHRvIHJ1biBhIHBhcnRpY3VsYXIgc3RlcCB2aWEgYHJlcXVlc3RlZFJ1blN0ZXBgLCB0aGlzXG5cdCogd2lsbCBiZSBhIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIGFmdGVyIG5vIHN0ZXBzIGhhdmUgYmVlbiBmb3VuZCBmb3Jcblx0KiBgdGltZW91dER1cmF0aW9uYCBtaWxsaXNlY29uZHMuXG5cdCpcblx0KiBJZiB3ZSdyZSBub3Qgc3VwcG9zZWQgdG8gcnVuIGEgcGFydGljdWxhciBzdGVwLCB0aGlzIHdpbGwgYmUgYHVuZGVmaW5lZGAuXG5cdCovXG5cdHRpbWVvdXQ7XG5cdC8qKlxuXHQqIElmIHdlJ3JlIGNoZWNrcG9pbnRpbmcgYW5kIGhhdmUgYmVlbiBnaXZlbiBhIG1heGltdW0gcnVudGltZSwgdGhpcyB3aWxsIGJlXG5cdCogYSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyBhZnRlciB0aGF0IGR1cmF0aW9uIGhhcyBlbGFwc2VkLCBhbGxvd2luZyB1cyB0b1xuXHQqIGVuc3VyZSB0aGF0IHdlIGVuZCB0aGUgZXhlY3V0aW9uIGluIGdvb2QgdGltZSwgZXNwZWNpYWxseSBpbiBzZXJ2ZXJsZXNzXG5cdCogZW52aXJvbm1lbnRzLlxuXHQqL1xuXHRjaGVja3BvaW50aW5nTWF4UnVudGltZVRpbWVyO1xuXHRjb25zdHJ1Y3RvcihyYXdPcHRpb25zKSB7XG5cdFx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRcdC4uLnJhd09wdGlvbnMsXG5cdFx0XHRzdGVwTW9kZTogcmF3T3B0aW9ucy5zdGVwTW9kZSA/PyBTdGVwTW9kZS5Bc3luY1xuXHRcdH07XG5cdFx0c3VwZXIob3B0aW9ucyk7XG5cdFx0LyoqXG5cdFx0KiBDaGVjayB3ZSBoYXZlIGV2ZXJ5dGhpbmcgd2UgbmVlZCBmb3IgY2hlY2twb2ludGluZ1xuXHRcdCovXG5cdFx0aWYgKHRoaXMub3B0aW9ucy5zdGVwTW9kZSA9PT0gU3RlcE1vZGUuU3luYykge1xuXHRcdFx0aWYgKCF0aGlzLm9wdGlvbnMuY3JlYXRlUmVzcG9uc2UpIHRocm93IG5ldyBFcnJvcihcImNyZWF0ZVJlc3BvbnNlIGlzIHJlcXVpcmVkIGZvciBzeW5jIHN0ZXAgbW9kZVwiKTtcblx0XHR9XG5cdFx0dGhpcy51c2VyRm5Ub1J1biA9IHRoaXMuZ2V0VXNlckZuVG9SdW4oKTtcblx0XHR0aGlzLnN0YXRlID0gdGhpcy5jcmVhdGVFeGVjdXRpb25TdGF0ZSgpO1xuXHRcdHRoaXMuZm5BcmcgPSB0aGlzLmNyZWF0ZUZuQXJnKCk7XG5cdFx0dGhpcy5jaGVja3BvaW50SGFuZGxlcnMgPSB0aGlzLmNyZWF0ZUNoZWNrcG9pbnRIYW5kbGVycygpO1xuXHRcdHRoaXMuaW5pdGlhbGl6ZVRpbWVyKHRoaXMuc3RhdGUpO1xuXHRcdHRoaXMuaW5pdGlhbGl6ZUNoZWNrcG9pbnRSdW50aW1lVGltZXIodGhpcy5zdGF0ZSk7XG5cdFx0dGhpcy5kZWJ1ZyhcImNyZWF0ZWQgbmV3IFYxIGV4ZWN1dGlvbiBmb3IgcnVuO1wiLCB0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcCA/IGB3YW50aW5nIHRvIHJ1biBzdGVwIFwiJHt0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcH1cImAgOiBcImRpc2NvdmVyaW5nIHN0ZXBzXCIpO1xuXHRcdHRoaXMuZGVidWcoXCJleGlzdGluZyBzdGF0ZSBrZXlzOlwiLCBPYmplY3Qua2V5cyh0aGlzLnN0YXRlLnN0ZXBTdGF0ZSkpO1xuXHR9XG5cdC8qKlxuXHQqIElkZW1wb3RlbnRseSBzdGFydCB0aGUgZXhlY3V0aW9uIG9mIHRoZSB1c2VyJ3MgZnVuY3Rpb24uXG5cdCovXG5cdHN0YXJ0KCkge1xuXHRcdGlmICghdGhpcy5leGVjdXRpb24pIHtcblx0XHRcdHRoaXMuZGVidWcoXCJzdGFydGluZyBWMSBleGVjdXRpb25cIik7XG5cdFx0XHRjb25zdCB0cmFjZXIgPSB0cmFjZS5nZXRUcmFjZXIoXCJpbm5nZXN0XCIsIHZlcnNpb24pO1xuXHRcdFx0dGhpcy5leGVjdXRpb24gPSBnZXRBc3luY0xvY2FsU3RvcmFnZSgpLnRoZW4oKGFscykgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYWxzLnJ1bih7XG5cdFx0XHRcdFx0YXBwOiB0aGlzLm9wdGlvbnMuY2xpZW50LFxuXHRcdFx0XHRcdGV4ZWN1dGlvbjoge1xuXHRcdFx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRcdFx0aW5zdGFuY2U6IHRoaXNcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gdHJhY2VyLnN0YXJ0QWN0aXZlU3BhbihcImlubmdlc3QuZXhlY3V0aW9uXCIsIChzcGFuKSA9PiB7XG5cdFx0XHRcdFx0XHRjbGllbnRQcm9jZXNzb3JNYXAuZ2V0KHRoaXMub3B0aW9ucy5jbGllbnQpPy5kZWNsYXJlU3RhcnRpbmdTcGFuKHtcblx0XHRcdFx0XHRcdFx0c3Bhbixcblx0XHRcdFx0XHRcdFx0cnVuSWQ6IHRoaXMub3B0aW9ucy5ydW5JZCxcblx0XHRcdFx0XHRcdFx0dHJhY2VwYXJlbnQ6IHRoaXMub3B0aW9ucy5oZWFkZXJzW2hlYWRlcktleXMuVHJhY2VQYXJlbnRdLFxuXHRcdFx0XHRcdFx0XHR0cmFjZXN0YXRlOiB0aGlzLm9wdGlvbnMuaGVhZGVyc1toZWFkZXJLZXlzLlRyYWNlU3RhdGVdXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzLl9zdGFydCgpLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRlYnVnKFwicmVzdWx0OlwiLCByZXN1bHQpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHRcdFx0fSkuZmluYWxseSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHNwYW4uZW5kKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZXhlY3V0aW9uO1xuXHR9XG5cdGFkZE1ldGFkYXRhKHN0ZXBJZCwga2luZCwgc2NvcGUsIG9wLCB2YWx1ZXMpIHtcblx0XHRpZiAoIXRoaXMuc3RhdGUubWV0YWRhdGEpIHRoaXMuc3RhdGUubWV0YWRhdGEgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdGNvbnN0IHVwZGF0ZXMgPSB0aGlzLnN0YXRlLm1ldGFkYXRhLmdldChzdGVwSWQpID8/IFtdO1xuXHRcdHVwZGF0ZXMucHVzaCh7XG5cdFx0XHRraW5kLFxuXHRcdFx0c2NvcGUsXG5cdFx0XHRvcCxcblx0XHRcdHZhbHVlc1xuXHRcdH0pO1xuXHRcdHRoaXMuc3RhdGUubWV0YWRhdGEuc2V0KHN0ZXBJZCwgdXBkYXRlcyk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0LyoqXG5cdCogU3RhcnRzIGV4ZWN1dGlvbiBvZiB0aGUgdXNlcidzIGZ1bmN0aW9uIGFuZCB0aGUgY29yZSBsb29wLlxuXHQqL1xuXHRhc3luYyBfc3RhcnQoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGFsbENoZWNrcG9pbnRIYW5kbGVyID0gdGhpcy5nZXRDaGVja3BvaW50SGFuZGxlcihcIlwiKTtcblx0XHRcdHRoaXMuc3RhdGUuaG9va3MgPSBhd2FpdCB0aGlzLmluaXRpYWxpemVNaWRkbGV3YXJlKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXJ0RXhlY3V0aW9uKCk7XG5cdFx0XHRsZXQgaSA9IDA7XG5cdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGNoZWNrcG9pbnQgb2YgdGhpcy5zdGF0ZS5sb29wKSB7XG5cdFx0XHRcdGF3YWl0IGFsbENoZWNrcG9pbnRIYW5kbGVyKGNoZWNrcG9pbnQsIGkpO1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdldENoZWNrcG9pbnRIYW5kbGVyKGNoZWNrcG9pbnQudHlwZSkoY2hlY2twb2ludCwgaSsrKTtcblx0XHRcdFx0aWYgKHJlc3VsdCkgcmV0dXJuIHJlc3VsdDtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHsgZXJyb3IgfSk7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHRoaXMuc3RhdGUubG9vcC5yZXR1cm4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZVJlc3BvbnNlPy4oKTtcblx0XHR9XG5cdFx0LyoqXG5cdFx0KiBJZiB3ZSdyZSBoZXJlLCB0aGUgZ2VuZXJhdG9yIHNvbWVob3cgZmluaXNoZWQgd2l0aG91dCByZXR1cm5pbmcgYSB2YWx1ZS5cblx0XHQqIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbi5cblx0XHQqL1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvcmUgbG9vcCBmaW5pc2hlZCB3aXRob3V0IHJldHVybmluZyBhIHZhbHVlXCIpO1xuXHR9XG5cdGFzeW5jIGNoZWNrcG9pbnQoc3RlcHMpIHtcblx0XHRpZiAodGhpcy5vcHRpb25zLnN0ZXBNb2RlID09PSBTdGVwTW9kZS5TeW5jKSBpZiAoIXRoaXMuc3RhdGUuY2hlY2twb2ludGVkUnVuKSB7XG5cdFx0XHRjb25zdCByZXMgPSBhd2FpdCB0aGlzLm9wdGlvbnMuY2xpZW50W1wiaW5uZ2VzdEFwaVwiXS5jaGVja3BvaW50TmV3UnVuKHtcblx0XHRcdFx0cnVuSWQ6IHRoaXMuZm5BcmcucnVuSWQsXG5cdFx0XHRcdGV2ZW50OiB0aGlzLmZuQXJnLmV2ZW50LFxuXHRcdFx0XHRzdGVwc1xuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLnN0YXRlLmNoZWNrcG9pbnRlZFJ1biA9IHtcblx0XHRcdFx0YXBwSWQ6IHJlcy5kYXRhLmFwcF9pZCxcblx0XHRcdFx0Zm5JZDogcmVzLmRhdGEuZm5faWQsXG5cdFx0XHRcdHRva2VuOiByZXMuZGF0YS50b2tlblxuXHRcdFx0fTtcblx0XHR9IGVsc2UgYXdhaXQgdGhpcy5vcHRpb25zLmNsaWVudFtcImlubmdlc3RBcGlcIl0uY2hlY2twb2ludFN0ZXBzKHtcblx0XHRcdGFwcElkOiB0aGlzLnN0YXRlLmNoZWNrcG9pbnRlZFJ1bi5hcHBJZCxcblx0XHRcdGZuSWQ6IHRoaXMuc3RhdGUuY2hlY2twb2ludGVkUnVuLmZuSWQsXG5cdFx0XHRydW5JZDogdGhpcy5mbkFyZy5ydW5JZCxcblx0XHRcdHN0ZXBzXG5cdFx0fSk7XG5cdFx0ZWxzZSBpZiAodGhpcy5vcHRpb25zLnN0ZXBNb2RlID09PSBTdGVwTW9kZS5Bc3luY0NoZWNrcG9pbnRpbmcpIHtcblx0XHRcdGlmICghdGhpcy5vcHRpb25zLnF1ZXVlSXRlbUlkKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHF1ZXVlSXRlbUlkIGZvciBhc3luYyBjaGVja3BvaW50aW5nLiBUaGlzIGlzIGEgYnVnIGluIHRoZSBJbm5nZXN0IFNESy5cIik7XG5cdFx0XHRpZiAoIXRoaXMub3B0aW9ucy5pbnRlcm5hbEZuSWQpIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgaW50ZXJuYWxGbklkIGZvciBhc3luYyBjaGVja3BvaW50aW5nLiBUaGlzIGlzIGEgYnVnIGluIHRoZSBJbm5nZXN0IFNESy5cIik7XG5cdFx0XHRhd2FpdCB0aGlzLm9wdGlvbnMuY2xpZW50W1wiaW5uZ2VzdEFwaVwiXS5jaGVja3BvaW50U3RlcHNBc3luYyh7XG5cdFx0XHRcdHJ1bklkOiB0aGlzLmZuQXJnLnJ1bklkLFxuXHRcdFx0XHRmbklkOiB0aGlzLm9wdGlvbnMuaW50ZXJuYWxGbklkLFxuXHRcdFx0XHRxdWV1ZUl0ZW1JZDogdGhpcy5vcHRpb25zLnF1ZXVlSXRlbUlkLFxuXHRcdFx0XHRzdGVwc1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihcIkNoZWNrcG9pbnRpbmcgaXMgb25seSBzdXBwb3J0ZWQgaW4gU3luYyBhbmQgQXN5bmNDaGVja3BvaW50aW5nIHN0ZXAgbW9kZXMuIFRoaXMgaXMgYSBidWcgaW4gdGhlIElubmdlc3QgU0RLLlwiKTtcblx0fVxuXHRhc3luYyBjaGVja3BvaW50QW5kU3dpdGNoVG9Bc3luYyhzdGVwcykge1xuXHRcdGF3YWl0IHRoaXMuY2hlY2twb2ludChzdGVwcyk7XG5cdFx0aWYgKCF0aGlzLnN0YXRlLmNoZWNrcG9pbnRlZFJ1bj8udG9rZW4pIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjaGVja3BvaW50IGFuZCBzd2l0Y2ggdG8gYXN5bmMgbW9kZVwiKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJjaGFuZ2UtbW9kZVwiLFxuXHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdHRvOiBTdGVwTW9kZS5Bc3luYyxcblx0XHRcdHRva2VuOiB0aGlzLnN0YXRlLmNoZWNrcG9pbnRlZFJ1bj8udG9rZW5cblx0XHR9O1xuXHR9XG5cdC8qKlxuXHQqIFJldHVybnMgd2hldGhlciB3ZSdyZSBpbiB0aGUgZmluYWwgYXR0ZW1wdCBvZiBleGVjdXRpb24sIG9yIGBudWxsYCBpZiB3ZVxuXHQqIGNhbid0IGRldGVybWluZSB0aGlzIGluIHRoZSBTREsuXG5cdCovXG5cdGluRmluYWxBdHRlbXB0KCkge1xuXHRcdGlmICh0eXBlb2YgdGhpcy5mbkFyZy5tYXhBdHRlbXB0cyAhPT0gXCJudW1iZXJcIikgcmV0dXJuIG51bGw7XG5cdFx0cmV0dXJuIHRoaXMuZm5BcmcuYXR0ZW1wdCArIDEgPj0gdGhpcy5mbkFyZy5tYXhBdHRlbXB0cztcblx0fVxuXHQvKipcblx0KiBDcmVhdGVzIGEgaGFuZGxlciBmb3IgZXZlcnkgY2hlY2twb2ludCB0eXBlLCBkZWZpbmluZyB3aGF0IHRvIGRvIHdoZW4gd2Vcblx0KiByZWFjaCB0aGF0IGNoZWNrcG9pbnQgaW4gdGhlIGNvcmUgbG9vcC5cblx0Ki9cblx0Y3JlYXRlQ2hlY2twb2ludEhhbmRsZXJzKCkge1xuXHRcdGNvbnN0IGNvbW1vbkNoZWNrcG9pbnRIYW5kbGVyID0gKGNoZWNrcG9pbnQpID0+IHtcblx0XHRcdHRoaXMuZGVidWcoYCR7dGhpcy5vcHRpb25zLnN0ZXBNb2RlfSBjaGVja3BvaW50OmAsIGNoZWNrcG9pbnQpO1xuXHRcdH07XG5cdFx0Y29uc3Qgc3RlcFJhbkhhbmRsZXIgPSBhc3luYyAoc3RlcFJlc3VsdCkgPT4ge1xuXHRcdFx0Y29uc3QgdHJhbnNmb3JtUmVzdWx0ID0gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoc3RlcFJlc3VsdCk7XG5cdFx0XHQvKipcblx0XHRcdCogVHJhbnNmb3JtaW5nIG91dHB1dCB3aWxsIGFsd2F5cyByZXR1cm4gZWl0aGVyIGZ1bmN0aW9uIHJlamVjdGlvbiBvclxuXHRcdFx0KiByZXNvbHV0aW9uLiBJbiBtb3N0IGNhc2VzLCB0aGlzIGNhbiBiZSBpbW1lZGlhdGVseSByZXR1cm5lZCwgYnV0IGluXG5cdFx0XHQqIHRoaXMgcGFydGljdWxhciBjYXNlIHdlIHdhbnQgdG8gaGFuZGxlIGl0IGRpZmZlcmVudGx5LlxuXHRcdFx0Ki9cblx0XHRcdGlmICh0cmFuc2Zvcm1SZXN1bHQudHlwZSA9PT0gXCJmdW5jdGlvbi1yZXNvbHZlZFwiKSByZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiBcInN0ZXAtcmFuXCIsXG5cdFx0XHRcdGN0eDogdHJhbnNmb3JtUmVzdWx0LmN0eCxcblx0XHRcdFx0b3BzOiB0cmFuc2Zvcm1SZXN1bHQub3BzLFxuXHRcdFx0XHRzdGVwOiB7XG5cdFx0XHRcdFx0Li4uc3RlcFJlc3VsdCxcblx0XHRcdFx0XHRkYXRhOiB0cmFuc2Zvcm1SZXN1bHQuZGF0YVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0ZWxzZSBpZiAodHJhbnNmb3JtUmVzdWx0LnR5cGUgPT09IFwiZnVuY3Rpb24tcmVqZWN0ZWRcIikge1xuXHRcdFx0XHRjb25zdCBzdGVwRm9yUmVzcG9uc2UgPSB7XG5cdFx0XHRcdFx0Li4uc3RlcFJlc3VsdCxcblx0XHRcdFx0XHRlcnJvcjogdHJhbnNmb3JtUmVzdWx0LmVycm9yXG5cdFx0XHRcdH07XG5cdFx0XHRcdGlmIChzdGVwUmVzdWx0Lm9wID09PSBTdGVwT3BDb2RlLlN0ZXBGYWlsZWQpIHtcblx0XHRcdFx0XHRjb25zdCBzZXIgPSBzZXJpYWxpemVFcnJvcih0cmFuc2Zvcm1SZXN1bHQuZXJyb3IpO1xuXHRcdFx0XHRcdHN0ZXBGb3JSZXNwb25zZS5kYXRhID0ge1xuXHRcdFx0XHRcdFx0X19zZXJpYWxpemVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0bmFtZTogc2VyLm5hbWUsXG5cdFx0XHRcdFx0XHRtZXNzYWdlOiBzZXIubWVzc2FnZSxcblx0XHRcdFx0XHRcdHN0YWNrOiBcIlwiXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RlcC1yYW5cIixcblx0XHRcdFx0XHRjdHg6IHRyYW5zZm9ybVJlc3VsdC5jdHgsXG5cdFx0XHRcdFx0b3BzOiB0cmFuc2Zvcm1SZXN1bHQub3BzLFxuXHRcdFx0XHRcdHJldHJpYWJsZTogdHJhbnNmb3JtUmVzdWx0LnJldHJpYWJsZSxcblx0XHRcdFx0XHRzdGVwOiBzdGVwRm9yUmVzcG9uc2Vcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0cmFuc2Zvcm1SZXN1bHQ7XG5cdFx0fTtcblx0XHRjb25zdCBtYXliZVJldHVybk5ld1N0ZXBzID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3QgbmV3U3RlcHMgPSBhd2FpdCB0aGlzLmZpbHRlck5ld1N0ZXBzKEFycmF5LmZyb20odGhpcy5zdGF0ZS5zdGVwcy52YWx1ZXMoKSkpO1xuXHRcdFx0aWYgKG5ld1N0ZXBzKSByZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiBcInN0ZXBzLWZvdW5kXCIsXG5cdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdFx0c3RlcHM6IG5ld1N0ZXBzXG5cdFx0XHR9O1xuXHRcdH07XG5cdFx0Y29uc3Qgc3luY0hhbmRsZXJzID0ge1xuXHRcdFx0XCJcIjogY29tbW9uQ2hlY2twb2ludEhhbmRsZXIsXG5cdFx0XHRcImZ1bmN0aW9uLXJlc29sdmVkXCI6IGFzeW5jIChjaGVja3BvaW50LCBpKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuY2hlY2twb2ludChbe1xuXHRcdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlJ1bkNvbXBsZXRlLFxuXHRcdFx0XHRcdGlkOiBfaW50ZXJuYWxzLmhhc2hJZChcImNvbXBsZXRlXCIpLFxuXHRcdFx0XHRcdGRhdGE6IGF3YWl0IHRoaXMub3B0aW9ucy5jcmVhdGVSZXNwb25zZShjaGVja3BvaW50LmRhdGEpXG5cdFx0XHRcdH1dKTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcImZ1bmN0aW9uLXJlc29sdmVkXCIsXG5cdFx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdFx0ZGF0YTogY2hlY2twb2ludC5kYXRhXG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0XCJmdW5jdGlvbi1yZWplY3RlZFwiOiAoY2hlY2twb2ludCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5pbkZpbmFsQXR0ZW1wdCgpKSByZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IFwiZnVuY3Rpb24tcmVqZWN0ZWRcIixcblx0XHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdFx0ZXJyb3I6IGNoZWNrcG9pbnQuZXJyb3IsXG5cdFx0XHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdFx0XHRyZXRyaWFibGU6IGZhbHNlXG5cdFx0XHRcdH07XG5cdFx0XHRcdHJldHVybiB0aGlzLmNoZWNrcG9pbnRBbmRTd2l0Y2hUb0FzeW5jKFt7XG5cdFx0XHRcdFx0aWQ6IF9pbnRlcm5hbHMuaGFzaElkKFwiY29tcGxldGVcIiksXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6IFwiY29tcGxldGVcIixcblx0XHRcdFx0XHRvcDogU3RlcE9wQ29kZS5TdGVwRXJyb3IsXG5cdFx0XHRcdFx0ZXJyb3I6IGNoZWNrcG9pbnQuZXJyb3Jcblx0XHRcdFx0fV0pO1xuXHRcdFx0fSxcblx0XHRcdFwic3RlcC1ub3QtZm91bmRcIjogKHsgc3RlcCB9KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZWplY3RlZFwiLFxuXHRcdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0XHRlcnJvcjogLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcihcIlN0ZXAgbm90IGZvdW5kIHdoZW4gY2hlY2twb2ludGluZzsgdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuXCIpLFxuXHRcdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdFx0cmV0cmlhYmxlOiBmYWxzZVxuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblx0XHRcdFwic3RlcHMtZm91bmRcIjogYXN5bmMgKHsgc3RlcHMgfSkgPT4ge1xuXHRcdFx0XHRpZiAoc3RlcHMubGVuZ3RoICE9PSAxIHx8IHN0ZXBzWzBdLm1vZGUgIT09IFN0ZXBNb2RlLlN5bmMpIHJldHVybiB0aGlzLmNoZWNrcG9pbnRBbmRTd2l0Y2hUb0FzeW5jKHN0ZXBzLm1hcCgoc3RlcCkgPT4gKHtcblx0XHRcdFx0XHQuLi5zdGVwLFxuXHRcdFx0XHRcdGlkOiBzdGVwLmhhc2hlZElkXG5cdFx0XHRcdH0pKSk7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVN0ZXAoc3RlcHNbMF0pO1xuXHRcdFx0XHRpZiAocmVzdWx0LmVycm9yKSByZXR1cm4gdGhpcy5jaGVja3BvaW50QW5kU3dpdGNoVG9Bc3luYyhbcmVzdWx0XSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuY2hlY2twb2ludChbdGhpcy5yZXN1bWVTdGVwV2l0aFJlc3VsdChyZXN1bHQpXSk7XG5cdFx0XHR9LFxuXHRcdFx0XCJjaGVja3BvaW50aW5nLXJ1bnRpbWUtcmVhY2hlZFwiOiAoKSA9PiB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmNoZWNrcG9pbnRBbmRTd2l0Y2hUb0FzeW5jKFt7XG5cdFx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuRGlzY292ZXJ5UmVxdWVzdCxcblx0XHRcdFx0XHRpZDogX2ludGVybmFscy5oYXNoSWQoXCJkaXNjb3ZlcnktcmVxdWVzdFwiKVxuXHRcdFx0XHR9XSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCBhc3luY0hhbmRsZXJzID0ge1xuXHRcdFx0XCJcIjogY29tbW9uQ2hlY2twb2ludEhhbmRsZXIsXG5cdFx0XHRcImZ1bmN0aW9uLXJlc29sdmVkXCI6IGFzeW5jICh7IGRhdGEgfSkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5vcHRpb25zLmNyZWF0ZVJlc3BvbnNlKSBkYXRhID0gYXdhaXQgdGhpcy5vcHRpb25zLmNyZWF0ZVJlc3BvbnNlKGRhdGEpO1xuXHRcdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoeyBkYXRhIH0pO1xuXHRcdFx0fSxcblx0XHRcdFwiZnVuY3Rpb24tcmVqZWN0ZWRcIjogYXN5bmMgKGNoZWNrcG9pbnQpID0+IHtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHsgZXJyb3I6IGNoZWNrcG9pbnQuZXJyb3IgfSk7XG5cdFx0XHR9LFxuXHRcdFx0XCJzdGVwcy1mb3VuZFwiOiBhc3luYyAoeyBzdGVwcyB9KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHN0ZXBSZXN1bHQgPSBhd2FpdCB0aGlzLnRyeUV4ZWN1dGVTdGVwKHN0ZXBzKTtcblx0XHRcdFx0aWYgKHN0ZXBSZXN1bHQpIHJldHVybiBzdGVwUmFuSGFuZGxlcihzdGVwUmVzdWx0KTtcblx0XHRcdFx0cmV0dXJuIG1heWJlUmV0dXJuTmV3U3RlcHMoKTtcblx0XHRcdH0sXG5cdFx0XHRcInN0ZXAtbm90LWZvdW5kXCI6ICh7IHN0ZXAgfSkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RlcC1ub3QtZm91bmRcIixcblx0XHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdFx0XHRzdGVwXG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0XCJjaGVja3BvaW50aW5nLXJ1bnRpbWUtcmVhY2hlZFwiOiAoKSA9PiB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNoZWNrcG9pbnRpbmcgbWF4aW11bSBydW50aW1lIHJlYWNoZWQsIGJ1dCB0aGlzIGlzIG5vdCBpbiBhIGNoZWNrcG9pbnRpbmcgc3RlcCBtb2RlLiBUaGlzIGlzIGEgYnVnIGluIHRoZSBJbm5nZXN0IFNESy5cIik7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCBhc3luY0NoZWNrcG9pbnRpbmdIYW5kbGVycyA9IHtcblx0XHRcdFwiXCI6IGNvbW1vbkNoZWNrcG9pbnRIYW5kbGVyLFxuXHRcdFx0XCJmdW5jdGlvbi1yZXNvbHZlZFwiOiBhc3luYyAoY2hlY2twb2ludCwgaSkgPT4ge1xuXHRcdFx0XHRjb25zdCBvdXRwdXQgPSBhd2FpdCBhc3luY0hhbmRsZXJzW1wiZnVuY3Rpb24tcmVzb2x2ZWRcIl0oY2hlY2twb2ludCwgaSk7XG5cdFx0XHRcdGlmIChvdXRwdXQ/LnR5cGUgPT09IFwiZnVuY3Rpb24tcmVzb2x2ZWRcIikgcmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcInN0ZXBzLWZvdW5kXCIsXG5cdFx0XHRcdFx0Y3R4OiBvdXRwdXQuY3R4LFxuXHRcdFx0XHRcdG9wczogb3V0cHV0Lm9wcyxcblx0XHRcdFx0XHRzdGVwczogW3tcblx0XHRcdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlJ1bkNvbXBsZXRlLFxuXHRcdFx0XHRcdFx0aWQ6IF9pbnRlcm5hbHMuaGFzaElkKFwiY29tcGxldGVcIiksXG5cdFx0XHRcdFx0XHRkYXRhOiBvdXRwdXQuZGF0YVxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0XCJmdW5jdGlvbi1yZWplY3RlZFwiOiBhc3luY0hhbmRsZXJzW1wiZnVuY3Rpb24tcmVqZWN0ZWRcIl0sXG5cdFx0XHRcInN0ZXAtbm90LWZvdW5kXCI6IGFzeW5jSGFuZGxlcnNbXCJzdGVwLW5vdC1mb3VuZFwiXSxcblx0XHRcdFwic3RlcHMtZm91bmRcIjogYXN5bmMgKHsgc3RlcHMgfSkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXApIHtcblx0XHRcdFx0XHR0aGlzLmRlYnVnKFwiYXN5bmMgY2hlY2twb2ludGluZyBsb29raW5nIGZvciBzdGVwIHRvIHJ1biwgc28gYXR0ZW1wdGluZyB0byBmaW5kIGl0XCIpO1xuXHRcdFx0XHRcdGNvbnN0IHN0ZXAgPSBzdGVwcy5maW5kKChzKSA9PiBzLmhhc2hlZElkID09PSB0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcCAmJiBzLmZuKTtcblx0XHRcdFx0XHRpZiAoc3RlcCkge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RlcFJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVN0ZXAoc3RlcCk7XG5cdFx0XHRcdFx0XHRpZiAoc3RlcFJlc3VsdCkgcmV0dXJuIHN0ZXBSYW5IYW5kbGVyKHN0ZXBSZXN1bHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB7IHN0ZXBzVG9SZXN1bWUsIG5ld1N0ZXBzIH0gPSBzdGVwcy5yZWR1Y2UoKGFjYywgc3RlcCkgPT4ge1xuXHRcdFx0XHRcdGlmICghc3RlcC5oYXNTdGVwU3RhdGUpIGFjYy5uZXdTdGVwcy5wdXNoKHN0ZXApO1xuXHRcdFx0XHRcdGVsc2UgaWYgKCFzdGVwLmZ1bGZpbGxlZCkgYWNjLnN0ZXBzVG9SZXN1bWUucHVzaChzdGVwKTtcblx0XHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0XHR9LCB7XG5cdFx0XHRcdFx0c3RlcHNUb1Jlc3VtZTogW10sXG5cdFx0XHRcdFx0bmV3U3RlcHM6IFtdXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0aGlzLmRlYnVnKFwic3BsaXQgZm91bmQgc3RlcHMgaW4gdG86XCIsIHtcblx0XHRcdFx0XHRzdGVwc1RvUmVzdW1lOiBzdGVwc1RvUmVzdW1lLmxlbmd0aCxcblx0XHRcdFx0XHRuZXdTdGVwczogbmV3U3RlcHMubGVuZ3RoXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoIXRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwICYmIG5ld1N0ZXBzLmxlbmd0aCkge1xuXHRcdFx0XHRcdGNvbnN0IHN0ZXBSZXN1bHQgPSBhd2FpdCB0aGlzLnRyeUV4ZWN1dGVTdGVwKG5ld1N0ZXBzKTtcblx0XHRcdFx0XHRpZiAoc3RlcFJlc3VsdCkge1xuXHRcdFx0XHRcdFx0dGhpcy5kZWJ1ZyhgZXhlY3V0ZWQgc3RlcCBcIiR7c3RlcFJlc3VsdC5pZH1cIiBzdWNjZXNzZnVsbHlgKTtcblx0XHRcdFx0XHRcdGlmIChzdGVwUmVzdWx0LmVycm9yKSByZXR1cm4gc3RlcFJhbkhhbmRsZXIoc3RlcFJlc3VsdCk7XG5cdFx0XHRcdFx0XHR0aGlzLmRlYnVnKFwiY2hlY2twb2ludGluZyBhbmQgcmVzdW1pbmcgZXhlY3V0aW9uIGFmdGVyIHN0ZXAgcnVuXCIpO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jaGVja3BvaW50KFt0aGlzLnJlc3VtZVN0ZXBXaXRoUmVzdWx0KHN0ZXBSZXN1bHQpXSk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRlYnVnKFwiZXJyb3IgY2hlY2twb2ludGluZyBhZnRlciBzdGVwIHJ1biwgc28gZmFsbGluZyBiYWNrIHRvIGFzeW5jXCIsIGVycik7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBzdGVwUmFuSGFuZGxlcihzdGVwUmVzdWx0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIG1heWJlUmV0dXJuTmV3U3RlcHMoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoc3RlcHNUb1Jlc3VtZS5sZW5ndGgpIHtcblx0XHRcdFx0XHR0aGlzLmRlYnVnKGByZXN1bWluZyAke3N0ZXBzVG9SZXN1bWUubGVuZ3RofSBzdGVwc2ApO1xuXHRcdFx0XHRcdGZvciAoY29uc3Qgc3Qgb2Ygc3RlcHNUb1Jlc3VtZSkgdGhpcy5yZXN1bWVTdGVwV2l0aFJlc3VsdCh7XG5cdFx0XHRcdFx0XHQuLi5zdCxcblx0XHRcdFx0XHRcdGlkOiBzdC5oYXNoZWRJZFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0XCJjaGVja3BvaW50aW5nLXJ1bnRpbWUtcmVhY2hlZFwiOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdGVwcy1mb3VuZFwiLFxuXHRcdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0XHRvcHM6IHRoaXMub3BzLFxuXHRcdFx0XHRcdHN0ZXBzOiBbe1xuXHRcdFx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuRGlzY292ZXJ5UmVxdWVzdCxcblx0XHRcdFx0XHRcdGlkOiBfaW50ZXJuYWxzLmhhc2hJZChcImRpc2NvdmVyeS1yZXF1ZXN0XCIpXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdHJldHVybiB7XG5cdFx0XHRbU3RlcE1vZGUuQXN5bmNdOiBhc3luY0hhbmRsZXJzLFxuXHRcdFx0W1N0ZXBNb2RlLlN5bmNdOiBzeW5jSGFuZGxlcnMsXG5cdFx0XHRbU3RlcE1vZGUuQXN5bmNDaGVja3BvaW50aW5nXTogYXN5bmNDaGVja3BvaW50aW5nSGFuZGxlcnNcblx0XHR9O1xuXHR9XG5cdGdldENoZWNrcG9pbnRIYW5kbGVyKHR5cGUpIHtcblx0XHRyZXR1cm4gdGhpcy5jaGVja3BvaW50SGFuZGxlcnNbdGhpcy5vcHRpb25zLnN0ZXBNb2RlXVt0eXBlXTtcblx0fVxuXHRhc3luYyB0cnlFeGVjdXRlU3RlcChzdGVwcykge1xuXHRcdGNvbnN0IGhhc2hlZFN0ZXBJZFRvUnVuID0gdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXAgfHwgdGhpcy5nZXRFYXJseUV4ZWNSdW5TdGVwKHN0ZXBzKTtcblx0XHRpZiAoIWhhc2hlZFN0ZXBJZFRvUnVuKSByZXR1cm47XG5cdFx0Y29uc3Qgc3RlcCA9IHN0ZXBzLmZpbmQoKHN0ZXAkMSkgPT4gc3RlcCQxLmhhc2hlZElkID09PSBoYXNoZWRTdGVwSWRUb1J1biAmJiBzdGVwJDEuZm4pO1xuXHRcdGlmIChzdGVwKSByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlU3RlcChzdGVwKTtcblx0XHR0aGlzLnRpbWVvdXQ/LnJlc2V0KCk7XG5cdH1cblx0LyoqXG5cdCogR2l2ZW4gYSBsaXN0IG9mIG91dGdvaW5nIG9wcywgZGVjaWRlIGlmIHdlIGNhbiBleGVjdXRlIGFuIG9wIGVhcmx5IGFuZFxuXHQqIHJldHVybiB0aGUgSUQgb2YgdGhlIHN0ZXAgdG8gZXhlY3V0ZSBpZiB3ZSBjYW4uXG5cdCovXG5cdGdldEVhcmx5RXhlY1J1blN0ZXAoc3RlcHMpIHtcblx0XHQvKipcblx0XHQqIFdlIG1heSBoYXZlIGJlZW4gZGlzYWJsZWQgZHVlIHRvIHBhcmFsbGVsaXNtLCBpbiB3aGljaCBjYXNlIHdlIGNhbid0XG5cdFx0KiBpbW1lZGlhdGVseSBleGVjdXRlIHVubGVzcyBleHBsaWNpdGx5IHJlcXVlc3RlZC5cblx0XHQqL1xuXHRcdGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZUltbWVkaWF0ZUV4ZWN1dGlvbikgcmV0dXJuO1xuXHRcdGNvbnN0IHVuZnVsZmlsbGVkU3RlcHMgPSBzdGVwcy5maWx0ZXIoKHN0ZXApID0+ICFzdGVwLmZ1bGZpbGxlZCk7XG5cdFx0aWYgKHVuZnVsZmlsbGVkU3RlcHMubGVuZ3RoICE9PSAxKSByZXR1cm47XG5cdFx0Y29uc3Qgb3AgPSB1bmZ1bGZpbGxlZFN0ZXBzWzBdO1xuXHRcdGlmIChvcCAmJiBvcC5vcCA9PT0gU3RlcE9wQ29kZS5TdGVwUGxhbm5lZCkgcmV0dXJuIG9wLmhhc2hlZElkO1xuXHR9XG5cdGFzeW5jIGZpbHRlck5ld1N0ZXBzKGZvdW5kU3RlcHMpIHtcblx0XHRpZiAodGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXApIHJldHVybjtcblx0XHRjb25zdCBuZXdTdGVwcyA9IGZvdW5kU3RlcHMucmVkdWNlKChhY2MsIHN0ZXApID0+IHtcblx0XHRcdGlmICghc3RlcC5oYXNTdGVwU3RhdGUpIGFjYy5wdXNoKHN0ZXApO1xuXHRcdFx0cmV0dXJuIGFjYztcblx0XHR9LCBbXSk7XG5cdFx0aWYgKCFuZXdTdGVwcy5sZW5ndGgpIHJldHVybjtcblx0XHQvKipcblx0XHQqIFdlJ3JlIGZpbmlzaGluZyB1cDsgbGV0J3MgdHJpZ2dlciB0aGUgbGFzdCBvZiB0aGUgaG9va3MuXG5cdFx0Ki9cblx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVFeGVjdXRpb24/LigpO1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyRXhlY3V0aW9uPy4oKTtcblx0XHRjb25zdCBzdGVwTGlzdCA9IG5ld1N0ZXBzLm1hcCgoc3RlcCkgPT4gKHtcblx0XHRcdGRpc3BsYXlOYW1lOiBzdGVwLmRpc3BsYXlOYW1lLFxuXHRcdFx0b3A6IHN0ZXAub3AsXG5cdFx0XHRpZDogc3RlcC5oYXNoZWRJZCxcblx0XHRcdG5hbWU6IHN0ZXAubmFtZSxcblx0XHRcdG9wdHM6IHN0ZXAub3B0cyxcblx0XHRcdHVzZXJsYW5kOiBzdGVwLnVzZXJsYW5kXG5cdFx0fSkpO1xuXHRcdC8qKlxuXHRcdCogV2UgYWxzbyBydW4gYG9uU2VuZEV2ZW50YCBtaWRkbGV3YXJlIGhvb2tzIGFnYWluc3QgYHN0ZXAuaW52b2tlKClgIHN0ZXBzXG5cdFx0KiB0byBlbnN1cmUgdGhhdCB0aGVpciBgZGF0YWAgaXMgdHJhbnNmb3JtZWQgY29ycmVjdGx5LlxuXHRcdCovXG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtTmV3U3RlcHMoc3RlcExpc3QpO1xuXHR9XG5cdC8qKlxuXHQqIFVzaW5nIG1pZGRsZXdhcmUsIHRyYW5zZm9ybSBhbnkgbmV3bHktZm91bmQgc3RlcHMgYmVmb3JlIHJldHVybmluZyB0aGVtIHRvXG5cdCogYW4gSW5uZ2VzdCBTZXJ2ZXIuXG5cdCovXG5cdGFzeW5jIHRyYW5zZm9ybU5ld1N0ZXBzKHN0ZXBzKSB7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKHN0ZXBzLm1hcChhc3luYyAoc3RlcCkgPT4ge1xuXHRcdFx0aWYgKHN0ZXAub3AgIT09IFN0ZXBPcENvZGUuSW52b2tlRnVuY3Rpb24pIHJldHVybiBzdGVwO1xuXHRcdFx0LyoqXG5cdFx0XHQqIEZvciBlYWNoIGV2ZW50IGJlaW5nIHNlbnQsIGNyZWF0ZSBhIG5ldyBgb25TZW5kRXZlbnRgIGhvb2sgc3RhY2sgdG9cblx0XHRcdCogcHJvY2VzcyBpdC4gV2UgZG8gdGhpcyBhcyBtaWRkbGV3YXJlIGhvb2tzIGFyZSBpbnRlbmRlZCB0byBydW4gb25jZVxuXHRcdFx0KiBkdXJpbmcgZWFjaCBsaWZlY3ljbGUgKG9uRnVuY3Rpb25SdW4gb3Igb25TZW5kRXZlbnQpIGFuZCBoZXJlLCBhIGhvb2tcblx0XHRcdCogaXMgcnVuIGZvciBldmVyeSBzaW5nbGUgZXZlbnQuXG5cdFx0XHQqXG5cdFx0XHQqIFRoaXMgaXMgZG9uZSBiZWNhdXNlIGEgZGV2ZWxvcGVyIGNhbiB1c2UgdGhpcyBob29rIHRvIGZpbHRlciBvdXRcblx0XHRcdCogZXZlbnRzIGVudGlyZWx5OyBpZiB3ZSBiYXRjaCBhbGwgb2YgdGhlIGV2ZW50cyB0b2dldGhlciwgd2UgY2FuJ3Rcblx0XHRcdCogdGVsbCB3aGljaCBvbmVzIHdlcmUgZmlsdGVyZWQgb3V0IGlmIHdlJ3JlIHByb2Nlc3NpbmcgPjEgaW52b2NhdGlvblxuXHRcdFx0KiBoZXJlLlxuXHRcdFx0Ki9cblx0XHRcdGNvbnN0IHRyYW5zZm9ybWVkUGF5bG9hZCA9IGF3YWl0IChhd2FpdCBnZXRIb29rU3RhY2sodGhpcy5vcHRpb25zLmZuW1wibWlkZGxld2FyZVwiXSwgXCJvblNlbmRFdmVudFwiLCB2b2lkIDAsIHtcblx0XHRcdFx0dHJhbnNmb3JtSW5wdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0Li4ucHJldixcblx0XHRcdFx0XHRcdC4uLm91dHB1dFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRyYW5zZm9ybU91dHB1dDogKHByZXYsIG91dHB1dCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiB7IHJlc3VsdDoge1xuXHRcdFx0XHRcdFx0Li4ucHJldi5yZXN1bHQsXG5cdFx0XHRcdFx0XHQuLi5vdXRwdXQ/LnJlc3VsdFxuXHRcdFx0XHRcdH0gfTtcblx0XHRcdFx0fVxuXHRcdFx0fSkpLnRyYW5zZm9ybUlucHV0Py4oeyBwYXlsb2FkczogW3tcblx0XHRcdFx0Li4uc3RlcC5vcHRzPy5wYXlsb2FkID8/IHt9LFxuXHRcdFx0XHRuYW1lOiBpbnRlcm5hbEV2ZW50cy5GdW5jdGlvbkludm9rZWRcblx0XHRcdH1dIH0pO1xuXHRcdFx0Y29uc3QgbmV3UGF5bG9hZCA9IGludm9rZVBheWxvYWRTY2hlbWEucGFyc2UodHJhbnNmb3JtZWRQYXlsb2FkPy5wYXlsb2Fkcz8uWzBdID8/IHt9KTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLnN0ZXAsXG5cdFx0XHRcdG9wdHM6IHtcblx0XHRcdFx0XHQuLi5zdGVwLm9wdHMsXG5cdFx0XHRcdFx0cGF5bG9hZDoge1xuXHRcdFx0XHRcdFx0Li4uc3RlcC5vcHRzPy5wYXlsb2FkID8/IHt9LFxuXHRcdFx0XHRcdFx0Li4ubmV3UGF5bG9hZFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9KSk7XG5cdH1cblx0YXN5bmMgZXhlY3V0ZVN0ZXAoeyBpZCwgbmFtZSwgb3B0cywgZm4sIGRpc3BsYXlOYW1lLCB1c2VybGFuZCwgaGFzaGVkSWQgfSkge1xuXHRcdHRoaXMuZGVidWcoYHByZXBhcmluZyB0byBleGVjdXRlIHN0ZXAgXCIke2lkfVwiYCk7XG5cdFx0dGhpcy50aW1lb3V0Py5jbGVhcigpO1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0Y29uc3Qgb3V0Z29pbmdPcCA9IHtcblx0XHRcdGlkOiBoYXNoZWRJZCxcblx0XHRcdG9wOiBTdGVwT3BDb2RlLlN0ZXBSdW4sXG5cdFx0XHRuYW1lLFxuXHRcdFx0b3B0cyxcblx0XHRcdGRpc3BsYXlOYW1lLFxuXHRcdFx0dXNlcmxhbmRcblx0XHR9O1xuXHRcdHRoaXMuc3RhdGUuZXhlY3V0aW5nU3RlcCA9IG91dGdvaW5nT3A7XG5cdFx0Y29uc3Qgc3RvcmUgPSBhd2FpdCBnZXRBc3luY0N0eCgpO1xuXHRcdGlmIChzdG9yZT8uZXhlY3V0aW9uKSBzdG9yZS5leGVjdXRpb24uZXhlY3V0aW5nU3RlcCA9IHtcblx0XHRcdGlkLFxuXHRcdFx0bmFtZTogZGlzcGxheU5hbWVcblx0XHR9O1xuXHRcdHRoaXMuZGVidWcoYGV4ZWN1dGluZyBzdGVwIFwiJHtpZH1cImApO1xuXHRcdGxldCBpbnRlcnZhbDtcblx0XHRyZXR1cm4gZ29JbnRlcnZhbFRpbWluZygoKSA9PiBydW5Bc1Byb21pc2UoZm4pKS5maW5hbGx5KGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMuZGVidWcoYGZpbmlzaGVkIGV4ZWN1dGluZyBzdGVwIFwiJHtpZH1cImApO1xuXHRcdFx0ZGVsZXRlIHRoaXMuc3RhdGUuZXhlY3V0aW5nU3RlcDtcblx0XHRcdGlmIChzdG9yZT8uZXhlY3V0aW9uKSBkZWxldGUgc3RvcmUuZXhlY3V0aW9uLmV4ZWN1dGluZ1N0ZXA7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlckV4ZWN1dGlvbj8uKCk7XG5cdFx0fSkudGhlbihhc3luYyAoeyByZXN1bHRQcm9taXNlLCBpbnRlcnZhbDogX2ludGVydmFsIH0pID0+IHtcblx0XHRcdGludGVydmFsID0gX2ludGVydmFsO1xuXHRcdFx0Y29uc3QgbWV0YWRhdGEgPSB0aGlzLnN0YXRlLm1ldGFkYXRhPy5nZXQoaWQpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4ub3V0Z29pbmdPcCxcblx0XHRcdFx0ZGF0YTogYXdhaXQgcmVzdWx0UHJvbWlzZSxcblx0XHRcdFx0Li4ubWV0YWRhdGEgJiYgbWV0YWRhdGEubGVuZ3RoID4gMCA/IHsgbWV0YWRhdGEgfSA6IHt9XG5cdFx0XHR9O1xuXHRcdH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0bGV0IGVycm9ySXNSZXRyaWFibGUgPSB0cnVlO1xuXHRcdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgTm9uUmV0cmlhYmxlRXJyb3IpIGVycm9ySXNSZXRyaWFibGUgPSBmYWxzZTtcblx0XHRcdGVsc2UgaWYgKHRoaXMuZm5BcmcubWF4QXR0ZW1wdHMgJiYgdGhpcy5mbkFyZz8ubWF4QXR0ZW1wdHMgLSAxID09PSB0aGlzLmZuQXJnLmF0dGVtcHQpIGVycm9ySXNSZXRyaWFibGUgPSBmYWxzZTtcblx0XHRcdGNvbnN0IG1ldGFkYXRhID0gdGhpcy5zdGF0ZS5tZXRhZGF0YT8uZ2V0KGlkKTtcblx0XHRcdGlmIChlcnJvcklzUmV0cmlhYmxlKSByZXR1cm4ge1xuXHRcdFx0XHQuLi5vdXRnb2luZ09wLFxuXHRcdFx0XHRvcDogU3RlcE9wQ29kZS5TdGVwRXJyb3IsXG5cdFx0XHRcdGVycm9yLFxuXHRcdFx0XHQuLi5tZXRhZGF0YSAmJiBtZXRhZGF0YS5sZW5ndGggPiAwID8geyBtZXRhZGF0YSB9IDoge31cblx0XHRcdH07XG5cdFx0XHRlbHNlIHJldHVybiB7XG5cdFx0XHRcdC4uLm91dGdvaW5nT3AsXG5cdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlN0ZXBGYWlsZWQsXG5cdFx0XHRcdGVycm9yLFxuXHRcdFx0XHQuLi5tZXRhZGF0YSAmJiBtZXRhZGF0YS5sZW5ndGggPiAwID8geyBtZXRhZGF0YSB9IDoge31cblx0XHRcdH07XG5cdFx0fSkudGhlbigob3ApID0+ICh7XG5cdFx0XHQuLi5vcCxcblx0XHRcdHRpbWluZzogaW50ZXJ2YWxcblx0XHR9KSk7XG5cdH1cblx0LyoqXG5cdCogU3RhcnRzIGV4ZWN1dGlvbiBvZiB0aGUgdXNlcidzIGZ1bmN0aW9uLCBpbmNsdWRpbmcgdHJpZ2dlcmluZyBjaGVja3BvaW50c1xuXHQqIGFuZCBtaWRkbGV3YXJlIGhvb2tzIHdoZXJlIGFwcHJvcHJpYXRlLlxuXHQqL1xuXHRhc3luYyBzdGFydEV4ZWN1dGlvbigpIHtcblx0XHQvKipcblx0XHQqIE11dGF0ZSBpbnB1dCBhcyBuZWNjZXNzYXJ5IGJhc2VkIG9uIG1pZGRsZXdhcmUuXG5cdFx0Ki9cblx0XHRhd2FpdCB0aGlzLnRyYW5zZm9ybUlucHV0KCk7XG5cdFx0LyoqXG5cdFx0KiBTdGFydCB0aGUgdGltZXIgdG8gdGltZSBvdXQgdGhlIHJ1biBpZiBuZWVkZWQuXG5cdFx0Ki9cblx0XHR0aGlzLnRpbWVvdXQ/LnN0YXJ0KCk7XG5cdFx0dGhpcy5jaGVja3BvaW50aW5nTWF4UnVudGltZVRpbWVyPy5zdGFydCgpO1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZU1lbW9pemF0aW9uPy4oKTtcblx0XHQvKipcblx0XHQqIElmIHdlIGhhZCBubyBzdGF0ZSB0byBiZWdpbiB3aXRoLCBpbW1lZGlhdGVseSBlbmQgdGhlIG1lbW9pemF0aW9uIHBoYXNlLlxuXHRcdCovXG5cdFx0aWYgKHRoaXMuc3RhdGUuYWxsU3RhdGVVc2VkKCkpIHtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHR9XG5cdFx0LyoqXG5cdFx0KiBUcmlnZ2VyIHRoZSB1c2VyJ3MgZnVuY3Rpb24uXG5cdFx0Ki9cblx0XHRydW5Bc1Byb21pc2UoKCkgPT4gdGhpcy51c2VyRm5Ub1J1bih0aGlzLmZuQXJnKSkuZmluYWxseShhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlckV4ZWN1dGlvbj8uKCk7XG5cdFx0fSkudGhlbigoZGF0YSkgPT4ge1xuXHRcdFx0dGhpcy5zdGF0ZS5zZXRDaGVja3BvaW50KHtcblx0XHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZXNvbHZlZFwiLFxuXHRcdFx0XHRkYXRhXG5cdFx0XHR9KTtcblx0XHR9KS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRcdHRoaXMuc3RhdGUuc2V0Q2hlY2twb2ludCh7XG5cdFx0XHRcdHR5cGU6IFwiZnVuY3Rpb24tcmVqZWN0ZWRcIixcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIFVzaW5nIG1pZGRsZXdhcmUsIHRyYW5zZm9ybSBpbnB1dCBiZWZvcmUgcnVubmluZy5cblx0Ki9cblx0YXN5bmMgdHJhbnNmb3JtSW5wdXQoKSB7XG5cdFx0Y29uc3QgaW5wdXRNdXRhdGlvbnMgPSBhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy50cmFuc2Zvcm1JbnB1dD8uKHtcblx0XHRcdGN0eDogeyAuLi50aGlzLmZuQXJnIH0sXG5cdFx0XHRzdGVwczogT2JqZWN0LnZhbHVlcyh0aGlzLnN0YXRlLnN0ZXBTdGF0ZSksXG5cdFx0XHRmbjogdGhpcy5vcHRpb25zLmZuLFxuXHRcdFx0cmVxQXJnczogdGhpcy5vcHRpb25zLnJlcUFyZ3Ncblx0XHR9KTtcblx0XHRpZiAoaW5wdXRNdXRhdGlvbnM/LmN0eCkgdGhpcy5mbkFyZyA9IGlucHV0TXV0YXRpb25zLmN0eDtcblx0XHRpZiAoaW5wdXRNdXRhdGlvbnM/LnN0ZXBzKSB0aGlzLnN0YXRlLnN0ZXBTdGF0ZSA9IE9iamVjdC5mcm9tRW50cmllcyhpbnB1dE11dGF0aW9ucy5zdGVwcy5tYXAoKHN0ZXApID0+IFtzdGVwLmlkLCBzdGVwXSkpO1xuXHR9XG5cdC8qKlxuXHQqIFVzaW5nIG1pZGRsZXdhcmUsIHRyYW5zZm9ybSBvdXRwdXQgYmVmb3JlIHJldHVybmluZy5cblx0Ki9cblx0YXN5bmMgdHJhbnNmb3JtT3V0cHV0KGRhdGFPckVycm9yKSB7XG5cdFx0Y29uc3Qgb3V0cHV0ID0geyAuLi5kYXRhT3JFcnJvciB9O1xuXHRcdGNvbnN0IGlzU3RlcEV4ZWN1dGlvbiA9IEJvb2xlYW4odGhpcy5zdGF0ZS5leGVjdXRpbmdTdGVwKTtcblx0XHRjb25zdCB0cmFuc2Zvcm1lZE91dHB1dCA9IGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LnRyYW5zZm9ybU91dHB1dD8uKHtcblx0XHRcdHJlc3VsdDogeyAuLi5vdXRwdXQgfSxcblx0XHRcdHN0ZXA6IHRoaXMuc3RhdGUuZXhlY3V0aW5nU3RlcFxuXHRcdH0pO1xuXHRcdGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHtcblx0XHRcdC4uLm91dHB1dCxcblx0XHRcdC4uLnRyYW5zZm9ybWVkT3V0cHV0Py5yZXN1bHRcblx0XHR9O1xuXHRcdGlmICghaXNTdGVwRXhlY3V0aW9uKSBhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5maW5pc2hlZD8uKHsgcmVzdWx0OiB7IC4uLnR5cGVvZiBlcnJvciAhPT0gXCJ1bmRlZmluZWRcIiA/IHsgZXJyb3IgfSA6IHsgZGF0YSB9IH0gfSk7XG5cdFx0aWYgKHR5cGVvZiBlcnJvciAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0LyoqXG5cdFx0XHQqIEVuc3VyZSB3ZSBnaXZlIG1pZGRsZXdhcmUgdGhlIGNoYW5jZSB0byBkZWNpZGUgb24gcmV0cmlhYmxlIGJlaGF2aW91clxuXHRcdFx0KiBieSBsb29raW5nIGF0IHRoZSBlcnJvciByZXR1cm5lZCBmcm9tIG91dHB1dCB0cmFuc2Zvcm1hdGlvbi5cblx0XHRcdCovXG5cdFx0XHRsZXQgcmV0cmlhYmxlID0gIShlcnJvciBpbnN0YW5jZW9mIE5vblJldHJpYWJsZUVycm9yIHx8IGVycm9yIGluc3RhbmNlb2YgU3RlcEVycm9yICYmIGVycm9yID09PSB0aGlzLnN0YXRlLnJlY2VudGx5UmVqZWN0ZWRTdGVwRXJyb3IpO1xuXHRcdFx0aWYgKHJldHJpYWJsZSAmJiBlcnJvciBpbnN0YW5jZW9mIFJldHJ5QWZ0ZXJFcnJvcikgcmV0cmlhYmxlID0gZXJyb3IucmV0cnlBZnRlcjtcblx0XHRcdGNvbnN0IHNlcmlhbGl6ZWRFcnJvciA9IG1pbmlmeVByZXR0eUVycm9yKHNlcmlhbGl6ZUVycm9yKGVycm9yKSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiBcImZ1bmN0aW9uLXJlamVjdGVkXCIsXG5cdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdFx0ZXJyb3I6IHNlcmlhbGl6ZWRFcnJvcixcblx0XHRcdFx0cmV0cmlhYmxlXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZXNvbHZlZFwiLFxuXHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdGRhdGE6IHVuZGVmaW5lZFRvTnVsbChkYXRhKVxuXHRcdH07XG5cdH1cblx0Y3JlYXRlRXhlY3V0aW9uU3RhdGUoKSB7XG5cdFx0Y29uc3QgZCA9IGNyZWF0ZURlZmVycmVkUHJvbWlzZVdpdGhTdGFjaygpO1xuXHRcdGxldCBjaGVja3BvaW50UmVzb2x2ZSA9IGQuZGVmZXJyZWQucmVzb2x2ZTtcblx0XHRjb25zdCBjaGVja3BvaW50UmVzdWx0cyA9IGQucmVzdWx0cztcblx0XHRjb25zdCBsb29wID0gKGFzeW5jIGZ1bmN0aW9uKiAoY2xlYW5VcCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdFx0XHRjb25zdCByZXMgPSAoYXdhaXQgY2hlY2twb2ludFJlc3VsdHMubmV4dCgpKS52YWx1ZTtcblx0XHRcdFx0XHRpZiAocmVzKSB5aWVsZCByZXM7XG5cdFx0XHRcdH1cblx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdGNsZWFuVXA/LigpO1xuXHRcdFx0fVxuXHRcdH0pKCgpID0+IHtcblx0XHRcdHRoaXMudGltZW91dD8uY2xlYXIoKTtcblx0XHRcdHRoaXMuY2hlY2twb2ludGluZ01heFJ1bnRpbWVUaW1lcj8uY2xlYXIoKTtcblx0XHRcdGNoZWNrcG9pbnRSZXN1bHRzLnJldHVybigpO1xuXHRcdH0pO1xuXHRcdGNvbnN0IHN0ZXBzVG9GdWxmaWxsID0gT2JqZWN0LmtleXModGhpcy5vcHRpb25zLnN0ZXBTdGF0ZSkubGVuZ3RoO1xuXHRcdHJldHVybiB7XG5cdFx0XHRzdGVwU3RhdGU6IHRoaXMub3B0aW9ucy5zdGVwU3RhdGUsXG5cdFx0XHRzdGVwc1RvRnVsZmlsbCxcblx0XHRcdHN0ZXBzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLFxuXHRcdFx0bG9vcCxcblx0XHRcdGhhc1N0ZXBzOiBCb29sZWFuKHN0ZXBzVG9GdWxmaWxsKSxcblx0XHRcdHN0ZXBDb21wbGV0aW9uT3JkZXI6IFsuLi50aGlzLm9wdGlvbnMuc3RlcENvbXBsZXRpb25PcmRlcl0sXG5cdFx0XHRyZW1haW5pbmdTdGVwc1RvQmVTZWVuOiBuZXcgU2V0KHRoaXMub3B0aW9ucy5zdGVwQ29tcGxldGlvbk9yZGVyKSxcblx0XHRcdHNldENoZWNrcG9pbnQ6IChjaGVja3BvaW50KSA9PiB7XG5cdFx0XHRcdCh7cmVzb2x2ZTogY2hlY2twb2ludFJlc29sdmV9ID0gY2hlY2twb2ludFJlc29sdmUoY2hlY2twb2ludCkpO1xuXHRcdFx0fSxcblx0XHRcdGFsbFN0YXRlVXNlZDogKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5zdGF0ZS5yZW1haW5pbmdTdGVwc1RvQmVTZWVuLnNpemUgPT09IDA7XG5cdFx0XHR9LFxuXHRcdFx0bWV0YWRhdGE6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKClcblx0XHR9O1xuXHR9XG5cdGdldCBvcHMoKSB7XG5cdFx0cmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyh0aGlzLnN0YXRlLnN0ZXBzKTtcblx0fVxuXHRjcmVhdGVGbkFyZygpIHtcblx0XHRjb25zdCBzdGVwID0gdGhpcy5jcmVhdGVTdGVwVG9vbHMoKTtcblx0XHRsZXQgZm5BcmcgPSB7XG5cdFx0XHQuLi50aGlzLm9wdGlvbnMuZGF0YSxcblx0XHRcdHN0ZXBcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCogSGFuZGxlIHVzZSBvZiB0aGUgYG9uRmFpbHVyZWAgb3B0aW9uIGJ5IGRlc2VyaWFsaXppbmcgdGhlIGVycm9yLlxuXHRcdCovXG5cdFx0aWYgKHRoaXMub3B0aW9ucy5pc0ZhaWx1cmVIYW5kbGVyKSB7XG5cdFx0XHRjb25zdCBldmVudERhdGEgPSB6Lm9iamVjdCh7IGVycm9yOiBqc29uRXJyb3JTY2hlbWEgfSkucGFyc2UoZm5BcmcuZXZlbnQ/LmRhdGEpO1xuXHRcdFx0Zm5BcmcgPSB7XG5cdFx0XHRcdC4uLmZuQXJnLFxuXHRcdFx0XHRlcnJvcjogZGVzZXJpYWxpemVFcnJvcihldmVudERhdGEuZXJyb3IpXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLnRyYW5zZm9ybUN0eD8uKGZuQXJnKSA/PyBmbkFyZztcblx0fVxuXHRjcmVhdGVTdGVwVG9vbHMoKSB7XG5cdFx0LyoqXG5cdFx0KiBBIGxpc3Qgb2Ygc3RlcHMgdGhhdCBoYXZlIGJlZW4gZm91bmQgYW5kIGFyZSBiZWluZyByb2xsZWQgdXAgYmVmb3JlIGJlaW5nXG5cdFx0KiByZXBvcnRlZCB0byB0aGUgY29yZSBsb29wLlxuXHRcdCovXG5cdFx0Y29uc3QgZm91bmRTdGVwc1RvUmVwb3J0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHQvKipcblx0XHQqIEEgbWFwIG9mIHRoZSBzdWJzZXQgb2YgZm91bmQgc3RlcHMgdG8gcmVwb3J0IHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cblx0XHQqIGhhbmRsZWQuIFVzZWQgZm9yIGZhc3QgYWNjZXNzIHRvIHN0ZXBzIHRoYXQgbmVlZCB0byBiZSBoYW5kbGVkIGluIG9yZGVyLlxuXHRcdCovXG5cdFx0Y29uc3QgdW5oYW5kbGVkRm91bmRTdGVwc1RvUmVwb3J0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHQvKipcblx0XHQqIEEgbWFwIG9mIHRoZSBsYXRlc3Qgc2VxdWVudGlhbCBzdGVwIGluZGV4ZXMgZm91bmQgZm9yIGVhY2ggc3RlcCBJRC4gVXNlZFxuXHRcdCogdG8gZW5zdXJlIHRoYXQgd2UgZG9uJ3QgaW5kZXggc3RlcHMgaW4gcGFyYWxsZWwuXG5cdFx0KlxuXHRcdCogTm90ZSB0aGF0IHRoZXNlIG11c3QgYmUgc2VxdWVudGlhbDsgaWYgd2UndmUgc2VlbiBvciBhc3NpZ25lZCBgYToxYCxcblx0XHQqIGBhOjJgIGFuZCBgYTo0YCwgdGhlIGxhdGVzdCBzZXF1ZW50aWFsIHN0ZXAgaW5kZXggaXMgYDJgLlxuXHRcdCpcblx0XHQqL1xuXHRcdGNvbnN0IGV4cGVjdGVkTmV4dFN0ZXBJbmRleGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHQvKipcblx0XHQqIEFuIG9yZGVyZWQgbGlzdCBvZiBzdGVwIElEcyB0aGF0IGhhdmUgeWV0IHRvIGJlIGhhbmRsZWQgaW4gdGhpc1xuXHRcdCogZXhlY3V0aW9uLiBVc2VkIHRvIGVuc3VyZSB0aGF0IHdlIGhhbmRsZSBzdGVwcyBpbiB0aGUgb3JkZXIgdGhleSB3ZXJlXG5cdFx0KiBmb3VuZCBhbmQgYmFzZWQgb24gdGhlIGBzdGVwQ29tcGxldGlvbk9yZGVyYCBpbiB0aGlzIGV4ZWN1dGlvbidzIHN0YXRlLlxuXHRcdCovXG5cdFx0Y29uc3QgcmVtYWluaW5nU3RlcENvbXBsZXRpb25PcmRlciA9IHRoaXMuc3RhdGUuc3RlcENvbXBsZXRpb25PcmRlci5zbGljZSgpO1xuXHRcdC8qKlxuXHRcdCogQSBwcm9taXNlIHRoYXQncyB1c2VkIHRvIGVuc3VyZSB0aGF0IHN0ZXAgcmVwb3J0aW5nIGNhbm5vdCBiZSBydW4gbW9yZSB0aGFuXG5cdFx0KiBvbmNlIGluIGEgZ2l2ZW4gYXN5bmNocm9ub3VzIHRpbWUgc3Bhbi5cblx0XHQqL1xuXHRcdGxldCBmb3VuZFN0ZXBzUmVwb3J0UHJvbWlzZTtcblx0XHQvKipcblx0XHQqIEEgcHJvbWlzZSB0aGF0J3MgdXNlZCB0byByZXByZXNlbnQgbWlkZGxld2FyZSBob29rcyBydW5uaW5nIGJlZm9yZVxuXHRcdCogZXhlY3V0aW9uLlxuXHRcdCovXG5cdFx0bGV0IGJlZm9yZUV4ZWNIb29rc1Byb21pc2U7XG5cdFx0LyoqXG5cdFx0KiBBIGZsYWcgdXNlZCB0byBlbnN1cmUgdGhhdCB3ZSBvbmx5IHdhcm4gYWJvdXQgcGFyYWxsZWwgaW5kZXhpbmcgb25jZSBwZXJcblx0XHQqIGV4ZWN1dGlvbiB0byBhdm9pZCBzcGFtbWluZyB0aGUgY29uc29sZS5cblx0XHQqL1xuXHRcdGxldCB3YXJuT2ZQYXJhbGxlbEluZGV4aW5nID0gZmFsc2U7XG5cdFx0LyoqXG5cdFx0KiBDb3VudHMgdGhlIG51bWJlciBvZiB0aW1lcyB3ZSd2ZSBleHRlbmRlZCB0aGlzIHRpY2suXG5cdFx0Ki9cblx0XHRsZXQgdGlja0V4dGVuc2lvbkNvdW50ID0gMDtcblx0XHQvKipcblx0XHQqIEdpdmVuIGEgY29sbGlkaW5nIHN0ZXAgSUQsIG1heWJlIHdhcm4gdGhlIHVzZXIgYWJvdXQgcGFyYWxsZWwgaW5kZXhpbmcuXG5cdFx0Ki9cblx0XHRjb25zdCBtYXliZVdhcm5PZlBhcmFsbGVsSW5kZXhpbmcgPSAodXNlcmxhbmRDb2xsaXNpb25JZCkgPT4ge1xuXHRcdFx0aWYgKHdhcm5PZlBhcmFsbGVsSW5kZXhpbmcpIHJldHVybjtcblx0XHRcdGNvbnN0IGhhc2hlZENvbGxpc2lvbklkID0gX2ludGVybmFscy5oYXNoSWQodXNlcmxhbmRDb2xsaXNpb25JZCk7XG5cdFx0XHRpZiAodGhpcy5zdGF0ZS5zdGVwcy5oYXMoaGFzaGVkQ29sbGlzaW9uSWQpKSB7XG5cdFx0XHRcdGlmICghZm91bmRTdGVwc1RvUmVwb3J0LmhhcyhoYXNoZWRDb2xsaXNpb25JZCkpIHtcblx0XHRcdFx0XHR3YXJuT2ZQYXJhbGxlbEluZGV4aW5nID0gdHJ1ZTtcblx0XHRcdFx0XHR0aGlzLm9wdGlvbnMuY2xpZW50W1wid2Fybk1ldGFkYXRhXCJdKHsgcnVuX2lkOiB0aGlzLmZuQXJnLnJ1bklkIH0sIEVyckNvZGUuQVVUT01BVElDX1BBUkFMTEVMX0lOREVYSU5HLCBwcmV0dHlFcnJvcih7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIndhcm5cIixcblx0XHRcdFx0XHRcdHdoYXRIYXBwZW5lZDogXCJXZSBkZXRlY3RlZCB0aGF0IHlvdSBoYXZlIG11bHRpcGxlIHN0ZXBzIHdpdGggdGhlIHNhbWUgSUQuXCIsXG5cdFx0XHRcdFx0XHRjb2RlOiBFcnJDb2RlLkFVVE9NQVRJQ19QQVJBTExFTF9JTkRFWElORyxcblx0XHRcdFx0XHRcdHdoeTogYFRoaXMgY2FuIGhhcHBlbiBpZiB5b3UncmUgdXNpbmcgdGhlIHNhbWUgSUQgZm9yIG11bHRpcGxlIHN0ZXBzIGFjcm9zcyBkaWZmZXJlbnQgY2hhaW5zIG9mIHBhcmFsbGVsIHdvcmsuIFdlIGZvdW5kIHRoZSBpc3N1ZSB3aXRoIHN0ZXAgXCIke3VzZXJsYW5kQ29sbGlzaW9uSWR9XCIuYCxcblx0XHRcdFx0XHRcdHJlYXNzdXJhbmNlOiBcIllvdXIgZnVuY3Rpb24gaXMgc3RpbGwgcnVubmluZywgdGhvdWdoIGl0IG1heSBleGhpYml0IHVuZXhwZWN0ZWQgYmVoYXZpb3VyLlwiLFxuXHRcdFx0XHRcdFx0Y29uc2VxdWVuY2VzOiBcIlVzaW5nIHRoZSBzYW1lIElEcyBhY3Jvc3MgcGFyYWxsZWwgY2hhaW5zIG9mIHdvcmsgY2FuIGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3VyLlwiLFxuXHRcdFx0XHRcdFx0dG9GaXhOb3c6IFwiV2UgcmVjb21tZW5kIHVzaW5nIGEgdW5pcXVlIElEIGZvciBlYWNoIHN0ZXAsIGVzcGVjaWFsbHkgdGhvc2UgaGFwcGVuaW5nIGluIHBhcmFsbGVsLlwiXG5cdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0XHQvKipcblx0XHQqIEEgaGVscGVyIHVzZWQgdG8gcmVwb3J0IHN0ZXBzIHRvIHRoZSBjb3JlIGxvb3AuIFVzZWQgYWZ0ZXIgYWRkaW5nIGFuIGl0ZW1cblx0XHQqIHRvIGBmb3VuZFN0ZXBzVG9SZXBvcnRgLlxuXHRcdCovXG5cdFx0Y29uc3QgcmVwb3J0TmV4dFRpY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoZm91bmRTdGVwc1JlcG9ydFByb21pc2UpIHJldHVybjtcblx0XHRcdGxldCBleHRlbnNpb25Qcm9taXNlO1xuXHRcdFx0aWYgKCsrdGlja0V4dGVuc2lvbkNvdW50ID49IDEwKSB7XG5cdFx0XHRcdHRpY2tFeHRlbnNpb25Db3VudCA9IDA7XG5cdFx0XHRcdGV4dGVuc2lvblByb21pc2UgPSByZXNvbHZlTmV4dFRpY2soKTtcblx0XHRcdH0gZWxzZSBleHRlbnNpb25Qcm9taXNlID0gcmVzb2x2ZUFmdGVyUGVuZGluZygpO1xuXHRcdFx0Zm91bmRTdGVwc1JlcG9ydFByb21pc2UgPSBleHRlbnNpb25Qcm9taXNlLnRoZW4oKCkgPT4gYmVmb3JlRXhlY0hvb2tzUHJvbWlzZSkudGhlbigoKSA9PiB7XG5cdFx0XHRcdGZvdW5kU3RlcHNSZXBvcnRQcm9taXNlID0gdm9pZCAwO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHJlbWFpbmluZ1N0ZXBDb21wbGV0aW9uT3JkZXIubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRjb25zdCBuZXh0U3RlcElkID0gcmVtYWluaW5nU3RlcENvbXBsZXRpb25PcmRlcltpXTtcblx0XHRcdFx0XHRpZiAoIW5leHRTdGVwSWQpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGlmICh1bmhhbmRsZWRGb3VuZFN0ZXBzVG9SZXBvcnQuZ2V0KG5leHRTdGVwSWQpPy5oYW5kbGUoKSkge1xuXHRcdFx0XHRcdFx0cmVtYWluaW5nU3RlcENvbXBsZXRpb25PcmRlci5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdFx0XHR1bmhhbmRsZWRGb3VuZFN0ZXBzVG9SZXBvcnQuZGVsZXRlKG5leHRTdGVwSWQpO1xuXHRcdFx0XHRcdFx0cmVwb3J0TmV4dFRpY2soKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3Qgc3RlcHMgPSBbLi4uZm91bmRTdGVwc1RvUmVwb3J0LnZhbHVlcygpXTtcblx0XHRcdFx0Zm91bmRTdGVwc1RvUmVwb3J0LmNsZWFyKCk7XG5cdFx0XHRcdHVuaGFuZGxlZEZvdW5kU3RlcHNUb1JlcG9ydC5jbGVhcigpO1xuXHRcdFx0XHR0aGlzLnN0YXRlLnNldENoZWNrcG9pbnQoe1xuXHRcdFx0XHRcdHR5cGU6IFwic3RlcHMtZm91bmRcIixcblx0XHRcdFx0XHRzdGVwc1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0KiBBIGhlbHBlciB1c2VkIHRvIHB1c2ggYSBzdGVwIHRvIHRoZSBsaXN0IG9mIHN0ZXBzIHRvIHJlcG9ydC5cblx0XHQqL1xuXHRcdGNvbnN0IHB1c2hTdGVwVG9SZXBvcnQgPSAoc3RlcCkgPT4ge1xuXHRcdFx0Zm91bmRTdGVwc1RvUmVwb3J0LnNldChzdGVwLmhhc2hlZElkLCBzdGVwKTtcblx0XHRcdHVuaGFuZGxlZEZvdW5kU3RlcHNUb1JlcG9ydC5zZXQoc3RlcC5oYXNoZWRJZCwgc3RlcCk7XG5cdFx0XHRyZXBvcnROZXh0VGljaygpO1xuXHRcdH07XG5cdFx0Y29uc3Qgc3RlcEhhbmRsZXIgPSBhc3luYyAoeyBhcmdzLCBtYXRjaE9wLCBvcHRzIH0pID0+IHtcblx0XHRcdGF3YWl0IGJlZm9yZUV4ZWNIb29rc1Byb21pc2U7XG5cdFx0XHRjb25zdCBvcElkID0gbWF0Y2hPcChnZXRTdGVwT3B0aW9ucyhhcmdzWzBdKSwgLi4uYXJncy5zbGljZSgxKSk7XG5cdFx0XHRpZiAodGhpcy5zdGF0ZS5leGVjdXRpbmdTdGVwKVxuIC8qKlxuXHRcdFx0KiBJZiBhIHN0ZXAgaXMgZm91bmQgYWZ0ZXIgYXN5bmNocm9ub3VzIGFjdGlvbnMgZHVyaW5nIGFub3RoZXIgc3RlcCdzXG5cdFx0XHQqIGV4ZWN1dGlvbiwgZXZlcnl0aGluZyBpcyBmaW5lLiBUaGUgcHJvYmxlbSBoZXJlIGlzIGlmIHdlJ3ZlIGZvdW5kXG5cdFx0XHQqIHRoYXQgYSBzdGVwIG5lc3RlZCBpbnNpZGUgYW5vdGhlciBhIHN0ZXAsIHdoaWNoIGlzIHNvbWV0aGluZyB3ZSBkb24ndFxuXHRcdFx0KiBzdXBwb3J0IGF0IHRoZSB0aW1lIG9mIHdyaXRpbmcuXG5cdFx0XHQqXG5cdFx0XHQqIEluIHRoaXMgY2FzZSwgd2UgY291bGQgdXNlIHNvbWV0aGluZyBsaWtlIEFzeW5jIEhvb2tzIHRvIHVuZGVyc3RhbmRcblx0XHRcdCogaG93IHRoZSBzdGVwIGlzIGJlaW5nIHRyaWdnZXJlZCwgdGhvdWdoIHRoaXMgaXNuJ3QgYXZhaWxhYmxlIGluIGFsbFxuXHRcdFx0KiBlbnZpcm9ubWVudHMuXG5cdFx0XHQqXG5cdFx0XHQqIFRoZXJlZm9yZSwgd2UnbGwgb25seSBzaG93IGEgd2FybmluZyBoZXJlIHRvIGluZGljYXRlIHRoYXQgdGhpcyBpc1xuXHRcdFx0KiBwb3RlbnRpYWxseSBhbiBpc3N1ZS5cblx0XHRcdCovXG5cdFx0XHR0aGlzLm9wdGlvbnMuY2xpZW50W1wid2Fybk1ldGFkYXRhXCJdKHsgcnVuX2lkOiB0aGlzLmZuQXJnLnJ1bklkIH0sIEVyckNvZGUuTkVTVElOR19TVEVQUywgcHJldHR5RXJyb3Ioe1xuXHRcdFx0XHR3aGF0SGFwcGVuZWQ6IGBXZSBkZXRlY3RlZCB0aGF0IHlvdSBoYXZlIG5lc3RlZCBcXGBzdGVwLipcXGAgdG9vbGluZyBpbiBcXGAke29wSWQuZGlzcGxheU5hbWUgPz8gb3BJZC5pZH1cXGBgLFxuXHRcdFx0XHRjb25zZXF1ZW5jZXM6IFwiTmVzdGluZyBgc3RlcC4qYCB0b29saW5nIGlzIG5vdCBzdXBwb3J0ZWQuXCIsXG5cdFx0XHRcdHR5cGU6IFwid2FyblwiLFxuXHRcdFx0XHRyZWFzc3VyYW5jZTogXCJJdCdzIHBvc3NpYmxlIHRvIHNlZSB0aGlzIHdhcm5pbmcgaWYgc3RlcHMgYXJlIHNlcGFyYXRlZCBieSByZWd1bGFyIGFzeW5jaHJvbm91cyBjYWxscywgd2hpY2ggaXMgZmluZS5cIixcblx0XHRcdFx0c3RhY2s6IHRydWUsXG5cdFx0XHRcdHRvRml4Tm93OiBcIk1ha2Ugc3VyZSB5b3UncmUgbm90IHVzaW5nIGBzdGVwLipgIHRvb2xpbmcgaW5zaWRlIG9mIG90aGVyIGBzdGVwLipgIHRvb2xpbmcuIElmIHlvdSBuZWVkIHRvIGNvbXBvc2Ugc3RlcHMgdG9nZXRoZXIsIHlvdSBjYW4gY3JlYXRlIGEgbmV3IGFzeW5jIGZ1bmN0aW9uIGFuZCBjYWxsIGl0IGZyb20gd2l0aGluIHlvdXIgc3RlcCBmdW5jdGlvbiwgb3IgdXNlIHByb21pc2UgY2hhaW5pbmcuXCIsXG5cdFx0XHRcdGNvZGU6IEVyckNvZGUuTkVTVElOR19TVEVQU1xuXHRcdFx0fSkpO1xuXHRcdFx0aWYgKHRoaXMuc3RhdGUuc3RlcHMuaGFzKF9pbnRlcm5hbHMuaGFzaElkKG9wSWQuaWQpKSkge1xuXHRcdFx0XHRjb25zdCBvcmlnaW5hbElkID0gb3BJZC5pZDtcblx0XHRcdFx0bWF5YmVXYXJuT2ZQYXJhbGxlbEluZGV4aW5nKG9yaWdpbmFsSWQpO1xuXHRcdFx0XHRjb25zdCBleHBlY3RlZE5leHRJbmRleCA9IGV4cGVjdGVkTmV4dFN0ZXBJbmRleGVzLmdldChvcmlnaW5hbElkKSA/PyAxO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gZXhwZWN0ZWROZXh0SW5kZXg7OyBpKyspIHtcblx0XHRcdFx0XHRjb25zdCBuZXdJZCA9IG9yaWdpbmFsSWQgKyBTVEVQX0lOREVYSU5HX1NVRkZJWCArIGk7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLnN0YXRlLnN0ZXBzLmhhcyhfaW50ZXJuYWxzLmhhc2hJZChuZXdJZCkpKSB7XG5cdFx0XHRcdFx0XHRleHBlY3RlZE5leHRTdGVwSW5kZXhlcy5zZXQob3JpZ2luYWxJZCwgaSArIDEpO1xuXHRcdFx0XHRcdFx0b3BJZC5pZCA9IG5ld0lkO1xuXHRcdFx0XHRcdFx0b3BJZC51c2VybGFuZC5pbmRleCA9IGk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGNvbnN0IHsgcHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0IH0gPSBjcmVhdGVEZWZlcnJlZFByb21pc2UoKTtcblx0XHRcdGNvbnN0IGhhc2hlZElkID0gX2ludGVybmFscy5oYXNoSWQob3BJZC5pZCk7XG5cdFx0XHRjb25zdCBzdGVwU3RhdGUgPSB0aGlzLnN0YXRlLnN0ZXBTdGF0ZVtoYXNoZWRJZF07XG5cdFx0XHRsZXQgaXNGdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdGlmIChzdGVwU3RhdGUpIHtcblx0XHRcdFx0c3RlcFN0YXRlLnNlZW4gPSB0cnVlO1xuXHRcdFx0XHR0aGlzLnN0YXRlLnJlbWFpbmluZ1N0ZXBzVG9CZVNlZW4uZGVsZXRlKGhhc2hlZElkKTtcblx0XHRcdFx0aWYgKHR5cGVvZiBzdGVwU3RhdGUuaW5wdXQgPT09IFwidW5kZWZpbmVkXCIpIGlzRnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGxldCBleHRyYU9wdHM7XG5cdFx0XHRsZXQgZm5BcmdzID0gWy4uLmFyZ3NdO1xuXHRcdFx0aWYgKHR5cGVvZiBzdGVwU3RhdGU/LmlucHV0ICE9PSBcInVuZGVmaW5lZFwiICYmIEFycmF5LmlzQXJyYXkoc3RlcFN0YXRlLmlucHV0KSkgc3dpdGNoIChvcElkLm9wKSB7XG5cdFx0XHRcdGNhc2UgU3RlcE9wQ29kZS5TdGVwUGxhbm5lZDpcblx0XHRcdFx0XHRmbkFyZ3MgPSBbLi4uYXJncy5zbGljZSgwLCAyKSwgLi4uc3RlcFN0YXRlLmlucHV0XTtcblx0XHRcdFx0XHRleHRyYU9wdHMgPSB7IGlucHV0OiBbLi4uc3RlcFN0YXRlLmlucHV0XSB9O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFN0ZXBPcENvZGUuQWlHYXRld2F5OlxuXHRcdFx0XHRcdGV4dHJhT3B0cyA9IHsgYm9keToge1xuXHRcdFx0XHRcdFx0Li4udHlwZW9mIG9wSWQub3B0cz8uYm9keSA9PT0gXCJvYmplY3RcIiA/IHsgLi4ub3BJZC5vcHRzLmJvZHkgfSA6IHt9LFxuXHRcdFx0XHRcdFx0Li4uc3RlcFN0YXRlLmlucHV0WzBdXG5cdFx0XHRcdFx0fSB9O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3Qgc3RlcCA9IHtcblx0XHRcdFx0Li4ub3BJZCxcblx0XHRcdFx0b3B0czoge1xuXHRcdFx0XHRcdC4uLm9wSWQub3B0cyxcblx0XHRcdFx0XHQuLi5leHRyYU9wdHNcblx0XHRcdFx0fSxcblx0XHRcdFx0cmF3QXJnczogZm5BcmdzLFxuXHRcdFx0XHRoYXNoZWRJZCxcblx0XHRcdFx0aW5wdXQ6IHN0ZXBTdGF0ZT8uaW5wdXQsXG5cdFx0XHRcdGZuOiBvcHRzPy5mbiA/ICgpID0+IG9wdHMuZm4/LiguLi5mbkFyZ3MpIDogdm9pZCAwLFxuXHRcdFx0XHRwcm9taXNlLFxuXHRcdFx0XHRmdWxmaWxsZWQ6IGlzRnVsZmlsbGVkLFxuXHRcdFx0XHRoYXNTdGVwU3RhdGU6IEJvb2xlYW4oc3RlcFN0YXRlKSxcblx0XHRcdFx0ZGlzcGxheU5hbWU6IG9wSWQuZGlzcGxheU5hbWUgPz8gb3BJZC5pZCxcblx0XHRcdFx0aGFuZGxlZDogZmFsc2UsXG5cdFx0XHRcdGhhbmRsZTogKCkgPT4ge1xuXHRcdFx0XHRcdGlmIChzdGVwLmhhbmRsZWQpIHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR0aGlzLmRlYnVnKGBoYW5kbGluZyBzdGVwIFwiJHtoYXNoZWRJZH1cImApO1xuXHRcdFx0XHRcdHN0ZXAuaGFuZGxlZCA9IHRydWU7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gdGhpcy5zdGF0ZS5zdGVwU3RhdGVbaGFzaGVkSWRdO1xuXHRcdFx0XHRcdGlmIChzdGVwLmZ1bGZpbGxlZCAmJiByZXN1bHQpIHtcblx0XHRcdFx0XHRcdHJlc3VsdC5mdWxmaWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0UHJvbWlzZS5hbGwoW1xuXHRcdFx0XHRcdFx0XHRyZXN1bHQuZGF0YSxcblx0XHRcdFx0XHRcdFx0cmVzdWx0LmVycm9yLFxuXHRcdFx0XHRcdFx0XHRyZXN1bHQuaW5wdXRcblx0XHRcdFx0XHRcdF0pLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIHJlc3VsdC5kYXRhICE9PSBcInVuZGVmaW5lZFwiKSByZXNvbHZlKHJlc3VsdC5kYXRhKTtcblx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zdGF0ZS5yZWNlbnRseVJlamVjdGVkU3RlcEVycm9yID0gbmV3IFN0ZXBFcnJvcihvcElkLmlkLCByZXN1bHQuZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdHJlamVjdCh0aGlzLnN0YXRlLnJlY2VudGx5UmVqZWN0ZWRTdGVwRXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHR0aGlzLnN0YXRlLnN0ZXBzLnNldChoYXNoZWRJZCwgc3RlcCk7XG5cdFx0XHR0aGlzLnN0YXRlLmhhc1N0ZXBzID0gdHJ1ZTtcblx0XHRcdHB1c2hTdGVwVG9SZXBvcnQoc3RlcCk7XG5cdFx0XHQvKipcblx0XHRcdCogSWYgdGhpcyBpcyB0aGUgbGFzdCBwaWVjZSBvZiBzdGF0ZSB3ZSBoYWQsIHdlJ3ZlIG5vdyBmaW5pc2hlZFxuXHRcdFx0KiBtZW1vaXppbmcuXG5cdFx0XHQqL1xuXHRcdFx0aWYgKCFiZWZvcmVFeGVjSG9va3NQcm9taXNlICYmIHRoaXMuc3RhdGUuYWxsU3RhdGVVc2VkKCkpIGF3YWl0IChiZWZvcmVFeGVjSG9va3NQcm9taXNlID0gKGFzeW5jICgpID0+IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJNZW1vaXphdGlvbj8uKCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0XHR9KSgpKTtcblx0XHRcdHJldHVybiBwcm9taXNlO1xuXHRcdH07XG5cdFx0cmV0dXJuIGNyZWF0ZVN0ZXBUb29scyh0aGlzLm9wdGlvbnMuY2xpZW50LCB0aGlzLCBzdGVwSGFuZGxlcik7XG5cdH1cblx0cmVzdW1lU3RlcFdpdGhSZXN1bHQocmVzdWx0T3ApIHtcblx0XHRjb25zdCB1c2VybGFuZFN0ZXAgPSB0aGlzLnN0YXRlLnN0ZXBzLmdldChyZXN1bHRPcC5pZCk7XG5cdFx0aWYgKCF1c2VybGFuZFN0ZXApIHRocm93IG5ldyBFcnJvcihcIlN0ZXAgbm90IGZvdW5kIGluIG1lbW9pemF0aW9uIHN0YXRlIGR1cmluZyBhc3luYyBjaGVja3BvaW50aW5nOyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW4gYW5kIGlzIGEgYnVnIGluIHRoZSBJbm5nZXN0IFNES1wiKTtcblx0XHR1c2VybGFuZFN0ZXAuZGF0YSA9IHVuZGVmaW5lZFRvTnVsbChyZXN1bHRPcC5kYXRhKTtcblx0XHR1c2VybGFuZFN0ZXAudGltaW5nID0gcmVzdWx0T3AudGltaW5nO1xuXHRcdHVzZXJsYW5kU3RlcC5mdWxmaWxsZWQgPSB0cnVlO1xuXHRcdHVzZXJsYW5kU3RlcC5oYXNTdGVwU3RhdGUgPSB0cnVlO1xuXHRcdHVzZXJsYW5kU3RlcC5vcCA9IHJlc3VsdE9wLm9wO1xuXHRcdHVzZXJsYW5kU3RlcC5pZCA9IHJlc3VsdE9wLmlkO1xuXHRcdHRoaXMuc3RhdGUuc3RlcFN0YXRlW3Jlc3VsdE9wLmlkXSA9IHVzZXJsYW5kU3RlcDtcblx0XHR1c2VybGFuZFN0ZXAuaGFuZGxlKCk7XG5cdFx0cmV0dXJuIHVzZXJsYW5kU3RlcDtcblx0fVxuXHRnZXRVc2VyRm5Ub1J1bigpIHtcblx0XHRpZiAoIXRoaXMub3B0aW9ucy5pc0ZhaWx1cmVIYW5kbGVyKSByZXR1cm4gdGhpcy5vcHRpb25zLmZuW1wiZm5cIl07XG5cdFx0aWYgKCF0aGlzLm9wdGlvbnMuZm5bXCJvbkZhaWx1cmVGblwiXSlcbiAvKipcblx0XHQqIFNvbWVob3csIHdlJ3ZlIGVuZGVkIHVwIGRldGVjdGluZyB0aGF0IHRoaXMgaXMgYSBmYWlsdXJlIGhhbmRsZXIgYnV0XG5cdFx0KiBkb2Vzbid0IGhhdmUgYW4gYG9uRmFpbHVyZWAgZnVuY3Rpb24uIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbi5cblx0XHQqL1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIGZ1bmN0aW9uIGBvbkZhaWx1cmVgIGhhbmRsZXJcIik7XG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5mbltcIm9uRmFpbHVyZUZuXCJdO1xuXHR9XG5cdGluaXRpYWxpemVUaW1lcihzdGF0ZSkge1xuXHRcdGlmICghdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXApIHJldHVybjtcblx0XHR0aGlzLnRpbWVvdXQgPSBjcmVhdGVUaW1lb3V0UHJvbWlzZSh0aGlzLnRpbWVvdXREdXJhdGlvbik7XG5cdFx0dGhpcy50aW1lb3V0LnRoZW4oYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJNZW1vaXphdGlvbj8uKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVFeGVjdXRpb24/LigpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJFeGVjdXRpb24/LigpO1xuXHRcdFx0c3RhdGUuc2V0Q2hlY2twb2ludCh7XG5cdFx0XHRcdHR5cGU6IFwic3RlcC1ub3QtZm91bmRcIixcblx0XHRcdFx0c3RlcDoge1xuXHRcdFx0XHRcdGlkOiB0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcCxcblx0XHRcdFx0XHRvcDogU3RlcE9wQ29kZS5TdGVwTm90Rm91bmRcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblx0aW5pdGlhbGl6ZUNoZWNrcG9pbnRSdW50aW1lVGltZXIoc3RhdGUpIHtcblx0XHRpZiAoIXRoaXMub3B0aW9ucy5jaGVja3BvaW50aW5nQ29uZmlnKSByZXR1cm47XG5cdFx0aWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuY2hlY2twb2ludGluZ0NvbmZpZyA9PT0gXCJib29sZWFuXCIpIHJldHVybjtcblx0XHRpZiAoIXRoaXMub3B0aW9ucy5jaGVja3BvaW50aW5nQ29uZmlnLm1heFJ1bnRpbWUpIHJldHVybjtcblx0XHRjb25zdCBtYXhSdW50aW1lTXMgPSBpc1RlbXBvcmFsRHVyYXRpb24odGhpcy5vcHRpb25zLmNoZWNrcG9pbnRpbmdDb25maWcubWF4UnVudGltZSkgPyB0aGlzLm9wdGlvbnMuY2hlY2twb2ludGluZ0NvbmZpZy5tYXhSdW50aW1lLnRvdGFsKHsgdW5pdDogXCJtaWxsaXNlY29uZHNcIiB9KSA6IHR5cGVvZiB0aGlzLm9wdGlvbnMuY2hlY2twb2ludGluZ0NvbmZpZy5tYXhSdW50aW1lID09PSBcInN0cmluZ1wiID8gbXModGhpcy5vcHRpb25zLmNoZWNrcG9pbnRpbmdDb25maWcubWF4UnVudGltZSkgOiB0aGlzLm9wdGlvbnMuY2hlY2twb2ludGluZ0NvbmZpZy5tYXhSdW50aW1lO1xuXHRcdGlmICghTnVtYmVyLmlzRmluaXRlKG1heFJ1bnRpbWVNcykgfHwgbWF4UnVudGltZU1zIDw9IDApIHJldHVybjtcblx0XHR0aGlzLmNoZWNrcG9pbnRpbmdNYXhSdW50aW1lVGltZXIgPSBjcmVhdGVUaW1lb3V0UHJvbWlzZShtYXhSdW50aW1lTXMpO1xuXHRcdHRoaXMuY2hlY2twb2ludGluZ01heFJ1bnRpbWVUaW1lci50aGVuKGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyRXhlY3V0aW9uPy4oKTtcblx0XHRcdHN0YXRlLnNldENoZWNrcG9pbnQoeyB0eXBlOiBcImNoZWNrcG9pbnRpbmctcnVudGltZS1yZWFjaGVkXCIgfSk7XG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgaW5pdGlhbGl6ZU1pZGRsZXdhcmUoKSB7XG5cdFx0Y29uc3QgY3R4ID0gdGhpcy5vcHRpb25zLmRhdGE7XG5cdFx0cmV0dXJuIGF3YWl0IGdldEhvb2tTdGFjayh0aGlzLm9wdGlvbnMuZm5bXCJtaWRkbGV3YXJlXCJdLCBcIm9uRnVuY3Rpb25SdW5cIiwge1xuXHRcdFx0Y3R4LFxuXHRcdFx0Zm46IHRoaXMub3B0aW9ucy5mbixcblx0XHRcdHN0ZXBzOiBPYmplY3QudmFsdWVzKHRoaXMub3B0aW9ucy5zdGVwU3RhdGUpLFxuXHRcdFx0cmVxQXJnczogdGhpcy5vcHRpb25zLnJlcUFyZ3Ncblx0XHR9LCB7XG5cdFx0XHR0cmFuc2Zvcm1JbnB1dDogKHByZXYsIG91dHB1dCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGN0eDoge1xuXHRcdFx0XHRcdFx0Li4ucHJldi5jdHgsXG5cdFx0XHRcdFx0XHQuLi5vdXRwdXQ/LmN0eFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Zm46IHRoaXMub3B0aW9ucy5mbixcblx0XHRcdFx0XHRzdGVwczogcHJldi5zdGVwcy5tYXAoKHN0ZXAsIGkpID0+ICh7XG5cdFx0XHRcdFx0XHQuLi5zdGVwLFxuXHRcdFx0XHRcdFx0Li4ub3V0cHV0Py5zdGVwcz8uW2ldXG5cdFx0XHRcdFx0fSkpLFxuXHRcdFx0XHRcdHJlcUFyZ3M6IHByZXYucmVxQXJnc1xuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblx0XHRcdHRyYW5zZm9ybU91dHB1dDogKHByZXYsIG91dHB1dCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHJlc3VsdDoge1xuXHRcdFx0XHRcdFx0Li4ucHJldi5yZXN1bHQsXG5cdFx0XHRcdFx0XHQuLi5vdXRwdXQ/LnJlc3VsdFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c3RlcDogcHJldi5zdGVwXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn07XG5jb25zdCBoYXNoSWQgPSAoaWQpID0+IHtcblx0cmV0dXJuIHNoYTEoKS51cGRhdGUoaWQpLmRpZ2VzdChcImhleFwiKTtcbn07XG5jb25zdCBoYXNoT3AgPSAob3ApID0+IHtcblx0cmV0dXJuIHtcblx0XHQuLi5vcCxcblx0XHRpZDogaGFzaElkKG9wLmlkKVxuXHR9O1xufTtcbi8qKlxuKiBFeHBvcnRlZCBmb3IgdGVzdGluZy5cbiovXG5jb25zdCBfaW50ZXJuYWxzID0ge1xuXHRoYXNoT3AsXG5cdGhhc2hJZFxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBfaW50ZXJuYWxzLCBjcmVhdGVWMUlubmdlc3RFeGVjdXRpb24sIHYxX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXYxLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/v1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/v2.js":
/*!*********************************************************!*\
  !*** ./node_modules/inngest/components/execution/v2.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createV2InngestExecution: () => (/* binding */ createV2InngestExecution),\n/* harmony export */   v2_exports: () => (/* binding */ v2_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _als_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../version.js */ \"(rsc)/./node_modules/inngest/version.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _InngestExecution_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../NonRetriableError.js */ \"(rsc)/./node_modules/inngest/components/NonRetriableError.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n/* harmony import */ var _otel_access_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./otel/access.js */ \"(rsc)/./node_modules/inngest/components/execution/otel/access.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../RetryAfterError.js */ \"(rsc)/./node_modules/inngest/components/RetryAfterError.js\");\n/* harmony import */ var _StepError_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../StepError.js */ \"(rsc)/./node_modules/inngest/components/StepError.js\");\n/* harmony import */ var _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../InngestStepTools.js */ \"(rsc)/./node_modules/inngest/components/InngestStepTools.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _opentelemetry_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @opentelemetry/api */ \"(rsc)/./node_modules/@opentelemetry/api/build/esm/trace-api.js\");\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/execution/v2.ts\nvar v2_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_1__.__export)({\n\t_internals: () => _internals,\n\tcreateV2InngestExecution: () => createV2InngestExecution\n});\nconst { sha1 } = hash_js__WEBPACK_IMPORTED_MODULE_0__;\nconst createV2InngestExecution = (options) => {\n\treturn new V2InngestExecution(options);\n};\nvar V2InngestExecution = class extends _InngestExecution_js__WEBPACK_IMPORTED_MODULE_2__.InngestExecution {\n\tversion = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionVersion.V2;\n\tstate;\n\tfnArg;\n\tcheckpointHandlers;\n\ttimeoutDuration = 1e3 * 10;\n\texecution;\n\tuserFnToRun;\n\t/**\n\t* If we're supposed to run a particular step via `requestedRunStep`, this\n\t* will be a `Promise` that resolves after no steps have been found for\n\t* `timeoutDuration` milliseconds.\n\t*\n\t* If we're not supposed to run a particular step, this will be `undefined`.\n\t*/\n\ttimeout;\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tthis.userFnToRun = this.getUserFnToRun();\n\t\tthis.state = this.createExecutionState();\n\t\tthis.fnArg = this.createFnArg();\n\t\tthis.checkpointHandlers = this.createCheckpointHandlers();\n\t\tthis.initializeTimer(this.state);\n\t\tthis.debug(\"created new V2 execution for run;\", this.options.requestedRunStep ? `wanting to run step \"${this.options.requestedRunStep}\"` : \"discovering steps\");\n\t\tthis.debug(\"existing state keys:\", Object.keys(this.state.stepState));\n\t}\n\t/**\n\t* Idempotently start the execution of the user's function.\n\t*/\n\tstart() {\n\t\tif (!this.execution) {\n\t\t\tthis.debug(\"starting V2 execution\");\n\t\t\tconst tracer = _opentelemetry_api__WEBPACK_IMPORTED_MODULE_4__.trace.getTracer(\"inngest\", _version_js__WEBPACK_IMPORTED_MODULE_5__.version);\n\t\t\tthis.execution = (0,_als_js__WEBPACK_IMPORTED_MODULE_6__.getAsyncLocalStorage)().then((als) => {\n\t\t\t\treturn als.run({\n\t\t\t\t\tapp: this.options.client,\n\t\t\t\t\texecution: {\n\t\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\t\tinstance: this\n\t\t\t\t\t}\n\t\t\t\t}, async () => {\n\t\t\t\t\treturn tracer.startActiveSpan(\"inngest.execution\", (span) => {\n\t\t\t\t\t\t_otel_access_js__WEBPACK_IMPORTED_MODULE_7__.clientProcessorMap.get(this.options.client)?.declareStartingSpan({\n\t\t\t\t\t\t\tspan,\n\t\t\t\t\t\t\trunId: this.options.runId,\n\t\t\t\t\t\t\ttraceparent: this.options.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__.headerKeys.TraceParent],\n\t\t\t\t\t\t\ttracestate: this.options.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__.headerKeys.TraceState]\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn this._start().then((result) => {\n\t\t\t\t\t\t\tthis.debug(\"result:\", result);\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t\tspan.end();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this.execution;\n\t}\n\taddMetadata(stepId, kind, scope, op, values) {\n\t\tif (!this.state.metadata) this.state.metadata = /* @__PURE__ */ new Map();\n\t\tconst updates = this.state.metadata.get(stepId) ?? [];\n\t\tupdates.push({\n\t\t\tkind,\n\t\t\tscope,\n\t\t\top,\n\t\t\tvalues\n\t\t});\n\t\tthis.state.metadata.set(stepId, updates);\n\t\treturn true;\n\t}\n\t/**\n\t* Starts execution of the user's function and the core loop.\n\t*/\n\tasync _start() {\n\t\ttry {\n\t\t\tconst allCheckpointHandler = this.getCheckpointHandler(\"\");\n\t\t\tthis.state.hooks = await this.initializeMiddleware();\n\t\t\tawait this.startExecution();\n\t\t\tfor await (const checkpoint of this.state.loop) {\n\t\t\t\tawait allCheckpointHandler(checkpoint);\n\t\t\t\tconst result = await this.getCheckpointHandler(checkpoint.type)(checkpoint);\n\t\t\t\tif (result) return result;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\treturn await this.transformOutput({ error });\n\t\t} finally {\n\t\t\tthis.state.loop.return();\n\t\t\tawait this.state.hooks?.beforeResponse?.();\n\t\t}\n\t\t/**\n\t\t* If we're here, the generator somehow finished without returning a value.\n\t\t* This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Core loop finished without returning a value\");\n\t}\n\t/**\n\t* Creates a handler for every checkpoint type, defining what to do when we\n\t* reach that checkpoint in the core loop.\n\t*/\n\tcreateCheckpointHandlers() {\n\t\treturn {\n\t\t\t\"\": (checkpoint) => {\n\t\t\t\tthis.debug(\"checkpoint:\", checkpoint);\n\t\t\t},\n\t\t\t\"function-resolved\": async (checkpoint) => {\n\t\t\t\treturn await this.transformOutput({ data: checkpoint.data });\n\t\t\t},\n\t\t\t\"function-rejected\": async (checkpoint) => {\n\t\t\t\treturn await this.transformOutput({ error: checkpoint.error });\n\t\t\t},\n\t\t\t\"steps-found\": async ({ steps }) => {\n\t\t\t\tconst stepResult = await this.tryExecuteStep(steps);\n\t\t\t\tif (stepResult) {\n\t\t\t\t\tconst transformResult = await this.transformOutput(stepResult);\n\t\t\t\t\t/**\n\t\t\t\t\t* Transforming output will always return either function rejection or\n\t\t\t\t\t* resolution. In most cases, this can be immediately returned, but in\n\t\t\t\t\t* this particular case we want to handle it differently.\n\t\t\t\t\t*/\n\t\t\t\t\tif (transformResult.type === \"function-resolved\") return {\n\t\t\t\t\t\ttype: \"step-ran\",\n\t\t\t\t\t\tctx: transformResult.ctx,\n\t\t\t\t\t\tops: transformResult.ops,\n\t\t\t\t\t\tstep: _internals.hashOp({\n\t\t\t\t\t\t\t...stepResult,\n\t\t\t\t\t\t\tdata: transformResult.data\n\t\t\t\t\t\t})\n\t\t\t\t\t};\n\t\t\t\t\telse if (transformResult.type === \"function-rejected\") {\n\t\t\t\t\t\tconst stepForResponse = _internals.hashOp({\n\t\t\t\t\t\t\t...stepResult,\n\t\t\t\t\t\t\terror: transformResult.error\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (stepResult.op === _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepFailed) {\n\t\t\t\t\t\t\tconst ser = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.serializeError)(transformResult.error);\n\t\t\t\t\t\t\tstepForResponse.data = {\n\t\t\t\t\t\t\t\t__serialized: true,\n\t\t\t\t\t\t\t\tname: ser.name,\n\t\t\t\t\t\t\t\tmessage: ser.message,\n\t\t\t\t\t\t\t\tstack: \"\"\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: \"step-ran\",\n\t\t\t\t\t\t\tctx: transformResult.ctx,\n\t\t\t\t\t\t\tops: transformResult.ops,\n\t\t\t\t\t\t\tretriable: transformResult.retriable,\n\t\t\t\t\t\t\tstep: stepForResponse\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn transformResult;\n\t\t\t\t}\n\t\t\t\tconst newSteps = await this.filterNewSteps(Array.from(this.state.steps.values()));\n\t\t\t\tif (newSteps) return {\n\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tsteps: newSteps\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"step-not-found\": ({ step }) => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"step-not-found\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tstep\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\tgetCheckpointHandler(type) {\n\t\treturn this.checkpointHandlers[type];\n\t}\n\tasync tryExecuteStep(steps) {\n\t\tconst hashedStepIdToRun = this.options.requestedRunStep || this.getEarlyExecRunStep(steps);\n\t\tif (!hashedStepIdToRun) return;\n\t\tconst step = steps.find((step$1) => step$1.hashedId === hashedStepIdToRun && step$1.fn);\n\t\tif (step) return await this.executeStep(step);\n\t\tthis.timeout?.reset();\n\t}\n\t/**\n\t* Given a list of outgoing ops, decide if we can execute an op early and\n\t* return the ID of the step to execute if we can.\n\t*/\n\tgetEarlyExecRunStep(steps) {\n\t\t/**\n\t\t* We may have been disabled due to parallelism, in which case we can't\n\t\t* immediately execute unless explicitly requested.\n\t\t*/\n\t\tif (this.options.disableImmediateExecution) return;\n\t\tconst unfulfilledSteps = steps.filter((step) => !step.fulfilled);\n\t\tif (unfulfilledSteps.length !== 1) return;\n\t\tconst op = unfulfilledSteps[0];\n\t\tif (op && op.op === _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepPlanned) return op.hashedId;\n\t}\n\tasync filterNewSteps(foundSteps) {\n\t\tif (this.options.requestedRunStep) return;\n\t\t/**\n\t\t* Gather any steps that aren't memoized and report them.\n\t\t*/\n\t\tconst newSteps = foundSteps.filter((step) => !step.fulfilled);\n\t\tif (!newSteps.length) return;\n\t\t/**\n\t\t* Warn if we've found new steps but haven't yet seen all previous\n\t\t* steps. This may indicate that step presence isn't determinate.\n\t\t*/\n\t\tlet knownSteps = 0;\n\t\tfor (const step of foundSteps) if (step.fulfilled) knownSteps++;\n\t\tif (!(this.state.stepsToFulfill === knownSteps)) await this.options.client[\"warnMetadata\"]({ run_id: this.options.runId }, _helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.ErrCode.NONDETERMINISTIC_STEPS, (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.prettyError)({\n\t\t\ttype: \"warn\",\n\t\t\twhatHappened: \"Function may be indeterminate\",\n\t\t\twhy: \"We found new steps before seeing all previous steps, which may indicate that the function is non-deterministic.\",\n\t\t\tconsequences: \"This may cause unexpected behaviour as Inngest executes your function.\",\n\t\t\treassurance: \"This is expected if a function is updated in the middle of a run, but may indicate a bug if not.\"\n\t\t}));\n\t\t/**\n\t\t* We're finishing up; let's trigger the last of the hooks.\n\t\t*/\n\t\tawait this.state.hooks?.afterMemoization?.();\n\t\tawait this.state.hooks?.beforeExecution?.();\n\t\tawait this.state.hooks?.afterExecution?.();\n\t\tconst stepList = newSteps.map((step) => ({\n\t\t\tdisplayName: step.displayName,\n\t\t\top: step.op,\n\t\t\tid: step.hashedId,\n\t\t\tname: step.name,\n\t\t\topts: step.opts,\n\t\t\tuserland: step.userland\n\t\t}));\n\t\t/**\n\t\t* We also run `onSendEvent` middleware hooks against `step.invoke()` steps\n\t\t* to ensure that their `data` is transformed correctly.\n\t\t*/\n\t\treturn await this.transformNewSteps(stepList);\n\t}\n\t/**\n\t* Using middleware, transform any newly-found steps before returning them to\n\t* an Inngest Server.\n\t*/\n\tasync transformNewSteps(steps) {\n\t\treturn Promise.all(steps.map(async (step) => {\n\t\t\tif (step.op !== _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.InvokeFunction) return step;\n\t\t\t/**\n\t\t\t* For each event being sent, create a new `onSendEvent` hook stack to\n\t\t\t* process it. We do this as middleware hooks are intended to run once\n\t\t\t* during each lifecycle (onFunctionRun or onSendEvent) and here, a hook\n\t\t\t* is run for every single event.\n\t\t\t*\n\t\t\t* This is done because a developer can use this hook to filter out\n\t\t\t* events entirely; if we batch all of the events together, we can't\n\t\t\t* tell which ones were filtered out if we're processing >1 invocation\n\t\t\t* here.\n\t\t\t*/\n\t\t\tconst transformedPayload = await (await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_10__.getHookStack)(this.options.fn[\"middleware\"], \"onSendEvent\", void 0, {\n\t\t\t\ttransformInput: (prev, output) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t...output\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\t\treturn { result: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t} };\n\t\t\t\t}\n\t\t\t})).transformInput?.({ payloads: [{\n\t\t\t\t...step.opts?.payload ?? {},\n\t\t\t\tname: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__.internalEvents.FunctionInvoked\n\t\t\t}] });\n\t\t\tconst newPayload = _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__.invokePayloadSchema.parse(transformedPayload?.payloads?.[0] ?? {});\n\t\t\treturn {\n\t\t\t\t...step,\n\t\t\t\topts: {\n\t\t\t\t\t...step.opts,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\t...step.opts?.payload ?? {},\n\t\t\t\t\t\t...newPayload\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}));\n\t}\n\tasync executeStep({ id, name, opts, fn, displayName, userland }) {\n\t\tthis.timeout?.clear();\n\t\tawait this.state.hooks?.afterMemoization?.();\n\t\tawait this.state.hooks?.beforeExecution?.();\n\t\tconst outgoingOp = {\n\t\t\tid,\n\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepRun,\n\t\t\tname,\n\t\t\topts,\n\t\t\tdisplayName,\n\t\t\tuserland\n\t\t};\n\t\tthis.state.executingStep = outgoingOp;\n\t\tconst store = await (0,_als_js__WEBPACK_IMPORTED_MODULE_6__.getAsyncCtx)();\n\t\tif (store?.execution) store.execution.executingStep = {\n\t\t\tid,\n\t\t\tname: displayName\n\t\t};\n\t\tthis.debug(`executing step \"${id}\"`);\n\t\treturn (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.runAsPromise)(fn).finally(async () => {\n\t\t\tif (store?.execution) delete store.execution.executingStep;\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t}).then((data) => {\n\t\t\treturn {\n\t\t\t\t...outgoingOp,\n\t\t\t\tdata\n\t\t\t};\n\t\t}).catch((error) => {\n\t\t\tlet errorIsRetriable = true;\n\t\t\tif (error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_13__.NonRetriableError) errorIsRetriable = false;\n\t\t\telse if (this.fnArg.maxAttempts && this.fnArg?.maxAttempts - 1 === this.fnArg.attempt) errorIsRetriable = false;\n\t\t\tif (errorIsRetriable) return {\n\t\t\t\t...outgoingOp,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepError,\n\t\t\t\terror\n\t\t\t};\n\t\t\telse return {\n\t\t\t\t...outgoingOp,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepFailed,\n\t\t\t\terror\n\t\t\t};\n\t\t});\n\t}\n\t/**\n\t* Starts execution of the user's function, including triggering checkpoints\n\t* and middleware hooks where appropriate.\n\t*/\n\tasync startExecution() {\n\t\t/**\n\t\t* Mutate input as neccessary based on middleware.\n\t\t*/\n\t\tawait this.transformInput();\n\t\t/**\n\t\t* Start the timer to time out the run if needed.\n\t\t*/\n\t\tthis.timeout?.start();\n\t\tawait this.state.hooks?.beforeMemoization?.();\n\t\t/**\n\t\t* If we had no state to begin with, immediately end the memoization phase.\n\t\t*/\n\t\tif (this.state.allStateUsed()) {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t}\n\t\t/**\n\t\t* Trigger the user's function.\n\t\t*/\n\t\t(0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.runAsPromise)(() => this.userFnToRun(this.fnArg)).finally(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t}).then((data) => {\n\t\t\tthis.state.setCheckpoint({\n\t\t\t\ttype: \"function-resolved\",\n\t\t\t\tdata\n\t\t\t});\n\t\t}).catch((error) => {\n\t\t\tthis.state.setCheckpoint({\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\terror\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t* Using middleware, transform input before running.\n\t*/\n\tasync transformInput() {\n\t\tconst inputMutations = await this.state.hooks?.transformInput?.({\n\t\t\tctx: { ...this.fnArg },\n\t\t\tsteps: Object.values(this.state.stepState),\n\t\t\tfn: this.options.fn,\n\t\t\treqArgs: this.options.reqArgs\n\t\t});\n\t\tif (inputMutations?.ctx) this.fnArg = inputMutations.ctx;\n\t\tif (inputMutations?.steps) this.state.stepState = Object.fromEntries(inputMutations.steps.map((step) => [step.id, step]));\n\t}\n\t/**\n\t* Using middleware, transform output before returning.\n\t*/\n\tasync transformOutput(dataOrError) {\n\t\tconst output = { ...dataOrError };\n\t\tconst isStepExecution = Boolean(this.state.executingStep);\n\t\tconst transformedOutput = await this.state.hooks?.transformOutput?.({\n\t\t\tresult: { ...output },\n\t\t\tstep: this.state.executingStep\n\t\t});\n\t\tconst { data, error } = {\n\t\t\t...output,\n\t\t\t...transformedOutput?.result\n\t\t};\n\t\tif (!isStepExecution) await this.state.hooks?.finished?.({ result: { ...typeof error !== \"undefined\" ? { error } : { data } } });\n\t\tif (typeof error !== \"undefined\") {\n\t\t\t/**\n\t\t\t* Ensure we give middleware the chance to decide on retriable behaviour\n\t\t\t* by looking at the error returned from output transformation.\n\t\t\t*/\n\t\t\tlet retriable = !(error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_13__.NonRetriableError || error instanceof _StepError_js__WEBPACK_IMPORTED_MODULE_14__.StepError && error === this.state.recentlyRejectedStepError);\n\t\t\tif (retriable && error instanceof _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_15__.RetryAfterError) retriable = error.retryAfter;\n\t\t\tconst serializedError = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.minifyPrettyError)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.serializeError)(error));\n\t\t\treturn {\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\terror: serializedError,\n\t\t\t\tretriable\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\ttype: \"function-resolved\",\n\t\t\tctx: this.fnArg,\n\t\t\tops: this.ops,\n\t\t\tdata: (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_16__.undefinedToNull)(data)\n\t\t};\n\t}\n\tcreateExecutionState() {\n\t\tconst d = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.createDeferredPromiseWithStack)();\n\t\tlet checkpointResolve = d.deferred.resolve;\n\t\tconst checkpointResults = d.results;\n\t\tconst loop = (async function* (cleanUp) {\n\t\t\ttry {\n\t\t\t\twhile (true) {\n\t\t\t\t\tconst res = (await checkpointResults.next()).value;\n\t\t\t\t\tif (res) yield res;\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tcleanUp?.();\n\t\t\t}\n\t\t})(() => {\n\t\t\tthis.timeout?.clear();\n\t\t\tcheckpointResults.return();\n\t\t});\n\t\tconst stepsToFulfill = Object.keys(this.options.stepState).length;\n\t\treturn {\n\t\t\tstepState: this.options.stepState,\n\t\t\tstepsToFulfill,\n\t\t\tsteps: /* @__PURE__ */ new Map(),\n\t\t\tloop,\n\t\t\thasSteps: Boolean(stepsToFulfill),\n\t\t\tstepCompletionOrder: [...this.options.stepCompletionOrder],\n\t\t\tremainingStepsToBeSeen: new Set(this.options.stepCompletionOrder),\n\t\t\tsetCheckpoint: (checkpoint) => {\n\t\t\t\t({resolve: checkpointResolve} = checkpointResolve(checkpoint));\n\t\t\t},\n\t\t\tallStateUsed: () => {\n\t\t\t\treturn this.state.remainingStepsToBeSeen.size === 0;\n\t\t\t}\n\t\t};\n\t}\n\tget ops() {\n\t\treturn Object.fromEntries(this.state.steps);\n\t}\n\tcreateFnArg() {\n\t\tconst step = this.createStepTools();\n\t\tlet fnArg = {\n\t\t\t...this.options.data,\n\t\t\tstep\n\t\t};\n\t\t/**\n\t\t* Handle use of the `onFailure` option by deserializing the error.\n\t\t*/\n\t\tif (this.options.isFailureHandler) {\n\t\t\tconst eventData = zod_v3__WEBPACK_IMPORTED_MODULE_17__.object({ error: _types_js__WEBPACK_IMPORTED_MODULE_8__.jsonErrorSchema }).parse(fnArg.event?.data);\n\t\t\tfnArg = {\n\t\t\t\t...fnArg,\n\t\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.deserializeError)(eventData.error)\n\t\t\t};\n\t\t}\n\t\treturn this.options.transformCtx?.(fnArg) ?? fnArg;\n\t}\n\tcreateStepTools() {\n\t\t/**\n\t\t* A list of steps that have been found and are being rolled up before being\n\t\t* reported to the core loop.\n\t\t*/\n\t\tconst foundStepsToReport = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A map of the subset of found steps to report that have not yet been\n\t\t* handled. Used for fast access to steps that need to be handled in order.\n\t\t*/\n\t\tconst unhandledFoundStepsToReport = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A map of the latest sequential step indexes found for each step ID. Used\n\t\t* to ensure that we don't index steps in parallel.\n\t\t*\n\t\t* Note that these must be sequential; if we've seen or assigned `a:1`,\n\t\t* `a:2` and `a:4`, the latest sequential step index is `2`.\n\t\t*\n\t\t*/\n\t\tconst expectedNextStepIndexes = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A promise that's used to ensure that step reporting cannot be run more than\n\t\t* once in a given asynchronous time span.\n\t\t*/\n\t\tlet foundStepsReportPromise;\n\t\t/**\n\t\t* A promise that's used to represent middleware hooks running before\n\t\t* execution.\n\t\t*/\n\t\tlet beforeExecHooksPromise;\n\t\t/**\n\t\t* A helper used to report steps to the core loop. Used after adding an item\n\t\t* to `foundStepsToReport`.\n\t\t*/\n\t\tconst reportNextTick = () => {\n\t\t\tif (foundStepsReportPromise) return;\n\t\t\tfoundStepsReportPromise = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.resolveNextTick)().then(() => beforeExecHooksPromise).then(() => {\n\t\t\t\tfoundStepsReportPromise = void 0;\n\t\t\t\tfor (const [hashedId, step] of unhandledFoundStepsToReport) if (step.handle()) {\n\t\t\t\t\tunhandledFoundStepsToReport.delete(hashedId);\n\t\t\t\t\tif (step.fulfilled) foundStepsToReport.delete(step.id);\n\t\t\t\t}\n\t\t\t\tif (foundStepsToReport.size) {\n\t\t\t\t\tconst steps = [...foundStepsToReport.values()];\n\t\t\t\t\tfoundStepsToReport.clear();\n\t\t\t\t\tthis.state.setCheckpoint({\n\t\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\t\tsteps\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\t/**\n\t\t* A helper used to push a step to the list of steps to report.\n\t\t*/\n\t\tconst pushStepToReport = (step) => {\n\t\t\tfoundStepsToReport.set(step.id, step);\n\t\t\tunhandledFoundStepsToReport.set(step.hashedId, step);\n\t\t\treportNextTick();\n\t\t};\n\t\tconst stepHandler = async ({ args, matchOp, opts }) => {\n\t\t\tawait beforeExecHooksPromise;\n\t\t\tconst opId = matchOp((0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__.getStepOptions)(args[0]), ...args.slice(1));\n\t\t\tif (this.state.executingStep)\n /**\n\t\t\t* If a step is found after asynchronous actions during another step's\n\t\t\t* execution, everything is fine. The problem here is if we've found\n\t\t\t* that a step nested inside another a step, which is something we don't\n\t\t\t* support at the time of writing.\n\t\t\t*\n\t\t\t* In this case, we could use something like Async Hooks to understand\n\t\t\t* how the step is being triggered, though this isn't available in all\n\t\t\t* environments.\n\t\t\t*\n\t\t\t* Therefore, we'll only show a warning here to indicate that this is\n\t\t\t* potentially an issue.\n\t\t\t*/\n\t\t\tthis.options.client[\"warnMetadata\"]({ run_id: this.options.runId }, _helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.ErrCode.NESTING_STEPS, (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.prettyError)({\n\t\t\t\twhatHappened: `We detected that you have nested \\`step.*\\` tooling in \\`${opId.displayName ?? opId.id}\\``,\n\t\t\t\tconsequences: \"Nesting `step.*` tooling is not supported.\",\n\t\t\t\ttype: \"warn\",\n\t\t\t\treassurance: \"It's possible to see this warning if steps are separated by regular asynchronous calls, which is fine.\",\n\t\t\t\tstack: true,\n\t\t\t\ttoFixNow: \"Make sure you're not using `step.*` tooling inside of other `step.*` tooling. If you need to compose steps together, you can create a new async function and call it from within your step function, or use promise chaining.\",\n\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.ErrCode.NESTING_STEPS\n\t\t\t}));\n\t\t\tif (this.state.steps.has(opId.id)) {\n\t\t\t\tconst originalId = opId.id;\n\t\t\t\tconst expectedNextIndex = expectedNextStepIndexes.get(originalId) ?? 1;\n\t\t\t\tfor (let i = expectedNextIndex;; i++) {\n\t\t\t\t\tconst newId = originalId + _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__.STEP_INDEXING_SUFFIX + i;\n\t\t\t\t\tif (!this.state.steps.has(newId)) {\n\t\t\t\t\t\texpectedNextStepIndexes.set(originalId, i + 1);\n\t\t\t\t\t\topId.id = newId;\n\t\t\t\t\t\topId.userland.index = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst { promise, resolve, reject } = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.createDeferredPromise)();\n\t\t\tconst hashedId = _internals.hashId(opId.id);\n\t\t\tconst stepState = this.state.stepState[hashedId];\n\t\t\tlet isFulfilled = false;\n\t\t\tif (stepState) {\n\t\t\t\tstepState.seen = true;\n\t\t\t\tthis.state.remainingStepsToBeSeen.delete(hashedId);\n\t\t\t\tif (typeof stepState.input === \"undefined\") isFulfilled = true;\n\t\t\t}\n\t\t\tlet extraOpts;\n\t\t\tlet fnArgs = [...args];\n\t\t\tif (typeof stepState?.input !== \"undefined\" && Array.isArray(stepState.input)) switch (opId.op) {\n\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepPlanned:\n\t\t\t\t\tfnArgs = [...args.slice(0, 2), ...stepState.input];\n\t\t\t\t\textraOpts = { input: [...stepState.input] };\n\t\t\t\t\tbreak;\n\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.AiGateway:\n\t\t\t\t\textraOpts = { body: {\n\t\t\t\t\t\t...typeof opId.opts?.body === \"object\" ? { ...opId.opts.body } : {},\n\t\t\t\t\t\t...stepState.input[0]\n\t\t\t\t\t} };\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst step = {\n\t\t\t\t...opId,\n\t\t\t\topts: {\n\t\t\t\t\t...opId.opts,\n\t\t\t\t\t...extraOpts\n\t\t\t\t},\n\t\t\t\trawArgs: fnArgs,\n\t\t\t\thashedId,\n\t\t\t\tinput: stepState?.input,\n\t\t\t\tfn: opts?.fn ? () => opts.fn?.(...fnArgs) : void 0,\n\t\t\t\tpromise,\n\t\t\t\tfulfilled: isFulfilled,\n\t\t\t\thasStepState: Boolean(stepState),\n\t\t\t\tdisplayName: opId.displayName ?? opId.id,\n\t\t\t\thandled: false,\n\t\t\t\thandle: () => {\n\t\t\t\t\tif (step.handled) return false;\n\t\t\t\t\tstep.handled = true;\n\t\t\t\t\tif (isFulfilled && stepState) {\n\t\t\t\t\t\tstepState.fulfilled = true;\n\t\t\t\t\t\tPromise.all([\n\t\t\t\t\t\t\tstepState.data,\n\t\t\t\t\t\t\tstepState.error,\n\t\t\t\t\t\t\tstepState.input\n\t\t\t\t\t\t]).then(() => {\n\t\t\t\t\t\t\tif (typeof stepState.data !== \"undefined\") resolve(stepState.data);\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthis.state.recentlyRejectedStepError = new _StepError_js__WEBPACK_IMPORTED_MODULE_14__.StepError(opId.id, stepState.error);\n\t\t\t\t\t\t\t\treject(this.state.recentlyRejectedStepError);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.state.steps.set(opId.id, step);\n\t\t\tthis.state.hasSteps = true;\n\t\t\tpushStepToReport(step);\n\t\t\t/**\n\t\t\t* If this is the last piece of state we had, we've now finished\n\t\t\t* memoizing.\n\t\t\t*/\n\t\t\tif (!beforeExecHooksPromise && this.state.allStateUsed()) await (beforeExecHooksPromise = (async () => {\n\t\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\t})());\n\t\t\treturn promise;\n\t\t};\n\t\treturn (0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__.createStepTools)(this.options.client, this, stepHandler);\n\t}\n\tgetUserFnToRun() {\n\t\tif (!this.options.isFailureHandler) return this.options.fn[\"fn\"];\n\t\tif (!this.options.fn[\"onFailureFn\"])\n /**\n\t\t* Somehow, we've ended up detecting that this is a failure handler but\n\t\t* doesn't have an `onFailure` function. This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Cannot find function `onFailure` handler\");\n\t\treturn this.options.fn[\"onFailureFn\"];\n\t}\n\tinitializeTimer(state) {\n\t\tif (!this.options.requestedRunStep) return;\n\t\tthis.timeout = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.createTimeoutPromise)(this.timeoutDuration);\n\t\tthis.timeout.then(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t\tstate.setCheckpoint({\n\t\t\t\ttype: \"step-not-found\",\n\t\t\t\tstep: {\n\t\t\t\t\tid: this.options.requestedRunStep,\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepNotFound\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tasync initializeMiddleware() {\n\t\tconst ctx = this.options.data;\n\t\treturn await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_10__.getHookStack)(this.options.fn[\"middleware\"], \"onFunctionRun\", {\n\t\t\tctx,\n\t\t\tfn: this.options.fn,\n\t\t\tsteps: Object.values(this.options.stepState),\n\t\t\treqArgs: this.options.reqArgs\n\t\t}, {\n\t\t\ttransformInput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tctx: {\n\t\t\t\t\t\t...prev.ctx,\n\t\t\t\t\t\t...output?.ctx\n\t\t\t\t\t},\n\t\t\t\t\tfn: this.options.fn,\n\t\t\t\t\tsteps: prev.steps.map((step, i) => ({\n\t\t\t\t\t\t...step,\n\t\t\t\t\t\t...output?.steps?.[i]\n\t\t\t\t\t})),\n\t\t\t\t\treqArgs: prev.reqArgs\n\t\t\t\t};\n\t\t\t},\n\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tresult: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t},\n\t\t\t\t\tstep: prev.step\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n};\nconst hashId = (id) => {\n\treturn sha1().update(id).digest(\"hex\");\n};\nconst hashOp = (op) => {\n\treturn {\n\t\t...op,\n\t\tid: hashId(op.id)\n\t};\n};\n/**\n* Exported for testing.\n*/\nconst _internals = {\n\thashOp,\n\thashId\n};\n\n//#endregion\n\n//# sourceMappingURL=v2.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi92Mi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RDtBQUNEO0FBQ2xCO0FBQzRDO0FBQzFCO0FBQ0o7QUFDRztBQUN3RDtBQUN2RDtBQUNOO0FBQ0Q7QUFDaUc7QUFDL0Y7QUFDWjtBQUN3RTtBQUN6RjtBQUNnQjtBQUNkOztBQUU3QjtBQUNBLGlDQUFpQyxzRUFBUTtBQUN6QztBQUNBO0FBQ0EsQ0FBQztBQUNELFFBQVEsT0FBTyxFQUFFLG9DQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxrRUFBZ0I7QUFDdkQsV0FBVyxnRUFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDJEQUEyRCw4QkFBOEI7QUFDeEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxREFBSyxzQkFBc0IsZ0RBQU87QUFDcEQsb0JBQW9CLDZEQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxNQUFNLCtEQUFrQjtBQUN4QjtBQUNBO0FBQ0EseUNBQXlDLDBEQUFVO0FBQ25ELHdDQUF3QywwREFBVTtBQUNsRCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTixLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHFEQUFTO0FBQzVEO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsU0FBUyxzRUFBZTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwyRUFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaURBQVU7QUFDbkI7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0VBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRDtBQUNoRCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvY29tcG9uZW50cy9leGVjdXRpb24vdjIuanM/ZTc4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi8uLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBnZXRBc3luY0N0eCwgZ2V0QXN5bmNMb2NhbFN0b3JhZ2UgfSBmcm9tIFwiLi9hbHMuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vdmVyc2lvbi5qc1wiO1xuaW1wb3J0IHsgRXhlY3V0aW9uVmVyc2lvbiwgaGVhZGVyS2V5cywgaW50ZXJuYWxFdmVudHMgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9jb25zdHMuanNcIjtcbmltcG9ydCB7IFN0ZXBPcENvZGUsIGpzb25FcnJvclNjaGVtYSB9IGZyb20gXCIuLi8uLi90eXBlcy5qc1wiO1xuaW1wb3J0IHsgSW5uZ2VzdEV4ZWN1dGlvbiB9IGZyb20gXCIuL0lubmdlc3RFeGVjdXRpb24uanNcIjtcbmltcG9ydCB7IE5vblJldHJpYWJsZUVycm9yIH0gZnJvbSBcIi4uL05vblJldHJpYWJsZUVycm9yLmpzXCI7XG5pbXBvcnQgeyBFcnJDb2RlLCBkZXNlcmlhbGl6ZUVycm9yLCBtaW5pZnlQcmV0dHlFcnJvciwgcHJldHR5RXJyb3IsIHNlcmlhbGl6ZUVycm9yIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyB1bmRlZmluZWRUb051bGwgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9mdW5jdGlvbnMuanNcIjtcbmltcG9ydCB7IGdldEhvb2tTdGFjayB9IGZyb20gXCIuLi9Jbm5nZXN0TWlkZGxld2FyZS5qc1wiO1xuaW1wb3J0IHsgY2xpZW50UHJvY2Vzc29yTWFwIH0gZnJvbSBcIi4vb3RlbC9hY2Nlc3MuanNcIjtcbmltcG9ydCB7IGNyZWF0ZURlZmVycmVkUHJvbWlzZSwgY3JlYXRlRGVmZXJyZWRQcm9taXNlV2l0aFN0YWNrLCBjcmVhdGVUaW1lb3V0UHJvbWlzZSwgcmVzb2x2ZU5leHRUaWNrLCBydW5Bc1Byb21pc2UgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgUmV0cnlBZnRlckVycm9yIH0gZnJvbSBcIi4uL1JldHJ5QWZ0ZXJFcnJvci5qc1wiO1xuaW1wb3J0IHsgU3RlcEVycm9yIH0gZnJvbSBcIi4uL1N0ZXBFcnJvci5qc1wiO1xuaW1wb3J0IHsgU1RFUF9JTkRFWElOR19TVUZGSVgsIGNyZWF0ZVN0ZXBUb29scywgZ2V0U3RlcE9wdGlvbnMsIGludm9rZVBheWxvYWRTY2hlbWEgfSBmcm9tIFwiLi4vSW5uZ2VzdFN0ZXBUb29scy5qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjNcIjtcbmltcG9ydCB7IHRyYWNlIH0gZnJvbSBcIkBvcGVudGVsZW1ldHJ5L2FwaVwiO1xuaW1wb3J0IGhhc2hqcyBmcm9tIFwiaGFzaC5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvZXhlY3V0aW9uL3YyLnRzXG52YXIgdjJfZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7XG5cdF9pbnRlcm5hbHM6ICgpID0+IF9pbnRlcm5hbHMsXG5cdGNyZWF0ZVYySW5uZ2VzdEV4ZWN1dGlvbjogKCkgPT4gY3JlYXRlVjJJbm5nZXN0RXhlY3V0aW9uXG59KTtcbmNvbnN0IHsgc2hhMSB9ID0gaGFzaGpzO1xuY29uc3QgY3JlYXRlVjJJbm5nZXN0RXhlY3V0aW9uID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIG5ldyBWMklubmdlc3RFeGVjdXRpb24ob3B0aW9ucyk7XG59O1xudmFyIFYySW5uZ2VzdEV4ZWN1dGlvbiA9IGNsYXNzIGV4dGVuZHMgSW5uZ2VzdEV4ZWN1dGlvbiB7XG5cdHZlcnNpb24gPSBFeGVjdXRpb25WZXJzaW9uLlYyO1xuXHRzdGF0ZTtcblx0Zm5Bcmc7XG5cdGNoZWNrcG9pbnRIYW5kbGVycztcblx0dGltZW91dER1cmF0aW9uID0gMWUzICogMTA7XG5cdGV4ZWN1dGlvbjtcblx0dXNlckZuVG9SdW47XG5cdC8qKlxuXHQqIElmIHdlJ3JlIHN1cHBvc2VkIHRvIHJ1biBhIHBhcnRpY3VsYXIgc3RlcCB2aWEgYHJlcXVlc3RlZFJ1blN0ZXBgLCB0aGlzXG5cdCogd2lsbCBiZSBhIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIGFmdGVyIG5vIHN0ZXBzIGhhdmUgYmVlbiBmb3VuZCBmb3Jcblx0KiBgdGltZW91dER1cmF0aW9uYCBtaWxsaXNlY29uZHMuXG5cdCpcblx0KiBJZiB3ZSdyZSBub3Qgc3VwcG9zZWQgdG8gcnVuIGEgcGFydGljdWxhciBzdGVwLCB0aGlzIHdpbGwgYmUgYHVuZGVmaW5lZGAuXG5cdCovXG5cdHRpbWVvdXQ7XG5cdGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcblx0XHRzdXBlcihvcHRpb25zKTtcblx0XHR0aGlzLnVzZXJGblRvUnVuID0gdGhpcy5nZXRVc2VyRm5Ub1J1bigpO1xuXHRcdHRoaXMuc3RhdGUgPSB0aGlzLmNyZWF0ZUV4ZWN1dGlvblN0YXRlKCk7XG5cdFx0dGhpcy5mbkFyZyA9IHRoaXMuY3JlYXRlRm5BcmcoKTtcblx0XHR0aGlzLmNoZWNrcG9pbnRIYW5kbGVycyA9IHRoaXMuY3JlYXRlQ2hlY2twb2ludEhhbmRsZXJzKCk7XG5cdFx0dGhpcy5pbml0aWFsaXplVGltZXIodGhpcy5zdGF0ZSk7XG5cdFx0dGhpcy5kZWJ1ZyhcImNyZWF0ZWQgbmV3IFYyIGV4ZWN1dGlvbiBmb3IgcnVuO1wiLCB0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcCA/IGB3YW50aW5nIHRvIHJ1biBzdGVwIFwiJHt0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcH1cImAgOiBcImRpc2NvdmVyaW5nIHN0ZXBzXCIpO1xuXHRcdHRoaXMuZGVidWcoXCJleGlzdGluZyBzdGF0ZSBrZXlzOlwiLCBPYmplY3Qua2V5cyh0aGlzLnN0YXRlLnN0ZXBTdGF0ZSkpO1xuXHR9XG5cdC8qKlxuXHQqIElkZW1wb3RlbnRseSBzdGFydCB0aGUgZXhlY3V0aW9uIG9mIHRoZSB1c2VyJ3MgZnVuY3Rpb24uXG5cdCovXG5cdHN0YXJ0KCkge1xuXHRcdGlmICghdGhpcy5leGVjdXRpb24pIHtcblx0XHRcdHRoaXMuZGVidWcoXCJzdGFydGluZyBWMiBleGVjdXRpb25cIik7XG5cdFx0XHRjb25zdCB0cmFjZXIgPSB0cmFjZS5nZXRUcmFjZXIoXCJpbm5nZXN0XCIsIHZlcnNpb24pO1xuXHRcdFx0dGhpcy5leGVjdXRpb24gPSBnZXRBc3luY0xvY2FsU3RvcmFnZSgpLnRoZW4oKGFscykgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYWxzLnJ1bih7XG5cdFx0XHRcdFx0YXBwOiB0aGlzLm9wdGlvbnMuY2xpZW50LFxuXHRcdFx0XHRcdGV4ZWN1dGlvbjoge1xuXHRcdFx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRcdFx0aW5zdGFuY2U6IHRoaXNcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gdHJhY2VyLnN0YXJ0QWN0aXZlU3BhbihcImlubmdlc3QuZXhlY3V0aW9uXCIsIChzcGFuKSA9PiB7XG5cdFx0XHRcdFx0XHRjbGllbnRQcm9jZXNzb3JNYXAuZ2V0KHRoaXMub3B0aW9ucy5jbGllbnQpPy5kZWNsYXJlU3RhcnRpbmdTcGFuKHtcblx0XHRcdFx0XHRcdFx0c3Bhbixcblx0XHRcdFx0XHRcdFx0cnVuSWQ6IHRoaXMub3B0aW9ucy5ydW5JZCxcblx0XHRcdFx0XHRcdFx0dHJhY2VwYXJlbnQ6IHRoaXMub3B0aW9ucy5oZWFkZXJzW2hlYWRlcktleXMuVHJhY2VQYXJlbnRdLFxuXHRcdFx0XHRcdFx0XHR0cmFjZXN0YXRlOiB0aGlzLm9wdGlvbnMuaGVhZGVyc1toZWFkZXJLZXlzLlRyYWNlU3RhdGVdXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzLl9zdGFydCgpLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRlYnVnKFwicmVzdWx0OlwiLCByZXN1bHQpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHRcdFx0fSkuZmluYWxseSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHNwYW4uZW5kKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZXhlY3V0aW9uO1xuXHR9XG5cdGFkZE1ldGFkYXRhKHN0ZXBJZCwga2luZCwgc2NvcGUsIG9wLCB2YWx1ZXMpIHtcblx0XHRpZiAoIXRoaXMuc3RhdGUubWV0YWRhdGEpIHRoaXMuc3RhdGUubWV0YWRhdGEgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdGNvbnN0IHVwZGF0ZXMgPSB0aGlzLnN0YXRlLm1ldGFkYXRhLmdldChzdGVwSWQpID8/IFtdO1xuXHRcdHVwZGF0ZXMucHVzaCh7XG5cdFx0XHRraW5kLFxuXHRcdFx0c2NvcGUsXG5cdFx0XHRvcCxcblx0XHRcdHZhbHVlc1xuXHRcdH0pO1xuXHRcdHRoaXMuc3RhdGUubWV0YWRhdGEuc2V0KHN0ZXBJZCwgdXBkYXRlcyk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0LyoqXG5cdCogU3RhcnRzIGV4ZWN1dGlvbiBvZiB0aGUgdXNlcidzIGZ1bmN0aW9uIGFuZCB0aGUgY29yZSBsb29wLlxuXHQqL1xuXHRhc3luYyBfc3RhcnQoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGFsbENoZWNrcG9pbnRIYW5kbGVyID0gdGhpcy5nZXRDaGVja3BvaW50SGFuZGxlcihcIlwiKTtcblx0XHRcdHRoaXMuc3RhdGUuaG9va3MgPSBhd2FpdCB0aGlzLmluaXRpYWxpemVNaWRkbGV3YXJlKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXJ0RXhlY3V0aW9uKCk7XG5cdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGNoZWNrcG9pbnQgb2YgdGhpcy5zdGF0ZS5sb29wKSB7XG5cdFx0XHRcdGF3YWl0IGFsbENoZWNrcG9pbnRIYW5kbGVyKGNoZWNrcG9pbnQpO1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdldENoZWNrcG9pbnRIYW5kbGVyKGNoZWNrcG9pbnQudHlwZSkoY2hlY2twb2ludCk7XG5cdFx0XHRcdGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHJldHVybiBhd2FpdCB0aGlzLnRyYW5zZm9ybU91dHB1dCh7IGVycm9yIH0pO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHR0aGlzLnN0YXRlLmxvb3AucmV0dXJuKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVSZXNwb25zZT8uKCk7XG5cdFx0fVxuXHRcdC8qKlxuXHRcdCogSWYgd2UncmUgaGVyZSwgdGhlIGdlbmVyYXRvciBzb21laG93IGZpbmlzaGVkIHdpdGhvdXQgcmV0dXJuaW5nIGEgdmFsdWUuXG5cdFx0KiBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4uXG5cdFx0Ki9cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3JlIGxvb3AgZmluaXNoZWQgd2l0aG91dCByZXR1cm5pbmcgYSB2YWx1ZVwiKTtcblx0fVxuXHQvKipcblx0KiBDcmVhdGVzIGEgaGFuZGxlciBmb3IgZXZlcnkgY2hlY2twb2ludCB0eXBlLCBkZWZpbmluZyB3aGF0IHRvIGRvIHdoZW4gd2Vcblx0KiByZWFjaCB0aGF0IGNoZWNrcG9pbnQgaW4gdGhlIGNvcmUgbG9vcC5cblx0Ki9cblx0Y3JlYXRlQ2hlY2twb2ludEhhbmRsZXJzKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRcIlwiOiAoY2hlY2twb2ludCkgPT4ge1xuXHRcdFx0XHR0aGlzLmRlYnVnKFwiY2hlY2twb2ludDpcIiwgY2hlY2twb2ludCk7XG5cdFx0XHR9LFxuXHRcdFx0XCJmdW5jdGlvbi1yZXNvbHZlZFwiOiBhc3luYyAoY2hlY2twb2ludCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoeyBkYXRhOiBjaGVja3BvaW50LmRhdGEgfSk7XG5cdFx0XHR9LFxuXHRcdFx0XCJmdW5jdGlvbi1yZWplY3RlZFwiOiBhc3luYyAoY2hlY2twb2ludCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoeyBlcnJvcjogY2hlY2twb2ludC5lcnJvciB9KTtcblx0XHRcdH0sXG5cdFx0XHRcInN0ZXBzLWZvdW5kXCI6IGFzeW5jICh7IHN0ZXBzIH0pID0+IHtcblx0XHRcdFx0Y29uc3Qgc3RlcFJlc3VsdCA9IGF3YWl0IHRoaXMudHJ5RXhlY3V0ZVN0ZXAoc3RlcHMpO1xuXHRcdFx0XHRpZiAoc3RlcFJlc3VsdCkge1xuXHRcdFx0XHRcdGNvbnN0IHRyYW5zZm9ybVJlc3VsdCA9IGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHN0ZXBSZXN1bHQpO1xuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCogVHJhbnNmb3JtaW5nIG91dHB1dCB3aWxsIGFsd2F5cyByZXR1cm4gZWl0aGVyIGZ1bmN0aW9uIHJlamVjdGlvbiBvclxuXHRcdFx0XHRcdCogcmVzb2x1dGlvbi4gSW4gbW9zdCBjYXNlcywgdGhpcyBjYW4gYmUgaW1tZWRpYXRlbHkgcmV0dXJuZWQsIGJ1dCBpblxuXHRcdFx0XHRcdCogdGhpcyBwYXJ0aWN1bGFyIGNhc2Ugd2Ugd2FudCB0byBoYW5kbGUgaXQgZGlmZmVyZW50bHkuXG5cdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRpZiAodHJhbnNmb3JtUmVzdWx0LnR5cGUgPT09IFwiZnVuY3Rpb24tcmVzb2x2ZWRcIikgcmV0dXJuIHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RlcC1yYW5cIixcblx0XHRcdFx0XHRcdGN0eDogdHJhbnNmb3JtUmVzdWx0LmN0eCxcblx0XHRcdFx0XHRcdG9wczogdHJhbnNmb3JtUmVzdWx0Lm9wcyxcblx0XHRcdFx0XHRcdHN0ZXA6IF9pbnRlcm5hbHMuaGFzaE9wKHtcblx0XHRcdFx0XHRcdFx0Li4uc3RlcFJlc3VsdCxcblx0XHRcdFx0XHRcdFx0ZGF0YTogdHJhbnNmb3JtUmVzdWx0LmRhdGFcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRlbHNlIGlmICh0cmFuc2Zvcm1SZXN1bHQudHlwZSA9PT0gXCJmdW5jdGlvbi1yZWplY3RlZFwiKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzdGVwRm9yUmVzcG9uc2UgPSBfaW50ZXJuYWxzLmhhc2hPcCh7XG5cdFx0XHRcdFx0XHRcdC4uLnN0ZXBSZXN1bHQsXG5cdFx0XHRcdFx0XHRcdGVycm9yOiB0cmFuc2Zvcm1SZXN1bHQuZXJyb3Jcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYgKHN0ZXBSZXN1bHQub3AgPT09IFN0ZXBPcENvZGUuU3RlcEZhaWxlZCkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzZXIgPSBzZXJpYWxpemVFcnJvcih0cmFuc2Zvcm1SZXN1bHQuZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRzdGVwRm9yUmVzcG9uc2UuZGF0YSA9IHtcblx0XHRcdFx0XHRcdFx0XHRfX3NlcmlhbGl6ZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogc2VyLm5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0bWVzc2FnZTogc2VyLm1lc3NhZ2UsXG5cdFx0XHRcdFx0XHRcdFx0c3RhY2s6IFwiXCJcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RlcC1yYW5cIixcblx0XHRcdFx0XHRcdFx0Y3R4OiB0cmFuc2Zvcm1SZXN1bHQuY3R4LFxuXHRcdFx0XHRcdFx0XHRvcHM6IHRyYW5zZm9ybVJlc3VsdC5vcHMsXG5cdFx0XHRcdFx0XHRcdHJldHJpYWJsZTogdHJhbnNmb3JtUmVzdWx0LnJldHJpYWJsZSxcblx0XHRcdFx0XHRcdFx0c3RlcDogc3RlcEZvclJlc3BvbnNlXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdHJhbnNmb3JtUmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IG5ld1N0ZXBzID0gYXdhaXQgdGhpcy5maWx0ZXJOZXdTdGVwcyhBcnJheS5mcm9tKHRoaXMuc3RhdGUuc3RlcHMudmFsdWVzKCkpKTtcblx0XHRcdFx0aWYgKG5ld1N0ZXBzKSByZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RlcHMtZm91bmRcIixcblx0XHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdFx0XHRzdGVwczogbmV3U3RlcHNcblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cdFx0XHRcInN0ZXAtbm90LWZvdW5kXCI6ICh7IHN0ZXAgfSkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RlcC1ub3QtZm91bmRcIixcblx0XHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdFx0XHRzdGVwXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRnZXRDaGVja3BvaW50SGFuZGxlcih0eXBlKSB7XG5cdFx0cmV0dXJuIHRoaXMuY2hlY2twb2ludEhhbmRsZXJzW3R5cGVdO1xuXHR9XG5cdGFzeW5jIHRyeUV4ZWN1dGVTdGVwKHN0ZXBzKSB7XG5cdFx0Y29uc3QgaGFzaGVkU3RlcElkVG9SdW4gPSB0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcCB8fCB0aGlzLmdldEVhcmx5RXhlY1J1blN0ZXAoc3RlcHMpO1xuXHRcdGlmICghaGFzaGVkU3RlcElkVG9SdW4pIHJldHVybjtcblx0XHRjb25zdCBzdGVwID0gc3RlcHMuZmluZCgoc3RlcCQxKSA9PiBzdGVwJDEuaGFzaGVkSWQgPT09IGhhc2hlZFN0ZXBJZFRvUnVuICYmIHN0ZXAkMS5mbik7XG5cdFx0aWYgKHN0ZXApIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVTdGVwKHN0ZXApO1xuXHRcdHRoaXMudGltZW91dD8ucmVzZXQoKTtcblx0fVxuXHQvKipcblx0KiBHaXZlbiBhIGxpc3Qgb2Ygb3V0Z29pbmcgb3BzLCBkZWNpZGUgaWYgd2UgY2FuIGV4ZWN1dGUgYW4gb3AgZWFybHkgYW5kXG5cdCogcmV0dXJuIHRoZSBJRCBvZiB0aGUgc3RlcCB0byBleGVjdXRlIGlmIHdlIGNhbi5cblx0Ki9cblx0Z2V0RWFybHlFeGVjUnVuU3RlcChzdGVwcykge1xuXHRcdC8qKlxuXHRcdCogV2UgbWF5IGhhdmUgYmVlbiBkaXNhYmxlZCBkdWUgdG8gcGFyYWxsZWxpc20sIGluIHdoaWNoIGNhc2Ugd2UgY2FuJ3Rcblx0XHQqIGltbWVkaWF0ZWx5IGV4ZWN1dGUgdW5sZXNzIGV4cGxpY2l0bHkgcmVxdWVzdGVkLlxuXHRcdCovXG5cdFx0aWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlSW1tZWRpYXRlRXhlY3V0aW9uKSByZXR1cm47XG5cdFx0Y29uc3QgdW5mdWxmaWxsZWRTdGVwcyA9IHN0ZXBzLmZpbHRlcigoc3RlcCkgPT4gIXN0ZXAuZnVsZmlsbGVkKTtcblx0XHRpZiAodW5mdWxmaWxsZWRTdGVwcy5sZW5ndGggIT09IDEpIHJldHVybjtcblx0XHRjb25zdCBvcCA9IHVuZnVsZmlsbGVkU3RlcHNbMF07XG5cdFx0aWYgKG9wICYmIG9wLm9wID09PSBTdGVwT3BDb2RlLlN0ZXBQbGFubmVkKSByZXR1cm4gb3AuaGFzaGVkSWQ7XG5cdH1cblx0YXN5bmMgZmlsdGVyTmV3U3RlcHMoZm91bmRTdGVwcykge1xuXHRcdGlmICh0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcCkgcmV0dXJuO1xuXHRcdC8qKlxuXHRcdCogR2F0aGVyIGFueSBzdGVwcyB0aGF0IGFyZW4ndCBtZW1vaXplZCBhbmQgcmVwb3J0IHRoZW0uXG5cdFx0Ki9cblx0XHRjb25zdCBuZXdTdGVwcyA9IGZvdW5kU3RlcHMuZmlsdGVyKChzdGVwKSA9PiAhc3RlcC5mdWxmaWxsZWQpO1xuXHRcdGlmICghbmV3U3RlcHMubGVuZ3RoKSByZXR1cm47XG5cdFx0LyoqXG5cdFx0KiBXYXJuIGlmIHdlJ3ZlIGZvdW5kIG5ldyBzdGVwcyBidXQgaGF2ZW4ndCB5ZXQgc2VlbiBhbGwgcHJldmlvdXNcblx0XHQqIHN0ZXBzLiBUaGlzIG1heSBpbmRpY2F0ZSB0aGF0IHN0ZXAgcHJlc2VuY2UgaXNuJ3QgZGV0ZXJtaW5hdGUuXG5cdFx0Ki9cblx0XHRsZXQga25vd25TdGVwcyA9IDA7XG5cdFx0Zm9yIChjb25zdCBzdGVwIG9mIGZvdW5kU3RlcHMpIGlmIChzdGVwLmZ1bGZpbGxlZCkga25vd25TdGVwcysrO1xuXHRcdGlmICghKHRoaXMuc3RhdGUuc3RlcHNUb0Z1bGZpbGwgPT09IGtub3duU3RlcHMpKSBhd2FpdCB0aGlzLm9wdGlvbnMuY2xpZW50W1wid2Fybk1ldGFkYXRhXCJdKHsgcnVuX2lkOiB0aGlzLm9wdGlvbnMucnVuSWQgfSwgRXJyQ29kZS5OT05ERVRFUk1JTklTVElDX1NURVBTLCBwcmV0dHlFcnJvcih7XG5cdFx0XHR0eXBlOiBcIndhcm5cIixcblx0XHRcdHdoYXRIYXBwZW5lZDogXCJGdW5jdGlvbiBtYXkgYmUgaW5kZXRlcm1pbmF0ZVwiLFxuXHRcdFx0d2h5OiBcIldlIGZvdW5kIG5ldyBzdGVwcyBiZWZvcmUgc2VlaW5nIGFsbCBwcmV2aW91cyBzdGVwcywgd2hpY2ggbWF5IGluZGljYXRlIHRoYXQgdGhlIGZ1bmN0aW9uIGlzIG5vbi1kZXRlcm1pbmlzdGljLlwiLFxuXHRcdFx0Y29uc2VxdWVuY2VzOiBcIlRoaXMgbWF5IGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3VyIGFzIElubmdlc3QgZXhlY3V0ZXMgeW91ciBmdW5jdGlvbi5cIixcblx0XHRcdHJlYXNzdXJhbmNlOiBcIlRoaXMgaXMgZXhwZWN0ZWQgaWYgYSBmdW5jdGlvbiBpcyB1cGRhdGVkIGluIHRoZSBtaWRkbGUgb2YgYSBydW4sIGJ1dCBtYXkgaW5kaWNhdGUgYSBidWcgaWYgbm90LlwiXG5cdFx0fSkpO1xuXHRcdC8qKlxuXHRcdCogV2UncmUgZmluaXNoaW5nIHVwOyBsZXQncyB0cmlnZ2VyIHRoZSBsYXN0IG9mIHRoZSBob29rcy5cblx0XHQqL1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJFeGVjdXRpb24/LigpO1xuXHRcdGNvbnN0IHN0ZXBMaXN0ID0gbmV3U3RlcHMubWFwKChzdGVwKSA9PiAoe1xuXHRcdFx0ZGlzcGxheU5hbWU6IHN0ZXAuZGlzcGxheU5hbWUsXG5cdFx0XHRvcDogc3RlcC5vcCxcblx0XHRcdGlkOiBzdGVwLmhhc2hlZElkLFxuXHRcdFx0bmFtZTogc3RlcC5uYW1lLFxuXHRcdFx0b3B0czogc3RlcC5vcHRzLFxuXHRcdFx0dXNlcmxhbmQ6IHN0ZXAudXNlcmxhbmRcblx0XHR9KSk7XG5cdFx0LyoqXG5cdFx0KiBXZSBhbHNvIHJ1biBgb25TZW5kRXZlbnRgIG1pZGRsZXdhcmUgaG9va3MgYWdhaW5zdCBgc3RlcC5pbnZva2UoKWAgc3RlcHNcblx0XHQqIHRvIGVuc3VyZSB0aGF0IHRoZWlyIGBkYXRhYCBpcyB0cmFuc2Zvcm1lZCBjb3JyZWN0bHkuXG5cdFx0Ki9cblx0XHRyZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1OZXdTdGVwcyhzdGVwTGlzdCk7XG5cdH1cblx0LyoqXG5cdCogVXNpbmcgbWlkZGxld2FyZSwgdHJhbnNmb3JtIGFueSBuZXdseS1mb3VuZCBzdGVwcyBiZWZvcmUgcmV0dXJuaW5nIHRoZW0gdG9cblx0KiBhbiBJbm5nZXN0IFNlcnZlci5cblx0Ki9cblx0YXN5bmMgdHJhbnNmb3JtTmV3U3RlcHMoc3RlcHMpIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoc3RlcHMubWFwKGFzeW5jIChzdGVwKSA9PiB7XG5cdFx0XHRpZiAoc3RlcC5vcCAhPT0gU3RlcE9wQ29kZS5JbnZva2VGdW5jdGlvbikgcmV0dXJuIHN0ZXA7XG5cdFx0XHQvKipcblx0XHRcdCogRm9yIGVhY2ggZXZlbnQgYmVpbmcgc2VudCwgY3JlYXRlIGEgbmV3IGBvblNlbmRFdmVudGAgaG9vayBzdGFjayB0b1xuXHRcdFx0KiBwcm9jZXNzIGl0LiBXZSBkbyB0aGlzIGFzIG1pZGRsZXdhcmUgaG9va3MgYXJlIGludGVuZGVkIHRvIHJ1biBvbmNlXG5cdFx0XHQqIGR1cmluZyBlYWNoIGxpZmVjeWNsZSAob25GdW5jdGlvblJ1biBvciBvblNlbmRFdmVudCkgYW5kIGhlcmUsIGEgaG9va1xuXHRcdFx0KiBpcyBydW4gZm9yIGV2ZXJ5IHNpbmdsZSBldmVudC5cblx0XHRcdCpcblx0XHRcdCogVGhpcyBpcyBkb25lIGJlY2F1c2UgYSBkZXZlbG9wZXIgY2FuIHVzZSB0aGlzIGhvb2sgdG8gZmlsdGVyIG91dFxuXHRcdFx0KiBldmVudHMgZW50aXJlbHk7IGlmIHdlIGJhdGNoIGFsbCBvZiB0aGUgZXZlbnRzIHRvZ2V0aGVyLCB3ZSBjYW4ndFxuXHRcdFx0KiB0ZWxsIHdoaWNoIG9uZXMgd2VyZSBmaWx0ZXJlZCBvdXQgaWYgd2UncmUgcHJvY2Vzc2luZyA+MSBpbnZvY2F0aW9uXG5cdFx0XHQqIGhlcmUuXG5cdFx0XHQqL1xuXHRcdFx0Y29uc3QgdHJhbnNmb3JtZWRQYXlsb2FkID0gYXdhaXQgKGF3YWl0IGdldEhvb2tTdGFjayh0aGlzLm9wdGlvbnMuZm5bXCJtaWRkbGV3YXJlXCJdLCBcIm9uU2VuZEV2ZW50XCIsIHZvaWQgMCwge1xuXHRcdFx0XHR0cmFuc2Zvcm1JbnB1dDogKHByZXYsIG91dHB1dCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHQuLi5wcmV2LFxuXHRcdFx0XHRcdFx0Li4ub3V0cHV0XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dHJhbnNmb3JtT3V0cHV0OiAocHJldiwgb3V0cHV0KSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIHsgcmVzdWx0OiB7XG5cdFx0XHRcdFx0XHQuLi5wcmV2LnJlc3VsdCxcblx0XHRcdFx0XHRcdC4uLm91dHB1dD8ucmVzdWx0XG5cdFx0XHRcdFx0fSB9O1xuXHRcdFx0XHR9XG5cdFx0XHR9KSkudHJhbnNmb3JtSW5wdXQ/Lih7IHBheWxvYWRzOiBbe1xuXHRcdFx0XHQuLi5zdGVwLm9wdHM/LnBheWxvYWQgPz8ge30sXG5cdFx0XHRcdG5hbWU6IGludGVybmFsRXZlbnRzLkZ1bmN0aW9uSW52b2tlZFxuXHRcdFx0fV0gfSk7XG5cdFx0XHRjb25zdCBuZXdQYXlsb2FkID0gaW52b2tlUGF5bG9hZFNjaGVtYS5wYXJzZSh0cmFuc2Zvcm1lZFBheWxvYWQ/LnBheWxvYWRzPy5bMF0gPz8ge30pO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4uc3RlcCxcblx0XHRcdFx0b3B0czoge1xuXHRcdFx0XHRcdC4uLnN0ZXAub3B0cyxcblx0XHRcdFx0XHRwYXlsb2FkOiB7XG5cdFx0XHRcdFx0XHQuLi5zdGVwLm9wdHM/LnBheWxvYWQgPz8ge30sXG5cdFx0XHRcdFx0XHQuLi5uZXdQYXlsb2FkXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0pKTtcblx0fVxuXHRhc3luYyBleGVjdXRlU3RlcCh7IGlkLCBuYW1lLCBvcHRzLCBmbiwgZGlzcGxheU5hbWUsIHVzZXJsYW5kIH0pIHtcblx0XHR0aGlzLnRpbWVvdXQ/LmNsZWFyKCk7XG5cdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJNZW1vaXphdGlvbj8uKCk7XG5cdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHRjb25zdCBvdXRnb2luZ09wID0ge1xuXHRcdFx0aWQsXG5cdFx0XHRvcDogU3RlcE9wQ29kZS5TdGVwUnVuLFxuXHRcdFx0bmFtZSxcblx0XHRcdG9wdHMsXG5cdFx0XHRkaXNwbGF5TmFtZSxcblx0XHRcdHVzZXJsYW5kXG5cdFx0fTtcblx0XHR0aGlzLnN0YXRlLmV4ZWN1dGluZ1N0ZXAgPSBvdXRnb2luZ09wO1xuXHRcdGNvbnN0IHN0b3JlID0gYXdhaXQgZ2V0QXN5bmNDdHgoKTtcblx0XHRpZiAoc3RvcmU/LmV4ZWN1dGlvbikgc3RvcmUuZXhlY3V0aW9uLmV4ZWN1dGluZ1N0ZXAgPSB7XG5cdFx0XHRpZCxcblx0XHRcdG5hbWU6IGRpc3BsYXlOYW1lXG5cdFx0fTtcblx0XHR0aGlzLmRlYnVnKGBleGVjdXRpbmcgc3RlcCBcIiR7aWR9XCJgKTtcblx0XHRyZXR1cm4gcnVuQXNQcm9taXNlKGZuKS5maW5hbGx5KGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChzdG9yZT8uZXhlY3V0aW9uKSBkZWxldGUgc3RvcmUuZXhlY3V0aW9uLmV4ZWN1dGluZ1N0ZXA7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlckV4ZWN1dGlvbj8uKCk7XG5cdFx0fSkudGhlbigoZGF0YSkgPT4ge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4ub3V0Z29pbmdPcCxcblx0XHRcdFx0ZGF0YVxuXHRcdFx0fTtcblx0XHR9KS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRcdGxldCBlcnJvcklzUmV0cmlhYmxlID0gdHJ1ZTtcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIE5vblJldHJpYWJsZUVycm9yKSBlcnJvcklzUmV0cmlhYmxlID0gZmFsc2U7XG5cdFx0XHRlbHNlIGlmICh0aGlzLmZuQXJnLm1heEF0dGVtcHRzICYmIHRoaXMuZm5Bcmc/Lm1heEF0dGVtcHRzIC0gMSA9PT0gdGhpcy5mbkFyZy5hdHRlbXB0KSBlcnJvcklzUmV0cmlhYmxlID0gZmFsc2U7XG5cdFx0XHRpZiAoZXJyb3JJc1JldHJpYWJsZSkgcmV0dXJuIHtcblx0XHRcdFx0Li4ub3V0Z29pbmdPcCxcblx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcEVycm9yLFxuXHRcdFx0XHRlcnJvclxuXHRcdFx0fTtcblx0XHRcdGVsc2UgcmV0dXJuIHtcblx0XHRcdFx0Li4ub3V0Z29pbmdPcCxcblx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcEZhaWxlZCxcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdH07XG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogU3RhcnRzIGV4ZWN1dGlvbiBvZiB0aGUgdXNlcidzIGZ1bmN0aW9uLCBpbmNsdWRpbmcgdHJpZ2dlcmluZyBjaGVja3BvaW50c1xuXHQqIGFuZCBtaWRkbGV3YXJlIGhvb2tzIHdoZXJlIGFwcHJvcHJpYXRlLlxuXHQqL1xuXHRhc3luYyBzdGFydEV4ZWN1dGlvbigpIHtcblx0XHQvKipcblx0XHQqIE11dGF0ZSBpbnB1dCBhcyBuZWNjZXNzYXJ5IGJhc2VkIG9uIG1pZGRsZXdhcmUuXG5cdFx0Ki9cblx0XHRhd2FpdCB0aGlzLnRyYW5zZm9ybUlucHV0KCk7XG5cdFx0LyoqXG5cdFx0KiBTdGFydCB0aGUgdGltZXIgdG8gdGltZSBvdXQgdGhlIHJ1biBpZiBuZWVkZWQuXG5cdFx0Ki9cblx0XHR0aGlzLnRpbWVvdXQ/LnN0YXJ0KCk7XG5cdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlTWVtb2l6YXRpb24/LigpO1xuXHRcdC8qKlxuXHRcdCogSWYgd2UgaGFkIG5vIHN0YXRlIHRvIGJlZ2luIHdpdGgsIGltbWVkaWF0ZWx5IGVuZCB0aGUgbWVtb2l6YXRpb24gcGhhc2UuXG5cdFx0Ki9cblx0XHRpZiAodGhpcy5zdGF0ZS5hbGxTdGF0ZVVzZWQoKSkge1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJNZW1vaXphdGlvbj8uKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVFeGVjdXRpb24/LigpO1xuXHRcdH1cblx0XHQvKipcblx0XHQqIFRyaWdnZXIgdGhlIHVzZXIncyBmdW5jdGlvbi5cblx0XHQqL1xuXHRcdHJ1bkFzUHJvbWlzZSgoKSA9PiB0aGlzLnVzZXJGblRvUnVuKHRoaXMuZm5BcmcpKS5maW5hbGx5KGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyRXhlY3V0aW9uPy4oKTtcblx0XHR9KS50aGVuKChkYXRhKSA9PiB7XG5cdFx0XHR0aGlzLnN0YXRlLnNldENoZWNrcG9pbnQoe1xuXHRcdFx0XHR0eXBlOiBcImZ1bmN0aW9uLXJlc29sdmVkXCIsXG5cdFx0XHRcdGRhdGFcblx0XHRcdH0pO1xuXHRcdH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0dGhpcy5zdGF0ZS5zZXRDaGVja3BvaW50KHtcblx0XHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZWplY3RlZFwiLFxuXHRcdFx0XHRlcnJvclxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogVXNpbmcgbWlkZGxld2FyZSwgdHJhbnNmb3JtIGlucHV0IGJlZm9yZSBydW5uaW5nLlxuXHQqL1xuXHRhc3luYyB0cmFuc2Zvcm1JbnB1dCgpIHtcblx0XHRjb25zdCBpbnB1dE11dGF0aW9ucyA9IGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LnRyYW5zZm9ybUlucHV0Py4oe1xuXHRcdFx0Y3R4OiB7IC4uLnRoaXMuZm5BcmcgfSxcblx0XHRcdHN0ZXBzOiBPYmplY3QudmFsdWVzKHRoaXMuc3RhdGUuc3RlcFN0YXRlKSxcblx0XHRcdGZuOiB0aGlzLm9wdGlvbnMuZm4sXG5cdFx0XHRyZXFBcmdzOiB0aGlzLm9wdGlvbnMucmVxQXJnc1xuXHRcdH0pO1xuXHRcdGlmIChpbnB1dE11dGF0aW9ucz8uY3R4KSB0aGlzLmZuQXJnID0gaW5wdXRNdXRhdGlvbnMuY3R4O1xuXHRcdGlmIChpbnB1dE11dGF0aW9ucz8uc3RlcHMpIHRoaXMuc3RhdGUuc3RlcFN0YXRlID0gT2JqZWN0LmZyb21FbnRyaWVzKGlucHV0TXV0YXRpb25zLnN0ZXBzLm1hcCgoc3RlcCkgPT4gW3N0ZXAuaWQsIHN0ZXBdKSk7XG5cdH1cblx0LyoqXG5cdCogVXNpbmcgbWlkZGxld2FyZSwgdHJhbnNmb3JtIG91dHB1dCBiZWZvcmUgcmV0dXJuaW5nLlxuXHQqL1xuXHRhc3luYyB0cmFuc2Zvcm1PdXRwdXQoZGF0YU9yRXJyb3IpIHtcblx0XHRjb25zdCBvdXRwdXQgPSB7IC4uLmRhdGFPckVycm9yIH07XG5cdFx0Y29uc3QgaXNTdGVwRXhlY3V0aW9uID0gQm9vbGVhbih0aGlzLnN0YXRlLmV4ZWN1dGluZ1N0ZXApO1xuXHRcdGNvbnN0IHRyYW5zZm9ybWVkT3V0cHV0ID0gYXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8udHJhbnNmb3JtT3V0cHV0Py4oe1xuXHRcdFx0cmVzdWx0OiB7IC4uLm91dHB1dCB9LFxuXHRcdFx0c3RlcDogdGhpcy5zdGF0ZS5leGVjdXRpbmdTdGVwXG5cdFx0fSk7XG5cdFx0Y29uc3QgeyBkYXRhLCBlcnJvciB9ID0ge1xuXHRcdFx0Li4ub3V0cHV0LFxuXHRcdFx0Li4udHJhbnNmb3JtZWRPdXRwdXQ/LnJlc3VsdFxuXHRcdH07XG5cdFx0aWYgKCFpc1N0ZXBFeGVjdXRpb24pIGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmZpbmlzaGVkPy4oeyByZXN1bHQ6IHsgLi4udHlwZW9mIGVycm9yICE9PSBcInVuZGVmaW5lZFwiID8geyBlcnJvciB9IDogeyBkYXRhIH0gfSB9KTtcblx0XHRpZiAodHlwZW9mIGVycm9yICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHQvKipcblx0XHRcdCogRW5zdXJlIHdlIGdpdmUgbWlkZGxld2FyZSB0aGUgY2hhbmNlIHRvIGRlY2lkZSBvbiByZXRyaWFibGUgYmVoYXZpb3VyXG5cdFx0XHQqIGJ5IGxvb2tpbmcgYXQgdGhlIGVycm9yIHJldHVybmVkIGZyb20gb3V0cHV0IHRyYW5zZm9ybWF0aW9uLlxuXHRcdFx0Ki9cblx0XHRcdGxldCByZXRyaWFibGUgPSAhKGVycm9yIGluc3RhbmNlb2YgTm9uUmV0cmlhYmxlRXJyb3IgfHwgZXJyb3IgaW5zdGFuY2VvZiBTdGVwRXJyb3IgJiYgZXJyb3IgPT09IHRoaXMuc3RhdGUucmVjZW50bHlSZWplY3RlZFN0ZXBFcnJvcik7XG5cdFx0XHRpZiAocmV0cmlhYmxlICYmIGVycm9yIGluc3RhbmNlb2YgUmV0cnlBZnRlckVycm9yKSByZXRyaWFibGUgPSBlcnJvci5yZXRyeUFmdGVyO1xuXHRcdFx0Y29uc3Qgc2VyaWFsaXplZEVycm9yID0gbWluaWZ5UHJldHR5RXJyb3Ioc2VyaWFsaXplRXJyb3IoZXJyb3IpKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHR5cGU6IFwiZnVuY3Rpb24tcmVqZWN0ZWRcIixcblx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRvcHM6IHRoaXMub3BzLFxuXHRcdFx0XHRlcnJvcjogc2VyaWFsaXplZEVycm9yLFxuXHRcdFx0XHRyZXRyaWFibGVcblx0XHRcdH07XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHR0eXBlOiBcImZ1bmN0aW9uLXJlc29sdmVkXCIsXG5cdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRvcHM6IHRoaXMub3BzLFxuXHRcdFx0ZGF0YTogdW5kZWZpbmVkVG9OdWxsKGRhdGEpXG5cdFx0fTtcblx0fVxuXHRjcmVhdGVFeGVjdXRpb25TdGF0ZSgpIHtcblx0XHRjb25zdCBkID0gY3JlYXRlRGVmZXJyZWRQcm9taXNlV2l0aFN0YWNrKCk7XG5cdFx0bGV0IGNoZWNrcG9pbnRSZXNvbHZlID0gZC5kZWZlcnJlZC5yZXNvbHZlO1xuXHRcdGNvbnN0IGNoZWNrcG9pbnRSZXN1bHRzID0gZC5yZXN1bHRzO1xuXHRcdGNvbnN0IGxvb3AgPSAoYXN5bmMgZnVuY3Rpb24qIChjbGVhblVwKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IChhd2FpdCBjaGVja3BvaW50UmVzdWx0cy5uZXh0KCkpLnZhbHVlO1xuXHRcdFx0XHRcdGlmIChyZXMpIHlpZWxkIHJlcztcblx0XHRcdFx0fVxuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0Y2xlYW5VcD8uKCk7XG5cdFx0XHR9XG5cdFx0fSkoKCkgPT4ge1xuXHRcdFx0dGhpcy50aW1lb3V0Py5jbGVhcigpO1xuXHRcdFx0Y2hlY2twb2ludFJlc3VsdHMucmV0dXJuKCk7XG5cdFx0fSk7XG5cdFx0Y29uc3Qgc3RlcHNUb0Z1bGZpbGwgPSBPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMuc3RlcFN0YXRlKS5sZW5ndGg7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHN0ZXBTdGF0ZTogdGhpcy5vcHRpb25zLnN0ZXBTdGF0ZSxcblx0XHRcdHN0ZXBzVG9GdWxmaWxsLFxuXHRcdFx0c3RlcHM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG5cdFx0XHRsb29wLFxuXHRcdFx0aGFzU3RlcHM6IEJvb2xlYW4oc3RlcHNUb0Z1bGZpbGwpLFxuXHRcdFx0c3RlcENvbXBsZXRpb25PcmRlcjogWy4uLnRoaXMub3B0aW9ucy5zdGVwQ29tcGxldGlvbk9yZGVyXSxcblx0XHRcdHJlbWFpbmluZ1N0ZXBzVG9CZVNlZW46IG5ldyBTZXQodGhpcy5vcHRpb25zLnN0ZXBDb21wbGV0aW9uT3JkZXIpLFxuXHRcdFx0c2V0Q2hlY2twb2ludDogKGNoZWNrcG9pbnQpID0+IHtcblx0XHRcdFx0KHtyZXNvbHZlOiBjaGVja3BvaW50UmVzb2x2ZX0gPSBjaGVja3BvaW50UmVzb2x2ZShjaGVja3BvaW50KSk7XG5cdFx0XHR9LFxuXHRcdFx0YWxsU3RhdGVVc2VkOiAoKSA9PiB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnN0YXRlLnJlbWFpbmluZ1N0ZXBzVG9CZVNlZW4uc2l6ZSA9PT0gMDtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdGdldCBvcHMoKSB7XG5cdFx0cmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyh0aGlzLnN0YXRlLnN0ZXBzKTtcblx0fVxuXHRjcmVhdGVGbkFyZygpIHtcblx0XHRjb25zdCBzdGVwID0gdGhpcy5jcmVhdGVTdGVwVG9vbHMoKTtcblx0XHRsZXQgZm5BcmcgPSB7XG5cdFx0XHQuLi50aGlzLm9wdGlvbnMuZGF0YSxcblx0XHRcdHN0ZXBcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCogSGFuZGxlIHVzZSBvZiB0aGUgYG9uRmFpbHVyZWAgb3B0aW9uIGJ5IGRlc2VyaWFsaXppbmcgdGhlIGVycm9yLlxuXHRcdCovXG5cdFx0aWYgKHRoaXMub3B0aW9ucy5pc0ZhaWx1cmVIYW5kbGVyKSB7XG5cdFx0XHRjb25zdCBldmVudERhdGEgPSB6Lm9iamVjdCh7IGVycm9yOiBqc29uRXJyb3JTY2hlbWEgfSkucGFyc2UoZm5BcmcuZXZlbnQ/LmRhdGEpO1xuXHRcdFx0Zm5BcmcgPSB7XG5cdFx0XHRcdC4uLmZuQXJnLFxuXHRcdFx0XHRlcnJvcjogZGVzZXJpYWxpemVFcnJvcihldmVudERhdGEuZXJyb3IpXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLnRyYW5zZm9ybUN0eD8uKGZuQXJnKSA/PyBmbkFyZztcblx0fVxuXHRjcmVhdGVTdGVwVG9vbHMoKSB7XG5cdFx0LyoqXG5cdFx0KiBBIGxpc3Qgb2Ygc3RlcHMgdGhhdCBoYXZlIGJlZW4gZm91bmQgYW5kIGFyZSBiZWluZyByb2xsZWQgdXAgYmVmb3JlIGJlaW5nXG5cdFx0KiByZXBvcnRlZCB0byB0aGUgY29yZSBsb29wLlxuXHRcdCovXG5cdFx0Y29uc3QgZm91bmRTdGVwc1RvUmVwb3J0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHQvKipcblx0XHQqIEEgbWFwIG9mIHRoZSBzdWJzZXQgb2YgZm91bmQgc3RlcHMgdG8gcmVwb3J0IHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cblx0XHQqIGhhbmRsZWQuIFVzZWQgZm9yIGZhc3QgYWNjZXNzIHRvIHN0ZXBzIHRoYXQgbmVlZCB0byBiZSBoYW5kbGVkIGluIG9yZGVyLlxuXHRcdCovXG5cdFx0Y29uc3QgdW5oYW5kbGVkRm91bmRTdGVwc1RvUmVwb3J0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHQvKipcblx0XHQqIEEgbWFwIG9mIHRoZSBsYXRlc3Qgc2VxdWVudGlhbCBzdGVwIGluZGV4ZXMgZm91bmQgZm9yIGVhY2ggc3RlcCBJRC4gVXNlZFxuXHRcdCogdG8gZW5zdXJlIHRoYXQgd2UgZG9uJ3QgaW5kZXggc3RlcHMgaW4gcGFyYWxsZWwuXG5cdFx0KlxuXHRcdCogTm90ZSB0aGF0IHRoZXNlIG11c3QgYmUgc2VxdWVudGlhbDsgaWYgd2UndmUgc2VlbiBvciBhc3NpZ25lZCBgYToxYCxcblx0XHQqIGBhOjJgIGFuZCBgYTo0YCwgdGhlIGxhdGVzdCBzZXF1ZW50aWFsIHN0ZXAgaW5kZXggaXMgYDJgLlxuXHRcdCpcblx0XHQqL1xuXHRcdGNvbnN0IGV4cGVjdGVkTmV4dFN0ZXBJbmRleGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHQvKipcblx0XHQqIEEgcHJvbWlzZSB0aGF0J3MgdXNlZCB0byBlbnN1cmUgdGhhdCBzdGVwIHJlcG9ydGluZyBjYW5ub3QgYmUgcnVuIG1vcmUgdGhhblxuXHRcdCogb25jZSBpbiBhIGdpdmVuIGFzeW5jaHJvbm91cyB0aW1lIHNwYW4uXG5cdFx0Ki9cblx0XHRsZXQgZm91bmRTdGVwc1JlcG9ydFByb21pc2U7XG5cdFx0LyoqXG5cdFx0KiBBIHByb21pc2UgdGhhdCdzIHVzZWQgdG8gcmVwcmVzZW50IG1pZGRsZXdhcmUgaG9va3MgcnVubmluZyBiZWZvcmVcblx0XHQqIGV4ZWN1dGlvbi5cblx0XHQqL1xuXHRcdGxldCBiZWZvcmVFeGVjSG9va3NQcm9taXNlO1xuXHRcdC8qKlxuXHRcdCogQSBoZWxwZXIgdXNlZCB0byByZXBvcnQgc3RlcHMgdG8gdGhlIGNvcmUgbG9vcC4gVXNlZCBhZnRlciBhZGRpbmcgYW4gaXRlbVxuXHRcdCogdG8gYGZvdW5kU3RlcHNUb1JlcG9ydGAuXG5cdFx0Ki9cblx0XHRjb25zdCByZXBvcnROZXh0VGljayA9ICgpID0+IHtcblx0XHRcdGlmIChmb3VuZFN0ZXBzUmVwb3J0UHJvbWlzZSkgcmV0dXJuO1xuXHRcdFx0Zm91bmRTdGVwc1JlcG9ydFByb21pc2UgPSByZXNvbHZlTmV4dFRpY2soKS50aGVuKCgpID0+IGJlZm9yZUV4ZWNIb29rc1Byb21pc2UpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRmb3VuZFN0ZXBzUmVwb3J0UHJvbWlzZSA9IHZvaWQgMDtcblx0XHRcdFx0Zm9yIChjb25zdCBbaGFzaGVkSWQsIHN0ZXBdIG9mIHVuaGFuZGxlZEZvdW5kU3RlcHNUb1JlcG9ydCkgaWYgKHN0ZXAuaGFuZGxlKCkpIHtcblx0XHRcdFx0XHR1bmhhbmRsZWRGb3VuZFN0ZXBzVG9SZXBvcnQuZGVsZXRlKGhhc2hlZElkKTtcblx0XHRcdFx0XHRpZiAoc3RlcC5mdWxmaWxsZWQpIGZvdW5kU3RlcHNUb1JlcG9ydC5kZWxldGUoc3RlcC5pZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGZvdW5kU3RlcHNUb1JlcG9ydC5zaXplKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc3RlcHMgPSBbLi4uZm91bmRTdGVwc1RvUmVwb3J0LnZhbHVlcygpXTtcblx0XHRcdFx0XHRmb3VuZFN0ZXBzVG9SZXBvcnQuY2xlYXIoKTtcblx0XHRcdFx0XHR0aGlzLnN0YXRlLnNldENoZWNrcG9pbnQoe1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdGVwcy1mb3VuZFwiLFxuXHRcdFx0XHRcdFx0c3RlcHNcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0KiBBIGhlbHBlciB1c2VkIHRvIHB1c2ggYSBzdGVwIHRvIHRoZSBsaXN0IG9mIHN0ZXBzIHRvIHJlcG9ydC5cblx0XHQqL1xuXHRcdGNvbnN0IHB1c2hTdGVwVG9SZXBvcnQgPSAoc3RlcCkgPT4ge1xuXHRcdFx0Zm91bmRTdGVwc1RvUmVwb3J0LnNldChzdGVwLmlkLCBzdGVwKTtcblx0XHRcdHVuaGFuZGxlZEZvdW5kU3RlcHNUb1JlcG9ydC5zZXQoc3RlcC5oYXNoZWRJZCwgc3RlcCk7XG5cdFx0XHRyZXBvcnROZXh0VGljaygpO1xuXHRcdH07XG5cdFx0Y29uc3Qgc3RlcEhhbmRsZXIgPSBhc3luYyAoeyBhcmdzLCBtYXRjaE9wLCBvcHRzIH0pID0+IHtcblx0XHRcdGF3YWl0IGJlZm9yZUV4ZWNIb29rc1Byb21pc2U7XG5cdFx0XHRjb25zdCBvcElkID0gbWF0Y2hPcChnZXRTdGVwT3B0aW9ucyhhcmdzWzBdKSwgLi4uYXJncy5zbGljZSgxKSk7XG5cdFx0XHRpZiAodGhpcy5zdGF0ZS5leGVjdXRpbmdTdGVwKVxuIC8qKlxuXHRcdFx0KiBJZiBhIHN0ZXAgaXMgZm91bmQgYWZ0ZXIgYXN5bmNocm9ub3VzIGFjdGlvbnMgZHVyaW5nIGFub3RoZXIgc3RlcCdzXG5cdFx0XHQqIGV4ZWN1dGlvbiwgZXZlcnl0aGluZyBpcyBmaW5lLiBUaGUgcHJvYmxlbSBoZXJlIGlzIGlmIHdlJ3ZlIGZvdW5kXG5cdFx0XHQqIHRoYXQgYSBzdGVwIG5lc3RlZCBpbnNpZGUgYW5vdGhlciBhIHN0ZXAsIHdoaWNoIGlzIHNvbWV0aGluZyB3ZSBkb24ndFxuXHRcdFx0KiBzdXBwb3J0IGF0IHRoZSB0aW1lIG9mIHdyaXRpbmcuXG5cdFx0XHQqXG5cdFx0XHQqIEluIHRoaXMgY2FzZSwgd2UgY291bGQgdXNlIHNvbWV0aGluZyBsaWtlIEFzeW5jIEhvb2tzIHRvIHVuZGVyc3RhbmRcblx0XHRcdCogaG93IHRoZSBzdGVwIGlzIGJlaW5nIHRyaWdnZXJlZCwgdGhvdWdoIHRoaXMgaXNuJ3QgYXZhaWxhYmxlIGluIGFsbFxuXHRcdFx0KiBlbnZpcm9ubWVudHMuXG5cdFx0XHQqXG5cdFx0XHQqIFRoZXJlZm9yZSwgd2UnbGwgb25seSBzaG93IGEgd2FybmluZyBoZXJlIHRvIGluZGljYXRlIHRoYXQgdGhpcyBpc1xuXHRcdFx0KiBwb3RlbnRpYWxseSBhbiBpc3N1ZS5cblx0XHRcdCovXG5cdFx0XHR0aGlzLm9wdGlvbnMuY2xpZW50W1wid2Fybk1ldGFkYXRhXCJdKHsgcnVuX2lkOiB0aGlzLm9wdGlvbnMucnVuSWQgfSwgRXJyQ29kZS5ORVNUSU5HX1NURVBTLCBwcmV0dHlFcnJvcih7XG5cdFx0XHRcdHdoYXRIYXBwZW5lZDogYFdlIGRldGVjdGVkIHRoYXQgeW91IGhhdmUgbmVzdGVkIFxcYHN0ZXAuKlxcYCB0b29saW5nIGluIFxcYCR7b3BJZC5kaXNwbGF5TmFtZSA/PyBvcElkLmlkfVxcYGAsXG5cdFx0XHRcdGNvbnNlcXVlbmNlczogXCJOZXN0aW5nIGBzdGVwLipgIHRvb2xpbmcgaXMgbm90IHN1cHBvcnRlZC5cIixcblx0XHRcdFx0dHlwZTogXCJ3YXJuXCIsXG5cdFx0XHRcdHJlYXNzdXJhbmNlOiBcIkl0J3MgcG9zc2libGUgdG8gc2VlIHRoaXMgd2FybmluZyBpZiBzdGVwcyBhcmUgc2VwYXJhdGVkIGJ5IHJlZ3VsYXIgYXN5bmNocm9ub3VzIGNhbGxzLCB3aGljaCBpcyBmaW5lLlwiLFxuXHRcdFx0XHRzdGFjazogdHJ1ZSxcblx0XHRcdFx0dG9GaXhOb3c6IFwiTWFrZSBzdXJlIHlvdSdyZSBub3QgdXNpbmcgYHN0ZXAuKmAgdG9vbGluZyBpbnNpZGUgb2Ygb3RoZXIgYHN0ZXAuKmAgdG9vbGluZy4gSWYgeW91IG5lZWQgdG8gY29tcG9zZSBzdGVwcyB0b2dldGhlciwgeW91IGNhbiBjcmVhdGUgYSBuZXcgYXN5bmMgZnVuY3Rpb24gYW5kIGNhbGwgaXQgZnJvbSB3aXRoaW4geW91ciBzdGVwIGZ1bmN0aW9uLCBvciB1c2UgcHJvbWlzZSBjaGFpbmluZy5cIixcblx0XHRcdFx0Y29kZTogRXJyQ29kZS5ORVNUSU5HX1NURVBTXG5cdFx0XHR9KSk7XG5cdFx0XHRpZiAodGhpcy5zdGF0ZS5zdGVwcy5oYXMob3BJZC5pZCkpIHtcblx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxJZCA9IG9wSWQuaWQ7XG5cdFx0XHRcdGNvbnN0IGV4cGVjdGVkTmV4dEluZGV4ID0gZXhwZWN0ZWROZXh0U3RlcEluZGV4ZXMuZ2V0KG9yaWdpbmFsSWQpID8/IDE7XG5cdFx0XHRcdGZvciAobGV0IGkgPSBleHBlY3RlZE5leHRJbmRleDs7IGkrKykge1xuXHRcdFx0XHRcdGNvbnN0IG5ld0lkID0gb3JpZ2luYWxJZCArIFNURVBfSU5ERVhJTkdfU1VGRklYICsgaTtcblx0XHRcdFx0XHRpZiAoIXRoaXMuc3RhdGUuc3RlcHMuaGFzKG5ld0lkKSkge1xuXHRcdFx0XHRcdFx0ZXhwZWN0ZWROZXh0U3RlcEluZGV4ZXMuc2V0KG9yaWdpbmFsSWQsIGkgKyAxKTtcblx0XHRcdFx0XHRcdG9wSWQuaWQgPSBuZXdJZDtcblx0XHRcdFx0XHRcdG9wSWQudXNlcmxhbmQuaW5kZXggPSBpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjb25zdCB7IHByb21pc2UsIHJlc29sdmUsIHJlamVjdCB9ID0gY3JlYXRlRGVmZXJyZWRQcm9taXNlKCk7XG5cdFx0XHRjb25zdCBoYXNoZWRJZCA9IF9pbnRlcm5hbHMuaGFzaElkKG9wSWQuaWQpO1xuXHRcdFx0Y29uc3Qgc3RlcFN0YXRlID0gdGhpcy5zdGF0ZS5zdGVwU3RhdGVbaGFzaGVkSWRdO1xuXHRcdFx0bGV0IGlzRnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRpZiAoc3RlcFN0YXRlKSB7XG5cdFx0XHRcdHN0ZXBTdGF0ZS5zZWVuID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5zdGF0ZS5yZW1haW5pbmdTdGVwc1RvQmVTZWVuLmRlbGV0ZShoYXNoZWRJZCk7XG5cdFx0XHRcdGlmICh0eXBlb2Ygc3RlcFN0YXRlLmlucHV0ID09PSBcInVuZGVmaW5lZFwiKSBpc0Z1bGZpbGxlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRsZXQgZXh0cmFPcHRzO1xuXHRcdFx0bGV0IGZuQXJncyA9IFsuLi5hcmdzXTtcblx0XHRcdGlmICh0eXBlb2Ygc3RlcFN0YXRlPy5pbnB1dCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBBcnJheS5pc0FycmF5KHN0ZXBTdGF0ZS5pbnB1dCkpIHN3aXRjaCAob3BJZC5vcCkge1xuXHRcdFx0XHRjYXNlIFN0ZXBPcENvZGUuU3RlcFBsYW5uZWQ6XG5cdFx0XHRcdFx0Zm5BcmdzID0gWy4uLmFyZ3Muc2xpY2UoMCwgMiksIC4uLnN0ZXBTdGF0ZS5pbnB1dF07XG5cdFx0XHRcdFx0ZXh0cmFPcHRzID0geyBpbnB1dDogWy4uLnN0ZXBTdGF0ZS5pbnB1dF0gfTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTdGVwT3BDb2RlLkFpR2F0ZXdheTpcblx0XHRcdFx0XHRleHRyYU9wdHMgPSB7IGJvZHk6IHtcblx0XHRcdFx0XHRcdC4uLnR5cGVvZiBvcElkLm9wdHM/LmJvZHkgPT09IFwib2JqZWN0XCIgPyB7IC4uLm9wSWQub3B0cy5ib2R5IH0gOiB7fSxcblx0XHRcdFx0XHRcdC4uLnN0ZXBTdGF0ZS5pbnB1dFswXVxuXHRcdFx0XHRcdH0gfTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGNvbnN0IHN0ZXAgPSB7XG5cdFx0XHRcdC4uLm9wSWQsXG5cdFx0XHRcdG9wdHM6IHtcblx0XHRcdFx0XHQuLi5vcElkLm9wdHMsXG5cdFx0XHRcdFx0Li4uZXh0cmFPcHRzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJhd0FyZ3M6IGZuQXJncyxcblx0XHRcdFx0aGFzaGVkSWQsXG5cdFx0XHRcdGlucHV0OiBzdGVwU3RhdGU/LmlucHV0LFxuXHRcdFx0XHRmbjogb3B0cz8uZm4gPyAoKSA9PiBvcHRzLmZuPy4oLi4uZm5BcmdzKSA6IHZvaWQgMCxcblx0XHRcdFx0cHJvbWlzZSxcblx0XHRcdFx0ZnVsZmlsbGVkOiBpc0Z1bGZpbGxlZCxcblx0XHRcdFx0aGFzU3RlcFN0YXRlOiBCb29sZWFuKHN0ZXBTdGF0ZSksXG5cdFx0XHRcdGRpc3BsYXlOYW1lOiBvcElkLmRpc3BsYXlOYW1lID8/IG9wSWQuaWQsXG5cdFx0XHRcdGhhbmRsZWQ6IGZhbHNlLFxuXHRcdFx0XHRoYW5kbGU6ICgpID0+IHtcblx0XHRcdFx0XHRpZiAoc3RlcC5oYW5kbGVkKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0c3RlcC5oYW5kbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRpZiAoaXNGdWxmaWxsZWQgJiYgc3RlcFN0YXRlKSB7XG5cdFx0XHRcdFx0XHRzdGVwU3RhdGUuZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFByb21pc2UuYWxsKFtcblx0XHRcdFx0XHRcdFx0c3RlcFN0YXRlLmRhdGEsXG5cdFx0XHRcdFx0XHRcdHN0ZXBTdGF0ZS5lcnJvcixcblx0XHRcdFx0XHRcdFx0c3RlcFN0YXRlLmlucHV0XG5cdFx0XHRcdFx0XHRdKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBzdGVwU3RhdGUuZGF0YSAhPT0gXCJ1bmRlZmluZWRcIikgcmVzb2x2ZShzdGVwU3RhdGUuZGF0YSk7XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc3RhdGUucmVjZW50bHlSZWplY3RlZFN0ZXBFcnJvciA9IG5ldyBTdGVwRXJyb3Iob3BJZC5pZCwgc3RlcFN0YXRlLmVycm9yKTtcblx0XHRcdFx0XHRcdFx0XHRyZWplY3QodGhpcy5zdGF0ZS5yZWNlbnRseVJlamVjdGVkU3RlcEVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0dGhpcy5zdGF0ZS5zdGVwcy5zZXQob3BJZC5pZCwgc3RlcCk7XG5cdFx0XHR0aGlzLnN0YXRlLmhhc1N0ZXBzID0gdHJ1ZTtcblx0XHRcdHB1c2hTdGVwVG9SZXBvcnQoc3RlcCk7XG5cdFx0XHQvKipcblx0XHRcdCogSWYgdGhpcyBpcyB0aGUgbGFzdCBwaWVjZSBvZiBzdGF0ZSB3ZSBoYWQsIHdlJ3ZlIG5vdyBmaW5pc2hlZFxuXHRcdFx0KiBtZW1vaXppbmcuXG5cdFx0XHQqL1xuXHRcdFx0aWYgKCFiZWZvcmVFeGVjSG9va3NQcm9taXNlICYmIHRoaXMuc3RhdGUuYWxsU3RhdGVVc2VkKCkpIGF3YWl0IChiZWZvcmVFeGVjSG9va3NQcm9taXNlID0gKGFzeW5jICgpID0+IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJNZW1vaXphdGlvbj8uKCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0XHR9KSgpKTtcblx0XHRcdHJldHVybiBwcm9taXNlO1xuXHRcdH07XG5cdFx0cmV0dXJuIGNyZWF0ZVN0ZXBUb29scyh0aGlzLm9wdGlvbnMuY2xpZW50LCB0aGlzLCBzdGVwSGFuZGxlcik7XG5cdH1cblx0Z2V0VXNlckZuVG9SdW4oKSB7XG5cdFx0aWYgKCF0aGlzLm9wdGlvbnMuaXNGYWlsdXJlSGFuZGxlcikgcmV0dXJuIHRoaXMub3B0aW9ucy5mbltcImZuXCJdO1xuXHRcdGlmICghdGhpcy5vcHRpb25zLmZuW1wib25GYWlsdXJlRm5cIl0pXG4gLyoqXG5cdFx0KiBTb21laG93LCB3ZSd2ZSBlbmRlZCB1cCBkZXRlY3RpbmcgdGhhdCB0aGlzIGlzIGEgZmFpbHVyZSBoYW5kbGVyIGJ1dFxuXHRcdCogZG9lc24ndCBoYXZlIGFuIGBvbkZhaWx1cmVgIGZ1bmN0aW9uLiBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4uXG5cdFx0Ki9cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBmdW5jdGlvbiBgb25GYWlsdXJlYCBoYW5kbGVyXCIpO1xuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMuZm5bXCJvbkZhaWx1cmVGblwiXTtcblx0fVxuXHRpbml0aWFsaXplVGltZXIoc3RhdGUpIHtcblx0XHRpZiAoIXRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwKSByZXR1cm47XG5cdFx0dGhpcy50aW1lb3V0ID0gY3JlYXRlVGltZW91dFByb21pc2UodGhpcy50aW1lb3V0RHVyYXRpb24pO1xuXHRcdHRoaXMudGltZW91dC50aGVuKGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyRXhlY3V0aW9uPy4oKTtcblx0XHRcdHN0YXRlLnNldENoZWNrcG9pbnQoe1xuXHRcdFx0XHR0eXBlOiBcInN0ZXAtbm90LWZvdW5kXCIsXG5cdFx0XHRcdHN0ZXA6IHtcblx0XHRcdFx0XHRpZDogdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXAsXG5cdFx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcE5vdEZvdW5kXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIGluaXRpYWxpemVNaWRkbGV3YXJlKCkge1xuXHRcdGNvbnN0IGN0eCA9IHRoaXMub3B0aW9ucy5kYXRhO1xuXHRcdHJldHVybiBhd2FpdCBnZXRIb29rU3RhY2sodGhpcy5vcHRpb25zLmZuW1wibWlkZGxld2FyZVwiXSwgXCJvbkZ1bmN0aW9uUnVuXCIsIHtcblx0XHRcdGN0eCxcblx0XHRcdGZuOiB0aGlzLm9wdGlvbnMuZm4sXG5cdFx0XHRzdGVwczogT2JqZWN0LnZhbHVlcyh0aGlzLm9wdGlvbnMuc3RlcFN0YXRlKSxcblx0XHRcdHJlcUFyZ3M6IHRoaXMub3B0aW9ucy5yZXFBcmdzXG5cdFx0fSwge1xuXHRcdFx0dHJhbnNmb3JtSW5wdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRjdHg6IHtcblx0XHRcdFx0XHRcdC4uLnByZXYuY3R4LFxuXHRcdFx0XHRcdFx0Li4ub3V0cHV0Py5jdHhcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZuOiB0aGlzLm9wdGlvbnMuZm4sXG5cdFx0XHRcdFx0c3RlcHM6IHByZXYuc3RlcHMubWFwKChzdGVwLCBpKSA9PiAoe1xuXHRcdFx0XHRcdFx0Li4uc3RlcCxcblx0XHRcdFx0XHRcdC4uLm91dHB1dD8uc3RlcHM/LltpXVxuXHRcdFx0XHRcdH0pKSxcblx0XHRcdFx0XHRyZXFBcmdzOiBwcmV2LnJlcUFyZ3Ncblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cdFx0XHR0cmFuc2Zvcm1PdXRwdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRyZXN1bHQ6IHtcblx0XHRcdFx0XHRcdC4uLnByZXYucmVzdWx0LFxuXHRcdFx0XHRcdFx0Li4ub3V0cHV0Py5yZXN1bHRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN0ZXA6IHByZXYuc3RlcFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59O1xuY29uc3QgaGFzaElkID0gKGlkKSA9PiB7XG5cdHJldHVybiBzaGExKCkudXBkYXRlKGlkKS5kaWdlc3QoXCJoZXhcIik7XG59O1xuY29uc3QgaGFzaE9wID0gKG9wKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0Li4ub3AsXG5cdFx0aWQ6IGhhc2hJZChvcC5pZClcblx0fTtcbn07XG4vKipcbiogRXhwb3J0ZWQgZm9yIHRlc3RpbmcuXG4qL1xuY29uc3QgX2ludGVybmFscyA9IHtcblx0aGFzaE9wLFxuXHRoYXNoSWRcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlVjJJbm5nZXN0RXhlY3V0aW9uLCB2Ml9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12Mi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/v2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/ServerTiming.js":
/*!******************************************************!*\
  !*** ./node_modules/inngest/helpers/ServerTiming.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ServerTiming: () => (/* binding */ ServerTiming),\n/* harmony export */   ServerTiming_exports: () => (/* binding */ ServerTiming_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n\n\n\n//#region src/helpers/ServerTiming.ts\nvar ServerTiming_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)({ ServerTiming: () => ServerTiming });\n/**\n* A class to manage timing functions and arbitrary periods of time before\n* generating a `Server-Timing` header for use in HTTP responses.\n*\n* This is a very simple implementation that does not support nested timings or\n* fractions of a millisecond.\n*/\nvar ServerTiming = class {\n\ttimings = {};\n\t/**\n\t* Start a timing. Returns a function that, when called, will stop the timing\n\t* and add it to the header.\n\t*/\n\tstart(name, description) {\n\t\tif (!this.timings[name]) this.timings[name] = {\n\t\t\tdescription: description ?? \"\",\n\t\t\ttimers: []\n\t\t};\n\t\tconst index = this.timings[name].timers.push({ start: Date.now() }) - 1;\n\t\treturn () => {\n\t\t\tconst target = this.timings[name];\n\t\t\tif (!target) return console.warn(`Timing \"${name}\" does not exist`);\n\t\t\tconst timer = target.timers[index];\n\t\t\tif (!timer) return console.warn(`Timer ${index} for timing \"${name}\" does not exist`);\n\t\t\ttimer.end = Date.now();\n\t\t};\n\t}\n\t/**\n\t* Add a piece of arbitrary, untimed information to the header. Common use\n\t* cases would be cache misses.\n\t*\n\t* @example\n\t* ```\n\t* timer.append(\"cache\", \"miss\");\n\t* ```\n\t*/\n\tappend(key, value) {\n\t\tthis.timings[key] = {\n\t\t\tdescription: value,\n\t\t\ttimers: []\n\t\t};\n\t}\n\t/**\n\t* Wrap a function in a timing. The timing will be stopped and added to the\n\t* header when the function resolves or rejects.\n\t*\n\t* The return value of the function will be returned from this function.\n\t*/\n\tasync wrap(name, fn, description) {\n\t\tconst stop = this.start(name, description);\n\t\ttry {\n\t\t\treturn await (0,_promises_js__WEBPACK_IMPORTED_MODULE_1__.runAsPromise)(fn);\n\t\t} finally {\n\t\t\tstop();\n\t\t}\n\t}\n\t/**\n\t* Generate the `Server-Timing` header.\n\t*/\n\tgetHeader() {\n\t\treturn Object.entries(this.timings).reduce((acc, [name, { description, timers }]) => {\n\t\t\tif (!timers.some((timer) => timer.end)) return acc;\n\t\t\tconst dur = timers.reduce((acc$1, { start, end }) => {\n\t\t\t\tif (!start || !end) return acc$1;\n\t\t\t\treturn acc$1 + (end - start);\n\t\t\t}, 0);\n\t\t\tconst entry = [\n\t\t\t\tname,\n\t\t\t\tdescription ? `desc=\"${description}\"` : \"\",\n\t\t\t\tdur ? `dur=${dur}` : \"\"\n\t\t\t].filter(Boolean).join(\";\");\n\t\t\treturn [...acc, entry];\n\t\t}, []).join(\", \");\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=ServerTiming.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL1NlcnZlclRpbWluZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTJEO0FBQ2Q7O0FBRTdDO0FBQ0EsMkNBQTJDLHNFQUFRLEdBQUcsa0NBQWtDO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxtQkFBbUI7QUFDcEU7QUFDQTtBQUNBLCtDQUErQyxLQUFLO0FBQ3BEO0FBQ0EsNENBQTRDLE9BQU8sY0FBYyxLQUFLO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwREFBWTtBQUM1QixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQscUJBQXFCO0FBQ2pGO0FBQ0EsdUNBQXVDLFlBQVk7QUFDbkQ7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsMkJBQTJCLFlBQVk7QUFDdkMsaUJBQWlCLElBQUk7QUFDckIsNEJBQTRCO0FBQzVCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDOEM7QUFDOUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvU2VydmVyVGltaW5nLmpzPzBkNGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgcnVuQXNQcm9taXNlIH0gZnJvbSBcIi4vcHJvbWlzZXMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9oZWxwZXJzL1NlcnZlclRpbWluZy50c1xudmFyIFNlcnZlclRpbWluZ19leHBvcnRzID0gLyogQF9fUFVSRV9fICovIF9fZXhwb3J0KHsgU2VydmVyVGltaW5nOiAoKSA9PiBTZXJ2ZXJUaW1pbmcgfSk7XG4vKipcbiogQSBjbGFzcyB0byBtYW5hZ2UgdGltaW5nIGZ1bmN0aW9ucyBhbmQgYXJiaXRyYXJ5IHBlcmlvZHMgb2YgdGltZSBiZWZvcmVcbiogZ2VuZXJhdGluZyBhIGBTZXJ2ZXItVGltaW5nYCBoZWFkZXIgZm9yIHVzZSBpbiBIVFRQIHJlc3BvbnNlcy5cbipcbiogVGhpcyBpcyBhIHZlcnkgc2ltcGxlIGltcGxlbWVudGF0aW9uIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBuZXN0ZWQgdGltaW5ncyBvclxuKiBmcmFjdGlvbnMgb2YgYSBtaWxsaXNlY29uZC5cbiovXG52YXIgU2VydmVyVGltaW5nID0gY2xhc3Mge1xuXHR0aW1pbmdzID0ge307XG5cdC8qKlxuXHQqIFN0YXJ0IGEgdGltaW5nLiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIHdpbGwgc3RvcCB0aGUgdGltaW5nXG5cdCogYW5kIGFkZCBpdCB0byB0aGUgaGVhZGVyLlxuXHQqL1xuXHRzdGFydChuYW1lLCBkZXNjcmlwdGlvbikge1xuXHRcdGlmICghdGhpcy50aW1pbmdzW25hbWVdKSB0aGlzLnRpbWluZ3NbbmFtZV0gPSB7XG5cdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gPz8gXCJcIixcblx0XHRcdHRpbWVyczogW11cblx0XHR9O1xuXHRcdGNvbnN0IGluZGV4ID0gdGhpcy50aW1pbmdzW25hbWVdLnRpbWVycy5wdXNoKHsgc3RhcnQ6IERhdGUubm93KCkgfSkgLSAxO1xuXHRcdHJldHVybiAoKSA9PiB7XG5cdFx0XHRjb25zdCB0YXJnZXQgPSB0aGlzLnRpbWluZ3NbbmFtZV07XG5cdFx0XHRpZiAoIXRhcmdldCkgcmV0dXJuIGNvbnNvbGUud2FybihgVGltaW5nIFwiJHtuYW1lfVwiIGRvZXMgbm90IGV4aXN0YCk7XG5cdFx0XHRjb25zdCB0aW1lciA9IHRhcmdldC50aW1lcnNbaW5kZXhdO1xuXHRcdFx0aWYgKCF0aW1lcikgcmV0dXJuIGNvbnNvbGUud2FybihgVGltZXIgJHtpbmRleH0gZm9yIHRpbWluZyBcIiR7bmFtZX1cIiBkb2VzIG5vdCBleGlzdGApO1xuXHRcdFx0dGltZXIuZW5kID0gRGF0ZS5ub3coKTtcblx0XHR9O1xuXHR9XG5cdC8qKlxuXHQqIEFkZCBhIHBpZWNlIG9mIGFyYml0cmFyeSwgdW50aW1lZCBpbmZvcm1hdGlvbiB0byB0aGUgaGVhZGVyLiBDb21tb24gdXNlXG5cdCogY2FzZXMgd291bGQgYmUgY2FjaGUgbWlzc2VzLlxuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBgYGBcblx0KiB0aW1lci5hcHBlbmQoXCJjYWNoZVwiLCBcIm1pc3NcIik7XG5cdCogYGBgXG5cdCovXG5cdGFwcGVuZChrZXksIHZhbHVlKSB7XG5cdFx0dGhpcy50aW1pbmdzW2tleV0gPSB7XG5cdFx0XHRkZXNjcmlwdGlvbjogdmFsdWUsXG5cdFx0XHR0aW1lcnM6IFtdXG5cdFx0fTtcblx0fVxuXHQvKipcblx0KiBXcmFwIGEgZnVuY3Rpb24gaW4gYSB0aW1pbmcuIFRoZSB0aW1pbmcgd2lsbCBiZSBzdG9wcGVkIGFuZCBhZGRlZCB0byB0aGVcblx0KiBoZWFkZXIgd2hlbiB0aGUgZnVuY3Rpb24gcmVzb2x2ZXMgb3IgcmVqZWN0cy5cblx0KlxuXHQqIFRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIHdpbGwgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGZ1bmN0aW9uLlxuXHQqL1xuXHRhc3luYyB3cmFwKG5hbWUsIGZuLCBkZXNjcmlwdGlvbikge1xuXHRcdGNvbnN0IHN0b3AgPSB0aGlzLnN0YXJ0KG5hbWUsIGRlc2NyaXB0aW9uKTtcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIGF3YWl0IHJ1bkFzUHJvbWlzZShmbik7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHN0b3AoKTtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCogR2VuZXJhdGUgdGhlIGBTZXJ2ZXItVGltaW5nYCBoZWFkZXIuXG5cdCovXG5cdGdldEhlYWRlcigpIHtcblx0XHRyZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy50aW1pbmdzKS5yZWR1Y2UoKGFjYywgW25hbWUsIHsgZGVzY3JpcHRpb24sIHRpbWVycyB9XSkgPT4ge1xuXHRcdFx0aWYgKCF0aW1lcnMuc29tZSgodGltZXIpID0+IHRpbWVyLmVuZCkpIHJldHVybiBhY2M7XG5cdFx0XHRjb25zdCBkdXIgPSB0aW1lcnMucmVkdWNlKChhY2MkMSwgeyBzdGFydCwgZW5kIH0pID0+IHtcblx0XHRcdFx0aWYgKCFzdGFydCB8fCAhZW5kKSByZXR1cm4gYWNjJDE7XG5cdFx0XHRcdHJldHVybiBhY2MkMSArIChlbmQgLSBzdGFydCk7XG5cdFx0XHR9LCAwKTtcblx0XHRcdGNvbnN0IGVudHJ5ID0gW1xuXHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRkZXNjcmlwdGlvbiA/IGBkZXNjPVwiJHtkZXNjcmlwdGlvbn1cImAgOiBcIlwiLFxuXHRcdFx0XHRkdXIgPyBgZHVyPSR7ZHVyfWAgOiBcIlwiXG5cdFx0XHRdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiO1wiKTtcblx0XHRcdHJldHVybiBbLi4uYWNjLCBlbnRyeV07XG5cdFx0fSwgW10pLmpvaW4oXCIsIFwiKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBTZXJ2ZXJUaW1pbmcsIFNlcnZlclRpbWluZ19leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2ZXJUaW1pbmcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/ServerTiming.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/consts.js":
/*!************************************************!*\
  !*** ./node_modules/inngest/helpers/consts.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExecutionVersion: () => (/* binding */ ExecutionVersion),\n/* harmony export */   debugPrefix: () => (/* binding */ debugPrefix),\n/* harmony export */   defaultDevServerHost: () => (/* binding */ defaultDevServerHost),\n/* harmony export */   defaultInngestApiBaseUrl: () => (/* binding */ defaultInngestApiBaseUrl),\n/* harmony export */   defaultInngestEventBaseUrl: () => (/* binding */ defaultInngestEventBaseUrl),\n/* harmony export */   defaultMaxRetries: () => (/* binding */ defaultMaxRetries),\n/* harmony export */   dummyEventKey: () => (/* binding */ dummyEventKey),\n/* harmony export */   envKeys: () => (/* binding */ envKeys),\n/* harmony export */   forwardedHeaders: () => (/* binding */ forwardedHeaders),\n/* harmony export */   headerKeys: () => (/* binding */ headerKeys),\n/* harmony export */   internalEvents: () => (/* binding */ internalEvents),\n/* harmony export */   logPrefix: () => (/* binding */ logPrefix),\n/* harmony export */   probe: () => (/* binding */ probe),\n/* harmony export */   queryKeys: () => (/* binding */ queryKeys),\n/* harmony export */   syncKind: () => (/* binding */ syncKind)\n/* harmony export */ });\n/* harmony import */ var chalk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chalk */ \"(rsc)/./node_modules/chalk/source/index.js\");\n\n\n//#region src/helpers/consts.ts\n/**\n* Keys for accessing query parameters included in requests from Inngest to run\n* functions.\n*\n* Used internally to create handlers using `InngestCommHandler`, but can be\n* imported to be used if creating a custom handler outside of the package.\n*\n* @public\n*/\nlet queryKeys = /* @__PURE__ */ function(queryKeys$1) {\n\tqueryKeys$1[\"DeployId\"] = \"deployId\";\n\tqueryKeys$1[\"FnId\"] = \"fnId\";\n\tqueryKeys$1[\"Probe\"] = \"probe\";\n\tqueryKeys$1[\"StepId\"] = \"stepId\";\n\treturn queryKeys$1;\n}({});\nlet probe = /* @__PURE__ */ function(probe$1) {\n\tprobe$1[\"Trust\"] = \"trust\";\n\treturn probe$1;\n}({});\nlet envKeys = /* @__PURE__ */ function(envKeys$1) {\n\tenvKeys$1[\"InngestSigningKey\"] = \"INNGEST_SIGNING_KEY\";\n\tenvKeys$1[\"InngestSigningKeyFallback\"] = \"INNGEST_SIGNING_KEY_FALLBACK\";\n\tenvKeys$1[\"InngestEventKey\"] = \"INNGEST_EVENT_KEY\";\n\t/**\n\t* @deprecated Removed in v3. Use {@link InngestBaseUrl} instead.\n\t*/\n\tenvKeys$1[\"InngestDevServerUrl\"] = \"INNGEST_DEVSERVER_URL\";\n\tenvKeys$1[\"InngestEnvironment\"] = \"INNGEST_ENV\";\n\tenvKeys$1[\"InngestBaseUrl\"] = \"INNGEST_BASE_URL\";\n\tenvKeys$1[\"InngestEventApiBaseUrl\"] = \"INNGEST_EVENT_API_BASE_URL\";\n\tenvKeys$1[\"InngestApiBaseUrl\"] = \"INNGEST_API_BASE_URL\";\n\tenvKeys$1[\"InngestServeHost\"] = \"INNGEST_SERVE_HOST\";\n\tenvKeys$1[\"InngestServePath\"] = \"INNGEST_SERVE_PATH\";\n\tenvKeys$1[\"InngestLogLevel\"] = \"INNGEST_LOG_LEVEL\";\n\tenvKeys$1[\"InngestStreaming\"] = \"INNGEST_STREAMING\";\n\tenvKeys$1[\"InngestDevMode\"] = \"INNGEST_DEV\";\n\tenvKeys$1[\"InngestAllowInBandSync\"] = \"INNGEST_ALLOW_IN_BAND_SYNC\";\n\tenvKeys$1[\"InngestConnectMaxWorkerConcurrency\"] = \"INNGEST_CONNECT_MAX_WORKER_CONCURRENCY\";\n\t/**\n\t* @deprecated It's unknown what this env var was used for, but we do not\n\t* provide explicit support for it. Prefer using `INNGEST_ENV` instead.\n\t*/\n\tenvKeys$1[\"BranchName\"] = \"BRANCH_NAME\";\n\t/**\n\t* The git branch of the commit the deployment was triggered by. Example:\n\t* `improve-about-page`.\n\t*\n\t* {@link https://vercel.com/docs/concepts/projects/environment-variables/system-environment-variables#system-environment-variables}\n\t*/\n\tenvKeys$1[\"VercelBranch\"] = \"VERCEL_GIT_COMMIT_REF\";\n\t/**\n\t* Expected to be `\"1\"` if defined.\n\t*/\n\tenvKeys$1[\"IsVercel\"] = \"VERCEL\";\n\t/**\n\t* The branch name of the current deployment. May only be accessible at build\n\t* time, but included here just in case.\n\t*\n\t* {@link https://developers.cloudflare.com/pages/platform/build-configuration/#environment-variables}\n\t*/\n\tenvKeys$1[\"CloudflarePagesBranch\"] = \"CF_PAGES_BRANCH\";\n\t/**\n\t* Expected to be `\"1\"` if defined.\n\t*/\n\tenvKeys$1[\"IsCloudflarePages\"] = \"CF_PAGES\";\n\t/**\n\t* The branch name of the deployment from Git to Netlify, if available.\n\t*\n\t* {@link https://docs.netlify.com/configure-builds/environment-variables/#git-metadata}\n\t*/\n\tenvKeys$1[\"NetlifyBranch\"] = \"BRANCH\";\n\t/**\n\t* Expected to be `\"true\"` if defined.\n\t*/\n\tenvKeys$1[\"IsNetlify\"] = \"NETLIFY\";\n\t/**\n\t* The Git branch for a service or deploy.\n\t*\n\t* {@link https://render.com/docs/environment-variables#all-services}\n\t*/\n\tenvKeys$1[\"RenderBranch\"] = \"RENDER_GIT_BRANCH\";\n\t/**\n\t* Expected to be `\"true\"` if defined.\n\t*/\n\tenvKeys$1[\"IsRender\"] = \"RENDER\";\n\t/**\n\t* The branch that triggered the deployment. Example: `main`\n\t*\n\t* {@link https://docs.railway.app/develop/variables#railway-provided-variables}\n\t*/\n\tenvKeys$1[\"RailwayBranch\"] = \"RAILWAY_GIT_BRANCH\";\n\t/**\n\t* The railway environment for the deployment. Example: `production`\n\t*\n\t* {@link https://docs.railway.app/develop/variables#railway-provided-variables}\n\t*/\n\tenvKeys$1[\"RailwayEnvironment\"] = \"RAILWAY_ENVIRONMENT\";\n\tenvKeys$1[\"VercelEnvKey\"] = \"VERCEL_ENV\";\n\tenvKeys$1[\"OpenAiApiKey\"] = \"OPENAI_API_KEY\";\n\tenvKeys$1[\"GeminiApiKey\"] = \"GEMINI_API_KEY\";\n\tenvKeys$1[\"AnthropicApiKey\"] = \"ANTHROPIC_API_KEY\";\n\treturn envKeys$1;\n}({});\n/**\n* Keys for accessing headers included in requests from Inngest to run\n* functions.\n*\n* Used internally to create handlers using `InngestCommHandler`, but can be\n* imported to be used if creating a custom handler outside of the package.\n*\n* @public\n*/\nlet headerKeys = /* @__PURE__ */ function(headerKeys$1) {\n\theaderKeys$1[\"ContentType\"] = \"content-type\";\n\theaderKeys$1[\"Host\"] = \"host\";\n\theaderKeys$1[\"ForwardedFor\"] = \"x-forwarded-for\";\n\theaderKeys$1[\"RealIp\"] = \"x-real-ip\";\n\theaderKeys$1[\"Location\"] = \"location\";\n\theaderKeys$1[\"ContentLength\"] = \"content-length\";\n\theaderKeys$1[\"Signature\"] = \"x-inngest-signature\";\n\theaderKeys$1[\"SdkVersion\"] = \"x-inngest-sdk\";\n\theaderKeys$1[\"Environment\"] = \"x-inngest-env\";\n\theaderKeys$1[\"Platform\"] = \"x-inngest-platform\";\n\theaderKeys$1[\"Framework\"] = \"x-inngest-framework\";\n\theaderKeys$1[\"NoRetry\"] = \"x-inngest-no-retry\";\n\theaderKeys$1[\"RequestVersion\"] = \"x-inngest-req-version\";\n\theaderKeys$1[\"RetryAfter\"] = \"retry-after\";\n\theaderKeys$1[\"InngestServerKind\"] = \"x-inngest-server-kind\";\n\theaderKeys$1[\"InngestExpectedServerKind\"] = \"x-inngest-expected-server-kind\";\n\theaderKeys$1[\"InngestSyncKind\"] = \"x-inngest-sync-kind\";\n\theaderKeys$1[\"EventIdSeed\"] = \"x-inngest-event-id-seed\";\n\theaderKeys$1[\"TraceParent\"] = \"traceparent\";\n\theaderKeys$1[\"TraceState\"] = \"tracestate\";\n\theaderKeys$1[\"InngestRunId\"] = \"x-run-id\";\n\treturn headerKeys$1;\n}({});\n/**\n* Headers that are forwarded from the original request when an Inngest function\n* is invoked.\n*/\nconst forwardedHeaders = [headerKeys.TraceParent, headerKeys.TraceState];\nconst defaultInngestApiBaseUrl = \"https://api.inngest.com/\";\nconst defaultInngestEventBaseUrl = \"https://inn.gs/\";\nconst defaultDevServerHost = \"http://localhost:8288/\";\n/**\n* Events that Inngest may send internally that can be used to trigger\n* functions.\n*\n* @public\n*/\nlet internalEvents = /* @__PURE__ */ function(internalEvents$1) {\n\t/**\n\t* A function has failed after exhausting all available retries. This event\n\t* will contain the original event and the error that caused the failure.\n\t*/\n\tinternalEvents$1[\"FunctionFailed\"] = \"inngest/function.failed\";\n\tinternalEvents$1[\"FunctionInvoked\"] = \"inngest/function.invoked\";\n\tinternalEvents$1[\"FunctionFinished\"] = \"inngest/function.finished\";\n\tinternalEvents$1[\"FunctionCancelled\"] = \"inngest/function.cancelled\";\n\tinternalEvents$1[\"ScheduledTimer\"] = \"inngest/scheduled.timer\";\n\treturn internalEvents$1;\n}({});\nconst logPrefix = chalk__WEBPACK_IMPORTED_MODULE_0__.magenta.bold(\"[Inngest]\");\nconst debugPrefix = \"inngest\";\nconst dummyEventKey = \"NO_EVENT_KEY_SET\";\nlet syncKind = /* @__PURE__ */ function(syncKind$1) {\n\tsyncKind$1[\"InBand\"] = \"in_band\";\n\tsyncKind$1[\"OutOfBand\"] = \"out_of_band\";\n\treturn syncKind$1;\n}({});\n/**\n* The execution models the SDK is aware of.\n*\n* This is used in a number of places to ensure all execution versions are\n* accounted for for a given operation.\n*/\nlet ExecutionVersion = /* @__PURE__ */ function(ExecutionVersion$1) {\n\t/**\n\t* Very legacy, initial version of the executor. Uses hashed op objects and\n\t* `pos` to determine the order of execution and which ops to run.\n\t*\n\t* Very stubborn about determinism.\n\t*/\n\tExecutionVersion$1[ExecutionVersion$1[\"V0\"] = 0] = \"V0\";\n\t/**\n\t* Uses a more flexible approach to execution and is more lenient about\n\t* determinism, allowing non-step async actions and non-determinism.\n\t*\n\t* Nowhere near as stubborn about determinism and so can silently migrate\n\t* between versions after bug fixes.\n\t*/\n\tExecutionVersion$1[ExecutionVersion$1[\"V1\"] = 1] = \"V1\";\n\t/**\n\t* Identical to V1, but allows the Executor to optimize parallel calls, hugely\n\t* reducing traffic going to/from the SDK.\n\t*/\n\tExecutionVersion$1[ExecutionVersion$1[\"V2\"] = 2] = \"V2\";\n\treturn ExecutionVersion$1;\n}({});\n/**\n* Default maximum number of retries for function/step executions.\n*/\nconst defaultMaxRetries = 3;\n\n//#endregion\n\n//# sourceMappingURL=consts.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2NvbnN0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBCOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0JBQXNCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSixrQkFBa0IsMENBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxUDtBQUNyUCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvaGVscGVycy9jb25zdHMuanM/ZmU3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hhbGsgZnJvbSBcImNoYWxrXCI7XG5cbi8vI3JlZ2lvbiBzcmMvaGVscGVycy9jb25zdHMudHNcbi8qKlxuKiBLZXlzIGZvciBhY2Nlc3NpbmcgcXVlcnkgcGFyYW1ldGVycyBpbmNsdWRlZCBpbiByZXF1ZXN0cyBmcm9tIElubmdlc3QgdG8gcnVuXG4qIGZ1bmN0aW9ucy5cbipcbiogVXNlZCBpbnRlcm5hbGx5IHRvIGNyZWF0ZSBoYW5kbGVycyB1c2luZyBgSW5uZ2VzdENvbW1IYW5kbGVyYCwgYnV0IGNhbiBiZVxuKiBpbXBvcnRlZCB0byBiZSB1c2VkIGlmIGNyZWF0aW5nIGEgY3VzdG9tIGhhbmRsZXIgb3V0c2lkZSBvZiB0aGUgcGFja2FnZS5cbipcbiogQHB1YmxpY1xuKi9cbmxldCBxdWVyeUtleXMgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24ocXVlcnlLZXlzJDEpIHtcblx0cXVlcnlLZXlzJDFbXCJEZXBsb3lJZFwiXSA9IFwiZGVwbG95SWRcIjtcblx0cXVlcnlLZXlzJDFbXCJGbklkXCJdID0gXCJmbklkXCI7XG5cdHF1ZXJ5S2V5cyQxW1wiUHJvYmVcIl0gPSBcInByb2JlXCI7XG5cdHF1ZXJ5S2V5cyQxW1wiU3RlcElkXCJdID0gXCJzdGVwSWRcIjtcblx0cmV0dXJuIHF1ZXJ5S2V5cyQxO1xufSh7fSk7XG5sZXQgcHJvYmUgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24ocHJvYmUkMSkge1xuXHRwcm9iZSQxW1wiVHJ1c3RcIl0gPSBcInRydXN0XCI7XG5cdHJldHVybiBwcm9iZSQxO1xufSh7fSk7XG5sZXQgZW52S2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihlbnZLZXlzJDEpIHtcblx0ZW52S2V5cyQxW1wiSW5uZ2VzdFNpZ25pbmdLZXlcIl0gPSBcIklOTkdFU1RfU0lHTklOR19LRVlcIjtcblx0ZW52S2V5cyQxW1wiSW5uZ2VzdFNpZ25pbmdLZXlGYWxsYmFja1wiXSA9IFwiSU5OR0VTVF9TSUdOSU5HX0tFWV9GQUxMQkFDS1wiO1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0RXZlbnRLZXlcIl0gPSBcIklOTkdFU1RfRVZFTlRfS0VZXCI7XG5cdC8qKlxuXHQqIEBkZXByZWNhdGVkIFJlbW92ZWQgaW4gdjMuIFVzZSB7QGxpbmsgSW5uZ2VzdEJhc2VVcmx9IGluc3RlYWQuXG5cdCovXG5cdGVudktleXMkMVtcIklubmdlc3REZXZTZXJ2ZXJVcmxcIl0gPSBcIklOTkdFU1RfREVWU0VSVkVSX1VSTFwiO1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0RW52aXJvbm1lbnRcIl0gPSBcIklOTkdFU1RfRU5WXCI7XG5cdGVudktleXMkMVtcIklubmdlc3RCYXNlVXJsXCJdID0gXCJJTk5HRVNUX0JBU0VfVVJMXCI7XG5cdGVudktleXMkMVtcIklubmdlc3RFdmVudEFwaUJhc2VVcmxcIl0gPSBcIklOTkdFU1RfRVZFTlRfQVBJX0JBU0VfVVJMXCI7XG5cdGVudktleXMkMVtcIklubmdlc3RBcGlCYXNlVXJsXCJdID0gXCJJTk5HRVNUX0FQSV9CQVNFX1VSTFwiO1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0U2VydmVIb3N0XCJdID0gXCJJTk5HRVNUX1NFUlZFX0hPU1RcIjtcblx0ZW52S2V5cyQxW1wiSW5uZ2VzdFNlcnZlUGF0aFwiXSA9IFwiSU5OR0VTVF9TRVJWRV9QQVRIXCI7XG5cdGVudktleXMkMVtcIklubmdlc3RMb2dMZXZlbFwiXSA9IFwiSU5OR0VTVF9MT0dfTEVWRUxcIjtcblx0ZW52S2V5cyQxW1wiSW5uZ2VzdFN0cmVhbWluZ1wiXSA9IFwiSU5OR0VTVF9TVFJFQU1JTkdcIjtcblx0ZW52S2V5cyQxW1wiSW5uZ2VzdERldk1vZGVcIl0gPSBcIklOTkdFU1RfREVWXCI7XG5cdGVudktleXMkMVtcIklubmdlc3RBbGxvd0luQmFuZFN5bmNcIl0gPSBcIklOTkdFU1RfQUxMT1dfSU5fQkFORF9TWU5DXCI7XG5cdGVudktleXMkMVtcIklubmdlc3RDb25uZWN0TWF4V29ya2VyQ29uY3VycmVuY3lcIl0gPSBcIklOTkdFU1RfQ09OTkVDVF9NQVhfV09SS0VSX0NPTkNVUlJFTkNZXCI7XG5cdC8qKlxuXHQqIEBkZXByZWNhdGVkIEl0J3MgdW5rbm93biB3aGF0IHRoaXMgZW52IHZhciB3YXMgdXNlZCBmb3IsIGJ1dCB3ZSBkbyBub3Rcblx0KiBwcm92aWRlIGV4cGxpY2l0IHN1cHBvcnQgZm9yIGl0LiBQcmVmZXIgdXNpbmcgYElOTkdFU1RfRU5WYCBpbnN0ZWFkLlxuXHQqL1xuXHRlbnZLZXlzJDFbXCJCcmFuY2hOYW1lXCJdID0gXCJCUkFOQ0hfTkFNRVwiO1xuXHQvKipcblx0KiBUaGUgZ2l0IGJyYW5jaCBvZiB0aGUgY29tbWl0IHRoZSBkZXBsb3ltZW50IHdhcyB0cmlnZ2VyZWQgYnkuIEV4YW1wbGU6XG5cdCogYGltcHJvdmUtYWJvdXQtcGFnZWAuXG5cdCpcblx0KiB7QGxpbmsgaHR0cHM6Ly92ZXJjZWwuY29tL2RvY3MvY29uY2VwdHMvcHJvamVjdHMvZW52aXJvbm1lbnQtdmFyaWFibGVzL3N5c3RlbS1lbnZpcm9ubWVudC12YXJpYWJsZXMjc3lzdGVtLWVudmlyb25tZW50LXZhcmlhYmxlc31cblx0Ki9cblx0ZW52S2V5cyQxW1wiVmVyY2VsQnJhbmNoXCJdID0gXCJWRVJDRUxfR0lUX0NPTU1JVF9SRUZcIjtcblx0LyoqXG5cdCogRXhwZWN0ZWQgdG8gYmUgYFwiMVwiYCBpZiBkZWZpbmVkLlxuXHQqL1xuXHRlbnZLZXlzJDFbXCJJc1ZlcmNlbFwiXSA9IFwiVkVSQ0VMXCI7XG5cdC8qKlxuXHQqIFRoZSBicmFuY2ggbmFtZSBvZiB0aGUgY3VycmVudCBkZXBsb3ltZW50LiBNYXkgb25seSBiZSBhY2Nlc3NpYmxlIGF0IGJ1aWxkXG5cdCogdGltZSwgYnV0IGluY2x1ZGVkIGhlcmUganVzdCBpbiBjYXNlLlxuXHQqXG5cdCoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVycy5jbG91ZGZsYXJlLmNvbS9wYWdlcy9wbGF0Zm9ybS9idWlsZC1jb25maWd1cmF0aW9uLyNlbnZpcm9ubWVudC12YXJpYWJsZXN9XG5cdCovXG5cdGVudktleXMkMVtcIkNsb3VkZmxhcmVQYWdlc0JyYW5jaFwiXSA9IFwiQ0ZfUEFHRVNfQlJBTkNIXCI7XG5cdC8qKlxuXHQqIEV4cGVjdGVkIHRvIGJlIGBcIjFcImAgaWYgZGVmaW5lZC5cblx0Ki9cblx0ZW52S2V5cyQxW1wiSXNDbG91ZGZsYXJlUGFnZXNcIl0gPSBcIkNGX1BBR0VTXCI7XG5cdC8qKlxuXHQqIFRoZSBicmFuY2ggbmFtZSBvZiB0aGUgZGVwbG95bWVudCBmcm9tIEdpdCB0byBOZXRsaWZ5LCBpZiBhdmFpbGFibGUuXG5cdCpcblx0KiB7QGxpbmsgaHR0cHM6Ly9kb2NzLm5ldGxpZnkuY29tL2NvbmZpZ3VyZS1idWlsZHMvZW52aXJvbm1lbnQtdmFyaWFibGVzLyNnaXQtbWV0YWRhdGF9XG5cdCovXG5cdGVudktleXMkMVtcIk5ldGxpZnlCcmFuY2hcIl0gPSBcIkJSQU5DSFwiO1xuXHQvKipcblx0KiBFeHBlY3RlZCB0byBiZSBgXCJ0cnVlXCJgIGlmIGRlZmluZWQuXG5cdCovXG5cdGVudktleXMkMVtcIklzTmV0bGlmeVwiXSA9IFwiTkVUTElGWVwiO1xuXHQvKipcblx0KiBUaGUgR2l0IGJyYW5jaCBmb3IgYSBzZXJ2aWNlIG9yIGRlcGxveS5cblx0KlxuXHQqIHtAbGluayBodHRwczovL3JlbmRlci5jb20vZG9jcy9lbnZpcm9ubWVudC12YXJpYWJsZXMjYWxsLXNlcnZpY2VzfVxuXHQqL1xuXHRlbnZLZXlzJDFbXCJSZW5kZXJCcmFuY2hcIl0gPSBcIlJFTkRFUl9HSVRfQlJBTkNIXCI7XG5cdC8qKlxuXHQqIEV4cGVjdGVkIHRvIGJlIGBcInRydWVcImAgaWYgZGVmaW5lZC5cblx0Ki9cblx0ZW52S2V5cyQxW1wiSXNSZW5kZXJcIl0gPSBcIlJFTkRFUlwiO1xuXHQvKipcblx0KiBUaGUgYnJhbmNoIHRoYXQgdHJpZ2dlcmVkIHRoZSBkZXBsb3ltZW50LiBFeGFtcGxlOiBgbWFpbmBcblx0KlxuXHQqIHtAbGluayBodHRwczovL2RvY3MucmFpbHdheS5hcHAvZGV2ZWxvcC92YXJpYWJsZXMjcmFpbHdheS1wcm92aWRlZC12YXJpYWJsZXN9XG5cdCovXG5cdGVudktleXMkMVtcIlJhaWx3YXlCcmFuY2hcIl0gPSBcIlJBSUxXQVlfR0lUX0JSQU5DSFwiO1xuXHQvKipcblx0KiBUaGUgcmFpbHdheSBlbnZpcm9ubWVudCBmb3IgdGhlIGRlcGxveW1lbnQuIEV4YW1wbGU6IGBwcm9kdWN0aW9uYFxuXHQqXG5cdCoge0BsaW5rIGh0dHBzOi8vZG9jcy5yYWlsd2F5LmFwcC9kZXZlbG9wL3ZhcmlhYmxlcyNyYWlsd2F5LXByb3ZpZGVkLXZhcmlhYmxlc31cblx0Ki9cblx0ZW52S2V5cyQxW1wiUmFpbHdheUVudmlyb25tZW50XCJdID0gXCJSQUlMV0FZX0VOVklST05NRU5UXCI7XG5cdGVudktleXMkMVtcIlZlcmNlbEVudktleVwiXSA9IFwiVkVSQ0VMX0VOVlwiO1xuXHRlbnZLZXlzJDFbXCJPcGVuQWlBcGlLZXlcIl0gPSBcIk9QRU5BSV9BUElfS0VZXCI7XG5cdGVudktleXMkMVtcIkdlbWluaUFwaUtleVwiXSA9IFwiR0VNSU5JX0FQSV9LRVlcIjtcblx0ZW52S2V5cyQxW1wiQW50aHJvcGljQXBpS2V5XCJdID0gXCJBTlRIUk9QSUNfQVBJX0tFWVwiO1xuXHRyZXR1cm4gZW52S2V5cyQxO1xufSh7fSk7XG4vKipcbiogS2V5cyBmb3IgYWNjZXNzaW5nIGhlYWRlcnMgaW5jbHVkZWQgaW4gcmVxdWVzdHMgZnJvbSBJbm5nZXN0IHRvIHJ1blxuKiBmdW5jdGlvbnMuXG4qXG4qIFVzZWQgaW50ZXJuYWxseSB0byBjcmVhdGUgaGFuZGxlcnMgdXNpbmcgYElubmdlc3RDb21tSGFuZGxlcmAsIGJ1dCBjYW4gYmVcbiogaW1wb3J0ZWQgdG8gYmUgdXNlZCBpZiBjcmVhdGluZyBhIGN1c3RvbSBoYW5kbGVyIG91dHNpZGUgb2YgdGhlIHBhY2thZ2UuXG4qXG4qIEBwdWJsaWNcbiovXG5sZXQgaGVhZGVyS2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihoZWFkZXJLZXlzJDEpIHtcblx0aGVhZGVyS2V5cyQxW1wiQ29udGVudFR5cGVcIl0gPSBcImNvbnRlbnQtdHlwZVwiO1xuXHRoZWFkZXJLZXlzJDFbXCJIb3N0XCJdID0gXCJob3N0XCI7XG5cdGhlYWRlcktleXMkMVtcIkZvcndhcmRlZEZvclwiXSA9IFwieC1mb3J3YXJkZWQtZm9yXCI7XG5cdGhlYWRlcktleXMkMVtcIlJlYWxJcFwiXSA9IFwieC1yZWFsLWlwXCI7XG5cdGhlYWRlcktleXMkMVtcIkxvY2F0aW9uXCJdID0gXCJsb2NhdGlvblwiO1xuXHRoZWFkZXJLZXlzJDFbXCJDb250ZW50TGVuZ3RoXCJdID0gXCJjb250ZW50LWxlbmd0aFwiO1xuXHRoZWFkZXJLZXlzJDFbXCJTaWduYXR1cmVcIl0gPSBcIngtaW5uZ2VzdC1zaWduYXR1cmVcIjtcblx0aGVhZGVyS2V5cyQxW1wiU2RrVmVyc2lvblwiXSA9IFwieC1pbm5nZXN0LXNka1wiO1xuXHRoZWFkZXJLZXlzJDFbXCJFbnZpcm9ubWVudFwiXSA9IFwieC1pbm5nZXN0LWVudlwiO1xuXHRoZWFkZXJLZXlzJDFbXCJQbGF0Zm9ybVwiXSA9IFwieC1pbm5nZXN0LXBsYXRmb3JtXCI7XG5cdGhlYWRlcktleXMkMVtcIkZyYW1ld29ya1wiXSA9IFwieC1pbm5nZXN0LWZyYW1ld29ya1wiO1xuXHRoZWFkZXJLZXlzJDFbXCJOb1JldHJ5XCJdID0gXCJ4LWlubmdlc3Qtbm8tcmV0cnlcIjtcblx0aGVhZGVyS2V5cyQxW1wiUmVxdWVzdFZlcnNpb25cIl0gPSBcIngtaW5uZ2VzdC1yZXEtdmVyc2lvblwiO1xuXHRoZWFkZXJLZXlzJDFbXCJSZXRyeUFmdGVyXCJdID0gXCJyZXRyeS1hZnRlclwiO1xuXHRoZWFkZXJLZXlzJDFbXCJJbm5nZXN0U2VydmVyS2luZFwiXSA9IFwieC1pbm5nZXN0LXNlcnZlci1raW5kXCI7XG5cdGhlYWRlcktleXMkMVtcIklubmdlc3RFeHBlY3RlZFNlcnZlcktpbmRcIl0gPSBcIngtaW5uZ2VzdC1leHBlY3RlZC1zZXJ2ZXIta2luZFwiO1xuXHRoZWFkZXJLZXlzJDFbXCJJbm5nZXN0U3luY0tpbmRcIl0gPSBcIngtaW5uZ2VzdC1zeW5jLWtpbmRcIjtcblx0aGVhZGVyS2V5cyQxW1wiRXZlbnRJZFNlZWRcIl0gPSBcIngtaW5uZ2VzdC1ldmVudC1pZC1zZWVkXCI7XG5cdGhlYWRlcktleXMkMVtcIlRyYWNlUGFyZW50XCJdID0gXCJ0cmFjZXBhcmVudFwiO1xuXHRoZWFkZXJLZXlzJDFbXCJUcmFjZVN0YXRlXCJdID0gXCJ0cmFjZXN0YXRlXCI7XG5cdGhlYWRlcktleXMkMVtcIklubmdlc3RSdW5JZFwiXSA9IFwieC1ydW4taWRcIjtcblx0cmV0dXJuIGhlYWRlcktleXMkMTtcbn0oe30pO1xuLyoqXG4qIEhlYWRlcnMgdGhhdCBhcmUgZm9yd2FyZGVkIGZyb20gdGhlIG9yaWdpbmFsIHJlcXVlc3Qgd2hlbiBhbiBJbm5nZXN0IGZ1bmN0aW9uXG4qIGlzIGludm9rZWQuXG4qL1xuY29uc3QgZm9yd2FyZGVkSGVhZGVycyA9IFtoZWFkZXJLZXlzLlRyYWNlUGFyZW50LCBoZWFkZXJLZXlzLlRyYWNlU3RhdGVdO1xuY29uc3QgZGVmYXVsdElubmdlc3RBcGlCYXNlVXJsID0gXCJodHRwczovL2FwaS5pbm5nZXN0LmNvbS9cIjtcbmNvbnN0IGRlZmF1bHRJbm5nZXN0RXZlbnRCYXNlVXJsID0gXCJodHRwczovL2lubi5ncy9cIjtcbmNvbnN0IGRlZmF1bHREZXZTZXJ2ZXJIb3N0ID0gXCJodHRwOi8vbG9jYWxob3N0OjgyODgvXCI7XG4vKipcbiogRXZlbnRzIHRoYXQgSW5uZ2VzdCBtYXkgc2VuZCBpbnRlcm5hbGx5IHRoYXQgY2FuIGJlIHVzZWQgdG8gdHJpZ2dlclxuKiBmdW5jdGlvbnMuXG4qXG4qIEBwdWJsaWNcbiovXG5sZXQgaW50ZXJuYWxFdmVudHMgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oaW50ZXJuYWxFdmVudHMkMSkge1xuXHQvKipcblx0KiBBIGZ1bmN0aW9uIGhhcyBmYWlsZWQgYWZ0ZXIgZXhoYXVzdGluZyBhbGwgYXZhaWxhYmxlIHJldHJpZXMuIFRoaXMgZXZlbnRcblx0KiB3aWxsIGNvbnRhaW4gdGhlIG9yaWdpbmFsIGV2ZW50IGFuZCB0aGUgZXJyb3IgdGhhdCBjYXVzZWQgdGhlIGZhaWx1cmUuXG5cdCovXG5cdGludGVybmFsRXZlbnRzJDFbXCJGdW5jdGlvbkZhaWxlZFwiXSA9IFwiaW5uZ2VzdC9mdW5jdGlvbi5mYWlsZWRcIjtcblx0aW50ZXJuYWxFdmVudHMkMVtcIkZ1bmN0aW9uSW52b2tlZFwiXSA9IFwiaW5uZ2VzdC9mdW5jdGlvbi5pbnZva2VkXCI7XG5cdGludGVybmFsRXZlbnRzJDFbXCJGdW5jdGlvbkZpbmlzaGVkXCJdID0gXCJpbm5nZXN0L2Z1bmN0aW9uLmZpbmlzaGVkXCI7XG5cdGludGVybmFsRXZlbnRzJDFbXCJGdW5jdGlvbkNhbmNlbGxlZFwiXSA9IFwiaW5uZ2VzdC9mdW5jdGlvbi5jYW5jZWxsZWRcIjtcblx0aW50ZXJuYWxFdmVudHMkMVtcIlNjaGVkdWxlZFRpbWVyXCJdID0gXCJpbm5nZXN0L3NjaGVkdWxlZC50aW1lclwiO1xuXHRyZXR1cm4gaW50ZXJuYWxFdmVudHMkMTtcbn0oe30pO1xuY29uc3QgbG9nUHJlZml4ID0gY2hhbGsubWFnZW50YS5ib2xkKFwiW0lubmdlc3RdXCIpO1xuY29uc3QgZGVidWdQcmVmaXggPSBcImlubmdlc3RcIjtcbmNvbnN0IGR1bW15RXZlbnRLZXkgPSBcIk5PX0VWRU5UX0tFWV9TRVRcIjtcbmxldCBzeW5jS2luZCA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihzeW5jS2luZCQxKSB7XG5cdHN5bmNLaW5kJDFbXCJJbkJhbmRcIl0gPSBcImluX2JhbmRcIjtcblx0c3luY0tpbmQkMVtcIk91dE9mQmFuZFwiXSA9IFwib3V0X29mX2JhbmRcIjtcblx0cmV0dXJuIHN5bmNLaW5kJDE7XG59KHt9KTtcbi8qKlxuKiBUaGUgZXhlY3V0aW9uIG1vZGVscyB0aGUgU0RLIGlzIGF3YXJlIG9mLlxuKlxuKiBUaGlzIGlzIHVzZWQgaW4gYSBudW1iZXIgb2YgcGxhY2VzIHRvIGVuc3VyZSBhbGwgZXhlY3V0aW9uIHZlcnNpb25zIGFyZVxuKiBhY2NvdW50ZWQgZm9yIGZvciBhIGdpdmVuIG9wZXJhdGlvbi5cbiovXG5sZXQgRXhlY3V0aW9uVmVyc2lvbiA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihFeGVjdXRpb25WZXJzaW9uJDEpIHtcblx0LyoqXG5cdCogVmVyeSBsZWdhY3ksIGluaXRpYWwgdmVyc2lvbiBvZiB0aGUgZXhlY3V0b3IuIFVzZXMgaGFzaGVkIG9wIG9iamVjdHMgYW5kXG5cdCogYHBvc2AgdG8gZGV0ZXJtaW5lIHRoZSBvcmRlciBvZiBleGVjdXRpb24gYW5kIHdoaWNoIG9wcyB0byBydW4uXG5cdCpcblx0KiBWZXJ5IHN0dWJib3JuIGFib3V0IGRldGVybWluaXNtLlxuXHQqL1xuXHRFeGVjdXRpb25WZXJzaW9uJDFbRXhlY3V0aW9uVmVyc2lvbiQxW1wiVjBcIl0gPSAwXSA9IFwiVjBcIjtcblx0LyoqXG5cdCogVXNlcyBhIG1vcmUgZmxleGlibGUgYXBwcm9hY2ggdG8gZXhlY3V0aW9uIGFuZCBpcyBtb3JlIGxlbmllbnQgYWJvdXRcblx0KiBkZXRlcm1pbmlzbSwgYWxsb3dpbmcgbm9uLXN0ZXAgYXN5bmMgYWN0aW9ucyBhbmQgbm9uLWRldGVybWluaXNtLlxuXHQqXG5cdCogTm93aGVyZSBuZWFyIGFzIHN0dWJib3JuIGFib3V0IGRldGVybWluaXNtIGFuZCBzbyBjYW4gc2lsZW50bHkgbWlncmF0ZVxuXHQqIGJldHdlZW4gdmVyc2lvbnMgYWZ0ZXIgYnVnIGZpeGVzLlxuXHQqL1xuXHRFeGVjdXRpb25WZXJzaW9uJDFbRXhlY3V0aW9uVmVyc2lvbiQxW1wiVjFcIl0gPSAxXSA9IFwiVjFcIjtcblx0LyoqXG5cdCogSWRlbnRpY2FsIHRvIFYxLCBidXQgYWxsb3dzIHRoZSBFeGVjdXRvciB0byBvcHRpbWl6ZSBwYXJhbGxlbCBjYWxscywgaHVnZWx5XG5cdCogcmVkdWNpbmcgdHJhZmZpYyBnb2luZyB0by9mcm9tIHRoZSBTREsuXG5cdCovXG5cdEV4ZWN1dGlvblZlcnNpb24kMVtFeGVjdXRpb25WZXJzaW9uJDFbXCJWMlwiXSA9IDJdID0gXCJWMlwiO1xuXHRyZXR1cm4gRXhlY3V0aW9uVmVyc2lvbiQxO1xufSh7fSk7XG4vKipcbiogRGVmYXVsdCBtYXhpbXVtIG51bWJlciBvZiByZXRyaWVzIGZvciBmdW5jdGlvbi9zdGVwIGV4ZWN1dGlvbnMuXG4qL1xuY29uc3QgZGVmYXVsdE1heFJldHJpZXMgPSAzO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEV4ZWN1dGlvblZlcnNpb24sIGRlYnVnUHJlZml4LCBkZWZhdWx0RGV2U2VydmVySG9zdCwgZGVmYXVsdElubmdlc3RBcGlCYXNlVXJsLCBkZWZhdWx0SW5uZ2VzdEV2ZW50QmFzZVVybCwgZGVmYXVsdE1heFJldHJpZXMsIGR1bW15RXZlbnRLZXksIGVudktleXMsIGZvcndhcmRlZEhlYWRlcnMsIGhlYWRlcktleXMsIGludGVybmFsRXZlbnRzLCBsb2dQcmVmaXgsIHByb2JlLCBxdWVyeUtleXMsIHN5bmNLaW5kIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/consts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/crypto.js":
/*!************************************************!*\
  !*** ./node_modules/inngest/helpers/crypto.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEntropy: () => (/* binding */ createEntropy)\n/* harmony export */ });\n//#region src/helpers/crypto.ts\n/**\n* Create a cryptographically secure random value.\n*\n* @throws {Error} If the crypto module is not available.\n*/\nfunction createEntropy(byteLength) {\n\tconst bytes = new Uint8Array(byteLength);\n\tconst { crypto } = globalThis;\n\tif (!crypto) throw new Error(\"missing crypto module\");\n\tif (!crypto.getRandomValues) throw new Error(\"missing crypto.getRandomValues\");\n\tcrypto.getRandomValues(bytes);\n\treturn bytes;\n}\n\n//#endregion\n\n//# sourceMappingURL=crypto.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2NyeXB0by5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0EsU0FBUyxTQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvY3J5cHRvLmpzPzMwZTAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9oZWxwZXJzL2NyeXB0by50c1xuLyoqXG4qIENyZWF0ZSBhIGNyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZSByYW5kb20gdmFsdWUuXG4qXG4qIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgY3J5cHRvIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlLlxuKi9cbmZ1bmN0aW9uIGNyZWF0ZUVudHJvcHkoYnl0ZUxlbmd0aCkge1xuXHRjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ5dGVMZW5ndGgpO1xuXHRjb25zdCB7IGNyeXB0byB9ID0gZ2xvYmFsVGhpcztcblx0aWYgKCFjcnlwdG8pIHRocm93IG5ldyBFcnJvcihcIm1pc3NpbmcgY3J5cHRvIG1vZHVsZVwiKTtcblx0aWYgKCFjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIGNyeXB0by5nZXRSYW5kb21WYWx1ZXNcIik7XG5cdGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYnl0ZXMpO1xuXHRyZXR1cm4gYnl0ZXM7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlRW50cm9weSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3J5cHRvLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/crypto.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/devserver.js":
/*!***************************************************!*\
  !*** ./node_modules/inngest/helpers/devserver.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   devServerAvailable: () => (/* binding */ devServerAvailable),\n/* harmony export */   devServerUrl: () => (/* binding */ devServerUrl)\n/* harmony export */ });\n/* harmony import */ var _consts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./env.js */ \"(rsc)/./node_modules/inngest/helpers/env.js\");\n\n\n\n//#region src/helpers/devserver.ts\n/**\n* Attempts to contact the dev server, returning a boolean indicating whether or\n* not it was successful.\n*\n* @example devServerUrl(process.env[envKeys.DevServerUrl], \"/your-path\")\n*/\nconst devServerAvailable = async (host = _consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost, fetch) => {\n\ttry {\n\t\tawait (await fetch(devServerUrl(host, \"/dev\").toString())).json();\n\t\treturn true;\n\t} catch (_e) {\n\t\treturn false;\n\t}\n};\n/**\n* devServerUrl returns a full URL for the given path name.\n*\n* Because Cloudflare/V8 platforms don't allow process.env, you are expected\n* to pass in the host from the dev server env key:\n*\n* @example devServerUrl(processEnv(envKeys.DevServerUrl), \"/your-path\")\n* @example devServerUrl(\"http://localhost:8288/\", \"/your-path\")\n*/\nconst devServerUrl = (host = devServerHost$1(), pathname = \"\") => {\n\treturn new URL(pathname, host.includes(\"://\") ? host : `http://${host}`);\n};\n/**\n* devServerHost exports the development server's domain by inspecting env\n* variables, or returns the default development server URL.\n*\n* This guarantees a specific URL as a string, as opposed to the env export\n* which only returns a value of the env var is set.\n*/\nconst devServerHost$1 = () => (0,_env_js__WEBPACK_IMPORTED_MODULE_1__.devServerHost)() || _consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost;\n\n//#endregion\n\n//# sourceMappingURL=devserver.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2RldnNlcnZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW1EO0FBQ1Y7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDREQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsS0FBSztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNEQUFhLE1BQU0sNERBQW9COztBQUVyRTtBQUM0QztBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvaGVscGVycy9kZXZzZXJ2ZXIuanM/YTQ1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZhdWx0RGV2U2VydmVySG9zdCB9IGZyb20gXCIuL2NvbnN0cy5qc1wiO1xuaW1wb3J0IHsgZGV2U2VydmVySG9zdCB9IGZyb20gXCIuL2Vudi5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2hlbHBlcnMvZGV2c2VydmVyLnRzXG4vKipcbiogQXR0ZW1wdHMgdG8gY29udGFjdCB0aGUgZGV2IHNlcnZlciwgcmV0dXJuaW5nIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgb3Jcbiogbm90IGl0IHdhcyBzdWNjZXNzZnVsLlxuKlxuKiBAZXhhbXBsZSBkZXZTZXJ2ZXJVcmwocHJvY2Vzcy5lbnZbZW52S2V5cy5EZXZTZXJ2ZXJVcmxdLCBcIi95b3VyLXBhdGhcIilcbiovXG5jb25zdCBkZXZTZXJ2ZXJBdmFpbGFibGUgPSBhc3luYyAoaG9zdCA9IGRlZmF1bHREZXZTZXJ2ZXJIb3N0LCBmZXRjaCkgPT4ge1xuXHR0cnkge1xuXHRcdGF3YWl0IChhd2FpdCBmZXRjaChkZXZTZXJ2ZXJVcmwoaG9zdCwgXCIvZGV2XCIpLnRvU3RyaW5nKCkpKS5qc29uKCk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2ggKF9lKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59O1xuLyoqXG4qIGRldlNlcnZlclVybCByZXR1cm5zIGEgZnVsbCBVUkwgZm9yIHRoZSBnaXZlbiBwYXRoIG5hbWUuXG4qXG4qIEJlY2F1c2UgQ2xvdWRmbGFyZS9WOCBwbGF0Zm9ybXMgZG9uJ3QgYWxsb3cgcHJvY2Vzcy5lbnYsIHlvdSBhcmUgZXhwZWN0ZWRcbiogdG8gcGFzcyBpbiB0aGUgaG9zdCBmcm9tIHRoZSBkZXYgc2VydmVyIGVudiBrZXk6XG4qXG4qIEBleGFtcGxlIGRldlNlcnZlclVybChwcm9jZXNzRW52KGVudktleXMuRGV2U2VydmVyVXJsKSwgXCIveW91ci1wYXRoXCIpXG4qIEBleGFtcGxlIGRldlNlcnZlclVybChcImh0dHA6Ly9sb2NhbGhvc3Q6ODI4OC9cIiwgXCIveW91ci1wYXRoXCIpXG4qL1xuY29uc3QgZGV2U2VydmVyVXJsID0gKGhvc3QgPSBkZXZTZXJ2ZXJIb3N0JDEoKSwgcGF0aG5hbWUgPSBcIlwiKSA9PiB7XG5cdHJldHVybiBuZXcgVVJMKHBhdGhuYW1lLCBob3N0LmluY2x1ZGVzKFwiOi8vXCIpID8gaG9zdCA6IGBodHRwOi8vJHtob3N0fWApO1xufTtcbi8qKlxuKiBkZXZTZXJ2ZXJIb3N0IGV4cG9ydHMgdGhlIGRldmVsb3BtZW50IHNlcnZlcidzIGRvbWFpbiBieSBpbnNwZWN0aW5nIGVudlxuKiB2YXJpYWJsZXMsIG9yIHJldHVybnMgdGhlIGRlZmF1bHQgZGV2ZWxvcG1lbnQgc2VydmVyIFVSTC5cbipcbiogVGhpcyBndWFyYW50ZWVzIGEgc3BlY2lmaWMgVVJMIGFzIGEgc3RyaW5nLCBhcyBvcHBvc2VkIHRvIHRoZSBlbnYgZXhwb3J0XG4qIHdoaWNoIG9ubHkgcmV0dXJucyBhIHZhbHVlIG9mIHRoZSBlbnYgdmFyIGlzIHNldC5cbiovXG5jb25zdCBkZXZTZXJ2ZXJIb3N0JDEgPSAoKSA9PiBkZXZTZXJ2ZXJIb3N0KCkgfHwgZGVmYXVsdERldlNlcnZlckhvc3Q7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGV2U2VydmVyQXZhaWxhYmxlLCBkZXZTZXJ2ZXJVcmwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRldnNlcnZlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/devserver.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/enum.js":
/*!**********************************************!*\
  !*** ./node_modules/inngest/helpers/enum.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enumFromValue: () => (/* binding */ enumFromValue)\n/* harmony export */ });\n//#region src/helpers/enum.ts\n/**\n* Returns the value of an enum from a string value.\n*\n* If the value given is not a value from the enum, `undefined` is returned.\n*/\nconst enumFromValue = (enumType, value) => {\n\tif (Object.values(enumType).includes(value)) return value;\n};\n\n//#endregion\n\n//# sourceMappingURL=enum.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2VudW0uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvaGVscGVycy9lbnVtLmpzPzEzOTYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9oZWxwZXJzL2VudW0udHNcbi8qKlxuKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBhbiBlbnVtIGZyb20gYSBzdHJpbmcgdmFsdWUuXG4qXG4qIElmIHRoZSB2YWx1ZSBnaXZlbiBpcyBub3QgYSB2YWx1ZSBmcm9tIHRoZSBlbnVtLCBgdW5kZWZpbmVkYCBpcyByZXR1cm5lZC5cbiovXG5jb25zdCBlbnVtRnJvbVZhbHVlID0gKGVudW1UeXBlLCB2YWx1ZSkgPT4ge1xuXHRpZiAoT2JqZWN0LnZhbHVlcyhlbnVtVHlwZSkuaW5jbHVkZXModmFsdWUpKSByZXR1cm4gdmFsdWU7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGVudW1Gcm9tVmFsdWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVudW0uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/enum.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/env.js":
/*!*********************************************!*\
  !*** ./node_modules/inngest/helpers/env.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mode: () => (/* binding */ Mode),\n/* harmony export */   allProcessEnv: () => (/* binding */ allProcessEnv),\n/* harmony export */   devServerHost: () => (/* binding */ devServerHost),\n/* harmony export */   getEnvironmentName: () => (/* binding */ getEnvironmentName),\n/* harmony export */   getFetch: () => (/* binding */ getFetch),\n/* harmony export */   getMode: () => (/* binding */ getMode),\n/* harmony export */   getPlatformName: () => (/* binding */ getPlatformName),\n/* harmony export */   getResponse: () => (/* binding */ getResponse),\n/* harmony export */   inngestHeaders: () => (/* binding */ inngestHeaders),\n/* harmony export */   parseAsBoolean: () => (/* binding */ parseAsBoolean),\n/* harmony export */   platformSupportsStreaming: () => (/* binding */ platformSupportsStreaming),\n/* harmony export */   processEnv: () => (/* binding */ processEnv)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../version.js */ \"(rsc)/./node_modules/inngest/version.js\");\n/* harmony import */ var _consts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n\n\n\n\n\n//#region src/helpers/env.ts\n/**\n* devServerHost returns the dev server host by searching for the INNGEST_DEVSERVER_URL\n* environment variable (plus project prefixces for eg. react, such as REACT_APP_INNGEST_DEVSERVER_URL).\n*\n* If not found this returns undefined, indicating that the env var has not been set.\n*\n* @example devServerHost()\n*/\nconst devServerHost = (env = allProcessEnv()) => {\n\tconst prefixes = [\"REACT_APP_\", \"NEXT_PUBLIC_\"];\n\treturn [_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestBaseUrl, _consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode].flatMap((key) => {\n\t\treturn prefixes.map((prefix) => {\n\t\t\treturn env[prefix + key];\n\t\t});\n\t}).find((v) => {\n\t\tif (!v) return;\n\t\ttry {\n\t\t\treturn Boolean(new URL(v));\n\t\t} catch {}\n\t});\n};\nconst checkFns = ((checks) => checks)({\n\tequals: (actual, expected) => actual === expected,\n\t\"starts with\": (actual, expected) => expected ? actual?.startsWith(expected) ?? false : false,\n\t\"is truthy\": (actual) => Boolean(actual),\n\t\"is truthy but not\": (actual, expected) => Boolean(actual) && actual !== expected\n});\nconst prodChecks = [\n\t[\n\t\t\"CF_PAGES\",\n\t\t\"equals\",\n\t\t\"1\"\n\t],\n\t[\n\t\t\"CONTEXT\",\n\t\t\"starts with\",\n\t\t\"prod\"\n\t],\n\t[\n\t\t\"ENVIRONMENT\",\n\t\t\"starts with\",\n\t\t\"prod\"\n\t],\n\t[\n\t\t\"NODE_ENV\",\n\t\t\"starts with\",\n\t\t\"prod\"\n\t],\n\t[\n\t\t\"VERCEL_ENV\",\n\t\t\"starts with\",\n\t\t\"prod\"\n\t],\n\t[\"DENO_DEPLOYMENT_ID\", \"is truthy\"],\n\t[\n\t\t_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.VercelEnvKey,\n\t\t\"is truthy but not\",\n\t\t\"development\"\n\t],\n\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsNetlify, \"is truthy\"],\n\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsRender, \"is truthy\"],\n\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.RailwayBranch, \"is truthy\"],\n\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsCloudflarePages, \"is truthy\"]\n];\nvar Mode = class {\n\ttype;\n\t/**\n\t* Whether the mode was explicitly set, or inferred from other sources.\n\t*/\n\tisExplicit;\n\texplicitDevUrl;\n\tenv;\n\tconstructor({ type, isExplicit, explicitDevUrl, env = allProcessEnv() }) {\n\t\tthis.env = env;\n\t\tthis.type = type;\n\t\tthis.isExplicit = isExplicit || Boolean(explicitDevUrl);\n\t\tthis.explicitDevUrl = explicitDevUrl;\n\t}\n\tget isDev() {\n\t\treturn this.type === \"dev\";\n\t}\n\tget isCloud() {\n\t\treturn this.type === \"cloud\";\n\t}\n\tget isInferred() {\n\t\treturn !this.isExplicit;\n\t}\n\t/**\n\t* If we are explicitly in a particular mode, retrieve the URL that we are\n\t* sure we should be using, not considering any environment variables or other\n\t* influences.\n\t*/\n\tgetExplicitUrl(defaultCloudUrl) {\n\t\tif (!this.isExplicit) return;\n\t\tif (this.explicitDevUrl) return this.explicitDevUrl.href;\n\t\tif (this.isCloud) return defaultCloudUrl;\n\t\tif (this.isDev) return _consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost;\n\t}\n};\n/**\n* Returns the mode of the current environment, based off of either passed\n* environment variables or `process.env`, or explicit settings.\n*/\nconst getMode = ({ env = allProcessEnv(), client, explicitMode } = {}) => {\n\tif (explicitMode) return new Mode({\n\t\ttype: explicitMode,\n\t\tisExplicit: true,\n\t\tenv\n\t});\n\tif (client?.[\"mode\"].isExplicit) return client[\"mode\"];\n\tif (_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode in env) {\n\t\tif (typeof env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode] === \"string\") try {\n\t\t\treturn new Mode({\n\t\t\t\ttype: \"dev\",\n\t\t\t\tisExplicit: true,\n\t\t\t\texplicitDevUrl: new URL(env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode]),\n\t\t\t\tenv\n\t\t\t});\n\t\t} catch {}\n\t\tconst envIsDev = parseAsBoolean(env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode]);\n\t\tif (typeof envIsDev === \"boolean\") return new Mode({\n\t\t\ttype: envIsDev ? \"dev\" : \"cloud\",\n\t\t\tisExplicit: true,\n\t\t\tenv\n\t\t});\n\t}\n\treturn new Mode({\n\t\ttype: prodChecks.some(([key, checkKey, expected]) => {\n\t\t\treturn checkFns[checkKey]((0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.stringifyUnknown)(env[key]), expected);\n\t\t}) ? \"cloud\" : \"dev\",\n\t\tisExplicit: false,\n\t\tenv\n\t});\n};\n/**\n* getEnvironmentName returns the suspected branch name for this environment by\n* searching through a set of common environment variables.\n*\n* This could be used to determine if we're on a branch deploy or not, though it\n* should be noted that we don't know if this is the default branch or not.\n*/\nconst getEnvironmentName = (env = allProcessEnv()) => {\n\t/**\n\t* Order is important; more than one of these env vars may be set, so ensure\n\t* that we check the most specific, most reliable env vars first.\n\t*/\n\treturn env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestEnvironment] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.BranchName] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.VercelBranch] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.NetlifyBranch] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.CloudflarePagesBranch] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.RenderBranch] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.RailwayBranch];\n};\nconst processEnv = (key) => {\n\treturn allProcessEnv()[key];\n};\n/**\n* allProcessEnv returns the current process environment variables, or an empty\n* object if they cannot be read, making sure we support environments other than\n* Node such as Deno, too.\n*\n* Using this ensures we don't dangerously access `process.env` in environments\n* where it may not be defined, such as Deno or the browser.\n*/\nconst allProcessEnv = () => {\n\ttry {\n\t\tif (process.env) return process.env;\n\t} catch (_err) {}\n\ttry {\n\t\tconst env = Deno.env.toObject();\n\t\tif (env) return env;\n\t} catch (_err) {}\n\ttry {\n\t\tconst env = Netlify.env.toObject();\n\t\tif (env) return env;\n\t} catch (_err) {}\n\treturn {};\n};\n/**\n* Generate a standardised set of headers based on input and environment\n* variables.\n*\n*\n*/\nconst inngestHeaders = (opts) => {\n\tconst sdkVersion = `inngest-js:v${_version_js__WEBPACK_IMPORTED_MODULE_2__.version}`;\n\tconst headers = {\n\t\t\"Content-Type\": \"application/json\",\n\t\t\"User-Agent\": sdkVersion,\n\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.SdkVersion]: sdkVersion\n\t};\n\tif (opts?.framework) headers[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Framework] = opts.framework;\n\tif (opts?.expectedServerKind) headers[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.InngestExpectedServerKind] = opts.expectedServerKind;\n\tconst env = {\n\t\t...allProcessEnv(),\n\t\t...opts?.env\n\t};\n\tconst inngestEnv = opts?.inngestEnv || getEnvironmentName(env);\n\tif (inngestEnv) headers[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Environment] = inngestEnv;\n\tconst platform = getPlatformName(env);\n\tif (platform) headers[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Platform] = platform;\n\treturn {\n\t\t...headers,\n\t\t...opts?.client?.[\"headers\"],\n\t\t...opts?.extras\n\t};\n};\n/**\n* A set of checks that, given an environment, will return `true` if the current\n* environment is running on the platform with the given name.\n*/\nconst platformChecks = {\n\tvercel: (env) => env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsVercel] === \"1\" || typeof EdgeRuntime === \"string\",\n\tnetlify: (env) => env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsNetlify] === \"true\",\n\t\"cloudflare-pages\": (env) => env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsCloudflarePages] === \"1\",\n\trender: (env) => env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsRender] === \"true\",\n\trailway: (env) => Boolean(env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.RailwayEnvironment])\n};\n/**\n* A set of checks that, given an environment, will return `true` if the current\n* environment and platform supports streaming responses back to Inngest.\n*\n* Streaming capability is both framework and platform-based. Frameworks are\n* supported in serve handlers, and platforms are checked here.\n*\n* As such, this record declares which platforms we explicitly support for\n* streaming and is used by {@link platformSupportsStreaming}.\n*/\nconst streamingChecks = {\n\tvercel: (_framework, _env) => typeof EdgeRuntime === \"string\",\n\t\"cloudflare-pages\": () => true\n};\nconst getPlatformName = (env) => {\n\treturn Object.keys(platformChecks).find((key) => {\n\t\treturn platformChecks[key](env);\n\t});\n};\n/**\n* Returns `true` if we believe the current environment supports streaming\n* responses back to Inngest.\n*\n* We run a check directly related to the platform we believe we're running on,\n* usually based on environment variables.\n*/\nconst platformSupportsStreaming = (framework, env = allProcessEnv()) => {\n\treturn streamingChecks[getPlatformName(env)]?.(framework, env) ?? false;\n};\n/**\n* A unique symbol used to mark a custom fetch implementation. We wrap the\n* implementations to provide some extra control when handling errors.\n*/\nconst CUSTOM_FETCH_MARKER = Symbol(\"Custom fetch implementation\");\n/**\n* Given a potential fetch function, return the fetch function to use based on\n* this and the environment.\n*/\nconst getFetch = (givenFetch) => {\n\t/**\n\t* If we've explicitly been given a fetch function, use that.\n\t*/\n\tif (givenFetch) {\n\t\tif (CUSTOM_FETCH_MARKER in givenFetch) return givenFetch;\n\t\t/**\n\t\t* We wrap the given fetch function to provide some extra control when\n\t\t* handling errors.\n\t\t*/\n\t\tconst customFetch = async (...args) => {\n\t\t\ttry {\n\t\t\t\treturn await givenFetch(...args);\n\t\t\t} catch (err) {\n\t\t\t\t/**\n\t\t\t\t* Capture warnings that are not simple fetch failures and highlight\n\t\t\t\t* them for the user.\n\t\t\t\t*\n\t\t\t\t* We also use this opportunity to log the causing error, as code higher\n\t\t\t\t* up the stack will likely abstract this.\n\t\t\t\t*/\n\t\t\t\tif (!(err instanceof Error) || !err.message?.startsWith(\"fetch failed\")) {\n\t\t\t\t\tconsole.warn(\"A request failed when using a custom fetch implementation; this may be a misconfiguration. Make sure that your fetch client is correctly bound to the global scope.\");\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t* Mark the custom fetch implementation so that we can identify it later, in\n\t\t* addition to adding some runtime properties to it to make it seem as much\n\t\t* like the original fetch as possible.\n\t\t*/\n\t\tObject.defineProperties(customFetch, {\n\t\t\t[CUSTOM_FETCH_MARKER]: {},\n\t\t\tname: { value: givenFetch.name },\n\t\t\tlength: { value: givenFetch.length }\n\t\t});\n\t\treturn customFetch;\n\t}\n\t/**\n\t* Browser or Node 18+\n\t*/\n\ttry {\n\t\tif (typeof globalThis !== \"undefined\" && \"fetch\" in globalThis) return fetch.bind(globalThis);\n\t} catch (_err) {}\n\t/**\n\t* Existing polyfilled fetch\n\t*/\n\tif (typeof fetch !== \"undefined\") return fetch;\n\t/**\n\t* Environments where fetch cannot be found and must be polyfilled\n\t*/\n\treturn (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_3__.__require)(\"cross-fetch\");\n};\n/**\n* If `Response` isn't included in this environment, it's probably an earlier\n* Node env that isn't already polyfilling. This function returns either the\n* native `Response` or a polyfilled one.\n*/\nconst getResponse = () => {\n\tif (typeof Response !== \"undefined\") return Response;\n\treturn (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_3__.__require)(\"cross-fetch\").Response;\n};\n/**\n* Given an unknown value, try to parse it as a `boolean`. Useful for parsing\n* environment variables that could be a selection of different values such as\n* `\"true\"`, `\"1\"`.\n*\n* If the value could not be confidently parsed as a `boolean` or was seen to be\n* `undefined`, this function returns `undefined`.\n*/\nconst parseAsBoolean = (value) => {\n\tif (typeof value === \"boolean\") return value;\n\tif (typeof value === \"number\") return Boolean(value);\n\tif (typeof value === \"string\") {\n\t\tconst trimmed = value.trim().toLowerCase();\n\t\tif (trimmed === \"undefined\") return;\n\t\tif ([\"true\", \"1\"].includes(trimmed)) return true;\n\t\treturn false;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTREO0FBQ3BCO0FBQ2dDO0FBQ3hCOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrQ0FBTyxpQkFBaUIsK0NBQU87QUFDeEM7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLCtDQUFPO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsRUFBRSwrQ0FBTztBQUNULEVBQUUsK0NBQU87QUFDVCxFQUFFLCtDQUFPO0FBQ1QsRUFBRSwrQ0FBTztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQXlEO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNERBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4Q0FBOEMsSUFBSTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLEtBQUssK0NBQU87QUFDWixpQkFBaUIsK0NBQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLCtDQUFPO0FBQ3ZDO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSixzQ0FBc0MsK0NBQU87QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZEQUFnQjtBQUM3QyxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0EsWUFBWSwrQ0FBTyw0QkFBNEIsK0NBQU8sb0JBQW9CLCtDQUFPLHNCQUFzQiwrQ0FBTyx1QkFBdUIsK0NBQU8sK0JBQStCLCtDQUFPLHNCQUFzQiwrQ0FBTztBQUMvTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0RBQU8sQ0FBQztBQUMzQztBQUNBO0FBQ0E7QUFDQSxHQUFHLGtEQUFVO0FBQ2I7QUFDQSw4QkFBOEIsa0RBQVU7QUFDeEMsdUNBQXVDLGtEQUFVO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsa0RBQVU7QUFDbkM7QUFDQSx1QkFBdUIsa0RBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwrQ0FBTztBQUM3Qix1QkFBdUIsK0NBQU87QUFDOUIsa0NBQWtDLCtDQUFPO0FBQ3pDLHNCQUFzQiwrQ0FBTztBQUM3QiwrQkFBK0IsK0NBQU87QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdDQUFnQztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUIsV0FBVyx3QkFBd0I7QUFDbkMsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUVBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUVBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMEw7QUFDMUwiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvZW52LmpzP2U3MmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19yZXF1aXJlIH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vdmVyc2lvbi5qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdERldlNlcnZlckhvc3QsIGVudktleXMsIGhlYWRlcktleXMgfSBmcm9tIFwiLi9jb25zdHMuanNcIjtcbmltcG9ydCB7IHN0cmluZ2lmeVVua25vd24gfSBmcm9tIFwiLi9zdHJpbmdzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvaGVscGVycy9lbnYudHNcbi8qKlxuKiBkZXZTZXJ2ZXJIb3N0IHJldHVybnMgdGhlIGRldiBzZXJ2ZXIgaG9zdCBieSBzZWFyY2hpbmcgZm9yIHRoZSBJTk5HRVNUX0RFVlNFUlZFUl9VUkxcbiogZW52aXJvbm1lbnQgdmFyaWFibGUgKHBsdXMgcHJvamVjdCBwcmVmaXhjZXMgZm9yIGVnLiByZWFjdCwgc3VjaCBhcyBSRUFDVF9BUFBfSU5OR0VTVF9ERVZTRVJWRVJfVVJMKS5cbipcbiogSWYgbm90IGZvdW5kIHRoaXMgcmV0dXJucyB1bmRlZmluZWQsIGluZGljYXRpbmcgdGhhdCB0aGUgZW52IHZhciBoYXMgbm90IGJlZW4gc2V0LlxuKlxuKiBAZXhhbXBsZSBkZXZTZXJ2ZXJIb3N0KClcbiovXG5jb25zdCBkZXZTZXJ2ZXJIb3N0ID0gKGVudiA9IGFsbFByb2Nlc3NFbnYoKSkgPT4ge1xuXHRjb25zdCBwcmVmaXhlcyA9IFtcIlJFQUNUX0FQUF9cIiwgXCJORVhUX1BVQkxJQ19cIl07XG5cdHJldHVybiBbZW52S2V5cy5Jbm5nZXN0QmFzZVVybCwgZW52S2V5cy5Jbm5nZXN0RGV2TW9kZV0uZmxhdE1hcCgoa2V5KSA9PiB7XG5cdFx0cmV0dXJuIHByZWZpeGVzLm1hcCgocHJlZml4KSA9PiB7XG5cdFx0XHRyZXR1cm4gZW52W3ByZWZpeCArIGtleV07XG5cdFx0fSk7XG5cdH0pLmZpbmQoKHYpID0+IHtcblx0XHRpZiAoIXYpIHJldHVybjtcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIEJvb2xlYW4obmV3IFVSTCh2KSk7XG5cdFx0fSBjYXRjaCB7fVxuXHR9KTtcbn07XG5jb25zdCBjaGVja0ZucyA9ICgoY2hlY2tzKSA9PiBjaGVja3MpKHtcblx0ZXF1YWxzOiAoYWN0dWFsLCBleHBlY3RlZCkgPT4gYWN0dWFsID09PSBleHBlY3RlZCxcblx0XCJzdGFydHMgd2l0aFwiOiAoYWN0dWFsLCBleHBlY3RlZCkgPT4gZXhwZWN0ZWQgPyBhY3R1YWw/LnN0YXJ0c1dpdGgoZXhwZWN0ZWQpID8/IGZhbHNlIDogZmFsc2UsXG5cdFwiaXMgdHJ1dGh5XCI6IChhY3R1YWwpID0+IEJvb2xlYW4oYWN0dWFsKSxcblx0XCJpcyB0cnV0aHkgYnV0IG5vdFwiOiAoYWN0dWFsLCBleHBlY3RlZCkgPT4gQm9vbGVhbihhY3R1YWwpICYmIGFjdHVhbCAhPT0gZXhwZWN0ZWRcbn0pO1xuY29uc3QgcHJvZENoZWNrcyA9IFtcblx0W1xuXHRcdFwiQ0ZfUEFHRVNcIixcblx0XHRcImVxdWFsc1wiLFxuXHRcdFwiMVwiXG5cdF0sXG5cdFtcblx0XHRcIkNPTlRFWFRcIixcblx0XHRcInN0YXJ0cyB3aXRoXCIsXG5cdFx0XCJwcm9kXCJcblx0XSxcblx0W1xuXHRcdFwiRU5WSVJPTk1FTlRcIixcblx0XHRcInN0YXJ0cyB3aXRoXCIsXG5cdFx0XCJwcm9kXCJcblx0XSxcblx0W1xuXHRcdFwiTk9ERV9FTlZcIixcblx0XHRcInN0YXJ0cyB3aXRoXCIsXG5cdFx0XCJwcm9kXCJcblx0XSxcblx0W1xuXHRcdFwiVkVSQ0VMX0VOVlwiLFxuXHRcdFwic3RhcnRzIHdpdGhcIixcblx0XHRcInByb2RcIlxuXHRdLFxuXHRbXCJERU5PX0RFUExPWU1FTlRfSURcIiwgXCJpcyB0cnV0aHlcIl0sXG5cdFtcblx0XHRlbnZLZXlzLlZlcmNlbEVudktleSxcblx0XHRcImlzIHRydXRoeSBidXQgbm90XCIsXG5cdFx0XCJkZXZlbG9wbWVudFwiXG5cdF0sXG5cdFtlbnZLZXlzLklzTmV0bGlmeSwgXCJpcyB0cnV0aHlcIl0sXG5cdFtlbnZLZXlzLklzUmVuZGVyLCBcImlzIHRydXRoeVwiXSxcblx0W2VudktleXMuUmFpbHdheUJyYW5jaCwgXCJpcyB0cnV0aHlcIl0sXG5cdFtlbnZLZXlzLklzQ2xvdWRmbGFyZVBhZ2VzLCBcImlzIHRydXRoeVwiXVxuXTtcbnZhciBNb2RlID0gY2xhc3Mge1xuXHR0eXBlO1xuXHQvKipcblx0KiBXaGV0aGVyIHRoZSBtb2RlIHdhcyBleHBsaWNpdGx5IHNldCwgb3IgaW5mZXJyZWQgZnJvbSBvdGhlciBzb3VyY2VzLlxuXHQqL1xuXHRpc0V4cGxpY2l0O1xuXHRleHBsaWNpdERldlVybDtcblx0ZW52O1xuXHRjb25zdHJ1Y3Rvcih7IHR5cGUsIGlzRXhwbGljaXQsIGV4cGxpY2l0RGV2VXJsLCBlbnYgPSBhbGxQcm9jZXNzRW52KCkgfSkge1xuXHRcdHRoaXMuZW52ID0gZW52O1xuXHRcdHRoaXMudHlwZSA9IHR5cGU7XG5cdFx0dGhpcy5pc0V4cGxpY2l0ID0gaXNFeHBsaWNpdCB8fCBCb29sZWFuKGV4cGxpY2l0RGV2VXJsKTtcblx0XHR0aGlzLmV4cGxpY2l0RGV2VXJsID0gZXhwbGljaXREZXZVcmw7XG5cdH1cblx0Z2V0IGlzRGV2KCkge1xuXHRcdHJldHVybiB0aGlzLnR5cGUgPT09IFwiZGV2XCI7XG5cdH1cblx0Z2V0IGlzQ2xvdWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMudHlwZSA9PT0gXCJjbG91ZFwiO1xuXHR9XG5cdGdldCBpc0luZmVycmVkKCkge1xuXHRcdHJldHVybiAhdGhpcy5pc0V4cGxpY2l0O1xuXHR9XG5cdC8qKlxuXHQqIElmIHdlIGFyZSBleHBsaWNpdGx5IGluIGEgcGFydGljdWxhciBtb2RlLCByZXRyaWV2ZSB0aGUgVVJMIHRoYXQgd2UgYXJlXG5cdCogc3VyZSB3ZSBzaG91bGQgYmUgdXNpbmcsIG5vdCBjb25zaWRlcmluZyBhbnkgZW52aXJvbm1lbnQgdmFyaWFibGVzIG9yIG90aGVyXG5cdCogaW5mbHVlbmNlcy5cblx0Ki9cblx0Z2V0RXhwbGljaXRVcmwoZGVmYXVsdENsb3VkVXJsKSB7XG5cdFx0aWYgKCF0aGlzLmlzRXhwbGljaXQpIHJldHVybjtcblx0XHRpZiAodGhpcy5leHBsaWNpdERldlVybCkgcmV0dXJuIHRoaXMuZXhwbGljaXREZXZVcmwuaHJlZjtcblx0XHRpZiAodGhpcy5pc0Nsb3VkKSByZXR1cm4gZGVmYXVsdENsb3VkVXJsO1xuXHRcdGlmICh0aGlzLmlzRGV2KSByZXR1cm4gZGVmYXVsdERldlNlcnZlckhvc3Q7XG5cdH1cbn07XG4vKipcbiogUmV0dXJucyB0aGUgbW9kZSBvZiB0aGUgY3VycmVudCBlbnZpcm9ubWVudCwgYmFzZWQgb2ZmIG9mIGVpdGhlciBwYXNzZWRcbiogZW52aXJvbm1lbnQgdmFyaWFibGVzIG9yIGBwcm9jZXNzLmVudmAsIG9yIGV4cGxpY2l0IHNldHRpbmdzLlxuKi9cbmNvbnN0IGdldE1vZGUgPSAoeyBlbnYgPSBhbGxQcm9jZXNzRW52KCksIGNsaWVudCwgZXhwbGljaXRNb2RlIH0gPSB7fSkgPT4ge1xuXHRpZiAoZXhwbGljaXRNb2RlKSByZXR1cm4gbmV3IE1vZGUoe1xuXHRcdHR5cGU6IGV4cGxpY2l0TW9kZSxcblx0XHRpc0V4cGxpY2l0OiB0cnVlLFxuXHRcdGVudlxuXHR9KTtcblx0aWYgKGNsaWVudD8uW1wibW9kZVwiXS5pc0V4cGxpY2l0KSByZXR1cm4gY2xpZW50W1wibW9kZVwiXTtcblx0aWYgKGVudktleXMuSW5uZ2VzdERldk1vZGUgaW4gZW52KSB7XG5cdFx0aWYgKHR5cGVvZiBlbnZbZW52S2V5cy5Jbm5nZXN0RGV2TW9kZV0gPT09IFwic3RyaW5nXCIpIHRyeSB7XG5cdFx0XHRyZXR1cm4gbmV3IE1vZGUoe1xuXHRcdFx0XHR0eXBlOiBcImRldlwiLFxuXHRcdFx0XHRpc0V4cGxpY2l0OiB0cnVlLFxuXHRcdFx0XHRleHBsaWNpdERldlVybDogbmV3IFVSTChlbnZbZW52S2V5cy5Jbm5nZXN0RGV2TW9kZV0pLFxuXHRcdFx0XHRlbnZcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2gge31cblx0XHRjb25zdCBlbnZJc0RldiA9IHBhcnNlQXNCb29sZWFuKGVudltlbnZLZXlzLklubmdlc3REZXZNb2RlXSk7XG5cdFx0aWYgKHR5cGVvZiBlbnZJc0RldiA9PT0gXCJib29sZWFuXCIpIHJldHVybiBuZXcgTW9kZSh7XG5cdFx0XHR0eXBlOiBlbnZJc0RldiA/IFwiZGV2XCIgOiBcImNsb3VkXCIsXG5cdFx0XHRpc0V4cGxpY2l0OiB0cnVlLFxuXHRcdFx0ZW52XG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIG5ldyBNb2RlKHtcblx0XHR0eXBlOiBwcm9kQ2hlY2tzLnNvbWUoKFtrZXksIGNoZWNrS2V5LCBleHBlY3RlZF0pID0+IHtcblx0XHRcdHJldHVybiBjaGVja0Zuc1tjaGVja0tleV0oc3RyaW5naWZ5VW5rbm93bihlbnZba2V5XSksIGV4cGVjdGVkKTtcblx0XHR9KSA/IFwiY2xvdWRcIiA6IFwiZGV2XCIsXG5cdFx0aXNFeHBsaWNpdDogZmFsc2UsXG5cdFx0ZW52XG5cdH0pO1xufTtcbi8qKlxuKiBnZXRFbnZpcm9ubWVudE5hbWUgcmV0dXJucyB0aGUgc3VzcGVjdGVkIGJyYW5jaCBuYW1lIGZvciB0aGlzIGVudmlyb25tZW50IGJ5XG4qIHNlYXJjaGluZyB0aHJvdWdoIGEgc2V0IG9mIGNvbW1vbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4qXG4qIFRoaXMgY291bGQgYmUgdXNlZCB0byBkZXRlcm1pbmUgaWYgd2UncmUgb24gYSBicmFuY2ggZGVwbG95IG9yIG5vdCwgdGhvdWdoIGl0XG4qIHNob3VsZCBiZSBub3RlZCB0aGF0IHdlIGRvbid0IGtub3cgaWYgdGhpcyBpcyB0aGUgZGVmYXVsdCBicmFuY2ggb3Igbm90LlxuKi9cbmNvbnN0IGdldEVudmlyb25tZW50TmFtZSA9IChlbnYgPSBhbGxQcm9jZXNzRW52KCkpID0+IHtcblx0LyoqXG5cdCogT3JkZXIgaXMgaW1wb3J0YW50OyBtb3JlIHRoYW4gb25lIG9mIHRoZXNlIGVudiB2YXJzIG1heSBiZSBzZXQsIHNvIGVuc3VyZVxuXHQqIHRoYXQgd2UgY2hlY2sgdGhlIG1vc3Qgc3BlY2lmaWMsIG1vc3QgcmVsaWFibGUgZW52IHZhcnMgZmlyc3QuXG5cdCovXG5cdHJldHVybiBlbnZbZW52S2V5cy5Jbm5nZXN0RW52aXJvbm1lbnRdIHx8IGVudltlbnZLZXlzLkJyYW5jaE5hbWVdIHx8IGVudltlbnZLZXlzLlZlcmNlbEJyYW5jaF0gfHwgZW52W2VudktleXMuTmV0bGlmeUJyYW5jaF0gfHwgZW52W2VudktleXMuQ2xvdWRmbGFyZVBhZ2VzQnJhbmNoXSB8fCBlbnZbZW52S2V5cy5SZW5kZXJCcmFuY2hdIHx8IGVudltlbnZLZXlzLlJhaWx3YXlCcmFuY2hdO1xufTtcbmNvbnN0IHByb2Nlc3NFbnYgPSAoa2V5KSA9PiB7XG5cdHJldHVybiBhbGxQcm9jZXNzRW52KClba2V5XTtcbn07XG4vKipcbiogYWxsUHJvY2Vzc0VudiByZXR1cm5zIHRoZSBjdXJyZW50IHByb2Nlc3MgZW52aXJvbm1lbnQgdmFyaWFibGVzLCBvciBhbiBlbXB0eVxuKiBvYmplY3QgaWYgdGhleSBjYW5ub3QgYmUgcmVhZCwgbWFraW5nIHN1cmUgd2Ugc3VwcG9ydCBlbnZpcm9ubWVudHMgb3RoZXIgdGhhblxuKiBOb2RlIHN1Y2ggYXMgRGVubywgdG9vLlxuKlxuKiBVc2luZyB0aGlzIGVuc3VyZXMgd2UgZG9uJ3QgZGFuZ2Vyb3VzbHkgYWNjZXNzIGBwcm9jZXNzLmVudmAgaW4gZW52aXJvbm1lbnRzXG4qIHdoZXJlIGl0IG1heSBub3QgYmUgZGVmaW5lZCwgc3VjaCBhcyBEZW5vIG9yIHRoZSBicm93c2VyLlxuKi9cbmNvbnN0IGFsbFByb2Nlc3NFbnYgPSAoKSA9PiB7XG5cdHRyeSB7XG5cdFx0aWYgKHByb2Nlc3MuZW52KSByZXR1cm4gcHJvY2Vzcy5lbnY7XG5cdH0gY2F0Y2ggKF9lcnIpIHt9XG5cdHRyeSB7XG5cdFx0Y29uc3QgZW52ID0gRGVuby5lbnYudG9PYmplY3QoKTtcblx0XHRpZiAoZW52KSByZXR1cm4gZW52O1xuXHR9IGNhdGNoIChfZXJyKSB7fVxuXHR0cnkge1xuXHRcdGNvbnN0IGVudiA9IE5ldGxpZnkuZW52LnRvT2JqZWN0KCk7XG5cdFx0aWYgKGVudikgcmV0dXJuIGVudjtcblx0fSBjYXRjaCAoX2Vycikge31cblx0cmV0dXJuIHt9O1xufTtcbi8qKlxuKiBHZW5lcmF0ZSBhIHN0YW5kYXJkaXNlZCBzZXQgb2YgaGVhZGVycyBiYXNlZCBvbiBpbnB1dCBhbmQgZW52aXJvbm1lbnRcbiogdmFyaWFibGVzLlxuKlxuKlxuKi9cbmNvbnN0IGlubmdlc3RIZWFkZXJzID0gKG9wdHMpID0+IHtcblx0Y29uc3Qgc2RrVmVyc2lvbiA9IGBpbm5nZXN0LWpzOnYke3ZlcnNpb259YDtcblx0Y29uc3QgaGVhZGVycyA9IHtcblx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcIlVzZXItQWdlbnRcIjogc2RrVmVyc2lvbixcblx0XHRbaGVhZGVyS2V5cy5TZGtWZXJzaW9uXTogc2RrVmVyc2lvblxuXHR9O1xuXHRpZiAob3B0cz8uZnJhbWV3b3JrKSBoZWFkZXJzW2hlYWRlcktleXMuRnJhbWV3b3JrXSA9IG9wdHMuZnJhbWV3b3JrO1xuXHRpZiAob3B0cz8uZXhwZWN0ZWRTZXJ2ZXJLaW5kKSBoZWFkZXJzW2hlYWRlcktleXMuSW5uZ2VzdEV4cGVjdGVkU2VydmVyS2luZF0gPSBvcHRzLmV4cGVjdGVkU2VydmVyS2luZDtcblx0Y29uc3QgZW52ID0ge1xuXHRcdC4uLmFsbFByb2Nlc3NFbnYoKSxcblx0XHQuLi5vcHRzPy5lbnZcblx0fTtcblx0Y29uc3QgaW5uZ2VzdEVudiA9IG9wdHM/Lmlubmdlc3RFbnYgfHwgZ2V0RW52aXJvbm1lbnROYW1lKGVudik7XG5cdGlmIChpbm5nZXN0RW52KSBoZWFkZXJzW2hlYWRlcktleXMuRW52aXJvbm1lbnRdID0gaW5uZ2VzdEVudjtcblx0Y29uc3QgcGxhdGZvcm0gPSBnZXRQbGF0Zm9ybU5hbWUoZW52KTtcblx0aWYgKHBsYXRmb3JtKSBoZWFkZXJzW2hlYWRlcktleXMuUGxhdGZvcm1dID0gcGxhdGZvcm07XG5cdHJldHVybiB7XG5cdFx0Li4uaGVhZGVycyxcblx0XHQuLi5vcHRzPy5jbGllbnQ/LltcImhlYWRlcnNcIl0sXG5cdFx0Li4ub3B0cz8uZXh0cmFzXG5cdH07XG59O1xuLyoqXG4qIEEgc2V0IG9mIGNoZWNrcyB0aGF0LCBnaXZlbiBhbiBlbnZpcm9ubWVudCwgd2lsbCByZXR1cm4gYHRydWVgIGlmIHRoZSBjdXJyZW50XG4qIGVudmlyb25tZW50IGlzIHJ1bm5pbmcgb24gdGhlIHBsYXRmb3JtIHdpdGggdGhlIGdpdmVuIG5hbWUuXG4qL1xuY29uc3QgcGxhdGZvcm1DaGVja3MgPSB7XG5cdHZlcmNlbDogKGVudikgPT4gZW52W2VudktleXMuSXNWZXJjZWxdID09PSBcIjFcIiB8fCB0eXBlb2YgRWRnZVJ1bnRpbWUgPT09IFwic3RyaW5nXCIsXG5cdG5ldGxpZnk6IChlbnYpID0+IGVudltlbnZLZXlzLklzTmV0bGlmeV0gPT09IFwidHJ1ZVwiLFxuXHRcImNsb3VkZmxhcmUtcGFnZXNcIjogKGVudikgPT4gZW52W2VudktleXMuSXNDbG91ZGZsYXJlUGFnZXNdID09PSBcIjFcIixcblx0cmVuZGVyOiAoZW52KSA9PiBlbnZbZW52S2V5cy5Jc1JlbmRlcl0gPT09IFwidHJ1ZVwiLFxuXHRyYWlsd2F5OiAoZW52KSA9PiBCb29sZWFuKGVudltlbnZLZXlzLlJhaWx3YXlFbnZpcm9ubWVudF0pXG59O1xuLyoqXG4qIEEgc2V0IG9mIGNoZWNrcyB0aGF0LCBnaXZlbiBhbiBlbnZpcm9ubWVudCwgd2lsbCByZXR1cm4gYHRydWVgIGlmIHRoZSBjdXJyZW50XG4qIGVudmlyb25tZW50IGFuZCBwbGF0Zm9ybSBzdXBwb3J0cyBzdHJlYW1pbmcgcmVzcG9uc2VzIGJhY2sgdG8gSW5uZ2VzdC5cbipcbiogU3RyZWFtaW5nIGNhcGFiaWxpdHkgaXMgYm90aCBmcmFtZXdvcmsgYW5kIHBsYXRmb3JtLWJhc2VkLiBGcmFtZXdvcmtzIGFyZVxuKiBzdXBwb3J0ZWQgaW4gc2VydmUgaGFuZGxlcnMsIGFuZCBwbGF0Zm9ybXMgYXJlIGNoZWNrZWQgaGVyZS5cbipcbiogQXMgc3VjaCwgdGhpcyByZWNvcmQgZGVjbGFyZXMgd2hpY2ggcGxhdGZvcm1zIHdlIGV4cGxpY2l0bHkgc3VwcG9ydCBmb3Jcbiogc3RyZWFtaW5nIGFuZCBpcyB1c2VkIGJ5IHtAbGluayBwbGF0Zm9ybVN1cHBvcnRzU3RyZWFtaW5nfS5cbiovXG5jb25zdCBzdHJlYW1pbmdDaGVja3MgPSB7XG5cdHZlcmNlbDogKF9mcmFtZXdvcmssIF9lbnYpID0+IHR5cGVvZiBFZGdlUnVudGltZSA9PT0gXCJzdHJpbmdcIixcblx0XCJjbG91ZGZsYXJlLXBhZ2VzXCI6ICgpID0+IHRydWVcbn07XG5jb25zdCBnZXRQbGF0Zm9ybU5hbWUgPSAoZW52KSA9PiB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhwbGF0Zm9ybUNoZWNrcykuZmluZCgoa2V5KSA9PiB7XG5cdFx0cmV0dXJuIHBsYXRmb3JtQ2hlY2tzW2tleV0oZW52KTtcblx0fSk7XG59O1xuLyoqXG4qIFJldHVybnMgYHRydWVgIGlmIHdlIGJlbGlldmUgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgc3VwcG9ydHMgc3RyZWFtaW5nXG4qIHJlc3BvbnNlcyBiYWNrIHRvIElubmdlc3QuXG4qXG4qIFdlIHJ1biBhIGNoZWNrIGRpcmVjdGx5IHJlbGF0ZWQgdG8gdGhlIHBsYXRmb3JtIHdlIGJlbGlldmUgd2UncmUgcnVubmluZyBvbixcbiogdXN1YWxseSBiYXNlZCBvbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4qL1xuY29uc3QgcGxhdGZvcm1TdXBwb3J0c1N0cmVhbWluZyA9IChmcmFtZXdvcmssIGVudiA9IGFsbFByb2Nlc3NFbnYoKSkgPT4ge1xuXHRyZXR1cm4gc3RyZWFtaW5nQ2hlY2tzW2dldFBsYXRmb3JtTmFtZShlbnYpXT8uKGZyYW1ld29yaywgZW52KSA/PyBmYWxzZTtcbn07XG4vKipcbiogQSB1bmlxdWUgc3ltYm9sIHVzZWQgdG8gbWFyayBhIGN1c3RvbSBmZXRjaCBpbXBsZW1lbnRhdGlvbi4gV2Ugd3JhcCB0aGVcbiogaW1wbGVtZW50YXRpb25zIHRvIHByb3ZpZGUgc29tZSBleHRyYSBjb250cm9sIHdoZW4gaGFuZGxpbmcgZXJyb3JzLlxuKi9cbmNvbnN0IENVU1RPTV9GRVRDSF9NQVJLRVIgPSBTeW1ib2woXCJDdXN0b20gZmV0Y2ggaW1wbGVtZW50YXRpb25cIik7XG4vKipcbiogR2l2ZW4gYSBwb3RlbnRpYWwgZmV0Y2ggZnVuY3Rpb24sIHJldHVybiB0aGUgZmV0Y2ggZnVuY3Rpb24gdG8gdXNlIGJhc2VkIG9uXG4qIHRoaXMgYW5kIHRoZSBlbnZpcm9ubWVudC5cbiovXG5jb25zdCBnZXRGZXRjaCA9IChnaXZlbkZldGNoKSA9PiB7XG5cdC8qKlxuXHQqIElmIHdlJ3ZlIGV4cGxpY2l0bHkgYmVlbiBnaXZlbiBhIGZldGNoIGZ1bmN0aW9uLCB1c2UgdGhhdC5cblx0Ki9cblx0aWYgKGdpdmVuRmV0Y2gpIHtcblx0XHRpZiAoQ1VTVE9NX0ZFVENIX01BUktFUiBpbiBnaXZlbkZldGNoKSByZXR1cm4gZ2l2ZW5GZXRjaDtcblx0XHQvKipcblx0XHQqIFdlIHdyYXAgdGhlIGdpdmVuIGZldGNoIGZ1bmN0aW9uIHRvIHByb3ZpZGUgc29tZSBleHRyYSBjb250cm9sIHdoZW5cblx0XHQqIGhhbmRsaW5nIGVycm9ycy5cblx0XHQqL1xuXHRcdGNvbnN0IGN1c3RvbUZldGNoID0gYXN5bmMgKC4uLmFyZ3MpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJldHVybiBhd2FpdCBnaXZlbkZldGNoKC4uLmFyZ3MpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQqIENhcHR1cmUgd2FybmluZ3MgdGhhdCBhcmUgbm90IHNpbXBsZSBmZXRjaCBmYWlsdXJlcyBhbmQgaGlnaGxpZ2h0XG5cdFx0XHRcdCogdGhlbSBmb3IgdGhlIHVzZXIuXG5cdFx0XHRcdCpcblx0XHRcdFx0KiBXZSBhbHNvIHVzZSB0aGlzIG9wcG9ydHVuaXR5IHRvIGxvZyB0aGUgY2F1c2luZyBlcnJvciwgYXMgY29kZSBoaWdoZXJcblx0XHRcdFx0KiB1cCB0aGUgc3RhY2sgd2lsbCBsaWtlbHkgYWJzdHJhY3QgdGhpcy5cblx0XHRcdFx0Ki9cblx0XHRcdFx0aWYgKCEoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHx8ICFlcnIubWVzc2FnZT8uc3RhcnRzV2l0aChcImZldGNoIGZhaWxlZFwiKSkge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcIkEgcmVxdWVzdCBmYWlsZWQgd2hlbiB1c2luZyBhIGN1c3RvbSBmZXRjaCBpbXBsZW1lbnRhdGlvbjsgdGhpcyBtYXkgYmUgYSBtaXNjb25maWd1cmF0aW9uLiBNYWtlIHN1cmUgdGhhdCB5b3VyIGZldGNoIGNsaWVudCBpcyBjb3JyZWN0bHkgYm91bmQgdG8gdGhlIGdsb2JhbCBzY29wZS5cIik7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRocm93IGVycjtcblx0XHRcdH1cblx0XHR9O1xuXHRcdC8qKlxuXHRcdCogTWFyayB0aGUgY3VzdG9tIGZldGNoIGltcGxlbWVudGF0aW9uIHNvIHRoYXQgd2UgY2FuIGlkZW50aWZ5IGl0IGxhdGVyLCBpblxuXHRcdCogYWRkaXRpb24gdG8gYWRkaW5nIHNvbWUgcnVudGltZSBwcm9wZXJ0aWVzIHRvIGl0IHRvIG1ha2UgaXQgc2VlbSBhcyBtdWNoXG5cdFx0KiBsaWtlIHRoZSBvcmlnaW5hbCBmZXRjaCBhcyBwb3NzaWJsZS5cblx0XHQqL1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGN1c3RvbUZldGNoLCB7XG5cdFx0XHRbQ1VTVE9NX0ZFVENIX01BUktFUl06IHt9LFxuXHRcdFx0bmFtZTogeyB2YWx1ZTogZ2l2ZW5GZXRjaC5uYW1lIH0sXG5cdFx0XHRsZW5ndGg6IHsgdmFsdWU6IGdpdmVuRmV0Y2gubGVuZ3RoIH1cblx0XHR9KTtcblx0XHRyZXR1cm4gY3VzdG9tRmV0Y2g7XG5cdH1cblx0LyoqXG5cdCogQnJvd3NlciBvciBOb2RlIDE4K1xuXHQqL1xuXHR0cnkge1xuXHRcdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBcImZldGNoXCIgaW4gZ2xvYmFsVGhpcykgcmV0dXJuIGZldGNoLmJpbmQoZ2xvYmFsVGhpcyk7XG5cdH0gY2F0Y2ggKF9lcnIpIHt9XG5cdC8qKlxuXHQqIEV4aXN0aW5nIHBvbHlmaWxsZWQgZmV0Y2hcblx0Ki9cblx0aWYgKHR5cGVvZiBmZXRjaCAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGZldGNoO1xuXHQvKipcblx0KiBFbnZpcm9ubWVudHMgd2hlcmUgZmV0Y2ggY2Fubm90IGJlIGZvdW5kIGFuZCBtdXN0IGJlIHBvbHlmaWxsZWRcblx0Ki9cblx0cmV0dXJuIF9fcmVxdWlyZShcImNyb3NzLWZldGNoXCIpO1xufTtcbi8qKlxuKiBJZiBgUmVzcG9uc2VgIGlzbid0IGluY2x1ZGVkIGluIHRoaXMgZW52aXJvbm1lbnQsIGl0J3MgcHJvYmFibHkgYW4gZWFybGllclxuKiBOb2RlIGVudiB0aGF0IGlzbid0IGFscmVhZHkgcG9seWZpbGxpbmcuIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBlaXRoZXIgdGhlXG4qIG5hdGl2ZSBgUmVzcG9uc2VgIG9yIGEgcG9seWZpbGxlZCBvbmUuXG4qL1xuY29uc3QgZ2V0UmVzcG9uc2UgPSAoKSA9PiB7XG5cdGlmICh0eXBlb2YgUmVzcG9uc2UgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBSZXNwb25zZTtcblx0cmV0dXJuIF9fcmVxdWlyZShcImNyb3NzLWZldGNoXCIpLlJlc3BvbnNlO1xufTtcbi8qKlxuKiBHaXZlbiBhbiB1bmtub3duIHZhbHVlLCB0cnkgdG8gcGFyc2UgaXQgYXMgYSBgYm9vbGVhbmAuIFVzZWZ1bCBmb3IgcGFyc2luZ1xuKiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdGhhdCBjb3VsZCBiZSBhIHNlbGVjdGlvbiBvZiBkaWZmZXJlbnQgdmFsdWVzIHN1Y2ggYXNcbiogYFwidHJ1ZVwiYCwgYFwiMVwiYC5cbipcbiogSWYgdGhlIHZhbHVlIGNvdWxkIG5vdCBiZSBjb25maWRlbnRseSBwYXJzZWQgYXMgYSBgYm9vbGVhbmAgb3Igd2FzIHNlZW4gdG8gYmVcbiogYHVuZGVmaW5lZGAsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBgdW5kZWZpbmVkYC5cbiovXG5jb25zdCBwYXJzZUFzQm9vbGVhbiA9ICh2YWx1ZSkgPT4ge1xuXHRpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikgcmV0dXJuIHZhbHVlO1xuXHRpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSByZXR1cm4gQm9vbGVhbih2YWx1ZSk7XG5cdGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcblx0XHRjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cdFx0aWYgKHRyaW1tZWQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcblx0XHRpZiAoW1widHJ1ZVwiLCBcIjFcIl0uaW5jbHVkZXModHJpbW1lZCkpIHJldHVybiB0cnVlO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBNb2RlLCBhbGxQcm9jZXNzRW52LCBkZXZTZXJ2ZXJIb3N0LCBnZXRFbnZpcm9ubWVudE5hbWUsIGdldEZldGNoLCBnZXRNb2RlLCBnZXRQbGF0Zm9ybU5hbWUsIGdldFJlc3BvbnNlLCBpbm5nZXN0SGVhZGVycywgcGFyc2VBc0Jvb2xlYW4sIHBsYXRmb3JtU3VwcG9ydHNTdHJlYW1pbmcsIHByb2Nlc3NFbnYgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVudi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/errors.js":
/*!************************************************!*\
  !*** ./node_modules/inngest/helpers/errors.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrCode: () => (/* binding */ ErrCode),\n/* harmony export */   deserializeError: () => (/* binding */ deserializeError$1),\n/* harmony export */   errors_exports: () => (/* binding */ errors_exports),\n/* harmony export */   fixEventKeyMissingSteps: () => (/* binding */ fixEventKeyMissingSteps),\n/* harmony export */   functionStoppedRunningErr: () => (/* binding */ functionStoppedRunningErr),\n/* harmony export */   getErrorMessage: () => (/* binding */ getErrorMessage),\n/* harmony export */   minifyPrettyError: () => (/* binding */ minifyPrettyError),\n/* harmony export */   prettyError: () => (/* binding */ prettyError),\n/* harmony export */   rethrowError: () => (/* binding */ rethrowError),\n/* harmony export */   serializeError: () => (/* binding */ serializeError$1)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _components_NonRetriableError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/NonRetriableError.js */ \"(rsc)/./node_modules/inngest/components/NonRetriableError.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var chalk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chalk */ \"(rsc)/./node_modules/chalk/source/index.js\");\n/* harmony import */ var json_stringify_safe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! json-stringify-safe */ \"(rsc)/./node_modules/json-stringify-safe/stringify.js\");\n/* harmony import */ var serialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! serialize-error-cjs */ \"(rsc)/./node_modules/serialize-error-cjs/dist/index.js\");\n/* harmony import */ var strip_ansi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! strip-ansi */ \"(rsc)/./node_modules/strip-ansi/index.js\");\n\n\n\n\n\n\n\n\n//#region src/helpers/errors.ts\nvar errors_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_4__.__export)({\n\tErrCode: () => ErrCode,\n\tOutgoingResultError: () => OutgoingResultError,\n\tdeserializeError: () => deserializeError$1,\n\tfixEventKeyMissingSteps: () => fixEventKeyMissingSteps,\n\tfunctionStoppedRunningErr: () => functionStoppedRunningErr,\n\tgetErrorMessage: () => getErrorMessage,\n\tisSerializedError: () => isSerializedError,\n\tminifyPrettyError: () => minifyPrettyError,\n\tprettyError: () => prettyError,\n\tprettyErrorSplitter: () => prettyErrorSplitter,\n\trethrowError: () => rethrowError,\n\tserializeError: () => serializeError$1\n});\nconst SERIALIZED_KEY = \"__serialized\";\nconst SERIALIZED_VALUE = true;\n/**\n* Add first-class support for certain errors that we control, in addition to\n* built-in errors such as `TypeError`.\n*\n* Adding these allows these non-standard errors to be correctly serialized,\n* sent to Inngest, then deserialized back into the correct error type for users\n* to react to correctly.\n*\n* Note that these errors only support `message?: string | undefined` as the\n* input; more custom errors are not supported with this current strategy.\n*/\nserialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__.errorConstructors.set(\"NonRetriableError\", _components_NonRetriableError_js__WEBPACK_IMPORTED_MODULE_5__.NonRetriableError);\n/**\n* Serialise an error to a serialized JSON string.\n*\n* Errors do not serialise nicely to JSON, so we use this function to convert\n* them to a serialized JSON string. Doing this is also non-trivial for some\n* errors, so we use the `serialize-error` package to do it for us.\n*\n* See {@link https://www.npmjs.com/package/serialize-error}\n*\n* This function is a small wrapper around that package to also add a `type`\n* property to the serialised error, so that we can distinguish between\n* serialised errors and other objects.\n*\n* Will not reserialise existing serialised errors.\n*/\nconst serializeError$1 = (subject, allowUnknown = false) => {\n\ttry {\n\t\tconst existingSerializedError = isSerializedError(subject);\n\t\tif (existingSerializedError) return existingSerializedError;\n\t\tif (typeof subject === \"object\" && subject !== null) {\n\t\t\tconst serializedErr = (0,serialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__.serializeError)(subject);\n\t\t\tif (!serializedErr.name && allowUnknown) return subject;\n\t\t\tconst ret = {\n\t\t\t\t...serializedErr,\n\t\t\t\tname: serializedErr.name || \"Error\",\n\t\t\t\tmessage: serializedErr.message || json_stringify_safe__WEBPACK_IMPORTED_MODULE_1__(subject) || \"Unknown error; error serialization could not find a message.\",\n\t\t\t\tstack: serializedErr.stack || \"\",\n\t\t\t\t[SERIALIZED_KEY]: SERIALIZED_VALUE\n\t\t\t};\n\t\t\tlet target = ret;\n\t\t\tconst maxDepth = 5;\n\t\t\tfor (let i = 0; i < maxDepth; i++) {\n\t\t\t\tif (typeof target === \"object\" && target !== null && \"cause\" in target && target.cause) {\n\t\t\t\t\ttarget = target.cause = serializeError$1(target.cause, true);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t\tthrow new Error(\"Error is not an object; strange throw value.\");\n\t} catch {\n\t\tif (allowUnknown) return subject;\n\t\ttry {\n\t\t\treturn {\n\t\t\t\t...serializeError$1(new Error(typeof subject === \"string\" ? subject : json_stringify_safe__WEBPACK_IMPORTED_MODULE_1__(subject)), false),\n\t\t\t\tstack: \"\",\n\t\t\t\t[SERIALIZED_KEY]: SERIALIZED_VALUE\n\t\t\t};\n\t\t} catch {\n\t\t\treturn {\n\t\t\t\tname: \"Could not serialize source error\",\n\t\t\t\tmessage: \"Serializing the source error failed.\",\n\t\t\t\tstack: \"\",\n\t\t\t\t[SERIALIZED_KEY]: SERIALIZED_VALUE\n\t\t\t};\n\t\t}\n\t}\n};\n/**\n* Check if an object or a string is a serialised error created by\n* {@link serializeError}.\n*/\nconst isSerializedError = (value) => {\n\ttry {\n\t\tif (typeof value === \"string\") {\n\t\t\tconst parsed = zod_v3__WEBPACK_IMPORTED_MODULE_6__.object({\n\t\t\t\t[SERIALIZED_KEY]: zod_v3__WEBPACK_IMPORTED_MODULE_6__.literal(SERIALIZED_VALUE),\n\t\t\t\tname: zod_v3__WEBPACK_IMPORTED_MODULE_6__[\"enum\"]([...Array.from(serialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__.errorConstructors.keys())]),\n\t\t\t\tmessage: zod_v3__WEBPACK_IMPORTED_MODULE_6__.string(),\n\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_6__.string()\n\t\t\t}).passthrough().safeParse(JSON.parse(value));\n\t\t\tif (parsed.success) return parsed.data;\n\t\t}\n\t\tif (typeof value === \"object\" && value !== null) {\n\t\t\tif (Object.hasOwn(value, SERIALIZED_KEY) && value[SERIALIZED_KEY] === SERIALIZED_VALUE) return value;\n\t\t}\n\t} catch {}\n};\n/**\n* Deserialise an error created by {@link serializeError}.\n*\n* Ensures we only deserialise errors that meet a minimum level of\n* applicability, inclusive of error handling to ensure that badly serialized\n* errors are still handled.\n*/\nconst deserializeError$1 = (subject, allowUnknown = false) => {\n\tconst requiredFields = [\"name\", \"message\"];\n\ttry {\n\t\tif (!requiredFields.every((field) => {\n\t\t\treturn Object.hasOwn(subject, field);\n\t\t})) throw new Error();\n\t\tconst deserializedErr = (0,serialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__.deserializeError)(subject);\n\t\tif (\"cause\" in deserializedErr) deserializedErr.cause = deserializeError$1(deserializedErr.cause, true);\n\t\treturn deserializedErr;\n\t} catch {\n\t\tif (allowUnknown) return subject;\n\t\tconst err = /* @__PURE__ */ new Error(\"Unknown error; could not reserialize\");\n\t\t/**\n\t\t* Remove the stack so that it's not misleadingly shown as the Inngest\n\t\t* internals.\n\t\t*/\n\t\terr.stack = void 0;\n\t\treturn err;\n\t}\n};\nlet ErrCode = /* @__PURE__ */ function(ErrCode$1) {\n\tErrCode$1[\"NESTING_STEPS\"] = \"NESTING_STEPS\";\n\t/**\n\t* Legacy v0 execution error code for when a function has changed and no\n\t* longer matches its in-progress state.\n\t*\n\t* @deprecated Not for use in latest execution method.\n\t*/\n\tErrCode$1[\"NON_DETERMINISTIC_FUNCTION\"] = \"NON_DETERMINISTIC_FUNCTION\";\n\t/**\n\t* Legacy v0 execution error code for when a function is found to be using\n\t* async actions after memoziation has occurred, which v0 doesn't support.\n\t*\n\t* @deprecated Not for use in latest execution method.\n\t*/\n\tErrCode$1[\"ASYNC_DETECTED_AFTER_MEMOIZATION\"] = \"ASYNC_DETECTED_AFTER_MEMOIZATION\";\n\t/**\n\t* Legacy v0 execution error code for when a function is found to be using\n\t* steps after a non-step async action has occurred.\n\t*\n\t* @deprecated Not for use in latest execution method.\n\t*/\n\tErrCode$1[\"STEP_USED_AFTER_ASYNC\"] = \"STEP_USED_AFTER_ASYNC\";\n\tErrCode$1[\"AUTOMATIC_PARALLEL_INDEXING\"] = \"AUTOMATIC_PARALLEL_INDEXING\";\n\tErrCode$1[\"NONDETERMINISTIC_STEPS\"] = \"NONDETERMINISTIC_STEPS\";\n\treturn ErrCode$1;\n}({});\nconst prettyErrorSplitter = \"=================================================\";\n/**\n* Given an unknown `err`, mutate it to minify any pretty errors that it\n* contains.\n*/\nconst minifyPrettyError = (err) => {\n\ttry {\n\t\tif (!isError(err)) return err;\n\t\tif (!err.message.includes(prettyErrorSplitter)) return err;\n\t\tconst sanitizedMessage = strip_ansi__WEBPACK_IMPORTED_MODULE_3__(err.message);\n\t\tconst message = sanitizedMessage.split(\"  \")[1]?.split(\"\\n\")[0]?.trim() || err.message;\n\t\terr.message = [sanitizedMessage.split(\"\\n\\nCode: \")[1]?.split(\"\\n\\n\")[0]?.trim() || void 0, message].filter(Boolean).join(\" - \");\n\t\tif (err.stack) {\n\t\t\tconst stackRest = strip_ansi__WEBPACK_IMPORTED_MODULE_3__(err.stack).split(`${prettyErrorSplitter}\\n`).slice(2).join(\"\\n\");\n\t\t\terr.stack = `${err.name}: ${err.message}\\n${stackRest}`;\n\t\t}\n\t\treturn err;\n\t} catch (_noopErr) {\n\t\treturn err;\n\t}\n};\n/**\n* Given an `err`, return a boolean representing whether it is in the shape of\n* an `Error` or not.\n*/\nconst isError = (err) => {\n\ttry {\n\t\tif (err instanceof Error) return true;\n\t\tif (typeof err !== \"object\" || err === null) return false;\n\t\treturn Object.hasOwn(err, \"name\") && Object.hasOwn(err, \"message\");\n\t} catch (_noopErr) {\n\t\treturn false;\n\t}\n};\n/**\n* Given an `unknown` object, retrieve the `message` property from it, or fall\n* back to the `fallback` string if it doesn't exist or is empty.\n*/\nconst getErrorMessage = (err, fallback) => {\n\tconst { message } = zod_v3__WEBPACK_IMPORTED_MODULE_6__.object({ message: zod_v3__WEBPACK_IMPORTED_MODULE_6__.string().min(1) }).catch({ message: fallback }).parse(err);\n\treturn message;\n};\n/**\n* Given a {@link PrettyError}, return a nicely-formatted string ready to log\n* or throw.\n*\n* Useful for ensuring that errors are logged in a consistent, helpful format\n* across the SDK by prompting for key pieces of information.\n*/\nconst prettyError = ({ type = \"error\", whatHappened, otherwise, reassurance, toFixNow, why, consequences, stack, code }) => {\n\tconst { icon, colorFn } = {\n\t\terror: {\n\t\t\ticon: \"\",\n\t\t\tcolorFn: chalk__WEBPACK_IMPORTED_MODULE_0__.red\n\t\t},\n\t\twarn: {\n\t\t\ticon: \"\",\n\t\t\tcolorFn: chalk__WEBPACK_IMPORTED_MODULE_0__.yellow\n\t\t}\n\t}[type];\n\tlet header = `${icon}  ${chalk__WEBPACK_IMPORTED_MODULE_0__.bold.underline(whatHappened.trim())}`;\n\tif (stack) header += \"\\n\" + [...(/* @__PURE__ */ new Error()).stack?.split(\"\\n\").slice(1).filter(Boolean) || []].join(\"\\n\");\n\tlet toFixNowStr = (Array.isArray(toFixNow) ? toFixNow.map((s) => s.trim()).filter(Boolean).map((s, i) => `\\t${i + 1}. ${s}`).join(\"\\n\") : toFixNow?.trim()) ?? \"\";\n\tif (Array.isArray(toFixNow) && toFixNowStr) toFixNowStr = `To fix this, you can take one of the following courses of action:\\n\\n${toFixNowStr}`;\n\tlet body = [\n\t\treassurance?.trim(),\n\t\twhy?.trim(),\n\t\tconsequences?.trim()\n\t].filter(Boolean).join(\" \");\n\tbody += body ? `\\n\\n${toFixNowStr}` : toFixNowStr;\n\tconst trailer = [otherwise?.trim()].filter(Boolean).join(\" \");\n\treturn colorFn([\n\t\tprettyErrorSplitter,\n\t\theader,\n\t\tbody,\n\t\ttrailer,\n\t\tcode ? `Code: ${code}` : \"\",\n\t\tprettyErrorSplitter\n\t].filter(Boolean).join(\"\\n\\n\"));\n};\nconst fixEventKeyMissingSteps = [\n\t\"Set the `INNGEST_EVENT_KEY` environment variable\",\n\t`Pass a key to the \\`new Inngest()\\` constructor using the \\`eventKey\\` option`,\n\t`Use \\`inngest.setEventKey()\\` at runtime`\n];\n/**\n* An error that, when thrown, indicates internally that an outgoing operation\n* contains an error.\n*\n* We use this because serialized `data` sent back to Inngest may differ from\n* the error instance itself due to middleware.\n*\n* @internal\n*/\nvar OutgoingResultError = class extends Error {\n\tresult;\n\tconstructor(result) {\n\t\tsuper(\"OutgoingOpError\");\n\t\tthis.result = result;\n\t}\n};\n/**\n* Create a function that will rethrow an error with a prefix added to the\n* message.\n*\n* Useful for adding context to errors that are rethrown.\n*\n* @example\n* ```ts\n* await doSomeAction().catch(rethrowError(\"Failed to do some action\"));\n* ```\n*/\nconst rethrowError = (prefix) => {\n\treturn (err) => {\n\t\ttry {\n\t\t\terr.message &&= `${prefix}; ${err.message}`;\n\t\t} catch (_noopErr) {} finally {\n\t\t\tthrow err;\n\t\t}\n\t};\n};\n/**\n* Legacy v0 execution error for functions that don't support mixing steps and\n* regular async actions.\n*/\nconst functionStoppedRunningErr = (code) => {\n\treturn prettyError({\n\t\twhatHappened: \"Your function was stopped from running\",\n\t\twhy: \"We detected a mix of asynchronous logic, some using step tooling and some not.\",\n\t\tconsequences: \"This can cause unexpected behaviour when a function is paused and resumed and is therefore strongly discouraged; we stopped your function to ensure nothing unexpected happened!\",\n\t\tstack: true,\n\t\ttoFixNow: \"Ensure that your function is either entirely step-based or entirely non-step-based, by either wrapping all asynchronous logic in `step.run()` calls or by removing all `step.*()` calls.\",\n\t\totherwise: \"For more information on why step functions work in this manner, see https://www.inngest.com/docs/functions/multi-step#gotchas\",\n\t\tcode\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyRDtBQUNZO0FBQzVDO0FBQ0Q7QUFDa0I7QUFDOEM7QUFDdkQ7O0FBRW5DO0FBQ0EscUNBQXFDLHNFQUFRO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esa0VBQWlCLDBCQUEwQiwrRUFBaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG1FQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdEQUFTLDZCQUE2QjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLGdEQUFTO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxxQkFBcUI7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMENBQVE7QUFDMUIsc0JBQXNCLDJDQUFTO0FBQy9CLFVBQVUsMkNBQU0sZ0JBQWdCLGtFQUFpQjtBQUNqRCxhQUFhLDBDQUFRO0FBQ3JCLFdBQVcsMENBQVE7QUFDbkIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1DQUFtQyxxQkFBcUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsMEJBQTBCLHFFQUFnQjtBQUMxQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHVDQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1Q0FBUyxxQkFBcUIsb0JBQW9CO0FBQ3ZFLGtCQUFrQixTQUFTLElBQUksWUFBWSxJQUFJLFVBQVU7QUFDekQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsVUFBVSxFQUFFLDBDQUFRLEdBQUcsU0FBUywwQ0FBUSxXQUFXLFVBQVUsbUJBQW1CO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0dBQWdHO0FBQ3ZILFNBQVMsZ0JBQWdCO0FBQ3pCO0FBQ0E7QUFDQSxZQUFZLHNDQUFTO0FBQ3JCLEdBQUc7QUFDSDtBQUNBO0FBQ0EsWUFBWSx5Q0FBWTtBQUN4QjtBQUNBLEVBQUU7QUFDRixpQkFBaUIsT0FBTyxFQUFFLHVDQUFVLGdDQUFnQztBQUNwRTtBQUNBLCtHQUErRyxNQUFNLElBQUksRUFBRTtBQUMzSCxtSUFBbUksWUFBWTtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFlBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEtBQUs7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixTQUFTLEVBQUUsWUFBWTtBQUM3QyxJQUFJLG9CQUFvQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrSUFBa0k7QUFDbEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDa087QUFDbE8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvZXJyb3JzLmpzPzU1YzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgTm9uUmV0cmlhYmxlRXJyb3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Ob25SZXRyaWFibGVFcnJvci5qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjNcIjtcbmltcG9ydCBjaGFsayBmcm9tIFwiY2hhbGtcIjtcbmltcG9ydCBzdHJpbmdpZnkgZnJvbSBcImpzb24tc3RyaW5naWZ5LXNhZmVcIjtcbmltcG9ydCB7IGRlc2VyaWFsaXplRXJyb3IsIGVycm9yQ29uc3RydWN0b3JzLCBzZXJpYWxpemVFcnJvciB9IGZyb20gXCJzZXJpYWxpemUtZXJyb3ItY2pzXCI7XG5pbXBvcnQgc3RyaXBBbnNpIGZyb20gXCJzdHJpcC1hbnNpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvaGVscGVycy9lcnJvcnMudHNcbnZhciBlcnJvcnNfZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7XG5cdEVyckNvZGU6ICgpID0+IEVyckNvZGUsXG5cdE91dGdvaW5nUmVzdWx0RXJyb3I6ICgpID0+IE91dGdvaW5nUmVzdWx0RXJyb3IsXG5cdGRlc2VyaWFsaXplRXJyb3I6ICgpID0+IGRlc2VyaWFsaXplRXJyb3IkMSxcblx0Zml4RXZlbnRLZXlNaXNzaW5nU3RlcHM6ICgpID0+IGZpeEV2ZW50S2V5TWlzc2luZ1N0ZXBzLFxuXHRmdW5jdGlvblN0b3BwZWRSdW5uaW5nRXJyOiAoKSA9PiBmdW5jdGlvblN0b3BwZWRSdW5uaW5nRXJyLFxuXHRnZXRFcnJvck1lc3NhZ2U6ICgpID0+IGdldEVycm9yTWVzc2FnZSxcblx0aXNTZXJpYWxpemVkRXJyb3I6ICgpID0+IGlzU2VyaWFsaXplZEVycm9yLFxuXHRtaW5pZnlQcmV0dHlFcnJvcjogKCkgPT4gbWluaWZ5UHJldHR5RXJyb3IsXG5cdHByZXR0eUVycm9yOiAoKSA9PiBwcmV0dHlFcnJvcixcblx0cHJldHR5RXJyb3JTcGxpdHRlcjogKCkgPT4gcHJldHR5RXJyb3JTcGxpdHRlcixcblx0cmV0aHJvd0Vycm9yOiAoKSA9PiByZXRocm93RXJyb3IsXG5cdHNlcmlhbGl6ZUVycm9yOiAoKSA9PiBzZXJpYWxpemVFcnJvciQxXG59KTtcbmNvbnN0IFNFUklBTElaRURfS0VZID0gXCJfX3NlcmlhbGl6ZWRcIjtcbmNvbnN0IFNFUklBTElaRURfVkFMVUUgPSB0cnVlO1xuLyoqXG4qIEFkZCBmaXJzdC1jbGFzcyBzdXBwb3J0IGZvciBjZXJ0YWluIGVycm9ycyB0aGF0IHdlIGNvbnRyb2wsIGluIGFkZGl0aW9uIHRvXG4qIGJ1aWx0LWluIGVycm9ycyBzdWNoIGFzIGBUeXBlRXJyb3JgLlxuKlxuKiBBZGRpbmcgdGhlc2UgYWxsb3dzIHRoZXNlIG5vbi1zdGFuZGFyZCBlcnJvcnMgdG8gYmUgY29ycmVjdGx5IHNlcmlhbGl6ZWQsXG4qIHNlbnQgdG8gSW5uZ2VzdCwgdGhlbiBkZXNlcmlhbGl6ZWQgYmFjayBpbnRvIHRoZSBjb3JyZWN0IGVycm9yIHR5cGUgZm9yIHVzZXJzXG4qIHRvIHJlYWN0IHRvIGNvcnJlY3RseS5cbipcbiogTm90ZSB0aGF0IHRoZXNlIGVycm9ycyBvbmx5IHN1cHBvcnQgYG1lc3NhZ2U/OiBzdHJpbmcgfCB1bmRlZmluZWRgIGFzIHRoZVxuKiBpbnB1dDsgbW9yZSBjdXN0b20gZXJyb3JzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggdGhpcyBjdXJyZW50IHN0cmF0ZWd5LlxuKi9cbmVycm9yQ29uc3RydWN0b3JzLnNldChcIk5vblJldHJpYWJsZUVycm9yXCIsIE5vblJldHJpYWJsZUVycm9yKTtcbi8qKlxuKiBTZXJpYWxpc2UgYW4gZXJyb3IgdG8gYSBzZXJpYWxpemVkIEpTT04gc3RyaW5nLlxuKlxuKiBFcnJvcnMgZG8gbm90IHNlcmlhbGlzZSBuaWNlbHkgdG8gSlNPTiwgc28gd2UgdXNlIHRoaXMgZnVuY3Rpb24gdG8gY29udmVydFxuKiB0aGVtIHRvIGEgc2VyaWFsaXplZCBKU09OIHN0cmluZy4gRG9pbmcgdGhpcyBpcyBhbHNvIG5vbi10cml2aWFsIGZvciBzb21lXG4qIGVycm9ycywgc28gd2UgdXNlIHRoZSBgc2VyaWFsaXplLWVycm9yYCBwYWNrYWdlIHRvIGRvIGl0IGZvciB1cy5cbipcbiogU2VlIHtAbGluayBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9zZXJpYWxpemUtZXJyb3J9XG4qXG4qIFRoaXMgZnVuY3Rpb24gaXMgYSBzbWFsbCB3cmFwcGVyIGFyb3VuZCB0aGF0IHBhY2thZ2UgdG8gYWxzbyBhZGQgYSBgdHlwZWBcbiogcHJvcGVydHkgdG8gdGhlIHNlcmlhbGlzZWQgZXJyb3IsIHNvIHRoYXQgd2UgY2FuIGRpc3Rpbmd1aXNoIGJldHdlZW5cbiogc2VyaWFsaXNlZCBlcnJvcnMgYW5kIG90aGVyIG9iamVjdHMuXG4qXG4qIFdpbGwgbm90IHJlc2VyaWFsaXNlIGV4aXN0aW5nIHNlcmlhbGlzZWQgZXJyb3JzLlxuKi9cbmNvbnN0IHNlcmlhbGl6ZUVycm9yJDEgPSAoc3ViamVjdCwgYWxsb3dVbmtub3duID0gZmFsc2UpID0+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBleGlzdGluZ1NlcmlhbGl6ZWRFcnJvciA9IGlzU2VyaWFsaXplZEVycm9yKHN1YmplY3QpO1xuXHRcdGlmIChleGlzdGluZ1NlcmlhbGl6ZWRFcnJvcikgcmV0dXJuIGV4aXN0aW5nU2VyaWFsaXplZEVycm9yO1xuXHRcdGlmICh0eXBlb2Ygc3ViamVjdCA9PT0gXCJvYmplY3RcIiAmJiBzdWJqZWN0ICE9PSBudWxsKSB7XG5cdFx0XHRjb25zdCBzZXJpYWxpemVkRXJyID0gc2VyaWFsaXplRXJyb3Ioc3ViamVjdCk7XG5cdFx0XHRpZiAoIXNlcmlhbGl6ZWRFcnIubmFtZSAmJiBhbGxvd1Vua25vd24pIHJldHVybiBzdWJqZWN0O1xuXHRcdFx0Y29uc3QgcmV0ID0ge1xuXHRcdFx0XHQuLi5zZXJpYWxpemVkRXJyLFxuXHRcdFx0XHRuYW1lOiBzZXJpYWxpemVkRXJyLm5hbWUgfHwgXCJFcnJvclwiLFxuXHRcdFx0XHRtZXNzYWdlOiBzZXJpYWxpemVkRXJyLm1lc3NhZ2UgfHwgc3RyaW5naWZ5KHN1YmplY3QpIHx8IFwiVW5rbm93biBlcnJvcjsgZXJyb3Igc2VyaWFsaXphdGlvbiBjb3VsZCBub3QgZmluZCBhIG1lc3NhZ2UuXCIsXG5cdFx0XHRcdHN0YWNrOiBzZXJpYWxpemVkRXJyLnN0YWNrIHx8IFwiXCIsXG5cdFx0XHRcdFtTRVJJQUxJWkVEX0tFWV06IFNFUklBTElaRURfVkFMVUVcblx0XHRcdH07XG5cdFx0XHRsZXQgdGFyZ2V0ID0gcmV0O1xuXHRcdFx0Y29uc3QgbWF4RGVwdGggPSA1O1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBtYXhEZXB0aDsgaSsrKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgdGFyZ2V0ID09PSBcIm9iamVjdFwiICYmIHRhcmdldCAhPT0gbnVsbCAmJiBcImNhdXNlXCIgaW4gdGFyZ2V0ICYmIHRhcmdldC5jYXVzZSkge1xuXHRcdFx0XHRcdHRhcmdldCA9IHRhcmdldC5jYXVzZSA9IHNlcmlhbGl6ZUVycm9yJDEodGFyZ2V0LmNhdXNlLCB0cnVlKTtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHRcdHRocm93IG5ldyBFcnJvcihcIkVycm9yIGlzIG5vdCBhbiBvYmplY3Q7IHN0cmFuZ2UgdGhyb3cgdmFsdWUuXCIpO1xuXHR9IGNhdGNoIHtcblx0XHRpZiAoYWxsb3dVbmtub3duKSByZXR1cm4gc3ViamVjdDtcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4uc2VyaWFsaXplRXJyb3IkMShuZXcgRXJyb3IodHlwZW9mIHN1YmplY3QgPT09IFwic3RyaW5nXCIgPyBzdWJqZWN0IDogc3RyaW5naWZ5KHN1YmplY3QpKSwgZmFsc2UpLFxuXHRcdFx0XHRzdGFjazogXCJcIixcblx0XHRcdFx0W1NFUklBTElaRURfS0VZXTogU0VSSUFMSVpFRF9WQUxVRVxuXHRcdFx0fTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG5hbWU6IFwiQ291bGQgbm90IHNlcmlhbGl6ZSBzb3VyY2UgZXJyb3JcIixcblx0XHRcdFx0bWVzc2FnZTogXCJTZXJpYWxpemluZyB0aGUgc291cmNlIGVycm9yIGZhaWxlZC5cIixcblx0XHRcdFx0c3RhY2s6IFwiXCIsXG5cdFx0XHRcdFtTRVJJQUxJWkVEX0tFWV06IFNFUklBTElaRURfVkFMVUVcblx0XHRcdH07XG5cdFx0fVxuXHR9XG59O1xuLyoqXG4qIENoZWNrIGlmIGFuIG9iamVjdCBvciBhIHN0cmluZyBpcyBhIHNlcmlhbGlzZWQgZXJyb3IgY3JlYXRlZCBieVxuKiB7QGxpbmsgc2VyaWFsaXplRXJyb3J9LlxuKi9cbmNvbnN0IGlzU2VyaWFsaXplZEVycm9yID0gKHZhbHVlKSA9PiB7XG5cdHRyeSB7XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0Y29uc3QgcGFyc2VkID0gei5vYmplY3Qoe1xuXHRcdFx0XHRbU0VSSUFMSVpFRF9LRVldOiB6LmxpdGVyYWwoU0VSSUFMSVpFRF9WQUxVRSksXG5cdFx0XHRcdG5hbWU6IHouZW51bShbLi4uQXJyYXkuZnJvbShlcnJvckNvbnN0cnVjdG9ycy5rZXlzKCkpXSksXG5cdFx0XHRcdG1lc3NhZ2U6IHouc3RyaW5nKCksXG5cdFx0XHRcdHN0YWNrOiB6LnN0cmluZygpXG5cdFx0XHR9KS5wYXNzdGhyb3VnaCgpLnNhZmVQYXJzZShKU09OLnBhcnNlKHZhbHVlKSk7XG5cdFx0XHRpZiAocGFyc2VkLnN1Y2Nlc3MpIHJldHVybiBwYXJzZWQuZGF0YTtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuXHRcdFx0aWYgKE9iamVjdC5oYXNPd24odmFsdWUsIFNFUklBTElaRURfS0VZKSAmJiB2YWx1ZVtTRVJJQUxJWkVEX0tFWV0gPT09IFNFUklBTElaRURfVkFMVUUpIHJldHVybiB2YWx1ZTtcblx0XHR9XG5cdH0gY2F0Y2gge31cbn07XG4vKipcbiogRGVzZXJpYWxpc2UgYW4gZXJyb3IgY3JlYXRlZCBieSB7QGxpbmsgc2VyaWFsaXplRXJyb3J9LlxuKlxuKiBFbnN1cmVzIHdlIG9ubHkgZGVzZXJpYWxpc2UgZXJyb3JzIHRoYXQgbWVldCBhIG1pbmltdW0gbGV2ZWwgb2ZcbiogYXBwbGljYWJpbGl0eSwgaW5jbHVzaXZlIG9mIGVycm9yIGhhbmRsaW5nIHRvIGVuc3VyZSB0aGF0IGJhZGx5IHNlcmlhbGl6ZWRcbiogZXJyb3JzIGFyZSBzdGlsbCBoYW5kbGVkLlxuKi9cbmNvbnN0IGRlc2VyaWFsaXplRXJyb3IkMSA9IChzdWJqZWN0LCBhbGxvd1Vua25vd24gPSBmYWxzZSkgPT4ge1xuXHRjb25zdCByZXF1aXJlZEZpZWxkcyA9IFtcIm5hbWVcIiwgXCJtZXNzYWdlXCJdO1xuXHR0cnkge1xuXHRcdGlmICghcmVxdWlyZWRGaWVsZHMuZXZlcnkoKGZpZWxkKSA9PiB7XG5cdFx0XHRyZXR1cm4gT2JqZWN0Lmhhc093bihzdWJqZWN0LCBmaWVsZCk7XG5cdFx0fSkpIHRocm93IG5ldyBFcnJvcigpO1xuXHRcdGNvbnN0IGRlc2VyaWFsaXplZEVyciA9IGRlc2VyaWFsaXplRXJyb3Ioc3ViamVjdCk7XG5cdFx0aWYgKFwiY2F1c2VcIiBpbiBkZXNlcmlhbGl6ZWRFcnIpIGRlc2VyaWFsaXplZEVyci5jYXVzZSA9IGRlc2VyaWFsaXplRXJyb3IkMShkZXNlcmlhbGl6ZWRFcnIuY2F1c2UsIHRydWUpO1xuXHRcdHJldHVybiBkZXNlcmlhbGl6ZWRFcnI7XG5cdH0gY2F0Y2gge1xuXHRcdGlmIChhbGxvd1Vua25vd24pIHJldHVybiBzdWJqZWN0O1xuXHRcdGNvbnN0IGVyciA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoXCJVbmtub3duIGVycm9yOyBjb3VsZCBub3QgcmVzZXJpYWxpemVcIik7XG5cdFx0LyoqXG5cdFx0KiBSZW1vdmUgdGhlIHN0YWNrIHNvIHRoYXQgaXQncyBub3QgbWlzbGVhZGluZ2x5IHNob3duIGFzIHRoZSBJbm5nZXN0XG5cdFx0KiBpbnRlcm5hbHMuXG5cdFx0Ki9cblx0XHRlcnIuc3RhY2sgPSB2b2lkIDA7XG5cdFx0cmV0dXJuIGVycjtcblx0fVxufTtcbmxldCBFcnJDb2RlID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKEVyckNvZGUkMSkge1xuXHRFcnJDb2RlJDFbXCJORVNUSU5HX1NURVBTXCJdID0gXCJORVNUSU5HX1NURVBTXCI7XG5cdC8qKlxuXHQqIExlZ2FjeSB2MCBleGVjdXRpb24gZXJyb3IgY29kZSBmb3Igd2hlbiBhIGZ1bmN0aW9uIGhhcyBjaGFuZ2VkIGFuZCBub1xuXHQqIGxvbmdlciBtYXRjaGVzIGl0cyBpbi1wcm9ncmVzcyBzdGF0ZS5cblx0KlxuXHQqIEBkZXByZWNhdGVkIE5vdCBmb3IgdXNlIGluIGxhdGVzdCBleGVjdXRpb24gbWV0aG9kLlxuXHQqL1xuXHRFcnJDb2RlJDFbXCJOT05fREVURVJNSU5JU1RJQ19GVU5DVElPTlwiXSA9IFwiTk9OX0RFVEVSTUlOSVNUSUNfRlVOQ1RJT05cIjtcblx0LyoqXG5cdCogTGVnYWN5IHYwIGV4ZWN1dGlvbiBlcnJvciBjb2RlIGZvciB3aGVuIGEgZnVuY3Rpb24gaXMgZm91bmQgdG8gYmUgdXNpbmdcblx0KiBhc3luYyBhY3Rpb25zIGFmdGVyIG1lbW96aWF0aW9uIGhhcyBvY2N1cnJlZCwgd2hpY2ggdjAgZG9lc24ndCBzdXBwb3J0LlxuXHQqXG5cdCogQGRlcHJlY2F0ZWQgTm90IGZvciB1c2UgaW4gbGF0ZXN0IGV4ZWN1dGlvbiBtZXRob2QuXG5cdCovXG5cdEVyckNvZGUkMVtcIkFTWU5DX0RFVEVDVEVEX0FGVEVSX01FTU9JWkFUSU9OXCJdID0gXCJBU1lOQ19ERVRFQ1RFRF9BRlRFUl9NRU1PSVpBVElPTlwiO1xuXHQvKipcblx0KiBMZWdhY3kgdjAgZXhlY3V0aW9uIGVycm9yIGNvZGUgZm9yIHdoZW4gYSBmdW5jdGlvbiBpcyBmb3VuZCB0byBiZSB1c2luZ1xuXHQqIHN0ZXBzIGFmdGVyIGEgbm9uLXN0ZXAgYXN5bmMgYWN0aW9uIGhhcyBvY2N1cnJlZC5cblx0KlxuXHQqIEBkZXByZWNhdGVkIE5vdCBmb3IgdXNlIGluIGxhdGVzdCBleGVjdXRpb24gbWV0aG9kLlxuXHQqL1xuXHRFcnJDb2RlJDFbXCJTVEVQX1VTRURfQUZURVJfQVNZTkNcIl0gPSBcIlNURVBfVVNFRF9BRlRFUl9BU1lOQ1wiO1xuXHRFcnJDb2RlJDFbXCJBVVRPTUFUSUNfUEFSQUxMRUxfSU5ERVhJTkdcIl0gPSBcIkFVVE9NQVRJQ19QQVJBTExFTF9JTkRFWElOR1wiO1xuXHRFcnJDb2RlJDFbXCJOT05ERVRFUk1JTklTVElDX1NURVBTXCJdID0gXCJOT05ERVRFUk1JTklTVElDX1NURVBTXCI7XG5cdHJldHVybiBFcnJDb2RlJDE7XG59KHt9KTtcbmNvbnN0IHByZXR0eUVycm9yU3BsaXR0ZXIgPSBcIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIjtcbi8qKlxuKiBHaXZlbiBhbiB1bmtub3duIGBlcnJgLCBtdXRhdGUgaXQgdG8gbWluaWZ5IGFueSBwcmV0dHkgZXJyb3JzIHRoYXQgaXRcbiogY29udGFpbnMuXG4qL1xuY29uc3QgbWluaWZ5UHJldHR5RXJyb3IgPSAoZXJyKSA9PiB7XG5cdHRyeSB7XG5cdFx0aWYgKCFpc0Vycm9yKGVycikpIHJldHVybiBlcnI7XG5cdFx0aWYgKCFlcnIubWVzc2FnZS5pbmNsdWRlcyhwcmV0dHlFcnJvclNwbGl0dGVyKSkgcmV0dXJuIGVycjtcblx0XHRjb25zdCBzYW5pdGl6ZWRNZXNzYWdlID0gc3RyaXBBbnNpKGVyci5tZXNzYWdlKTtcblx0XHRjb25zdCBtZXNzYWdlID0gc2FuaXRpemVkTWVzc2FnZS5zcGxpdChcIiAgXCIpWzFdPy5zcGxpdChcIlxcblwiKVswXT8udHJpbSgpIHx8IGVyci5tZXNzYWdlO1xuXHRcdGVyci5tZXNzYWdlID0gW3Nhbml0aXplZE1lc3NhZ2Uuc3BsaXQoXCJcXG5cXG5Db2RlOiBcIilbMV0/LnNwbGl0KFwiXFxuXFxuXCIpWzBdPy50cmltKCkgfHwgdm9pZCAwLCBtZXNzYWdlXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiAtIFwiKTtcblx0XHRpZiAoZXJyLnN0YWNrKSB7XG5cdFx0XHRjb25zdCBzdGFja1Jlc3QgPSBzdHJpcEFuc2koZXJyLnN0YWNrKS5zcGxpdChgJHtwcmV0dHlFcnJvclNwbGl0dGVyfVxcbmApLnNsaWNlKDIpLmpvaW4oXCJcXG5cIik7XG5cdFx0XHRlcnIuc3RhY2sgPSBgJHtlcnIubmFtZX06ICR7ZXJyLm1lc3NhZ2V9XFxuJHtzdGFja1Jlc3R9YDtcblx0XHR9XG5cdFx0cmV0dXJuIGVycjtcblx0fSBjYXRjaCAoX25vb3BFcnIpIHtcblx0XHRyZXR1cm4gZXJyO1xuXHR9XG59O1xuLyoqXG4qIEdpdmVuIGFuIGBlcnJgLCByZXR1cm4gYSBib29sZWFuIHJlcHJlc2VudGluZyB3aGV0aGVyIGl0IGlzIGluIHRoZSBzaGFwZSBvZlxuKiBhbiBgRXJyb3JgIG9yIG5vdC5cbiovXG5jb25zdCBpc0Vycm9yID0gKGVycikgPT4ge1xuXHR0cnkge1xuXHRcdGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikgcmV0dXJuIHRydWU7XG5cdFx0aWYgKHR5cGVvZiBlcnIgIT09IFwib2JqZWN0XCIgfHwgZXJyID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIE9iamVjdC5oYXNPd24oZXJyLCBcIm5hbWVcIikgJiYgT2JqZWN0Lmhhc093bihlcnIsIFwibWVzc2FnZVwiKTtcblx0fSBjYXRjaCAoX25vb3BFcnIpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG4vKipcbiogR2l2ZW4gYW4gYHVua25vd25gIG9iamVjdCwgcmV0cmlldmUgdGhlIGBtZXNzYWdlYCBwcm9wZXJ0eSBmcm9tIGl0LCBvciBmYWxsXG4qIGJhY2sgdG8gdGhlIGBmYWxsYmFja2Agc3RyaW5nIGlmIGl0IGRvZXNuJ3QgZXhpc3Qgb3IgaXMgZW1wdHkuXG4qL1xuY29uc3QgZ2V0RXJyb3JNZXNzYWdlID0gKGVyciwgZmFsbGJhY2spID0+IHtcblx0Y29uc3QgeyBtZXNzYWdlIH0gPSB6Lm9iamVjdCh7IG1lc3NhZ2U6IHouc3RyaW5nKCkubWluKDEpIH0pLmNhdGNoKHsgbWVzc2FnZTogZmFsbGJhY2sgfSkucGFyc2UoZXJyKTtcblx0cmV0dXJuIG1lc3NhZ2U7XG59O1xuLyoqXG4qIEdpdmVuIGEge0BsaW5rIFByZXR0eUVycm9yfSwgcmV0dXJuIGEgbmljZWx5LWZvcm1hdHRlZCBzdHJpbmcgcmVhZHkgdG8gbG9nXG4qIG9yIHRocm93LlxuKlxuKiBVc2VmdWwgZm9yIGVuc3VyaW5nIHRoYXQgZXJyb3JzIGFyZSBsb2dnZWQgaW4gYSBjb25zaXN0ZW50LCBoZWxwZnVsIGZvcm1hdFxuKiBhY3Jvc3MgdGhlIFNESyBieSBwcm9tcHRpbmcgZm9yIGtleSBwaWVjZXMgb2YgaW5mb3JtYXRpb24uXG4qL1xuY29uc3QgcHJldHR5RXJyb3IgPSAoeyB0eXBlID0gXCJlcnJvclwiLCB3aGF0SGFwcGVuZWQsIG90aGVyd2lzZSwgcmVhc3N1cmFuY2UsIHRvRml4Tm93LCB3aHksIGNvbnNlcXVlbmNlcywgc3RhY2ssIGNvZGUgfSkgPT4ge1xuXHRjb25zdCB7IGljb24sIGNvbG9yRm4gfSA9IHtcblx0XHRlcnJvcjoge1xuXHRcdFx0aWNvbjogXCLinYxcIixcblx0XHRcdGNvbG9yRm46IGNoYWxrLnJlZFxuXHRcdH0sXG5cdFx0d2Fybjoge1xuXHRcdFx0aWNvbjogXCLimqDvuI9cIixcblx0XHRcdGNvbG9yRm46IGNoYWxrLnllbGxvd1xuXHRcdH1cblx0fVt0eXBlXTtcblx0bGV0IGhlYWRlciA9IGAke2ljb259ICAke2NoYWxrLmJvbGQudW5kZXJsaW5lKHdoYXRIYXBwZW5lZC50cmltKCkpfWA7XG5cdGlmIChzdGFjaykgaGVhZGVyICs9IFwiXFxuXCIgKyBbLi4uKC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoKSkuc3RhY2s/LnNwbGl0KFwiXFxuXCIpLnNsaWNlKDEpLmZpbHRlcihCb29sZWFuKSB8fCBbXV0uam9pbihcIlxcblwiKTtcblx0bGV0IHRvRml4Tm93U3RyID0gKEFycmF5LmlzQXJyYXkodG9GaXhOb3cpID8gdG9GaXhOb3cubWFwKChzKSA9PiBzLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pLm1hcCgocywgaSkgPT4gYFxcdCR7aSArIDF9LiAke3N9YCkuam9pbihcIlxcblwiKSA6IHRvRml4Tm93Py50cmltKCkpID8/IFwiXCI7XG5cdGlmIChBcnJheS5pc0FycmF5KHRvRml4Tm93KSAmJiB0b0ZpeE5vd1N0cikgdG9GaXhOb3dTdHIgPSBgVG8gZml4IHRoaXMsIHlvdSBjYW4gdGFrZSBvbmUgb2YgdGhlIGZvbGxvd2luZyBjb3Vyc2VzIG9mIGFjdGlvbjpcXG5cXG4ke3RvRml4Tm93U3RyfWA7XG5cdGxldCBib2R5ID0gW1xuXHRcdHJlYXNzdXJhbmNlPy50cmltKCksXG5cdFx0d2h5Py50cmltKCksXG5cdFx0Y29uc2VxdWVuY2VzPy50cmltKClcblx0XS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIik7XG5cdGJvZHkgKz0gYm9keSA/IGBcXG5cXG4ke3RvRml4Tm93U3RyfWAgOiB0b0ZpeE5vd1N0cjtcblx0Y29uc3QgdHJhaWxlciA9IFtvdGhlcndpc2U/LnRyaW0oKV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xuXHRyZXR1cm4gY29sb3JGbihbXG5cdFx0cHJldHR5RXJyb3JTcGxpdHRlcixcblx0XHRoZWFkZXIsXG5cdFx0Ym9keSxcblx0XHR0cmFpbGVyLFxuXHRcdGNvZGUgPyBgQ29kZTogJHtjb2RlfWAgOiBcIlwiLFxuXHRcdHByZXR0eUVycm9yU3BsaXR0ZXJcblx0XS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblxcblwiKSk7XG59O1xuY29uc3QgZml4RXZlbnRLZXlNaXNzaW5nU3RlcHMgPSBbXG5cdFwiU2V0IHRoZSBgSU5OR0VTVF9FVkVOVF9LRVlgIGVudmlyb25tZW50IHZhcmlhYmxlXCIsXG5cdGBQYXNzIGEga2V5IHRvIHRoZSBcXGBuZXcgSW5uZ2VzdCgpXFxgIGNvbnN0cnVjdG9yIHVzaW5nIHRoZSBcXGBldmVudEtleVxcYCBvcHRpb25gLFxuXHRgVXNlIFxcYGlubmdlc3Quc2V0RXZlbnRLZXkoKVxcYCBhdCBydW50aW1lYFxuXTtcbi8qKlxuKiBBbiBlcnJvciB0aGF0LCB3aGVuIHRocm93biwgaW5kaWNhdGVzIGludGVybmFsbHkgdGhhdCBhbiBvdXRnb2luZyBvcGVyYXRpb25cbiogY29udGFpbnMgYW4gZXJyb3IuXG4qXG4qIFdlIHVzZSB0aGlzIGJlY2F1c2Ugc2VyaWFsaXplZCBgZGF0YWAgc2VudCBiYWNrIHRvIElubmdlc3QgbWF5IGRpZmZlciBmcm9tXG4qIHRoZSBlcnJvciBpbnN0YW5jZSBpdHNlbGYgZHVlIHRvIG1pZGRsZXdhcmUuXG4qXG4qIEBpbnRlcm5hbFxuKi9cbnZhciBPdXRnb2luZ1Jlc3VsdEVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG5cdHJlc3VsdDtcblx0Y29uc3RydWN0b3IocmVzdWx0KSB7XG5cdFx0c3VwZXIoXCJPdXRnb2luZ09wRXJyb3JcIik7XG5cdFx0dGhpcy5yZXN1bHQgPSByZXN1bHQ7XG5cdH1cbn07XG4vKipcbiogQ3JlYXRlIGEgZnVuY3Rpb24gdGhhdCB3aWxsIHJldGhyb3cgYW4gZXJyb3Igd2l0aCBhIHByZWZpeCBhZGRlZCB0byB0aGVcbiogbWVzc2FnZS5cbipcbiogVXNlZnVsIGZvciBhZGRpbmcgY29udGV4dCB0byBlcnJvcnMgdGhhdCBhcmUgcmV0aHJvd24uXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGF3YWl0IGRvU29tZUFjdGlvbigpLmNhdGNoKHJldGhyb3dFcnJvcihcIkZhaWxlZCB0byBkbyBzb21lIGFjdGlvblwiKSk7XG4qIGBgYFxuKi9cbmNvbnN0IHJldGhyb3dFcnJvciA9IChwcmVmaXgpID0+IHtcblx0cmV0dXJuIChlcnIpID0+IHtcblx0XHR0cnkge1xuXHRcdFx0ZXJyLm1lc3NhZ2UgJiY9IGAke3ByZWZpeH07ICR7ZXJyLm1lc3NhZ2V9YDtcblx0XHR9IGNhdGNoIChfbm9vcEVycikge30gZmluYWxseSB7XG5cdFx0XHR0aHJvdyBlcnI7XG5cdFx0fVxuXHR9O1xufTtcbi8qKlxuKiBMZWdhY3kgdjAgZXhlY3V0aW9uIGVycm9yIGZvciBmdW5jdGlvbnMgdGhhdCBkb24ndCBzdXBwb3J0IG1peGluZyBzdGVwcyBhbmRcbiogcmVndWxhciBhc3luYyBhY3Rpb25zLlxuKi9cbmNvbnN0IGZ1bmN0aW9uU3RvcHBlZFJ1bm5pbmdFcnIgPSAoY29kZSkgPT4ge1xuXHRyZXR1cm4gcHJldHR5RXJyb3Ioe1xuXHRcdHdoYXRIYXBwZW5lZDogXCJZb3VyIGZ1bmN0aW9uIHdhcyBzdG9wcGVkIGZyb20gcnVubmluZ1wiLFxuXHRcdHdoeTogXCJXZSBkZXRlY3RlZCBhIG1peCBvZiBhc3luY2hyb25vdXMgbG9naWMsIHNvbWUgdXNpbmcgc3RlcCB0b29saW5nIGFuZCBzb21lIG5vdC5cIixcblx0XHRjb25zZXF1ZW5jZXM6IFwiVGhpcyBjYW4gY2F1c2UgdW5leHBlY3RlZCBiZWhhdmlvdXIgd2hlbiBhIGZ1bmN0aW9uIGlzIHBhdXNlZCBhbmQgcmVzdW1lZCBhbmQgaXMgdGhlcmVmb3JlIHN0cm9uZ2x5IGRpc2NvdXJhZ2VkOyB3ZSBzdG9wcGVkIHlvdXIgZnVuY3Rpb24gdG8gZW5zdXJlIG5vdGhpbmcgdW5leHBlY3RlZCBoYXBwZW5lZCFcIixcblx0XHRzdGFjazogdHJ1ZSxcblx0XHR0b0ZpeE5vdzogXCJFbnN1cmUgdGhhdCB5b3VyIGZ1bmN0aW9uIGlzIGVpdGhlciBlbnRpcmVseSBzdGVwLWJhc2VkIG9yIGVudGlyZWx5IG5vbi1zdGVwLWJhc2VkLCBieSBlaXRoZXIgd3JhcHBpbmcgYWxsIGFzeW5jaHJvbm91cyBsb2dpYyBpbiBgc3RlcC5ydW4oKWAgY2FsbHMgb3IgYnkgcmVtb3ZpbmcgYWxsIGBzdGVwLiooKWAgY2FsbHMuXCIsXG5cdFx0b3RoZXJ3aXNlOiBcIkZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHdoeSBzdGVwIGZ1bmN0aW9ucyB3b3JrIGluIHRoaXMgbWFubmVyLCBzZWUgaHR0cHM6Ly93d3cuaW5uZ2VzdC5jb20vZG9jcy9mdW5jdGlvbnMvbXVsdGktc3RlcCNnb3RjaGFzXCIsXG5cdFx0Y29kZVxuXHR9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRXJyQ29kZSwgZGVzZXJpYWxpemVFcnJvciQxIGFzIGRlc2VyaWFsaXplRXJyb3IsIGVycm9yc19leHBvcnRzLCBmaXhFdmVudEtleU1pc3NpbmdTdGVwcywgZnVuY3Rpb25TdG9wcGVkUnVubmluZ0VyciwgZ2V0RXJyb3JNZXNzYWdlLCBtaW5pZnlQcmV0dHlFcnJvciwgcHJldHR5RXJyb3IsIHJldGhyb3dFcnJvciwgc2VyaWFsaXplRXJyb3IkMSBhcyBzZXJpYWxpemVFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/functions.js":
/*!***************************************************!*\
  !*** ./node_modules/inngest/helpers/functions.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheFn: () => (/* binding */ cacheFn),\n/* harmony export */   fetchAllFnData: () => (/* binding */ fetchAllFnData),\n/* harmony export */   parseFnData: () => (/* binding */ parseFnData),\n/* harmony export */   undefinedToNull: () => (/* binding */ undefinedToNull),\n/* harmony export */   waterfall: () => (/* binding */ waterfall)\n/* harmony export */ });\n/* harmony import */ var _consts_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _api_schema_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/schema.js */ \"(rsc)/./node_modules/inngest/api/schema.js\");\n/* harmony import */ var _components_execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/execution/InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n\n\n\n\n\n\n\n//#region src/helpers/functions.ts\n/**\n* Wraps a function with a cache. When the returned function is run, it will\n* cache the result and return it on subsequent calls.\n*/\nconst cacheFn = (fn) => {\n\tconst key = \"value\";\n\tconst cache = /* @__PURE__ */ new Map();\n\treturn ((...args) => {\n\t\tif (!cache.has(key)) cache.set(key, fn(...args));\n\t\treturn cache.get(key);\n\t});\n};\n/**\n* Given an array of functions, return a new function that will run each\n* function in series and return the result of the final function. Regardless of\n* if the functions are synchronous or asynchronous, they'll be made into an\n* async promise chain.\n*\n* If an error is thrown, the waterfall will stop and return the error.\n*\n* Because this needs to support both sync and async functions, it only allows\n* functions that accept a single argument.\n*/\nconst waterfall = (fns, transform) => {\n\treturn (...args) => {\n\t\treturn fns.reduce(async (acc, fn) => {\n\t\t\tconst prev = await acc;\n\t\t\tconst output = await fn(prev);\n\t\t\tif (transform) return await transform(prev, output);\n\t\t\tif (typeof output === \"undefined\") return prev;\n\t\t\treturn output;\n\t\t}, Promise.resolve(args[0]));\n\t};\n};\n/**\n* Given a value `v`, return `v` if it's not undefined, otherwise return `null`.\n*/\nconst undefinedToNull = (v) => {\n\treturn typeof v === \"undefined\" ? null : v;\n};\nconst fnDataVersionSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ version: zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(-1).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(0)).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(1)).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(2)).optional().transform((v) => {\n\tif (typeof v === \"undefined\") {\n\t\tconsole.debug(`No request version specified by executor; defaulting to v${_components_execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_1__.PREFERRED_EXECUTION_VERSION}`);\n\t\treturn {\n\t\t\tsdkDecided: true,\n\t\t\tversion: _components_execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_1__.PREFERRED_EXECUTION_VERSION\n\t\t};\n\t}\n\tif (v === -1) return {\n\t\tsdkDecided: true,\n\t\tversion: _components_execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_1__.PREFERRED_EXECUTION_VERSION\n\t};\n\treturn {\n\t\tsdkDecided: false,\n\t\tversion: v\n\t};\n}) });\nconst parseFnData = (data) => {\n\tlet version;\n\ttry {\n\t\tconst parsedVersionData = fnDataVersionSchema.parse(data);\n\t\tversion = parsedVersionData.version.version;\n\t\tconst sdkDecided = parsedVersionData.version.sdkDecided;\n\t\treturn {\n\t\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0]: () => ({\n\t\t\t\tversion: _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0,\n\t\t\t\tsdkDecided,\n\t\t\t\t...zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()),\n\t\t\t\t\tevents: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any())).default([]),\n\t\t\t\t\tsteps: _api_schema_js__WEBPACK_IMPORTED_MODULE_3__.stepsSchemas[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0],\n\t\t\t\t\tctx: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\trun_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n\t\t\t\t\t\tattempt: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().default(0),\n\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.string()).nullable().transform((v) => Array.isArray(v) ? v : []),\n\t\t\t\t\t\t\tcurrent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number()\n\t\t\t\t\t\t}).optional().nullable()\n\t\t\t\t\t}).optional().nullable(),\n\t\t\t\t\tuse_api: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false)\n\t\t\t\t}).parse(data)\n\t\t\t}),\n\t\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1]: () => ({\n\t\t\t\tversion: _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1,\n\t\t\t\tsdkDecided,\n\t\t\t\t...zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()),\n\t\t\t\t\tevents: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any())).default([]),\n\t\t\t\t\tsteps: _api_schema_js__WEBPACK_IMPORTED_MODULE_3__.stepsSchemas[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1],\n\t\t\t\t\tctx: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\trun_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n\t\t\t\t\t\tfn_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\t\t\t\t\t\tattempt: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().default(0),\n\t\t\t\t\t\tmax_attempts: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n\t\t\t\t\t\tdisable_immediate_execution: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false),\n\t\t\t\t\t\tuse_api: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false),\n\t\t\t\t\t\tqi_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.string()).nullable().transform((v) => Array.isArray(v) ? v : []),\n\t\t\t\t\t\t\tcurrent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number()\n\t\t\t\t\t\t}).optional().nullable()\n\t\t\t\t\t}).optional().nullable()\n\t\t\t\t}).parse(data)\n\t\t\t}),\n\t\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2]: () => ({\n\t\t\t\tversion: _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2,\n\t\t\t\tsdkDecided,\n\t\t\t\t...zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()),\n\t\t\t\t\tevents: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any())).default([]),\n\t\t\t\t\tsteps: _api_schema_js__WEBPACK_IMPORTED_MODULE_3__.stepsSchemas[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2],\n\t\t\t\t\tctx: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\trun_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n\t\t\t\t\t\tfn_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\t\t\t\t\t\tattempt: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().default(0),\n\t\t\t\t\t\tmax_attempts: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n\t\t\t\t\t\tdisable_immediate_execution: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false),\n\t\t\t\t\t\tuse_api: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false),\n\t\t\t\t\t\tqi_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.string()).nullable().transform((v) => Array.isArray(v) ? v : []),\n\t\t\t\t\t\t\tcurrent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number()\n\t\t\t\t\t\t}).optional().nullable()\n\t\t\t\t\t}).optional().nullable()\n\t\t\t\t}).parse(data)\n\t\t\t})\n\t\t}[version]();\n\t} catch (err$1) {\n\t\tthrow new Error(parseFailureErr(err$1));\n\t}\n};\nconst fetchAllFnData = async ({ data, api, version }) => {\n\tconst result = { ...data };\n\tconst shouldFetchData = {\n\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0]: () => result.version === _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0 && result.use_api,\n\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1]: () => result.version === _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1 && Boolean(result.ctx?.use_api),\n\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2]: () => result.version === _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2 && Boolean(result.ctx?.use_api)\n\t};\n\ttry {\n\t\tif (shouldFetchData[result.version]()) {\n\t\t\tif (!result.ctx?.run_id) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)((0,_errors_js__WEBPACK_IMPORTED_MODULE_5__.prettyError)({\n\t\t\t\twhatHappened: \"failed to attempt retrieving data from API\",\n\t\t\t\tconsequences: \"function execution can't continue\",\n\t\t\t\twhy: \"run_id is missing from context\",\n\t\t\t\tstack: true\n\t\t\t}));\n\t\t\tconst [evtResp, stepResp] = await Promise.all([api.getRunBatch(result.ctx.run_id), api.getRunSteps(result.ctx.run_id, version)]);\n\t\t\tif (evtResp.ok) result.events = evtResp.value;\n\t\t\telse return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)((0,_errors_js__WEBPACK_IMPORTED_MODULE_5__.prettyError)({\n\t\t\t\twhatHappened: \"failed to retrieve list of events\",\n\t\t\t\tconsequences: \"function execution can't continue\",\n\t\t\t\twhy: evtResp.error?.error,\n\t\t\t\tstack: true\n\t\t\t}));\n\t\t\tif (stepResp.ok) result.steps = stepResp.value;\n\t\t\telse return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)((0,_errors_js__WEBPACK_IMPORTED_MODULE_5__.prettyError)({\n\t\t\t\twhatHappened: \"failed to retrieve steps for function run\",\n\t\t\t\tconsequences: \"function execution can't continue\",\n\t\t\t\twhy: stepResp.error?.error,\n\t\t\t\tstack: true\n\t\t\t}));\n\t\t}\n\t\tconst stepIds = Object.keys(result.steps || {});\n\t\tif (stepIds.length && !result.ctx?.stack?.stack?.length) result.ctx = {\n\t\t\t...result.ctx,\n\t\t\tstack: {\n\t\t\t\tstack: stepIds,\n\t\t\t\tcurrent: stepIds.length - 1\n\t\t\t}\n\t\t};\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(result);\n\t} catch (error) {\n\t\tconsole.error(error);\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(parseFailureErr(error));\n\t}\n};\nconst parseFailureErr = (err$1) => {\n\tlet why;\n\tif (err$1 instanceof zod_v3__WEBPACK_IMPORTED_MODULE_6__.ZodError) why = err$1.toString();\n\treturn (0,_errors_js__WEBPACK_IMPORTED_MODULE_5__.prettyError)({\n\t\twhatHappened: \"Failed to parse data from executor.\",\n\t\tconsequences: \"Function execution can't continue.\",\n\t\ttoFixNow: \"Make sure that your API is set up to parse incoming request bodies as JSON, like body-parser for Express (https://expressjs.com/en/resources/middleware/body-parser.html).\",\n\t\tstack: true,\n\t\twhy\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=functions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2Z1bmN0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDVDtBQUNVO0FBQzBDO0FBQ2hEO0FBQ0w7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBDQUFRLEdBQUcsU0FBUywyQ0FBUyxRQUFRLDJDQUFTLFFBQVEsMkNBQVMsUUFBUSwyQ0FBUztBQUM1RztBQUNBLDJEQUEyRCxpQkFBaUIsa0dBQTJCLENBQUM7QUFDeEc7QUFDQTtBQUNBLFlBQVksa0dBQTJCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrR0FBMkI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3REFBZ0I7QUFDcEIsYUFBYSx3REFBZ0I7QUFDN0I7QUFDQSxPQUFPLDBDQUFRO0FBQ2YsWUFBWSwwQ0FBUSxDQUFDLHVDQUFLO0FBQzFCLGFBQWEseUNBQU8sQ0FBQywwQ0FBUSxDQUFDLHVDQUFLO0FBQ25DLFlBQVksd0RBQVksQ0FBQyx3REFBZ0I7QUFDekMsVUFBVSwwQ0FBUTtBQUNsQixjQUFjLDBDQUFRO0FBQ3RCLGVBQWUsMENBQVE7QUFDdkIsYUFBYSwwQ0FBUTtBQUNyQixjQUFjLHlDQUFPLENBQUMsMENBQVE7QUFDOUIsZ0JBQWdCLDBDQUFRO0FBQ3hCLE9BQU87QUFDUCxNQUFNO0FBQ04sY0FBYywyQ0FBUztBQUN2QixLQUFLO0FBQ0wsSUFBSTtBQUNKLElBQUksd0RBQWdCO0FBQ3BCLGFBQWEsd0RBQWdCO0FBQzdCO0FBQ0EsT0FBTywwQ0FBUTtBQUNmLFlBQVksMENBQVEsQ0FBQyx1Q0FBSztBQUMxQixhQUFhLHlDQUFPLENBQUMsMENBQVEsQ0FBQyx1Q0FBSztBQUNuQyxZQUFZLHdEQUFZLENBQUMsd0RBQWdCO0FBQ3pDLFVBQVUsMENBQVE7QUFDbEIsY0FBYywwQ0FBUTtBQUN0QixhQUFhLDBDQUFRO0FBQ3JCLGVBQWUsMENBQVE7QUFDdkIsb0JBQW9CLDBDQUFRO0FBQzVCLG1DQUFtQywyQ0FBUztBQUM1QyxlQUFlLDJDQUFTO0FBQ3hCLGFBQWEsMENBQVE7QUFDckIsYUFBYSwwQ0FBUTtBQUNyQixjQUFjLHlDQUFPLENBQUMsMENBQVE7QUFDOUIsZ0JBQWdCLDBDQUFRO0FBQ3hCLE9BQU87QUFDUCxNQUFNO0FBQ04sS0FBSztBQUNMLElBQUk7QUFDSixJQUFJLHdEQUFnQjtBQUNwQixhQUFhLHdEQUFnQjtBQUM3QjtBQUNBLE9BQU8sMENBQVE7QUFDZixZQUFZLDBDQUFRLENBQUMsdUNBQUs7QUFDMUIsYUFBYSx5Q0FBTyxDQUFDLDBDQUFRLENBQUMsdUNBQUs7QUFDbkMsWUFBWSx3REFBWSxDQUFDLHdEQUFnQjtBQUN6QyxVQUFVLDBDQUFRO0FBQ2xCLGNBQWMsMENBQVE7QUFDdEIsYUFBYSwwQ0FBUTtBQUNyQixlQUFlLDBDQUFRO0FBQ3ZCLG9CQUFvQiwwQ0FBUTtBQUM1QixtQ0FBbUMsMkNBQVM7QUFDNUMsZUFBZSwyQ0FBUztBQUN4QixhQUFhLDBDQUFRO0FBQ3JCLGFBQWEsMENBQVE7QUFDckIsY0FBYyx5Q0FBTyxDQUFDLDBDQUFRO0FBQzlCLGdCQUFnQiwwQ0FBUTtBQUN4QixPQUFPO0FBQ1AsTUFBTTtBQUNOLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNILEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0JBQW9CO0FBQ3BELGtCQUFrQjtBQUNsQjtBQUNBLEdBQUcsd0RBQWdCLCtCQUErQix3REFBZ0I7QUFDbEUsR0FBRyx3REFBZ0IsK0JBQStCLHdEQUFnQjtBQUNsRSxHQUFHLHdEQUFnQiwrQkFBK0Isd0RBQWdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw4Q0FBRyxDQUFDLHVEQUFXO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxlQUFlLDhDQUFHLENBQUMsdURBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxlQUFlLDhDQUFHLENBQUMsdURBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZDQUFFO0FBQ1gsR0FBRztBQUNIO0FBQ0EsU0FBUyw4Q0FBRztBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDRDQUFRO0FBQzlCLFFBQVEsdURBQVc7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUM0RTtBQUM1RSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvaGVscGVycy9mdW5jdGlvbnMuanM/ZjE5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeGVjdXRpb25WZXJzaW9uIH0gZnJvbSBcIi4vY29uc3RzLmpzXCI7XG5pbXBvcnQgeyBlcnIsIG9rIH0gZnJvbSBcIi4uL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBzdGVwc1NjaGVtYXMgfSBmcm9tIFwiLi4vYXBpL3NjaGVtYS5qc1wiO1xuaW1wb3J0IHsgUFJFRkVSUkVEX0VYRUNVVElPTl9WRVJTSU9OIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZXhlY3V0aW9uL0lubmdlc3RFeGVjdXRpb24uanNcIjtcbmltcG9ydCB7IHByZXR0eUVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBab2RFcnJvciwgeiB9IGZyb20gXCJ6b2QvdjNcIjtcblxuLy8jcmVnaW9uIHNyYy9oZWxwZXJzL2Z1bmN0aW9ucy50c1xuLyoqXG4qIFdyYXBzIGEgZnVuY3Rpb24gd2l0aCBhIGNhY2hlLiBXaGVuIHRoZSByZXR1cm5lZCBmdW5jdGlvbiBpcyBydW4sIGl0IHdpbGxcbiogY2FjaGUgdGhlIHJlc3VsdCBhbmQgcmV0dXJuIGl0IG9uIHN1YnNlcXVlbnQgY2FsbHMuXG4qL1xuY29uc3QgY2FjaGVGbiA9IChmbikgPT4ge1xuXHRjb25zdCBrZXkgPSBcInZhbHVlXCI7XG5cdGNvbnN0IGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0cmV0dXJuICgoLi4uYXJncykgPT4ge1xuXHRcdGlmICghY2FjaGUuaGFzKGtleSkpIGNhY2hlLnNldChrZXksIGZuKC4uLmFyZ3MpKTtcblx0XHRyZXR1cm4gY2FjaGUuZ2V0KGtleSk7XG5cdH0pO1xufTtcbi8qKlxuKiBHaXZlbiBhbiBhcnJheSBvZiBmdW5jdGlvbnMsIHJldHVybiBhIG5ldyBmdW5jdGlvbiB0aGF0IHdpbGwgcnVuIGVhY2hcbiogZnVuY3Rpb24gaW4gc2VyaWVzIGFuZCByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgZmluYWwgZnVuY3Rpb24uIFJlZ2FyZGxlc3Mgb2ZcbiogaWYgdGhlIGZ1bmN0aW9ucyBhcmUgc3luY2hyb25vdXMgb3IgYXN5bmNocm9ub3VzLCB0aGV5J2xsIGJlIG1hZGUgaW50byBhblxuKiBhc3luYyBwcm9taXNlIGNoYWluLlxuKlxuKiBJZiBhbiBlcnJvciBpcyB0aHJvd24sIHRoZSB3YXRlcmZhbGwgd2lsbCBzdG9wIGFuZCByZXR1cm4gdGhlIGVycm9yLlxuKlxuKiBCZWNhdXNlIHRoaXMgbmVlZHMgdG8gc3VwcG9ydCBib3RoIHN5bmMgYW5kIGFzeW5jIGZ1bmN0aW9ucywgaXQgb25seSBhbGxvd3NcbiogZnVuY3Rpb25zIHRoYXQgYWNjZXB0IGEgc2luZ2xlIGFyZ3VtZW50LlxuKi9cbmNvbnN0IHdhdGVyZmFsbCA9IChmbnMsIHRyYW5zZm9ybSkgPT4ge1xuXHRyZXR1cm4gKC4uLmFyZ3MpID0+IHtcblx0XHRyZXR1cm4gZm5zLnJlZHVjZShhc3luYyAoYWNjLCBmbikgPT4ge1xuXHRcdFx0Y29uc3QgcHJldiA9IGF3YWl0IGFjYztcblx0XHRcdGNvbnN0IG91dHB1dCA9IGF3YWl0IGZuKHByZXYpO1xuXHRcdFx0aWYgKHRyYW5zZm9ybSkgcmV0dXJuIGF3YWl0IHRyYW5zZm9ybShwcmV2LCBvdXRwdXQpO1xuXHRcdFx0aWYgKHR5cGVvZiBvdXRwdXQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBwcmV2O1xuXHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHR9LCBQcm9taXNlLnJlc29sdmUoYXJnc1swXSkpO1xuXHR9O1xufTtcbi8qKlxuKiBHaXZlbiBhIHZhbHVlIGB2YCwgcmV0dXJuIGB2YCBpZiBpdCdzIG5vdCB1bmRlZmluZWQsIG90aGVyd2lzZSByZXR1cm4gYG51bGxgLlxuKi9cbmNvbnN0IHVuZGVmaW5lZFRvTnVsbCA9ICh2KSA9PiB7XG5cdHJldHVybiB0eXBlb2YgdiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiB2O1xufTtcbmNvbnN0IGZuRGF0YVZlcnNpb25TY2hlbWEgPSB6Lm9iamVjdCh7IHZlcnNpb246IHoubGl0ZXJhbCgtMSkub3Ioei5saXRlcmFsKDApKS5vcih6LmxpdGVyYWwoMSkpLm9yKHoubGl0ZXJhbCgyKSkub3B0aW9uYWwoKS50cmFuc2Zvcm0oKHYpID0+IHtcblx0aWYgKHR5cGVvZiB2ID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0Y29uc29sZS5kZWJ1ZyhgTm8gcmVxdWVzdCB2ZXJzaW9uIHNwZWNpZmllZCBieSBleGVjdXRvcjsgZGVmYXVsdGluZyB0byB2JHtQUkVGRVJSRURfRVhFQ1VUSU9OX1ZFUlNJT059YCk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNka0RlY2lkZWQ6IHRydWUsXG5cdFx0XHR2ZXJzaW9uOiBQUkVGRVJSRURfRVhFQ1VUSU9OX1ZFUlNJT05cblx0XHR9O1xuXHR9XG5cdGlmICh2ID09PSAtMSkgcmV0dXJuIHtcblx0XHRzZGtEZWNpZGVkOiB0cnVlLFxuXHRcdHZlcnNpb246IFBSRUZFUlJFRF9FWEVDVVRJT05fVkVSU0lPTlxuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdHNka0RlY2lkZWQ6IGZhbHNlLFxuXHRcdHZlcnNpb246IHZcblx0fTtcbn0pIH0pO1xuY29uc3QgcGFyc2VGbkRhdGEgPSAoZGF0YSkgPT4ge1xuXHRsZXQgdmVyc2lvbjtcblx0dHJ5IHtcblx0XHRjb25zdCBwYXJzZWRWZXJzaW9uRGF0YSA9IGZuRGF0YVZlcnNpb25TY2hlbWEucGFyc2UoZGF0YSk7XG5cdFx0dmVyc2lvbiA9IHBhcnNlZFZlcnNpb25EYXRhLnZlcnNpb24udmVyc2lvbjtcblx0XHRjb25zdCBzZGtEZWNpZGVkID0gcGFyc2VkVmVyc2lvbkRhdGEudmVyc2lvbi5zZGtEZWNpZGVkO1xuXHRcdHJldHVybiB7XG5cdFx0XHRbRXhlY3V0aW9uVmVyc2lvbi5WMF06ICgpID0+ICh7XG5cdFx0XHRcdHZlcnNpb246IEV4ZWN1dGlvblZlcnNpb24uVjAsXG5cdFx0XHRcdHNka0RlY2lkZWQsXG5cdFx0XHRcdC4uLnoub2JqZWN0KHtcblx0XHRcdFx0XHRldmVudDogei5yZWNvcmQoei5hbnkoKSksXG5cdFx0XHRcdFx0ZXZlbnRzOiB6LmFycmF5KHoucmVjb3JkKHouYW55KCkpKS5kZWZhdWx0KFtdKSxcblx0XHRcdFx0XHRzdGVwczogc3RlcHNTY2hlbWFzW0V4ZWN1dGlvblZlcnNpb24uVjBdLFxuXHRcdFx0XHRcdGN0eDogei5vYmplY3Qoe1xuXHRcdFx0XHRcdFx0cnVuX2lkOiB6LnN0cmluZygpLFxuXHRcdFx0XHRcdFx0YXR0ZW1wdDogei5udW1iZXIoKS5kZWZhdWx0KDApLFxuXHRcdFx0XHRcdFx0c3RhY2s6IHoub2JqZWN0KHtcblx0XHRcdFx0XHRcdFx0c3RhY2s6IHouYXJyYXkoei5zdHJpbmcoKSkubnVsbGFibGUoKS50cmFuc2Zvcm0oKHYpID0+IEFycmF5LmlzQXJyYXkodikgPyB2IDogW10pLFxuXHRcdFx0XHRcdFx0XHRjdXJyZW50OiB6Lm51bWJlcigpXG5cdFx0XHRcdFx0XHR9KS5vcHRpb25hbCgpLm51bGxhYmxlKClcblx0XHRcdFx0XHR9KS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG5cdFx0XHRcdFx0dXNlX2FwaTogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSlcblx0XHRcdFx0fSkucGFyc2UoZGF0YSlcblx0XHRcdH0pLFxuXHRcdFx0W0V4ZWN1dGlvblZlcnNpb24uVjFdOiAoKSA9PiAoe1xuXHRcdFx0XHR2ZXJzaW9uOiBFeGVjdXRpb25WZXJzaW9uLlYxLFxuXHRcdFx0XHRzZGtEZWNpZGVkLFxuXHRcdFx0XHQuLi56Lm9iamVjdCh7XG5cdFx0XHRcdFx0ZXZlbnQ6IHoucmVjb3JkKHouYW55KCkpLFxuXHRcdFx0XHRcdGV2ZW50czogei5hcnJheSh6LnJlY29yZCh6LmFueSgpKSkuZGVmYXVsdChbXSksXG5cdFx0XHRcdFx0c3RlcHM6IHN0ZXBzU2NoZW1hc1tFeGVjdXRpb25WZXJzaW9uLlYxXSxcblx0XHRcdFx0XHRjdHg6IHoub2JqZWN0KHtcblx0XHRcdFx0XHRcdHJ1bl9pZDogei5zdHJpbmcoKSxcblx0XHRcdFx0XHRcdGZuX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRcdFx0XHRhdHRlbXB0OiB6Lm51bWJlcigpLmRlZmF1bHQoMCksXG5cdFx0XHRcdFx0XHRtYXhfYXR0ZW1wdHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcblx0XHRcdFx0XHRcdGRpc2FibGVfaW1tZWRpYXRlX2V4ZWN1dGlvbjogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG5cdFx0XHRcdFx0XHR1c2VfYXBpOiB6LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcblx0XHRcdFx0XHRcdHFpX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRcdFx0XHRzdGFjazogei5vYmplY3Qoe1xuXHRcdFx0XHRcdFx0XHRzdGFjazogei5hcnJheSh6LnN0cmluZygpKS5udWxsYWJsZSgpLnRyYW5zZm9ybSgodikgPT4gQXJyYXkuaXNBcnJheSh2KSA/IHYgOiBbXSksXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnQ6IHoubnVtYmVyKClcblx0XHRcdFx0XHRcdH0pLm9wdGlvbmFsKCkubnVsbGFibGUoKVxuXHRcdFx0XHRcdH0pLm9wdGlvbmFsKCkubnVsbGFibGUoKVxuXHRcdFx0XHR9KS5wYXJzZShkYXRhKVxuXHRcdFx0fSksXG5cdFx0XHRbRXhlY3V0aW9uVmVyc2lvbi5WMl06ICgpID0+ICh7XG5cdFx0XHRcdHZlcnNpb246IEV4ZWN1dGlvblZlcnNpb24uVjIsXG5cdFx0XHRcdHNka0RlY2lkZWQsXG5cdFx0XHRcdC4uLnoub2JqZWN0KHtcblx0XHRcdFx0XHRldmVudDogei5yZWNvcmQoei5hbnkoKSksXG5cdFx0XHRcdFx0ZXZlbnRzOiB6LmFycmF5KHoucmVjb3JkKHouYW55KCkpKS5kZWZhdWx0KFtdKSxcblx0XHRcdFx0XHRzdGVwczogc3RlcHNTY2hlbWFzW0V4ZWN1dGlvblZlcnNpb24uVjJdLFxuXHRcdFx0XHRcdGN0eDogei5vYmplY3Qoe1xuXHRcdFx0XHRcdFx0cnVuX2lkOiB6LnN0cmluZygpLFxuXHRcdFx0XHRcdFx0Zm5faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRcdFx0XHRcdGF0dGVtcHQ6IHoubnVtYmVyKCkuZGVmYXVsdCgwKSxcblx0XHRcdFx0XHRcdG1heF9hdHRlbXB0czogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuXHRcdFx0XHRcdFx0ZGlzYWJsZV9pbW1lZGlhdGVfZXhlY3V0aW9uOiB6LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcblx0XHRcdFx0XHRcdHVzZV9hcGk6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuXHRcdFx0XHRcdFx0cWlfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRcdFx0XHRcdHN0YWNrOiB6Lm9iamVjdCh7XG5cdFx0XHRcdFx0XHRcdHN0YWNrOiB6LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCkudHJhbnNmb3JtKCh2KSA9PiBBcnJheS5pc0FycmF5KHYpID8gdiA6IFtdKSxcblx0XHRcdFx0XHRcdFx0Y3VycmVudDogei5udW1iZXIoKVxuXHRcdFx0XHRcdFx0fSkub3B0aW9uYWwoKS5udWxsYWJsZSgpXG5cdFx0XHRcdFx0fSkub3B0aW9uYWwoKS5udWxsYWJsZSgpXG5cdFx0XHRcdH0pLnBhcnNlKGRhdGEpXG5cdFx0XHR9KVxuXHRcdH1bdmVyc2lvbl0oKTtcblx0fSBjYXRjaCAoZXJyJDEpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IocGFyc2VGYWlsdXJlRXJyKGVyciQxKSk7XG5cdH1cbn07XG5jb25zdCBmZXRjaEFsbEZuRGF0YSA9IGFzeW5jICh7IGRhdGEsIGFwaSwgdmVyc2lvbiB9KSA9PiB7XG5cdGNvbnN0IHJlc3VsdCA9IHsgLi4uZGF0YSB9O1xuXHRjb25zdCBzaG91bGRGZXRjaERhdGEgPSB7XG5cdFx0W0V4ZWN1dGlvblZlcnNpb24uVjBdOiAoKSA9PiByZXN1bHQudmVyc2lvbiA9PT0gRXhlY3V0aW9uVmVyc2lvbi5WMCAmJiByZXN1bHQudXNlX2FwaSxcblx0XHRbRXhlY3V0aW9uVmVyc2lvbi5WMV06ICgpID0+IHJlc3VsdC52ZXJzaW9uID09PSBFeGVjdXRpb25WZXJzaW9uLlYxICYmIEJvb2xlYW4ocmVzdWx0LmN0eD8udXNlX2FwaSksXG5cdFx0W0V4ZWN1dGlvblZlcnNpb24uVjJdOiAoKSA9PiByZXN1bHQudmVyc2lvbiA9PT0gRXhlY3V0aW9uVmVyc2lvbi5WMiAmJiBCb29sZWFuKHJlc3VsdC5jdHg/LnVzZV9hcGkpXG5cdH07XG5cdHRyeSB7XG5cdFx0aWYgKHNob3VsZEZldGNoRGF0YVtyZXN1bHQudmVyc2lvbl0oKSkge1xuXHRcdFx0aWYgKCFyZXN1bHQuY3R4Py5ydW5faWQpIHJldHVybiBlcnIocHJldHR5RXJyb3Ioe1xuXHRcdFx0XHR3aGF0SGFwcGVuZWQ6IFwiZmFpbGVkIHRvIGF0dGVtcHQgcmV0cmlldmluZyBkYXRhIGZyb20gQVBJXCIsXG5cdFx0XHRcdGNvbnNlcXVlbmNlczogXCJmdW5jdGlvbiBleGVjdXRpb24gY2FuJ3QgY29udGludWVcIixcblx0XHRcdFx0d2h5OiBcInJ1bl9pZCBpcyBtaXNzaW5nIGZyb20gY29udGV4dFwiLFxuXHRcdFx0XHRzdGFjazogdHJ1ZVxuXHRcdFx0fSkpO1xuXHRcdFx0Y29uc3QgW2V2dFJlc3AsIHN0ZXBSZXNwXSA9IGF3YWl0IFByb21pc2UuYWxsKFthcGkuZ2V0UnVuQmF0Y2gocmVzdWx0LmN0eC5ydW5faWQpLCBhcGkuZ2V0UnVuU3RlcHMocmVzdWx0LmN0eC5ydW5faWQsIHZlcnNpb24pXSk7XG5cdFx0XHRpZiAoZXZ0UmVzcC5vaykgcmVzdWx0LmV2ZW50cyA9IGV2dFJlc3AudmFsdWU7XG5cdFx0XHRlbHNlIHJldHVybiBlcnIocHJldHR5RXJyb3Ioe1xuXHRcdFx0XHR3aGF0SGFwcGVuZWQ6IFwiZmFpbGVkIHRvIHJldHJpZXZlIGxpc3Qgb2YgZXZlbnRzXCIsXG5cdFx0XHRcdGNvbnNlcXVlbmNlczogXCJmdW5jdGlvbiBleGVjdXRpb24gY2FuJ3QgY29udGludWVcIixcblx0XHRcdFx0d2h5OiBldnRSZXNwLmVycm9yPy5lcnJvcixcblx0XHRcdFx0c3RhY2s6IHRydWVcblx0XHRcdH0pKTtcblx0XHRcdGlmIChzdGVwUmVzcC5vaykgcmVzdWx0LnN0ZXBzID0gc3RlcFJlc3AudmFsdWU7XG5cdFx0XHRlbHNlIHJldHVybiBlcnIocHJldHR5RXJyb3Ioe1xuXHRcdFx0XHR3aGF0SGFwcGVuZWQ6IFwiZmFpbGVkIHRvIHJldHJpZXZlIHN0ZXBzIGZvciBmdW5jdGlvbiBydW5cIixcblx0XHRcdFx0Y29uc2VxdWVuY2VzOiBcImZ1bmN0aW9uIGV4ZWN1dGlvbiBjYW4ndCBjb250aW51ZVwiLFxuXHRcdFx0XHR3aHk6IHN0ZXBSZXNwLmVycm9yPy5lcnJvcixcblx0XHRcdFx0c3RhY2s6IHRydWVcblx0XHRcdH0pKTtcblx0XHR9XG5cdFx0Y29uc3Qgc3RlcElkcyA9IE9iamVjdC5rZXlzKHJlc3VsdC5zdGVwcyB8fCB7fSk7XG5cdFx0aWYgKHN0ZXBJZHMubGVuZ3RoICYmICFyZXN1bHQuY3R4Py5zdGFjaz8uc3RhY2s/Lmxlbmd0aCkgcmVzdWx0LmN0eCA9IHtcblx0XHRcdC4uLnJlc3VsdC5jdHgsXG5cdFx0XHRzdGFjazoge1xuXHRcdFx0XHRzdGFjazogc3RlcElkcyxcblx0XHRcdFx0Y3VycmVudDogc3RlcElkcy5sZW5ndGggLSAxXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRyZXR1cm4gb2socmVzdWx0KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRyZXR1cm4gZXJyKHBhcnNlRmFpbHVyZUVycihlcnJvcikpO1xuXHR9XG59O1xuY29uc3QgcGFyc2VGYWlsdXJlRXJyID0gKGVyciQxKSA9PiB7XG5cdGxldCB3aHk7XG5cdGlmIChlcnIkMSBpbnN0YW5jZW9mIFpvZEVycm9yKSB3aHkgPSBlcnIkMS50b1N0cmluZygpO1xuXHRyZXR1cm4gcHJldHR5RXJyb3Ioe1xuXHRcdHdoYXRIYXBwZW5lZDogXCJGYWlsZWQgdG8gcGFyc2UgZGF0YSBmcm9tIGV4ZWN1dG9yLlwiLFxuXHRcdGNvbnNlcXVlbmNlczogXCJGdW5jdGlvbiBleGVjdXRpb24gY2FuJ3QgY29udGludWUuXCIsXG5cdFx0dG9GaXhOb3c6IFwiTWFrZSBzdXJlIHRoYXQgeW91ciBBUEkgaXMgc2V0IHVwIHRvIHBhcnNlIGluY29taW5nIHJlcXVlc3QgYm9kaWVzIGFzIEpTT04sIGxpa2UgYm9keS1wYXJzZXIgZm9yIEV4cHJlc3MgKGh0dHBzOi8vZXhwcmVzc2pzLmNvbS9lbi9yZXNvdXJjZXMvbWlkZGxld2FyZS9ib2R5LXBhcnNlci5odG1sKS5cIixcblx0XHRzdGFjazogdHJ1ZSxcblx0XHR3aHlcblx0fSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNhY2hlRm4sIGZldGNoQWxsRm5EYXRhLCBwYXJzZUZuRGF0YSwgdW5kZWZpbmVkVG9OdWxsLCB3YXRlcmZhbGwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZ1bmN0aW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/functions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/net.js":
/*!*********************************************!*\
  !*** ./node_modules/inngest/helpers/net.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchWithAuthFallback: () => (/* binding */ fetchWithAuthFallback),\n/* harmony export */   signDataWithKey: () => (/* binding */ signDataWithKey)\n/* harmony export */ });\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n/* harmony import */ var canonicalize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! canonicalize */ \"(rsc)/./node_modules/canonicalize/lib/canonicalize.js\");\n\n\n\n//#region src/helpers/net.ts\nconst { hmac, sha256 } = hash_js__WEBPACK_IMPORTED_MODULE_0__;\n/**\n* Send an HTTP request with the given signing key. If the response is a 401 or\n* 403, then try again with the fallback signing key\n*/\nasync function fetchWithAuthFallback({ authToken, authTokenFallback, fetch, options, url }) {\n\tlet res = await fetch(url, {\n\t\t...options,\n\t\theaders: {\n\t\t\t...options?.headers,\n\t\t\tAuthorization: `Bearer ${authToken}`\n\t\t}\n\t});\n\tif ([401, 403].includes(res.status) && authTokenFallback) res = await fetch(url, {\n\t\t...options,\n\t\theaders: {\n\t\t\t...options?.headers,\n\t\t\tAuthorization: `Bearer ${authTokenFallback}`\n\t\t}\n\t});\n\treturn res;\n}\nfunction signDataWithKey(data, signingKey, ts) {\n\tconst encoded = typeof data === \"string\" ? data : canonicalize__WEBPACK_IMPORTED_MODULE_1__(data);\n\treturn hmac(sha256, signingKey.replace(/signkey-\\w+-/, \"\")).update(encoded).update(ts).digest(\"hex\");\n}\n\n//#endregion\n\n//# sourceMappingURL=net.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL25ldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZCO0FBQ1c7O0FBRXhDO0FBQ0EsUUFBUSxlQUFlLEVBQUUsb0NBQU07QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsbURBQW1EO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFVBQVU7QUFDdEM7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0JBQWtCO0FBQzlDO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCx5Q0FBWTtBQUMvRDtBQUNBOztBQUVBO0FBQ2tEO0FBQ2xEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL25ldC5qcz80NDQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBoYXNoanMgZnJvbSBcImhhc2guanNcIjtcbmltcG9ydCBjYW5vbmljYWxpemUgZnJvbSBcImNhbm9uaWNhbGl6ZVwiO1xuXG4vLyNyZWdpb24gc3JjL2hlbHBlcnMvbmV0LnRzXG5jb25zdCB7IGhtYWMsIHNoYTI1NiB9ID0gaGFzaGpzO1xuLyoqXG4qIFNlbmQgYW4gSFRUUCByZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHNpZ25pbmcga2V5LiBJZiB0aGUgcmVzcG9uc2UgaXMgYSA0MDEgb3JcbiogNDAzLCB0aGVuIHRyeSBhZ2FpbiB3aXRoIHRoZSBmYWxsYmFjayBzaWduaW5nIGtleVxuKi9cbmFzeW5jIGZ1bmN0aW9uIGZldGNoV2l0aEF1dGhGYWxsYmFjayh7IGF1dGhUb2tlbiwgYXV0aFRva2VuRmFsbGJhY2ssIGZldGNoLCBvcHRpb25zLCB1cmwgfSkge1xuXHRsZXQgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG5cdFx0Li4ub3B0aW9ucyxcblx0XHRoZWFkZXJzOiB7XG5cdFx0XHQuLi5vcHRpb25zPy5oZWFkZXJzLFxuXHRcdFx0QXV0aG9yaXphdGlvbjogYEJlYXJlciAke2F1dGhUb2tlbn1gXG5cdFx0fVxuXHR9KTtcblx0aWYgKFs0MDEsIDQwM10uaW5jbHVkZXMocmVzLnN0YXR1cykgJiYgYXV0aFRva2VuRmFsbGJhY2spIHJlcyA9IGF3YWl0IGZldGNoKHVybCwge1xuXHRcdC4uLm9wdGlvbnMsXG5cdFx0aGVhZGVyczoge1xuXHRcdFx0Li4ub3B0aW9ucz8uaGVhZGVycyxcblx0XHRcdEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthdXRoVG9rZW5GYWxsYmFja31gXG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIHNpZ25EYXRhV2l0aEtleShkYXRhLCBzaWduaW5nS2V5LCB0cykge1xuXHRjb25zdCBlbmNvZGVkID0gdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgPyBkYXRhIDogY2Fub25pY2FsaXplKGRhdGEpO1xuXHRyZXR1cm4gaG1hYyhzaGEyNTYsIHNpZ25pbmdLZXkucmVwbGFjZSgvc2lnbmtleS1cXHcrLS8sIFwiXCIpKS51cGRhdGUoZW5jb2RlZCkudXBkYXRlKHRzKS5kaWdlc3QoXCJoZXhcIik7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZmV0Y2hXaXRoQXV0aEZhbGxiYWNrLCBzaWduRGF0YVdpdGhLZXkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/net.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/promises.js":
/*!**************************************************!*\
  !*** ./node_modules/inngest/helpers/promises.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferredPromise: () => (/* binding */ createDeferredPromise),\n/* harmony export */   createDeferredPromiseWithStack: () => (/* binding */ createDeferredPromiseWithStack),\n/* harmony export */   createTimeoutPromise: () => (/* binding */ createTimeoutPromise),\n/* harmony export */   goIntervalTiming: () => (/* binding */ goIntervalTiming),\n/* harmony export */   resolveAfterPending: () => (/* binding */ resolveAfterPending),\n/* harmony export */   resolveNextTick: () => (/* binding */ resolveNextTick),\n/* harmony export */   retryWithBackoff: () => (/* binding */ retryWithBackoff),\n/* harmony export */   runAsPromise: () => (/* binding */ runAsPromise)\n/* harmony export */ });\n//#region src/helpers/promises.ts\n/**\n* Some environments don't allow access to the global queueMicrotask(). While we\n* had assumed this was only true for those powered by earlier versions of Node\n* (<14) that we don't officially support, Vercel's Edge Functions also obscure\n* the function in dev, even though the platform it's based on (Cloudflare\n* Workers) appropriately exposes it. Even worse, production Vercel Edge\n* Functions can see the function, but it immediately blows up the function when\n* used.\n*\n* Therefore, we can fall back to a reasonable alternative of\n* `Promise.resolve().then(fn)` instead. This _may_ be slightly slower in modern\n* environments, but at least we can still work in these environments.\n*/\nconst shimQueueMicrotask = (callback) => {\n\tPromise.resolve().then(callback);\n};\n/**\n* Returns a Promise that resolves after the current event loop's microtasks\n* have finished, but before the next event loop tick.\n*/\nconst resolveAfterPending = (count = 100) => {\n\t/**\n\t* This uses a brute force implementation that will continue to enqueue\n\t* microtasks 10 times before resolving. This is to ensure that the microtask\n\t* queue is drained, even if the microtask queue is being manipulated by other\n\t* code.\n\t*\n\t* While this still doesn't guarantee that the microtask queue is drained,\n\t* it's our best bet for giving other non-controlled promises a chance to\n\t* resolve before we continue without resorting to falling in to the next\n\t* tick.\n\t*/\n\treturn new Promise((resolve) => {\n\t\tlet i = 0;\n\t\tconst iterate = () => {\n\t\t\tshimQueueMicrotask(() => {\n\t\t\t\tif (i++ > count) return resolve();\n\t\t\t\titerate();\n\t\t\t});\n\t\t};\n\t\titerate();\n\t});\n};\n/**\n* Creates and returns Promise that can be resolved or rejected with the\n* returned `resolve` and `reject` functions.\n*\n* Resolving or rejecting the function will return a new set of Promise control\n* functions. These can be ignored if the original Promise is all that's needed.\n*/\nconst createDeferredPromise = () => {\n\tlet resolve;\n\tlet reject;\n\treturn {\n\t\tpromise: new Promise((_resolve, _reject) => {\n\t\t\tresolve = (value) => {\n\t\t\t\t_resolve(value);\n\t\t\t\treturn createDeferredPromise();\n\t\t\t};\n\t\t\treject = (reason) => {\n\t\t\t\t_reject(reason);\n\t\t\t\treturn createDeferredPromise();\n\t\t\t};\n\t\t}),\n\t\tresolve,\n\t\treject\n\t};\n};\n/**\n* Creates and returns a deferred Promise that can be resolved or rejected with\n* the returned `resolve` and `reject` functions.\n*\n* For each Promise resolved or rejected this way, this will also keep a stack\n* of all unhandled Promises, resolved or rejected.\n*\n* Once a Promise is read, it is removed from the stack.\n*/\nconst createDeferredPromiseWithStack = () => {\n\tconst settledPromises = [];\n\tlet rotateQueue = () => {};\n\tconst results = (async function* () {\n\t\twhile (true) {\n\t\t\tconst next = settledPromises.shift();\n\t\t\tif (next) yield next;\n\t\t\telse await new Promise((resolve) => {\n\t\t\t\trotateQueue = resolve;\n\t\t\t});\n\t\t}\n\t})();\n\tconst shimDeferredPromise = (deferred) => {\n\t\tconst originalResolve = deferred.resolve;\n\t\tconst originalReject = deferred.reject;\n\t\tdeferred.resolve = (value) => {\n\t\t\tsettledPromises.push(deferred.promise);\n\t\t\trotateQueue();\n\t\t\treturn shimDeferredPromise(originalResolve(value));\n\t\t};\n\t\tdeferred.reject = (reason) => {\n\t\t\tsettledPromises.push(deferred.promise);\n\t\t\trotateQueue();\n\t\t\treturn shimDeferredPromise(originalReject(reason));\n\t\t};\n\t\treturn deferred;\n\t};\n\treturn {\n\t\tdeferred: shimDeferredPromise(createDeferredPromise()),\n\t\tresults\n\t};\n};\n/**\n* Creates a Promise that will resolve after the given duration, along with\n* methods to start, clear, and reset the timeout.\n*/\nconst createTimeoutPromise = (duration) => {\n\tconst { promise, resolve } = createDeferredPromise();\n\tlet timeout;\n\tlet ret;\n\tconst start = () => {\n\t\tif (timeout) return ret;\n\t\ttimeout = setTimeout(() => {\n\t\t\tresolve();\n\t\t}, duration);\n\t\treturn ret;\n\t};\n\tconst clear = () => {\n\t\tclearTimeout(timeout);\n\t\ttimeout = void 0;\n\t};\n\tconst reset = () => {\n\t\tclear();\n\t\treturn start();\n\t};\n\tret = Object.assign(promise, {\n\t\tstart,\n\t\tclear,\n\t\treset\n\t});\n\treturn ret;\n};\n/**\n* Take any function and safely promisify such that both synchronous and\n* asynchronous errors are caught and returned as a rejected Promise.\n*\n* The passed `fn` can be undefined to support functions that may conditionally\n* be defined.\n*/\nconst runAsPromise = (fn) => {\n\treturn Promise.resolve().then(fn);\n};\n/**\n* Returns a Promise that resolve after the current event loop tick.\n*/\nconst resolveNextTick = () => {\n\treturn new Promise((resolve) => setTimeout(resolve));\n};\nconst retryWithBackoff = async (fn, opts) => {\n\tconst maxAttempts = opts?.maxAttempts || 5;\n\tconst baseDelay = opts?.baseDelay ?? 100;\n\tfor (let attempt = 1; attempt <= maxAttempts; attempt++) try {\n\t\treturn await fn();\n\t} catch (err) {\n\t\tif (attempt >= maxAttempts) throw err;\n\t\tconst jitter = Math.random() * baseDelay;\n\t\tconst delay = baseDelay * Math.pow(2, attempt - 1) + jitter;\n\t\tawait new Promise((resolve) => setTimeout(resolve, delay));\n\t}\n\tthrow new Error(\"Max retries reached; this should be unreachable.\");\n};\n/**\n* Given a function, returns a Promise that resolves with the result of the\n* function and a Go-compatible `interval.Interval` timing object.\n*/\nconst goIntervalTiming = async (fn) => {\n\tconst start = Date.now();\n\tconst resultPromise = runAsPromise(fn);\n\ttry {\n\t\tawait resultPromise;\n\t} catch {}\n\tconst end = Date.now();\n\treturn {\n\t\tresultPromise,\n\t\tinterval: {\n\t\t\ta: start * 1e6,\n\t\t\tb: (end - start) * 1e6\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=promises.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3Byb21pc2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtQkFBbUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdCQUF3QjtBQUMvQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMrSztBQUMvSyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvaGVscGVycy9wcm9taXNlcy5qcz8zZmIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvaGVscGVycy9wcm9taXNlcy50c1xuLyoqXG4qIFNvbWUgZW52aXJvbm1lbnRzIGRvbid0IGFsbG93IGFjY2VzcyB0byB0aGUgZ2xvYmFsIHF1ZXVlTWljcm90YXNrKCkuIFdoaWxlIHdlXG4qIGhhZCBhc3N1bWVkIHRoaXMgd2FzIG9ubHkgdHJ1ZSBmb3IgdGhvc2UgcG93ZXJlZCBieSBlYXJsaWVyIHZlcnNpb25zIG9mIE5vZGVcbiogKDwxNCkgdGhhdCB3ZSBkb24ndCBvZmZpY2lhbGx5IHN1cHBvcnQsIFZlcmNlbCdzIEVkZ2UgRnVuY3Rpb25zIGFsc28gb2JzY3VyZVxuKiB0aGUgZnVuY3Rpb24gaW4gZGV2LCBldmVuIHRob3VnaCB0aGUgcGxhdGZvcm0gaXQncyBiYXNlZCBvbiAoQ2xvdWRmbGFyZVxuKiBXb3JrZXJzKSBhcHByb3ByaWF0ZWx5IGV4cG9zZXMgaXQuIEV2ZW4gd29yc2UsIHByb2R1Y3Rpb24gVmVyY2VsIEVkZ2VcbiogRnVuY3Rpb25zIGNhbiBzZWUgdGhlIGZ1bmN0aW9uLCBidXQgaXQgaW1tZWRpYXRlbHkgYmxvd3MgdXAgdGhlIGZ1bmN0aW9uIHdoZW5cbiogdXNlZC5cbipcbiogVGhlcmVmb3JlLCB3ZSBjYW4gZmFsbCBiYWNrIHRvIGEgcmVhc29uYWJsZSBhbHRlcm5hdGl2ZSBvZlxuKiBgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmbilgIGluc3RlYWQuIFRoaXMgX21heV8gYmUgc2xpZ2h0bHkgc2xvd2VyIGluIG1vZGVyblxuKiBlbnZpcm9ubWVudHMsIGJ1dCBhdCBsZWFzdCB3ZSBjYW4gc3RpbGwgd29yayBpbiB0aGVzZSBlbnZpcm9ubWVudHMuXG4qL1xuY29uc3Qgc2hpbVF1ZXVlTWljcm90YXNrID0gKGNhbGxiYWNrKSA9PiB7XG5cdFByb21pc2UucmVzb2x2ZSgpLnRoZW4oY2FsbGJhY2spO1xufTtcbi8qKlxuKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHRoZSBjdXJyZW50IGV2ZW50IGxvb3AncyBtaWNyb3Rhc2tzXG4qIGhhdmUgZmluaXNoZWQsIGJ1dCBiZWZvcmUgdGhlIG5leHQgZXZlbnQgbG9vcCB0aWNrLlxuKi9cbmNvbnN0IHJlc29sdmVBZnRlclBlbmRpbmcgPSAoY291bnQgPSAxMDApID0+IHtcblx0LyoqXG5cdCogVGhpcyB1c2VzIGEgYnJ1dGUgZm9yY2UgaW1wbGVtZW50YXRpb24gdGhhdCB3aWxsIGNvbnRpbnVlIHRvIGVucXVldWVcblx0KiBtaWNyb3Rhc2tzIDEwIHRpbWVzIGJlZm9yZSByZXNvbHZpbmcuIFRoaXMgaXMgdG8gZW5zdXJlIHRoYXQgdGhlIG1pY3JvdGFza1xuXHQqIHF1ZXVlIGlzIGRyYWluZWQsIGV2ZW4gaWYgdGhlIG1pY3JvdGFzayBxdWV1ZSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBvdGhlclxuXHQqIGNvZGUuXG5cdCpcblx0KiBXaGlsZSB0aGlzIHN0aWxsIGRvZXNuJ3QgZ3VhcmFudGVlIHRoYXQgdGhlIG1pY3JvdGFzayBxdWV1ZSBpcyBkcmFpbmVkLFxuXHQqIGl0J3Mgb3VyIGJlc3QgYmV0IGZvciBnaXZpbmcgb3RoZXIgbm9uLWNvbnRyb2xsZWQgcHJvbWlzZXMgYSBjaGFuY2UgdG9cblx0KiByZXNvbHZlIGJlZm9yZSB3ZSBjb250aW51ZSB3aXRob3V0IHJlc29ydGluZyB0byBmYWxsaW5nIGluIHRvIHRoZSBuZXh0XG5cdCogdGljay5cblx0Ki9cblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0bGV0IGkgPSAwO1xuXHRcdGNvbnN0IGl0ZXJhdGUgPSAoKSA9PiB7XG5cdFx0XHRzaGltUXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuXHRcdFx0XHRpZiAoaSsrID4gY291bnQpIHJldHVybiByZXNvbHZlKCk7XG5cdFx0XHRcdGl0ZXJhdGUoKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0aXRlcmF0ZSgpO1xuXHR9KTtcbn07XG4vKipcbiogQ3JlYXRlcyBhbmQgcmV0dXJucyBQcm9taXNlIHRoYXQgY2FuIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIHdpdGggdGhlXG4qIHJldHVybmVkIGByZXNvbHZlYCBhbmQgYHJlamVjdGAgZnVuY3Rpb25zLlxuKlxuKiBSZXNvbHZpbmcgb3IgcmVqZWN0aW5nIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiBhIG5ldyBzZXQgb2YgUHJvbWlzZSBjb250cm9sXG4qIGZ1bmN0aW9ucy4gVGhlc2UgY2FuIGJlIGlnbm9yZWQgaWYgdGhlIG9yaWdpbmFsIFByb21pc2UgaXMgYWxsIHRoYXQncyBuZWVkZWQuXG4qL1xuY29uc3QgY3JlYXRlRGVmZXJyZWRQcm9taXNlID0gKCkgPT4ge1xuXHRsZXQgcmVzb2x2ZTtcblx0bGV0IHJlamVjdDtcblx0cmV0dXJuIHtcblx0XHRwcm9taXNlOiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIF9yZWplY3QpID0+IHtcblx0XHRcdHJlc29sdmUgPSAodmFsdWUpID0+IHtcblx0XHRcdFx0X3Jlc29sdmUodmFsdWUpO1xuXHRcdFx0XHRyZXR1cm4gY3JlYXRlRGVmZXJyZWRQcm9taXNlKCk7XG5cdFx0XHR9O1xuXHRcdFx0cmVqZWN0ID0gKHJlYXNvbikgPT4ge1xuXHRcdFx0XHRfcmVqZWN0KHJlYXNvbik7XG5cdFx0XHRcdHJldHVybiBjcmVhdGVEZWZlcnJlZFByb21pc2UoKTtcblx0XHRcdH07XG5cdFx0fSksXG5cdFx0cmVzb2x2ZSxcblx0XHRyZWplY3Rcblx0fTtcbn07XG4vKipcbiogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGRlZmVycmVkIFByb21pc2UgdGhhdCBjYW4gYmUgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgd2l0aFxuKiB0aGUgcmV0dXJuZWQgYHJlc29sdmVgIGFuZCBgcmVqZWN0YCBmdW5jdGlvbnMuXG4qXG4qIEZvciBlYWNoIFByb21pc2UgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgdGhpcyB3YXksIHRoaXMgd2lsbCBhbHNvIGtlZXAgYSBzdGFja1xuKiBvZiBhbGwgdW5oYW5kbGVkIFByb21pc2VzLCByZXNvbHZlZCBvciByZWplY3RlZC5cbipcbiogT25jZSBhIFByb21pc2UgaXMgcmVhZCwgaXQgaXMgcmVtb3ZlZCBmcm9tIHRoZSBzdGFjay5cbiovXG5jb25zdCBjcmVhdGVEZWZlcnJlZFByb21pc2VXaXRoU3RhY2sgPSAoKSA9PiB7XG5cdGNvbnN0IHNldHRsZWRQcm9taXNlcyA9IFtdO1xuXHRsZXQgcm90YXRlUXVldWUgPSAoKSA9PiB7fTtcblx0Y29uc3QgcmVzdWx0cyA9IChhc3luYyBmdW5jdGlvbiogKCkge1xuXHRcdHdoaWxlICh0cnVlKSB7XG5cdFx0XHRjb25zdCBuZXh0ID0gc2V0dGxlZFByb21pc2VzLnNoaWZ0KCk7XG5cdFx0XHRpZiAobmV4dCkgeWllbGQgbmV4dDtcblx0XHRcdGVsc2UgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdFx0cm90YXRlUXVldWUgPSByZXNvbHZlO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KSgpO1xuXHRjb25zdCBzaGltRGVmZXJyZWRQcm9taXNlID0gKGRlZmVycmVkKSA9PiB7XG5cdFx0Y29uc3Qgb3JpZ2luYWxSZXNvbHZlID0gZGVmZXJyZWQucmVzb2x2ZTtcblx0XHRjb25zdCBvcmlnaW5hbFJlamVjdCA9IGRlZmVycmVkLnJlamVjdDtcblx0XHRkZWZlcnJlZC5yZXNvbHZlID0gKHZhbHVlKSA9PiB7XG5cdFx0XHRzZXR0bGVkUHJvbWlzZXMucHVzaChkZWZlcnJlZC5wcm9taXNlKTtcblx0XHRcdHJvdGF0ZVF1ZXVlKCk7XG5cdFx0XHRyZXR1cm4gc2hpbURlZmVycmVkUHJvbWlzZShvcmlnaW5hbFJlc29sdmUodmFsdWUpKTtcblx0XHR9O1xuXHRcdGRlZmVycmVkLnJlamVjdCA9IChyZWFzb24pID0+IHtcblx0XHRcdHNldHRsZWRQcm9taXNlcy5wdXNoKGRlZmVycmVkLnByb21pc2UpO1xuXHRcdFx0cm90YXRlUXVldWUoKTtcblx0XHRcdHJldHVybiBzaGltRGVmZXJyZWRQcm9taXNlKG9yaWdpbmFsUmVqZWN0KHJlYXNvbikpO1xuXHRcdH07XG5cdFx0cmV0dXJuIGRlZmVycmVkO1xuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdGRlZmVycmVkOiBzaGltRGVmZXJyZWRQcm9taXNlKGNyZWF0ZURlZmVycmVkUHJvbWlzZSgpKSxcblx0XHRyZXN1bHRzXG5cdH07XG59O1xuLyoqXG4qIENyZWF0ZXMgYSBQcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIGFmdGVyIHRoZSBnaXZlbiBkdXJhdGlvbiwgYWxvbmcgd2l0aFxuKiBtZXRob2RzIHRvIHN0YXJ0LCBjbGVhciwgYW5kIHJlc2V0IHRoZSB0aW1lb3V0LlxuKi9cbmNvbnN0IGNyZWF0ZVRpbWVvdXRQcm9taXNlID0gKGR1cmF0aW9uKSA9PiB7XG5cdGNvbnN0IHsgcHJvbWlzZSwgcmVzb2x2ZSB9ID0gY3JlYXRlRGVmZXJyZWRQcm9taXNlKCk7XG5cdGxldCB0aW1lb3V0O1xuXHRsZXQgcmV0O1xuXHRjb25zdCBzdGFydCA9ICgpID0+IHtcblx0XHRpZiAodGltZW91dCkgcmV0dXJuIHJldDtcblx0XHR0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRyZXNvbHZlKCk7XG5cdFx0fSwgZHVyYXRpb24pO1xuXHRcdHJldHVybiByZXQ7XG5cdH07XG5cdGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuXHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0XHR0aW1lb3V0ID0gdm9pZCAwO1xuXHR9O1xuXHRjb25zdCByZXNldCA9ICgpID0+IHtcblx0XHRjbGVhcigpO1xuXHRcdHJldHVybiBzdGFydCgpO1xuXHR9O1xuXHRyZXQgPSBPYmplY3QuYXNzaWduKHByb21pc2UsIHtcblx0XHRzdGFydCxcblx0XHRjbGVhcixcblx0XHRyZXNldFxuXHR9KTtcblx0cmV0dXJuIHJldDtcbn07XG4vKipcbiogVGFrZSBhbnkgZnVuY3Rpb24gYW5kIHNhZmVseSBwcm9taXNpZnkgc3VjaCB0aGF0IGJvdGggc3luY2hyb25vdXMgYW5kXG4qIGFzeW5jaHJvbm91cyBlcnJvcnMgYXJlIGNhdWdodCBhbmQgcmV0dXJuZWQgYXMgYSByZWplY3RlZCBQcm9taXNlLlxuKlxuKiBUaGUgcGFzc2VkIGBmbmAgY2FuIGJlIHVuZGVmaW5lZCB0byBzdXBwb3J0IGZ1bmN0aW9ucyB0aGF0IG1heSBjb25kaXRpb25hbGx5XG4qIGJlIGRlZmluZWQuXG4qL1xuY29uc3QgcnVuQXNQcm9taXNlID0gKGZuKSA9PiB7XG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZuKTtcbn07XG4vKipcbiogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlIGFmdGVyIHRoZSBjdXJyZW50IGV2ZW50IGxvb3AgdGljay5cbiovXG5jb25zdCByZXNvbHZlTmV4dFRpY2sgPSAoKSA9PiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlKSk7XG59O1xuY29uc3QgcmV0cnlXaXRoQmFja29mZiA9IGFzeW5jIChmbiwgb3B0cykgPT4ge1xuXHRjb25zdCBtYXhBdHRlbXB0cyA9IG9wdHM/Lm1heEF0dGVtcHRzIHx8IDU7XG5cdGNvbnN0IGJhc2VEZWxheSA9IG9wdHM/LmJhc2VEZWxheSA/PyAxMDA7XG5cdGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IG1heEF0dGVtcHRzOyBhdHRlbXB0KyspIHRyeSB7XG5cdFx0cmV0dXJuIGF3YWl0IGZuKCk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdGlmIChhdHRlbXB0ID49IG1heEF0dGVtcHRzKSB0aHJvdyBlcnI7XG5cdFx0Y29uc3Qgaml0dGVyID0gTWF0aC5yYW5kb20oKSAqIGJhc2VEZWxheTtcblx0XHRjb25zdCBkZWxheSA9IGJhc2VEZWxheSAqIE1hdGgucG93KDIsIGF0dGVtcHQgLSAxKSArIGppdHRlcjtcblx0XHRhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xuXHR9XG5cdHRocm93IG5ldyBFcnJvcihcIk1heCByZXRyaWVzIHJlYWNoZWQ7IHRoaXMgc2hvdWxkIGJlIHVucmVhY2hhYmxlLlwiKTtcbn07XG4vKipcbiogR2l2ZW4gYSBmdW5jdGlvbiwgcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgdGhlXG4qIGZ1bmN0aW9uIGFuZCBhIEdvLWNvbXBhdGlibGUgYGludGVydmFsLkludGVydmFsYCB0aW1pbmcgb2JqZWN0LlxuKi9cbmNvbnN0IGdvSW50ZXJ2YWxUaW1pbmcgPSBhc3luYyAoZm4pID0+IHtcblx0Y29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuXHRjb25zdCByZXN1bHRQcm9taXNlID0gcnVuQXNQcm9taXNlKGZuKTtcblx0dHJ5IHtcblx0XHRhd2FpdCByZXN1bHRQcm9taXNlO1xuXHR9IGNhdGNoIHt9XG5cdGNvbnN0IGVuZCA9IERhdGUubm93KCk7XG5cdHJldHVybiB7XG5cdFx0cmVzdWx0UHJvbWlzZSxcblx0XHRpbnRlcnZhbDoge1xuXHRcdFx0YTogc3RhcnQgKiAxZTYsXG5cdFx0XHRiOiAoZW5kIC0gc3RhcnQpICogMWU2XG5cdFx0fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVEZWZlcnJlZFByb21pc2UsIGNyZWF0ZURlZmVycmVkUHJvbWlzZVdpdGhTdGFjaywgY3JlYXRlVGltZW91dFByb21pc2UsIGdvSW50ZXJ2YWxUaW1pbmcsIHJlc29sdmVBZnRlclBlbmRpbmcsIHJlc29sdmVOZXh0VGljaywgcmV0cnlXaXRoQmFja29mZiwgcnVuQXNQcm9taXNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/stream.js":
/*!************************************************!*\
  !*** ./node_modules/inngest/helpers/stream.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createStream: () => (/* binding */ createStream)\n/* harmony export */ });\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n\n\n//#region src/helpers/stream.ts\n/**\n* Creates a {@link ReadableStream} that sends a `value` every `interval`\n* milliseconds as a heartbeat, intended to keep a stream open.\n*\n* Returns the `stream` itself and a `finalize` function that can be used to\n* close the stream and send a final value.\n*/\nconst createStream = (opts) => {\n\t/**\n\t* We need to resolve this promise with both the stream and the `finalize`\n\t* function, but having them both instantiated synchronously is difficult, as\n\t* we need access to the stream's internals too.\n\t*\n\t* We create this cheeky deferred promise to grab the internal `finalize`\n\t* value. Be warned that simpler solutions may appear to compile, but fail at\n\t* runtime due to variables not being assigned; make sure to test your code!\n\t*/\n\tlet passFinalize;\n\tconst finalizeP = new Promise((resolve) => {\n\t\tpassFinalize = resolve;\n\t});\n\tconst interval = opts?.interval ?? 3e3;\n\tconst value = opts?.value ?? \" \";\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tresolve({\n\t\t\t\tstream: new ReadableStream({ start(controller) {\n\t\t\t\t\tconst encoder = new TextEncoder();\n\t\t\t\t\tconst heartbeat = setInterval(() => {\n\t\t\t\t\t\tcontroller.enqueue(encoder.encode(value));\n\t\t\t\t\t}, interval);\n\t\t\t\t\tconst finalize = (data) => {\n\t\t\t\t\t\tclearInterval(heartbeat);\n\t\t\t\t\t\tPromise.resolve(data).then((resolvedData) => {\n\t\t\t\t\t\t\tcontroller.enqueue(encoder.encode((0,_strings_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(resolvedData)));\n\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tpassFinalize(finalize);\n\t\t\t\t} }),\n\t\t\t\tfinalize: await finalizeP\n\t\t\t});\n\t\t} catch (err) {\n\t\t\treject(err);\n\t\t}\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=stream.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3N0cmVhbS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5Qzs7QUFFekM7QUFDQTtBQUNBLGFBQWEsc0JBQXNCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzREFBUztBQUNsRDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3N0cmVhbS5qcz9lNDdkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gXCIuL3N0cmluZ3MuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9oZWxwZXJzL3N0cmVhbS50c1xuLyoqXG4qIENyZWF0ZXMgYSB7QGxpbmsgUmVhZGFibGVTdHJlYW19IHRoYXQgc2VuZHMgYSBgdmFsdWVgIGV2ZXJ5IGBpbnRlcnZhbGBcbiogbWlsbGlzZWNvbmRzIGFzIGEgaGVhcnRiZWF0LCBpbnRlbmRlZCB0byBrZWVwIGEgc3RyZWFtIG9wZW4uXG4qXG4qIFJldHVybnMgdGhlIGBzdHJlYW1gIGl0c2VsZiBhbmQgYSBgZmluYWxpemVgIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiogY2xvc2UgdGhlIHN0cmVhbSBhbmQgc2VuZCBhIGZpbmFsIHZhbHVlLlxuKi9cbmNvbnN0IGNyZWF0ZVN0cmVhbSA9IChvcHRzKSA9PiB7XG5cdC8qKlxuXHQqIFdlIG5lZWQgdG8gcmVzb2x2ZSB0aGlzIHByb21pc2Ugd2l0aCBib3RoIHRoZSBzdHJlYW0gYW5kIHRoZSBgZmluYWxpemVgXG5cdCogZnVuY3Rpb24sIGJ1dCBoYXZpbmcgdGhlbSBib3RoIGluc3RhbnRpYXRlZCBzeW5jaHJvbm91c2x5IGlzIGRpZmZpY3VsdCwgYXNcblx0KiB3ZSBuZWVkIGFjY2VzcyB0byB0aGUgc3RyZWFtJ3MgaW50ZXJuYWxzIHRvby5cblx0KlxuXHQqIFdlIGNyZWF0ZSB0aGlzIGNoZWVreSBkZWZlcnJlZCBwcm9taXNlIHRvIGdyYWIgdGhlIGludGVybmFsIGBmaW5hbGl6ZWBcblx0KiB2YWx1ZS4gQmUgd2FybmVkIHRoYXQgc2ltcGxlciBzb2x1dGlvbnMgbWF5IGFwcGVhciB0byBjb21waWxlLCBidXQgZmFpbCBhdFxuXHQqIHJ1bnRpbWUgZHVlIHRvIHZhcmlhYmxlcyBub3QgYmVpbmcgYXNzaWduZWQ7IG1ha2Ugc3VyZSB0byB0ZXN0IHlvdXIgY29kZSFcblx0Ki9cblx0bGV0IHBhc3NGaW5hbGl6ZTtcblx0Y29uc3QgZmluYWxpemVQID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRwYXNzRmluYWxpemUgPSByZXNvbHZlO1xuXHR9KTtcblx0Y29uc3QgaW50ZXJ2YWwgPSBvcHRzPy5pbnRlcnZhbCA/PyAzZTM7XG5cdGNvbnN0IHZhbHVlID0gb3B0cz8udmFsdWUgPz8gXCIgXCI7XG5cdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0dHJ5IHtcblx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRzdHJlYW06IG5ldyBSZWFkYWJsZVN0cmVhbSh7IHN0YXJ0KGNvbnRyb2xsZXIpIHtcblx0XHRcdFx0XHRjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5cdFx0XHRcdFx0Y29uc3QgaGVhcnRiZWF0ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKHZhbHVlKSk7XG5cdFx0XHRcdFx0fSwgaW50ZXJ2YWwpO1xuXHRcdFx0XHRcdGNvbnN0IGZpbmFsaXplID0gKGRhdGEpID0+IHtcblx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoaGVhcnRiZWF0KTtcblx0XHRcdFx0XHRcdFByb21pc2UucmVzb2x2ZShkYXRhKS50aGVuKChyZXNvbHZlZERhdGEpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5lbnF1ZXVlKGVuY29kZXIuZW5jb2RlKHN0cmluZ2lmeShyZXNvbHZlZERhdGEpKSk7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuY2xvc2UoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0cGFzc0ZpbmFsaXplKGZpbmFsaXplKTtcblx0XHRcdFx0fSB9KSxcblx0XHRcdFx0ZmluYWxpemU6IGF3YWl0IGZpbmFsaXplUFxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRyZWplY3QoZXJyKTtcblx0XHR9XG5cdH0pO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVTdHJlYW0gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmVhbS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/strings.js":
/*!*************************************************!*\
  !*** ./node_modules/inngest/helpers/strings.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashEventKey: () => (/* binding */ hashEventKey),\n/* harmony export */   hashSigningKey: () => (/* binding */ hashSigningKey),\n/* harmony export */   slugify: () => (/* binding */ slugify),\n/* harmony export */   stringify: () => (/* binding */ stringify$1),\n/* harmony export */   stringifyUnknown: () => (/* binding */ stringifyUnknown),\n/* harmony export */   timeStr: () => (/* binding */ timeStr)\n/* harmony export */ });\n/* harmony import */ var json_stringify_safe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! json-stringify-safe */ \"(rsc)/./node_modules/json-stringify-safe/stringify.js\");\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n/* harmony import */ var ms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ms */ \"(rsc)/./node_modules/ms/index.js\");\n\n\n\n\n//#region src/helpers/strings.ts\nconst { sha256 } = hash_js__WEBPACK_IMPORTED_MODULE_1__;\n/**\n* Safely `JSON.stringify()` an `input`, handling circular refernences and\n* removing `BigInt` values.\n*/\nconst stringify$1 = (input) => {\n\treturn json_stringify_safe__WEBPACK_IMPORTED_MODULE_0__(input, (_key, value) => {\n\t\tif (typeof value !== \"bigint\") return value;\n\t});\n};\n/**\n* Returns a slugified string used to generate consistent IDs.\n*\n* This can be used to generate a consistent ID for a function when migrating\n* from v2 to v3 of the SDK.\n*\n* @public\n*/\nconst slugify = (str) => {\n\tconst join = \"-\";\n\treturn str.toLowerCase().replace(/[^a-z0-9-]+/g, join).replace(/-+/g, join).split(join).filter(Boolean).join(join);\n};\nconst second = 1 * 1e3;\nconst minute = second * 60;\nconst hour = minute * 60;\nconst day = hour * 24;\n/**\n* A collection of periods in milliseconds and their suffixes used when creating\n* time strings.\n*/\nconst periods = [\n\t[\"w\", day * 7],\n\t[\"d\", day],\n\t[\"h\", hour],\n\t[\"m\", minute],\n\t[\"s\", second]\n];\n/**\n* Convert a given `Date`, `number`, or `ms`-compatible `string` to a\n* Inngest sleep-compatible time string (e.g. `\"1d\"` or `\"2h3010s\"`).\n*\n* Can optionally provide a `now` date to use as the base for the calculation,\n* otherwise a new date will be created on invocation.\n*/\nconst timeStr = (input) => {\n\tif (input instanceof Date) return input.toISOString();\n\tconst milliseconds = typeof input === \"string\" ? ms__WEBPACK_IMPORTED_MODULE_2__(input) : input;\n\tconst [, timeStr$1] = periods.reduce(([num, str], [suffix, period]) => {\n\t\tconst numPeriods = Math.floor(num / period);\n\t\tif (numPeriods > 0) return [num % period, `${str}${numPeriods}${suffix}`];\n\t\treturn [num, str];\n\t}, [milliseconds, \"\"]);\n\treturn timeStr$1;\n};\n/**\n* Given an unknown input, stringify it if it's a boolean, a number, or a\n* string, else return `undefined`.\n*/\nconst stringifyUnknown = (input) => {\n\tif (typeof input === \"boolean\" || typeof input === \"number\" || typeof input === \"string\") return input.toString();\n};\nconst hashEventKey = (eventKey) => {\n\treturn sha256().update(eventKey).digest(\"hex\");\n};\nconst hashSigningKey = (signingKey) => {\n\tif (!signingKey) return \"\";\n\tconst prefix = signingKey.match(/^signkey-[\\w]+-/)?.shift() || \"\";\n\tconst key = signingKey.replace(/^signkey-[\\w]+-/, \"\");\n\treturn `${prefix}${sha256().update(key, \"hex\").digest(\"hex\")}`;\n};\n\n//#endregion\n\n//# sourceMappingURL=strings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3N0cmluZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ2Y7QUFDVDs7QUFFcEI7QUFDQSxRQUFRLFNBQVMsRUFBRSxvQ0FBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnREFBUztBQUNqQjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCwrQkFBRTtBQUNwRDtBQUNBO0FBQ0EsK0NBQStDLElBQUksRUFBRSxXQUFXLEVBQUUsT0FBTztBQUN6RTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTyxFQUFFLDBDQUEwQztBQUM5RDs7QUFFQTtBQUNzRztBQUN0RyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvaGVscGVycy9zdHJpbmdzLmpzP2Q3MzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHN0cmluZ2lmeSBmcm9tIFwianNvbi1zdHJpbmdpZnktc2FmZVwiO1xuaW1wb3J0IGhhc2hqcyBmcm9tIFwiaGFzaC5qc1wiO1xuaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xuXG4vLyNyZWdpb24gc3JjL2hlbHBlcnMvc3RyaW5ncy50c1xuY29uc3QgeyBzaGEyNTYgfSA9IGhhc2hqcztcbi8qKlxuKiBTYWZlbHkgYEpTT04uc3RyaW5naWZ5KClgIGFuIGBpbnB1dGAsIGhhbmRsaW5nIGNpcmN1bGFyIHJlZmVybmVuY2VzIGFuZFxuKiByZW1vdmluZyBgQmlnSW50YCB2YWx1ZXMuXG4qL1xuY29uc3Qgc3RyaW5naWZ5JDEgPSAoaW5wdXQpID0+IHtcblx0cmV0dXJuIHN0cmluZ2lmeShpbnB1dCwgKF9rZXksIHZhbHVlKSA9PiB7XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJiaWdpbnRcIikgcmV0dXJuIHZhbHVlO1xuXHR9KTtcbn07XG4vKipcbiogUmV0dXJucyBhIHNsdWdpZmllZCBzdHJpbmcgdXNlZCB0byBnZW5lcmF0ZSBjb25zaXN0ZW50IElEcy5cbipcbiogVGhpcyBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSBhIGNvbnNpc3RlbnQgSUQgZm9yIGEgZnVuY3Rpb24gd2hlbiBtaWdyYXRpbmdcbiogZnJvbSB2MiB0byB2MyBvZiB0aGUgU0RLLlxuKlxuKiBAcHVibGljXG4qL1xuY29uc3Qgc2x1Z2lmeSA9IChzdHIpID0+IHtcblx0Y29uc3Qgam9pbiA9IFwiLVwiO1xuXHRyZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXowLTktXSsvZywgam9pbikucmVwbGFjZSgvLSsvZywgam9pbikuc3BsaXQoam9pbikuZmlsdGVyKEJvb2xlYW4pLmpvaW4oam9pbik7XG59O1xuY29uc3Qgc2Vjb25kID0gMSAqIDFlMztcbmNvbnN0IG1pbnV0ZSA9IHNlY29uZCAqIDYwO1xuY29uc3QgaG91ciA9IG1pbnV0ZSAqIDYwO1xuY29uc3QgZGF5ID0gaG91ciAqIDI0O1xuLyoqXG4qIEEgY29sbGVjdGlvbiBvZiBwZXJpb2RzIGluIG1pbGxpc2Vjb25kcyBhbmQgdGhlaXIgc3VmZml4ZXMgdXNlZCB3aGVuIGNyZWF0aW5nXG4qIHRpbWUgc3RyaW5ncy5cbiovXG5jb25zdCBwZXJpb2RzID0gW1xuXHRbXCJ3XCIsIGRheSAqIDddLFxuXHRbXCJkXCIsIGRheV0sXG5cdFtcImhcIiwgaG91cl0sXG5cdFtcIm1cIiwgbWludXRlXSxcblx0W1wic1wiLCBzZWNvbmRdXG5dO1xuLyoqXG4qIENvbnZlcnQgYSBnaXZlbiBgRGF0ZWAsIGBudW1iZXJgLCBvciBgbXNgLWNvbXBhdGlibGUgYHN0cmluZ2AgdG8gYVxuKiBJbm5nZXN0IHNsZWVwLWNvbXBhdGlibGUgdGltZSBzdHJpbmcgKGUuZy4gYFwiMWRcImAgb3IgYFwiMmgzMDEwc1wiYCkuXG4qXG4qIENhbiBvcHRpb25hbGx5IHByb3ZpZGUgYSBgbm93YCBkYXRlIHRvIHVzZSBhcyB0aGUgYmFzZSBmb3IgdGhlIGNhbGN1bGF0aW9uLFxuKiBvdGhlcndpc2UgYSBuZXcgZGF0ZSB3aWxsIGJlIGNyZWF0ZWQgb24gaW52b2NhdGlvbi5cbiovXG5jb25zdCB0aW1lU3RyID0gKGlucHV0KSA9PiB7XG5cdGlmIChpbnB1dCBpbnN0YW5jZW9mIERhdGUpIHJldHVybiBpbnB1dC50b0lTT1N0cmluZygpO1xuXHRjb25zdCBtaWxsaXNlY29uZHMgPSB0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIgPyBtcyhpbnB1dCkgOiBpbnB1dDtcblx0Y29uc3QgWywgdGltZVN0ciQxXSA9IHBlcmlvZHMucmVkdWNlKChbbnVtLCBzdHJdLCBbc3VmZml4LCBwZXJpb2RdKSA9PiB7XG5cdFx0Y29uc3QgbnVtUGVyaW9kcyA9IE1hdGguZmxvb3IobnVtIC8gcGVyaW9kKTtcblx0XHRpZiAobnVtUGVyaW9kcyA+IDApIHJldHVybiBbbnVtICUgcGVyaW9kLCBgJHtzdHJ9JHtudW1QZXJpb2RzfSR7c3VmZml4fWBdO1xuXHRcdHJldHVybiBbbnVtLCBzdHJdO1xuXHR9LCBbbWlsbGlzZWNvbmRzLCBcIlwiXSk7XG5cdHJldHVybiB0aW1lU3RyJDE7XG59O1xuLyoqXG4qIEdpdmVuIGFuIHVua25vd24gaW5wdXQsIHN0cmluZ2lmeSBpdCBpZiBpdCdzIGEgYm9vbGVhbiwgYSBudW1iZXIsIG9yIGFcbiogc3RyaW5nLCBlbHNlIHJldHVybiBgdW5kZWZpbmVkYC5cbiovXG5jb25zdCBzdHJpbmdpZnlVbmtub3duID0gKGlucHV0KSA9PiB7XG5cdGlmICh0eXBlb2YgaW5wdXQgPT09IFwiYm9vbGVhblwiIHx8IHR5cGVvZiBpbnB1dCA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHJldHVybiBpbnB1dC50b1N0cmluZygpO1xufTtcbmNvbnN0IGhhc2hFdmVudEtleSA9IChldmVudEtleSkgPT4ge1xuXHRyZXR1cm4gc2hhMjU2KCkudXBkYXRlKGV2ZW50S2V5KS5kaWdlc3QoXCJoZXhcIik7XG59O1xuY29uc3QgaGFzaFNpZ25pbmdLZXkgPSAoc2lnbmluZ0tleSkgPT4ge1xuXHRpZiAoIXNpZ25pbmdLZXkpIHJldHVybiBcIlwiO1xuXHRjb25zdCBwcmVmaXggPSBzaWduaW5nS2V5Lm1hdGNoKC9ec2lnbmtleS1bXFx3XSstLyk/LnNoaWZ0KCkgfHwgXCJcIjtcblx0Y29uc3Qga2V5ID0gc2lnbmluZ0tleS5yZXBsYWNlKC9ec2lnbmtleS1bXFx3XSstLywgXCJcIik7XG5cdHJldHVybiBgJHtwcmVmaXh9JHtzaGEyNTYoKS51cGRhdGUoa2V5LCBcImhleFwiKS5kaWdlc3QoXCJoZXhcIil9YDtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaGFzaEV2ZW50S2V5LCBoYXNoU2lnbmluZ0tleSwgc2x1Z2lmeSwgc3RyaW5naWZ5JDEgYXMgc3RyaW5naWZ5LCBzdHJpbmdpZnlVbmtub3duLCB0aW1lU3RyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJpbmdzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/strings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/temporal.js":
/*!**************************************************!*\
  !*** ./node_modules/inngest/helpers/temporal.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getISOString: () => (/* binding */ getISOString),\n/* harmony export */   isTemporalDuration: () => (/* binding */ isTemporalDuration)\n/* harmony export */ });\n//#region src/helpers/temporal.ts\n/**\n* Asserts that the given `input` is a `Temporal.Duration` object.\n*/\nconst isTemporalDuration = (input) => {\n\ttry {\n\t\treturn input[Symbol.toStringTag] === \"Temporal.Duration\";\n\t} catch {\n\t\treturn false;\n\t}\n};\n/**\n* Asserts that the given `input` is a `Temporal.TimeZone` object.\n*/\nconst isTemporalInstant = (input) => {\n\ttry {\n\t\treturn input[Symbol.toStringTag] === \"Temporal.Instant\";\n\t} catch {\n\t\treturn false;\n\t}\n};\n/**\n* Asserts that the given `input` is a `Temporal.ZonedDateTime` object.\n*/\nconst isTemporalZonedDateTime = (input) => {\n\ttry {\n\t\treturn input[Symbol.toStringTag] === \"Temporal.ZonedDateTime\";\n\t} catch {\n\t\treturn false;\n\t}\n};\n/**\n* Converts a given `Date`, `string`, `Temporal.Instant`, or\n* `Temporal.ZonedDateTime` to an ISO 8601 string.\n*/\nconst getISOString = (time) => {\n\tif (typeof time === \"string\") return new Date(time).toISOString();\n\tif (time instanceof Date) return time.toISOString();\n\tif (isTemporalZonedDateTime(time)) return time.toInstant().toString();\n\tif (isTemporalInstant(time)) return time.toString();\n\tthrow new TypeError(\"Invalid date input\");\n};\n\n//#endregion\n\n//# sourceMappingURL=temporal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3RlbXBvcmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzRDO0FBQzVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3RlbXBvcmFsLmpzPzMyYjgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9oZWxwZXJzL3RlbXBvcmFsLnRzXG4vKipcbiogQXNzZXJ0cyB0aGF0IHRoZSBnaXZlbiBgaW5wdXRgIGlzIGEgYFRlbXBvcmFsLkR1cmF0aW9uYCBvYmplY3QuXG4qL1xuY29uc3QgaXNUZW1wb3JhbER1cmF0aW9uID0gKGlucHV0KSA9PiB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGlucHV0W1N5bWJvbC50b1N0cmluZ1RhZ10gPT09IFwiVGVtcG9yYWwuRHVyYXRpb25cIjtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59O1xuLyoqXG4qIEFzc2VydHMgdGhhdCB0aGUgZ2l2ZW4gYGlucHV0YCBpcyBhIGBUZW1wb3JhbC5UaW1lWm9uZWAgb2JqZWN0LlxuKi9cbmNvbnN0IGlzVGVtcG9yYWxJbnN0YW50ID0gKGlucHV0KSA9PiB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGlucHV0W1N5bWJvbC50b1N0cmluZ1RhZ10gPT09IFwiVGVtcG9yYWwuSW5zdGFudFwiO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG4vKipcbiogQXNzZXJ0cyB0aGF0IHRoZSBnaXZlbiBgaW5wdXRgIGlzIGEgYFRlbXBvcmFsLlpvbmVkRGF0ZVRpbWVgIG9iamVjdC5cbiovXG5jb25zdCBpc1RlbXBvcmFsWm9uZWREYXRlVGltZSA9IChpbnB1dCkgPT4ge1xuXHR0cnkge1xuXHRcdHJldHVybiBpbnB1dFtTeW1ib2wudG9TdHJpbmdUYWddID09PSBcIlRlbXBvcmFsLlpvbmVkRGF0ZVRpbWVcIjtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59O1xuLyoqXG4qIENvbnZlcnRzIGEgZ2l2ZW4gYERhdGVgLCBgc3RyaW5nYCwgYFRlbXBvcmFsLkluc3RhbnRgLCBvclxuKiBgVGVtcG9yYWwuWm9uZWREYXRlVGltZWAgdG8gYW4gSVNPIDg2MDEgc3RyaW5nLlxuKi9cbmNvbnN0IGdldElTT1N0cmluZyA9ICh0aW1lKSA9PiB7XG5cdGlmICh0eXBlb2YgdGltZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIG5ldyBEYXRlKHRpbWUpLnRvSVNPU3RyaW5nKCk7XG5cdGlmICh0aW1lIGluc3RhbmNlb2YgRGF0ZSkgcmV0dXJuIHRpbWUudG9JU09TdHJpbmcoKTtcblx0aWYgKGlzVGVtcG9yYWxab25lZERhdGVUaW1lKHRpbWUpKSByZXR1cm4gdGltZS50b0luc3RhbnQoKS50b1N0cmluZygpO1xuXHRpZiAoaXNUZW1wb3JhbEluc3RhbnQodGltZSkpIHJldHVybiB0aW1lLnRvU3RyaW5nKCk7XG5cdHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGRhdGUgaW5wdXRcIik7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldElTT1N0cmluZywgaXNUZW1wb3JhbER1cmF0aW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZW1wb3JhbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/temporal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/middleware/logger.js":
/*!***************************************************!*\
  !*** ./node_modules/inngest/middleware/logger.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultLogger: () => (/* binding */ DefaultLogger),\n/* harmony export */   ProxyLogger: () => (/* binding */ ProxyLogger)\n/* harmony export */ });\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n\n\n//#region src/middleware/logger.ts\nvar DefaultLogger = class {\n\tinfo(...args) {\n\t\tconsole.info(...args);\n\t}\n\twarn(...args) {\n\t\tconsole.warn(...args);\n\t}\n\terror(...args) {\n\t\tconsole.error(...args);\n\t}\n\tdebug(...args) {\n\t\tconsole.debug(...args);\n\t}\n};\n/**\n* ProxyLogger aims to provide a thin wrapper on user's provided logger.\n* It's expected to be turned on and off based on the function execution\n* context, so it doesn't result in duplicated logging.\n*\n* And also attempt to allow enough time for the logger to flush all logs.\n*\n* @public\n*/\nvar ProxyLogger = class {\n\tlogger;\n\tenabled = false;\n\tconstructor(logger) {\n\t\tthis.logger = logger;\n\t\treturn new Proxy(this, { get(target, prop, receiver) {\n\t\t\tif (prop in target) return Reflect.get(target, prop, receiver);\n\t\t\treturn Reflect.get(target.logger, prop, receiver);\n\t\t} });\n\t}\n\tinfo(...args) {\n\t\tif (!this.enabled) return;\n\t\tthis.logger.info(...args);\n\t}\n\twarn(...args) {\n\t\tif (!this.enabled) return;\n\t\tthis.logger.warn(...args);\n\t}\n\terror(...args) {\n\t\tif (!this.enabled) return;\n\t\tthis.logger.error(...args);\n\t}\n\tdebug(...args) {\n\t\tif (!this.enabled || !(typeof this.logger.debug === \"function\")) return;\n\t\tthis.logger.debug(...args);\n\t}\n\tenable() {\n\t\tthis.enabled = true;\n\t}\n\tdisable() {\n\t\tthis.enabled = false;\n\t}\n\tasync flush() {\n\t\tif (this.logger.constructor.name == DefaultLogger.name) return;\n\t\tconst logger = this.logger;\n\t\tif (typeof logger.flush === \"function\") {\n\t\t\tawait logger.flush();\n\t\t\treturn;\n\t\t}\n\t\tawait (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_0__.resolveNextTick)();\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=logger.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9taWRkbGV3YXJlL2xvZ2dlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUQ7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFFQUFlO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDc0M7QUFDdEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L21pZGRsZXdhcmUvbG9nZ2VyLmpzPzRiMDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVzb2x2ZU5leHRUaWNrIH0gZnJvbSBcIi4uL2hlbHBlcnMvcHJvbWlzZXMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9taWRkbGV3YXJlL2xvZ2dlci50c1xudmFyIERlZmF1bHRMb2dnZXIgPSBjbGFzcyB7XG5cdGluZm8oLi4uYXJncykge1xuXHRcdGNvbnNvbGUuaW5mbyguLi5hcmdzKTtcblx0fVxuXHR3YXJuKC4uLmFyZ3MpIHtcblx0XHRjb25zb2xlLndhcm4oLi4uYXJncyk7XG5cdH1cblx0ZXJyb3IoLi4uYXJncykge1xuXHRcdGNvbnNvbGUuZXJyb3IoLi4uYXJncyk7XG5cdH1cblx0ZGVidWcoLi4uYXJncykge1xuXHRcdGNvbnNvbGUuZGVidWcoLi4uYXJncyk7XG5cdH1cbn07XG4vKipcbiogUHJveHlMb2dnZXIgYWltcyB0byBwcm92aWRlIGEgdGhpbiB3cmFwcGVyIG9uIHVzZXIncyBwcm92aWRlZCBsb2dnZXIuXG4qIEl0J3MgZXhwZWN0ZWQgdG8gYmUgdHVybmVkIG9uIGFuZCBvZmYgYmFzZWQgb24gdGhlIGZ1bmN0aW9uIGV4ZWN1dGlvblxuKiBjb250ZXh0LCBzbyBpdCBkb2Vzbid0IHJlc3VsdCBpbiBkdXBsaWNhdGVkIGxvZ2dpbmcuXG4qXG4qIEFuZCBhbHNvIGF0dGVtcHQgdG8gYWxsb3cgZW5vdWdoIHRpbWUgZm9yIHRoZSBsb2dnZXIgdG8gZmx1c2ggYWxsIGxvZ3MuXG4qXG4qIEBwdWJsaWNcbiovXG52YXIgUHJveHlMb2dnZXIgPSBjbGFzcyB7XG5cdGxvZ2dlcjtcblx0ZW5hYmxlZCA9IGZhbHNlO1xuXHRjb25zdHJ1Y3Rvcihsb2dnZXIpIHtcblx0XHR0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcblx0XHRyZXR1cm4gbmV3IFByb3h5KHRoaXMsIHsgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcblx0XHRcdGlmIChwcm9wIGluIHRhcmdldCkgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpO1xuXHRcdFx0cmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldC5sb2dnZXIsIHByb3AsIHJlY2VpdmVyKTtcblx0XHR9IH0pO1xuXHR9XG5cdGluZm8oLi4uYXJncykge1xuXHRcdGlmICghdGhpcy5lbmFibGVkKSByZXR1cm47XG5cdFx0dGhpcy5sb2dnZXIuaW5mbyguLi5hcmdzKTtcblx0fVxuXHR3YXJuKC4uLmFyZ3MpIHtcblx0XHRpZiAoIXRoaXMuZW5hYmxlZCkgcmV0dXJuO1xuXHRcdHRoaXMubG9nZ2VyLndhcm4oLi4uYXJncyk7XG5cdH1cblx0ZXJyb3IoLi4uYXJncykge1xuXHRcdGlmICghdGhpcy5lbmFibGVkKSByZXR1cm47XG5cdFx0dGhpcy5sb2dnZXIuZXJyb3IoLi4uYXJncyk7XG5cdH1cblx0ZGVidWcoLi4uYXJncykge1xuXHRcdGlmICghdGhpcy5lbmFibGVkIHx8ICEodHlwZW9mIHRoaXMubG9nZ2VyLmRlYnVnID09PSBcImZ1bmN0aW9uXCIpKSByZXR1cm47XG5cdFx0dGhpcy5sb2dnZXIuZGVidWcoLi4uYXJncyk7XG5cdH1cblx0ZW5hYmxlKCkge1xuXHRcdHRoaXMuZW5hYmxlZCA9IHRydWU7XG5cdH1cblx0ZGlzYWJsZSgpIHtcblx0XHR0aGlzLmVuYWJsZWQgPSBmYWxzZTtcblx0fVxuXHRhc3luYyBmbHVzaCgpIHtcblx0XHRpZiAodGhpcy5sb2dnZXIuY29uc3RydWN0b3IubmFtZSA9PSBEZWZhdWx0TG9nZ2VyLm5hbWUpIHJldHVybjtcblx0XHRjb25zdCBsb2dnZXIgPSB0aGlzLmxvZ2dlcjtcblx0XHRpZiAodHlwZW9mIGxvZ2dlci5mbHVzaCA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRhd2FpdCBsb2dnZXIuZmx1c2goKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0YXdhaXQgcmVzb2x2ZU5leHRUaWNrKCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgRGVmYXVsdExvZ2dlciwgUHJveHlMb2dnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvZ2dlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/middleware/logger.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/next.js":
/*!**************************************!*\
  !*** ./node_modules/inngest/next.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   frameworkName: () => (/* binding */ frameworkName),\n/* harmony export */   serve: () => (/* binding */ serve)\n/* harmony export */ });\n/* harmony import */ var _helpers_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers/env.js */ \"(rsc)/./node_modules/inngest/helpers/env.js\");\n/* harmony import */ var _components_InngestCommHandler_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/InngestCommHandler.js */ \"(rsc)/./node_modules/inngest/components/InngestCommHandler.js\");\n\n\n\n//#region src/next.ts\n/**\n* The name of the framework, used to identify the framework in Inngest\n* dashboards and during testing.\n*/\nconst frameworkName = \"nextjs\";\nconst isRecord = (val) => {\n\treturn typeof val === \"object\" && val !== null;\n};\nconst isFunction = (val) => {\n\treturn typeof val === \"function\";\n};\nconst isNext12ApiResponse = (val) => {\n\treturn isRecord(val) && isFunction(val.setHeader) && isFunction(val.status) && isFunction(val.send);\n};\n/**\n* In Next.js, serve and register any declared functions with Inngest, making\n* them available to be triggered by events.\n*\n* Supports Next.js 12+, both serverless and edge.\n*\n* @example Next.js <=12 or the pages router can export the handler directly\n* ```ts\n* export default serve({ client: inngest, functions: [fn1, fn2] });\n* ```\n*\n* @example Next.js >=13 with the `app` dir must export individual methods\n* ```ts\n* export const { GET, POST, PUT } = serve({\n*            client: inngest,\n*            functions: [fn1, fn2],\n* });\n* ```\n*\n* @public\n*/\nconst serve = (options) => {\n\t/**\n\t* Next.js 13 uses\n\t* {@link https://beta.nextjs.org/docs/routing/route-handlers Route Handlers}\n\t* to declare API routes instead of a generic catch-all method that was\n\t* available using the `pages/api` directory.\n\t*\n\t* This means that users must now export a function for each method supported\n\t* by the endpoint. For us, this means requiring a user explicitly exports\n\t* `GET`, `POST`, and `PUT` functions.\n\t*\n\t* Because of this, we'll add circular references to those property names of\n\t* the returned handler, meaning we can write some succinct code to export\n\t* them. Thanks, @goodoldneon.\n\t*\n\t* @example\n\t* ```ts\n\t* export const { GET, POST, PUT } = serve(...);\n\t* ```\n\t*\n\t* See {@link https://beta.nextjs.org/docs/routing/route-handlers}\n\t*/\n\tconst baseFn = new _components_InngestCommHandler_js__WEBPACK_IMPORTED_MODULE_0__.InngestCommHandler({\n\t\tframeworkName,\n\t\t...options,\n\t\thandler: (reqMethod, ...args) => {\n\t\t\tconst [expectedReq, res] = args;\n\t\t\tconst req = expectedReq;\n\t\t\tconst getHeader = (key) => {\n\t\t\t\tconst header = typeof req.headers.get === \"function\" ? req.headers.get(key) : req.headers[key];\n\t\t\t\treturn Array.isArray(header) ? header[0] : header;\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tbody: async () => {\n\t\t\t\t\tif (typeof req.json === \"function\") return await req.json();\n\t\t\t\t\tif (req.body instanceof ReadableStream) return await streamToJSON(req.body);\n\t\t\t\t\treturn req.body;\n\t\t\t\t},\n\t\t\t\theaders: getHeader,\n\t\t\t\tmethod: () => {\n\t\t\t\t\treturn reqMethod || req.method || \"\";\n\t\t\t\t},\n\t\t\t\tisProduction: () => {\n\t\t\t\t\t/**\n\t\t\t\t\t* Vercel Edge Functions do not allow dynamic access to environment\n\t\t\t\t\t* variables, so we'll manage production checks directly here.\n\t\t\t\t\t*\n\t\t\t\t\t* We try/catch to avoid situations where Next.js is being used in\n\t\t\t\t\t* environments where `process.env` is not accessible or polyfilled.\n\t\t\t\t\t*/\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn \"development\" === \"production\";\n\t\t\t\t\t} catch (_err) {}\n\t\t\t\t},\n\t\t\t\tqueryString: (key, url) => {\n\t\t\t\t\tconst qs = req.query?.[key] || url.searchParams.get(key);\n\t\t\t\t\treturn Array.isArray(qs) ? qs[0] : qs;\n\t\t\t\t},\n\t\t\t\turl: () => {\n\t\t\t\t\tlet absoluteUrl;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tabsoluteUrl = new URL(req.url);\n\t\t\t\t\t} catch {}\n\t\t\t\t\tif (absoluteUrl) {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* `req.url` here should may be the full URL, including query string.\n\t\t\t\t\t\t* There are some caveats, however, where Next.js will obfuscate\n\t\t\t\t\t\t* the host. For example, in the case of `host.docker.internal`,\n\t\t\t\t\t\t* Next.js will instead set the host here to `localhost`.\n\t\t\t\t\t\t*\n\t\t\t\t\t\t* To avoid this, we'll try to parse the URL from `req.url`, but\n\t\t\t\t\t\t* also use the `host` header if it's available.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tconst host$1 = options.serveHost || getHeader(\"host\");\n\t\t\t\t\t\tif (host$1) {\n\t\t\t\t\t\t\tconst hostWithProtocol = new URL(host$1.includes(\"://\") ? host$1 : `${absoluteUrl.protocol}//${host$1}`);\n\t\t\t\t\t\t\tabsoluteUrl.protocol = hostWithProtocol.protocol;\n\t\t\t\t\t\t\tabsoluteUrl.host = hostWithProtocol.host;\n\t\t\t\t\t\t\tabsoluteUrl.port = hostWithProtocol.port;\n\t\t\t\t\t\t\tabsoluteUrl.username = hostWithProtocol.username;\n\t\t\t\t\t\t\tabsoluteUrl.password = hostWithProtocol.password;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn absoluteUrl;\n\t\t\t\t\t}\n\t\t\t\t\tlet scheme = \"https\";\n\t\t\t\t\tconst host = options.serveHost || getHeader(\"host\") || \"\";\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (true) scheme = \"http\";\n\t\t\t\t\t} catch (_err) {}\n\t\t\t\t\treturn new URL(req.url, `${scheme}://${host}`);\n\t\t\t\t},\n\t\t\t\ttransformResponse: ({ body, headers, status }) => {\n\t\t\t\t\t/**\n\t\t\t\t\t* Carefully attempt to set headers and data on the response object\n\t\t\t\t\t* for Next.js 12 support.\n\t\t\t\t\t*\n\t\t\t\t\t* This also assumes that we're not using Next.js 15, where the `res`\n\t\t\t\t\t* object is repopulated as a `RouteContext` object. We expect these\n\t\t\t\t\t* methods to NOT be defined in Next.js 15.\n\t\t\t\t\t*\n\t\t\t\t\t* We could likely use `instanceof ServerResponse` to better check the\n\t\t\t\t\t* type of this, though Next.js 12 had issues with this due to not\n\t\t\t\t\t* instantiating the response correctly.\n\t\t\t\t\t*/\n\t\t\t\t\tif (isNext12ApiResponse(res)) {\n\t\t\t\t\t\tfor (const [key, value] of Object.entries(headers)) res.setHeader(key, value);\n\t\t\t\t\t\tres.status(status);\n\t\t\t\t\t\tres.send(body);\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* If we're here, we're in a serverless endpoint (not edge), so\n\t\t\t\t\t\t* we've correctly sent the response and can return `undefined`.\n\t\t\t\t\t\t*\n\t\t\t\t\t\t* Next.js 13 edge requires that the return value is typed as\n\t\t\t\t\t\t* `Response`, so we still enforce that as we cannot dynamically\n\t\t\t\t\t\t* adjust typing based on the environment.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treturn new ((0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_1__.getResponse)())(body, {\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\theaders\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\ttransformStreamingResponse: ({ body, headers, status }) => {\n\t\t\t\t\treturn new Response(body, {\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\theaders\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}).createHandler();\n\tconst fn = baseFn.bind(null, void 0);\n\t/**\n\t* Ensure we have a non-variadic length to avoid issues with forced type\n\t* checking.\n\t*/\n\tObject.defineProperty(fn, \"length\", { value: 1 });\n\treturn Object.defineProperties(fn, {\n\t\tGET: { value: baseFn.bind(null, \"GET\") },\n\t\tPOST: { value: baseFn.bind(null, \"POST\") },\n\t\tPUT: { value: baseFn.bind(null, \"PUT\") }\n\t});\n};\nasync function streamToJSON(stream) {\n\tconst chunks = [];\n\tconst reader = stream.getReader();\n\twhile (true) {\n\t\tconst { done, value } = await reader.read();\n\t\tif (done) break;\n\t\tchunks.push(value);\n\t}\n\treturn JSON.parse(Buffer.concat(chunks).toString(\"utf8\"));\n}\n\n//#endregion\n\n//# sourceMappingURL=next.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9uZXh0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDeUI7O0FBRXhFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsd0NBQXdDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlCQUFpQjtBQUNsQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlCQUFpQjtBQUNuQztBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0Esb0JBQW9CLGlGQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGFBQW9CO0FBQ2pDLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSxxQkFBcUIsSUFBSSxPQUFPO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLElBQXNDO0FBQ2hELE9BQU87QUFDUCxnQ0FBZ0MsT0FBTyxLQUFLLEtBQUs7QUFDakQsS0FBSztBQUNMLDBCQUEwQix1QkFBdUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0REFBVztBQUM1QjtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTCxtQ0FBbUMsdUJBQXVCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxVQUFVO0FBQ2pEO0FBQ0EsU0FBUyxpQ0FBaUM7QUFDMUMsVUFBVSxrQ0FBa0M7QUFDNUMsU0FBUztBQUNULEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxjQUFjO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDZ0M7QUFDaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L25leHQuanM/YjE0MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRSZXNwb25zZSB9IGZyb20gXCIuL2hlbHBlcnMvZW52LmpzXCI7XG5pbXBvcnQgeyBJbm5nZXN0Q29tbUhhbmRsZXIgfSBmcm9tIFwiLi9jb21wb25lbnRzL0lubmdlc3RDb21tSGFuZGxlci5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL25leHQudHNcbi8qKlxuKiBUaGUgbmFtZSBvZiB0aGUgZnJhbWV3b3JrLCB1c2VkIHRvIGlkZW50aWZ5IHRoZSBmcmFtZXdvcmsgaW4gSW5uZ2VzdFxuKiBkYXNoYm9hcmRzIGFuZCBkdXJpbmcgdGVzdGluZy5cbiovXG5jb25zdCBmcmFtZXdvcmtOYW1lID0gXCJuZXh0anNcIjtcbmNvbnN0IGlzUmVjb3JkID0gKHZhbCkgPT4ge1xuXHRyZXR1cm4gdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiB2YWwgIT09IG51bGw7XG59O1xuY29uc3QgaXNGdW5jdGlvbiA9ICh2YWwpID0+IHtcblx0cmV0dXJuIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIjtcbn07XG5jb25zdCBpc05leHQxMkFwaVJlc3BvbnNlID0gKHZhbCkgPT4ge1xuXHRyZXR1cm4gaXNSZWNvcmQodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5zZXRIZWFkZXIpICYmIGlzRnVuY3Rpb24odmFsLnN0YXR1cykgJiYgaXNGdW5jdGlvbih2YWwuc2VuZCk7XG59O1xuLyoqXG4qIEluIE5leHQuanMsIHNlcnZlIGFuZCByZWdpc3RlciBhbnkgZGVjbGFyZWQgZnVuY3Rpb25zIHdpdGggSW5uZ2VzdCwgbWFraW5nXG4qIHRoZW0gYXZhaWxhYmxlIHRvIGJlIHRyaWdnZXJlZCBieSBldmVudHMuXG4qXG4qIFN1cHBvcnRzIE5leHQuanMgMTIrLCBib3RoIHNlcnZlcmxlc3MgYW5kIGVkZ2UuXG4qXG4qIEBleGFtcGxlIE5leHQuanMgPD0xMiBvciB0aGUgcGFnZXMgcm91dGVyIGNhbiBleHBvcnQgdGhlIGhhbmRsZXIgZGlyZWN0bHlcbiogYGBgdHNcbiogZXhwb3J0IGRlZmF1bHQgc2VydmUoeyBjbGllbnQ6IGlubmdlc3QsIGZ1bmN0aW9uczogW2ZuMSwgZm4yXSB9KTtcbiogYGBgXG4qXG4qIEBleGFtcGxlIE5leHQuanMgPj0xMyB3aXRoIHRoZSBgYXBwYCBkaXIgbXVzdCBleHBvcnQgaW5kaXZpZHVhbCBtZXRob2RzXG4qIGBgYHRzXG4qIGV4cG9ydCBjb25zdCB7IEdFVCwgUE9TVCwgUFVUIH0gPSBzZXJ2ZSh7XG4qICAgICAgICAgICAgY2xpZW50OiBpbm5nZXN0LFxuKiAgICAgICAgICAgIGZ1bmN0aW9uczogW2ZuMSwgZm4yXSxcbiogfSk7XG4qIGBgYFxuKlxuKiBAcHVibGljXG4qL1xuY29uc3Qgc2VydmUgPSAob3B0aW9ucykgPT4ge1xuXHQvKipcblx0KiBOZXh0LmpzIDEzIHVzZXNcblx0KiB7QGxpbmsgaHR0cHM6Ly9iZXRhLm5leHRqcy5vcmcvZG9jcy9yb3V0aW5nL3JvdXRlLWhhbmRsZXJzIFJvdXRlIEhhbmRsZXJzfVxuXHQqIHRvIGRlY2xhcmUgQVBJIHJvdXRlcyBpbnN0ZWFkIG9mIGEgZ2VuZXJpYyBjYXRjaC1hbGwgbWV0aG9kIHRoYXQgd2FzXG5cdCogYXZhaWxhYmxlIHVzaW5nIHRoZSBgcGFnZXMvYXBpYCBkaXJlY3RvcnkuXG5cdCpcblx0KiBUaGlzIG1lYW5zIHRoYXQgdXNlcnMgbXVzdCBub3cgZXhwb3J0IGEgZnVuY3Rpb24gZm9yIGVhY2ggbWV0aG9kIHN1cHBvcnRlZFxuXHQqIGJ5IHRoZSBlbmRwb2ludC4gRm9yIHVzLCB0aGlzIG1lYW5zIHJlcXVpcmluZyBhIHVzZXIgZXhwbGljaXRseSBleHBvcnRzXG5cdCogYEdFVGAsIGBQT1NUYCwgYW5kIGBQVVRgIGZ1bmN0aW9ucy5cblx0KlxuXHQqIEJlY2F1c2Ugb2YgdGhpcywgd2UnbGwgYWRkIGNpcmN1bGFyIHJlZmVyZW5jZXMgdG8gdGhvc2UgcHJvcGVydHkgbmFtZXMgb2Zcblx0KiB0aGUgcmV0dXJuZWQgaGFuZGxlciwgbWVhbmluZyB3ZSBjYW4gd3JpdGUgc29tZSBzdWNjaW5jdCBjb2RlIHRvIGV4cG9ydFxuXHQqIHRoZW0uIFRoYW5rcywgQGdvb2RvbGRuZW9uLlxuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBgYGB0c1xuXHQqIGV4cG9ydCBjb25zdCB7IEdFVCwgUE9TVCwgUFVUIH0gPSBzZXJ2ZSguLi4pO1xuXHQqIGBgYFxuXHQqXG5cdCogU2VlIHtAbGluayBodHRwczovL2JldGEubmV4dGpzLm9yZy9kb2NzL3JvdXRpbmcvcm91dGUtaGFuZGxlcnN9XG5cdCovXG5cdGNvbnN0IGJhc2VGbiA9IG5ldyBJbm5nZXN0Q29tbUhhbmRsZXIoe1xuXHRcdGZyYW1ld29ya05hbWUsXG5cdFx0Li4ub3B0aW9ucyxcblx0XHRoYW5kbGVyOiAocmVxTWV0aG9kLCAuLi5hcmdzKSA9PiB7XG5cdFx0XHRjb25zdCBbZXhwZWN0ZWRSZXEsIHJlc10gPSBhcmdzO1xuXHRcdFx0Y29uc3QgcmVxID0gZXhwZWN0ZWRSZXE7XG5cdFx0XHRjb25zdCBnZXRIZWFkZXIgPSAoa2V5KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGhlYWRlciA9IHR5cGVvZiByZXEuaGVhZGVycy5nZXQgPT09IFwiZnVuY3Rpb25cIiA/IHJlcS5oZWFkZXJzLmdldChrZXkpIDogcmVxLmhlYWRlcnNba2V5XTtcblx0XHRcdFx0cmV0dXJuIEFycmF5LmlzQXJyYXkoaGVhZGVyKSA/IGhlYWRlclswXSA6IGhlYWRlcjtcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRib2R5OiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiByZXEuanNvbiA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gYXdhaXQgcmVxLmpzb24oKTtcblx0XHRcdFx0XHRpZiAocmVxLmJvZHkgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSkgcmV0dXJuIGF3YWl0IHN0cmVhbVRvSlNPTihyZXEuYm9keSk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcS5ib2R5O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRoZWFkZXJzOiBnZXRIZWFkZXIsXG5cdFx0XHRcdG1ldGhvZDogKCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiByZXFNZXRob2QgfHwgcmVxLm1ldGhvZCB8fCBcIlwiO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRpc1Byb2R1Y3Rpb246ICgpID0+IHtcblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQqIFZlcmNlbCBFZGdlIEZ1bmN0aW9ucyBkbyBub3QgYWxsb3cgZHluYW1pYyBhY2Nlc3MgdG8gZW52aXJvbm1lbnRcblx0XHRcdFx0XHQqIHZhcmlhYmxlcywgc28gd2UnbGwgbWFuYWdlIHByb2R1Y3Rpb24gY2hlY2tzIGRpcmVjdGx5IGhlcmUuXG5cdFx0XHRcdFx0KlxuXHRcdFx0XHRcdCogV2UgdHJ5L2NhdGNoIHRvIGF2b2lkIHNpdHVhdGlvbnMgd2hlcmUgTmV4dC5qcyBpcyBiZWluZyB1c2VkIGluXG5cdFx0XHRcdFx0KiBlbnZpcm9ubWVudHMgd2hlcmUgYHByb2Nlc3MuZW52YCBpcyBub3QgYWNjZXNzaWJsZSBvciBwb2x5ZmlsbGVkLlxuXHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCI7XG5cdFx0XHRcdFx0fSBjYXRjaCAoX2Vycikge31cblx0XHRcdFx0fSxcblx0XHRcdFx0cXVlcnlTdHJpbmc6IChrZXksIHVybCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHFzID0gcmVxLnF1ZXJ5Py5ba2V5XSB8fCB1cmwuc2VhcmNoUGFyYW1zLmdldChrZXkpO1xuXHRcdFx0XHRcdHJldHVybiBBcnJheS5pc0FycmF5KHFzKSA/IHFzWzBdIDogcXM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVybDogKCkgPT4ge1xuXHRcdFx0XHRcdGxldCBhYnNvbHV0ZVVybDtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YWJzb2x1dGVVcmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuXHRcdFx0XHRcdH0gY2F0Y2gge31cblx0XHRcdFx0XHRpZiAoYWJzb2x1dGVVcmwpIHtcblx0XHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdFx0KiBgcmVxLnVybGAgaGVyZSBzaG91bGQgbWF5IGJlIHRoZSBmdWxsIFVSTCwgaW5jbHVkaW5nIHF1ZXJ5IHN0cmluZy5cblx0XHRcdFx0XHRcdCogVGhlcmUgYXJlIHNvbWUgY2F2ZWF0cywgaG93ZXZlciwgd2hlcmUgTmV4dC5qcyB3aWxsIG9iZnVzY2F0ZVxuXHRcdFx0XHRcdFx0KiB0aGUgaG9zdC4gRm9yIGV4YW1wbGUsIGluIHRoZSBjYXNlIG9mIGBob3N0LmRvY2tlci5pbnRlcm5hbGAsXG5cdFx0XHRcdFx0XHQqIE5leHQuanMgd2lsbCBpbnN0ZWFkIHNldCB0aGUgaG9zdCBoZXJlIHRvIGBsb2NhbGhvc3RgLlxuXHRcdFx0XHRcdFx0KlxuXHRcdFx0XHRcdFx0KiBUbyBhdm9pZCB0aGlzLCB3ZSdsbCB0cnkgdG8gcGFyc2UgdGhlIFVSTCBmcm9tIGByZXEudXJsYCwgYnV0XG5cdFx0XHRcdFx0XHQqIGFsc28gdXNlIHRoZSBgaG9zdGAgaGVhZGVyIGlmIGl0J3MgYXZhaWxhYmxlLlxuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdGNvbnN0IGhvc3QkMSA9IG9wdGlvbnMuc2VydmVIb3N0IHx8IGdldEhlYWRlcihcImhvc3RcIik7XG5cdFx0XHRcdFx0XHRpZiAoaG9zdCQxKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhvc3RXaXRoUHJvdG9jb2wgPSBuZXcgVVJMKGhvc3QkMS5pbmNsdWRlcyhcIjovL1wiKSA/IGhvc3QkMSA6IGAke2Fic29sdXRlVXJsLnByb3RvY29sfS8vJHtob3N0JDF9YCk7XG5cdFx0XHRcdFx0XHRcdGFic29sdXRlVXJsLnByb3RvY29sID0gaG9zdFdpdGhQcm90b2NvbC5wcm90b2NvbDtcblx0XHRcdFx0XHRcdFx0YWJzb2x1dGVVcmwuaG9zdCA9IGhvc3RXaXRoUHJvdG9jb2wuaG9zdDtcblx0XHRcdFx0XHRcdFx0YWJzb2x1dGVVcmwucG9ydCA9IGhvc3RXaXRoUHJvdG9jb2wucG9ydDtcblx0XHRcdFx0XHRcdFx0YWJzb2x1dGVVcmwudXNlcm5hbWUgPSBob3N0V2l0aFByb3RvY29sLnVzZXJuYW1lO1xuXHRcdFx0XHRcdFx0XHRhYnNvbHV0ZVVybC5wYXNzd29yZCA9IGhvc3RXaXRoUHJvdG9jb2wucGFzc3dvcmQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gYWJzb2x1dGVVcmw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxldCBzY2hlbWUgPSBcImh0dHBzXCI7XG5cdFx0XHRcdFx0Y29uc3QgaG9zdCA9IG9wdGlvbnMuc2VydmVIb3N0IHx8IGdldEhlYWRlcihcImhvc3RcIikgfHwgXCJcIjtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIpIHNjaGVtZSA9IFwiaHR0cFwiO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKF9lcnIpIHt9XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBVUkwocmVxLnVybCwgYCR7c2NoZW1lfTovLyR7aG9zdH1gKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dHJhbnNmb3JtUmVzcG9uc2U6ICh7IGJvZHksIGhlYWRlcnMsIHN0YXR1cyB9KSA9PiB7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0KiBDYXJlZnVsbHkgYXR0ZW1wdCB0byBzZXQgaGVhZGVycyBhbmQgZGF0YSBvbiB0aGUgcmVzcG9uc2Ugb2JqZWN0XG5cdFx0XHRcdFx0KiBmb3IgTmV4dC5qcyAxMiBzdXBwb3J0LlxuXHRcdFx0XHRcdCpcblx0XHRcdFx0XHQqIFRoaXMgYWxzbyBhc3N1bWVzIHRoYXQgd2UncmUgbm90IHVzaW5nIE5leHQuanMgMTUsIHdoZXJlIHRoZSBgcmVzYFxuXHRcdFx0XHRcdCogb2JqZWN0IGlzIHJlcG9wdWxhdGVkIGFzIGEgYFJvdXRlQ29udGV4dGAgb2JqZWN0LiBXZSBleHBlY3QgdGhlc2Vcblx0XHRcdFx0XHQqIG1ldGhvZHMgdG8gTk9UIGJlIGRlZmluZWQgaW4gTmV4dC5qcyAxNS5cblx0XHRcdFx0XHQqXG5cdFx0XHRcdFx0KiBXZSBjb3VsZCBsaWtlbHkgdXNlIGBpbnN0YW5jZW9mIFNlcnZlclJlc3BvbnNlYCB0byBiZXR0ZXIgY2hlY2sgdGhlXG5cdFx0XHRcdFx0KiB0eXBlIG9mIHRoaXMsIHRob3VnaCBOZXh0LmpzIDEyIGhhZCBpc3N1ZXMgd2l0aCB0aGlzIGR1ZSB0byBub3Rcblx0XHRcdFx0XHQqIGluc3RhbnRpYXRpbmcgdGhlIHJlc3BvbnNlIGNvcnJlY3RseS5cblx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdGlmIChpc05leHQxMkFwaVJlc3BvbnNlKHJlcykpIHtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGhlYWRlcnMpKSByZXMuc2V0SGVhZGVyKGtleSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0cmVzLnN0YXR1cyhzdGF0dXMpO1xuXHRcdFx0XHRcdFx0cmVzLnNlbmQoYm9keSk7XG5cdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdCogSWYgd2UncmUgaGVyZSwgd2UncmUgaW4gYSBzZXJ2ZXJsZXNzIGVuZHBvaW50IChub3QgZWRnZSksIHNvXG5cdFx0XHRcdFx0XHQqIHdlJ3ZlIGNvcnJlY3RseSBzZW50IHRoZSByZXNwb25zZSBhbmQgY2FuIHJldHVybiBgdW5kZWZpbmVkYC5cblx0XHRcdFx0XHRcdCpcblx0XHRcdFx0XHRcdCogTmV4dC5qcyAxMyBlZGdlIHJlcXVpcmVzIHRoYXQgdGhlIHJldHVybiB2YWx1ZSBpcyB0eXBlZCBhc1xuXHRcdFx0XHRcdFx0KiBgUmVzcG9uc2VgLCBzbyB3ZSBzdGlsbCBlbmZvcmNlIHRoYXQgYXMgd2UgY2Fubm90IGR5bmFtaWNhbGx5XG5cdFx0XHRcdFx0XHQqIGFkanVzdCB0eXBpbmcgYmFzZWQgb24gdGhlIGVudmlyb25tZW50LlxuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyAoZ2V0UmVzcG9uc2UoKSkoYm9keSwge1xuXHRcdFx0XHRcdFx0c3RhdHVzLFxuXHRcdFx0XHRcdFx0aGVhZGVyc1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0cmFuc2Zvcm1TdHJlYW1pbmdSZXNwb25zZTogKHsgYm9keSwgaGVhZGVycywgc3RhdHVzIH0pID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKGJvZHksIHtcblx0XHRcdFx0XHRcdHN0YXR1cyxcblx0XHRcdFx0XHRcdGhlYWRlcnNcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdH0pLmNyZWF0ZUhhbmRsZXIoKTtcblx0Y29uc3QgZm4gPSBiYXNlRm4uYmluZChudWxsLCB2b2lkIDApO1xuXHQvKipcblx0KiBFbnN1cmUgd2UgaGF2ZSBhIG5vbi12YXJpYWRpYyBsZW5ndGggdG8gYXZvaWQgaXNzdWVzIHdpdGggZm9yY2VkIHR5cGVcblx0KiBjaGVja2luZy5cblx0Ki9cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBcImxlbmd0aFwiLCB7IHZhbHVlOiAxIH0pO1xuXHRyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZm4sIHtcblx0XHRHRVQ6IHsgdmFsdWU6IGJhc2VGbi5iaW5kKG51bGwsIFwiR0VUXCIpIH0sXG5cdFx0UE9TVDogeyB2YWx1ZTogYmFzZUZuLmJpbmQobnVsbCwgXCJQT1NUXCIpIH0sXG5cdFx0UFVUOiB7IHZhbHVlOiBiYXNlRm4uYmluZChudWxsLCBcIlBVVFwiKSB9XG5cdH0pO1xufTtcbmFzeW5jIGZ1bmN0aW9uIHN0cmVhbVRvSlNPTihzdHJlYW0pIHtcblx0Y29uc3QgY2h1bmtzID0gW107XG5cdGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcblx0d2hpbGUgKHRydWUpIHtcblx0XHRjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuXHRcdGlmIChkb25lKSBicmVhaztcblx0XHRjaHVua3MucHVzaCh2YWx1ZSk7XG5cdH1cblx0cmV0dXJuIEpTT04ucGFyc2UoQnVmZmVyLmNvbmNhdChjaHVua3MpLnRvU3RyaW5nKFwidXRmOFwiKSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZnJhbWV3b3JrTmFtZSwgc2VydmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5leHQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/next.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/types.js":
/*!***************************************!*\
  !*** ./node_modules/inngest/types.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncResponseType: () => (/* binding */ AsyncResponseType),\n/* harmony export */   StepMode: () => (/* binding */ StepMode),\n/* harmony export */   StepOpCode: () => (/* binding */ StepOpCode),\n/* harmony export */   err: () => (/* binding */ err),\n/* harmony export */   functionConfigSchema: () => (/* binding */ functionConfigSchema),\n/* harmony export */   inBandSyncRequestBodySchema: () => (/* binding */ inBandSyncRequestBodySchema),\n/* harmony export */   incomingOpSchema: () => (/* binding */ incomingOpSchema),\n/* harmony export */   jsonErrorSchema: () => (/* binding */ jsonErrorSchema),\n/* harmony export */   logLevels: () => (/* binding */ logLevels),\n/* harmony export */   ok: () => (/* binding */ ok),\n/* harmony export */   sendEventResponseSchema: () => (/* binding */ sendEventResponseSchema),\n/* harmony export */   types_exports: () => (/* binding */ types_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n//#region src/types.ts\n/**\n* Internal types and schemas used throughout the Inngest SDK.\n*\n* Note that types intended to be imported and utilized in userland code will be\n* exported from the main entrypoint of the SDK, `inngest`; importing types\n* directly from this file may result in breaking changes in non-major bumps as\n* only those exported from `inngest` are considered stable.\n*\n* @module\n*/\nvar types_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)({\n\tAsyncResponseType: () => AsyncResponseType,\n\tStepMode: () => StepMode,\n\tStepOpCode: () => StepOpCode,\n\terr: () => err,\n\tfunctionConfigSchema: () => functionConfigSchema,\n\tinBandSyncRequestBodySchema: () => inBandSyncRequestBodySchema,\n\tincomingOpSchema: () => incomingOpSchema,\n\tjsonErrorSchema: () => jsonErrorSchema,\n\tlogLevels: () => logLevels,\n\tok: () => ok,\n\tsendEventResponseSchema: () => sendEventResponseSchema\n});\nconst baseJsonErrorSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.object({\n\tname: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional(),\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional(),\n\tmessage: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional(),\n\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional()\n});\nconst maybeJsonErrorSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.lazy(() => zod_v3__WEBPACK_IMPORTED_MODULE_1__.object({\n\tname: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim(),\n\tmessage: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim(),\n\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional(),\n\tcause: zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([maybeJsonErrorSchema, zod_v3__WEBPACK_IMPORTED_MODULE_1__.unknown()]).optional()\n}));\nconst jsonErrorSchema = baseJsonErrorSchema.extend({ cause: zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([maybeJsonErrorSchema, zod_v3__WEBPACK_IMPORTED_MODULE_1__.unknown()]).optional() }).passthrough().catch({}).transform((val) => {\n\treturn {\n\t\t...val,\n\t\tname: val.name || \"Error\",\n\t\tmessage: val.message || val.error || \"Unknown error\",\n\t\tstack: val.stack\n\t};\n});\n/**\n* Unique codes for the different types of operation that can be sent to Inngest\n* from SDK step functions.\n*/\nlet StepOpCode = /* @__PURE__ */ function(StepOpCode$1) {\n\tStepOpCode$1[\"WaitForSignal\"] = \"WaitForSignal\";\n\tStepOpCode$1[\"WaitForEvent\"] = \"WaitForEvent\";\n\t/**\n\t* Legacy equivalent to `\"StepRun\"`. Has mixed data wrapping (e.g. `data` or\n\t* `data.data` depending on SDK version), so this is phased out in favour of\n\t* `\"StepRun\"`, which never wraps.\n\t*\n\t* Note that it is still used for v0 executions for backwards compatibility.\n\t*\n\t* @deprecated Only used for v0 executions; use `\"StepRun\"` instead.\n\t*/\n\tStepOpCode$1[\"Step\"] = \"Step\";\n\tStepOpCode$1[\"StepRun\"] = \"StepRun\";\n\tStepOpCode$1[\"StepError\"] = \"StepError\";\n\tStepOpCode$1[\"StepFailed\"] = \"StepFailed\";\n\tStepOpCode$1[\"StepPlanned\"] = \"StepPlanned\";\n\tStepOpCode$1[\"Sleep\"] = \"Sleep\";\n\t/**\n\t* Used to signify that the executor has requested that a step run, but we\n\t* could not find that step.\n\t*\n\t* This is likely indicative that a step was renamed or removed from the\n\t* function.\n\t*/\n\tStepOpCode$1[\"StepNotFound\"] = \"StepNotFound\";\n\tStepOpCode$1[\"InvokeFunction\"] = \"InvokeFunction\";\n\tStepOpCode$1[\"AiGateway\"] = \"AIGateway\";\n\tStepOpCode$1[\"Gateway\"] = \"Gateway\";\n\tStepOpCode$1[\"RunComplete\"] = \"RunComplete\";\n\tStepOpCode$1[\"DiscoveryRequest\"] = \"DiscoveryRequest\";\n\treturn StepOpCode$1;\n}({});\n/**\n* StepModes are used to specify how the SDK should execute a function.\n*/\nlet StepMode = /* @__PURE__ */ function(StepMode$1) {\n\t/**\n\t* A synchronous method of execution, where steps are executed immediately and\n\t* their results are \"checkpointed\" back to Inngest in real-time.\n\t*/\n\tStepMode$1[\"Sync\"] = \"sync\";\n\t/**\n\t* The traditional, background method of execution, where all steps are queued\n\t* and executed asynchronously and always triggered by Inngest.\n\t*/\n\tStepMode$1[\"Async\"] = \"async\";\n\t/**\n\t* The traditional, background method of execution, but step results are\n\t* checkpointed when they can be to reduce latency and the number of requests\n\t* being sent back and forth between Inngest and the SDK.\n\t*/\n\tStepMode$1[\"AsyncCheckpointing\"] = \"async_checkpointing\";\n\treturn StepMode$1;\n}({});\n/**\n* The type of response you wish to return to an API endpoint when using steps\n* within it and we must transition to {@link StepMode.Async}.\n*\n* In most cases, this defaults to {@link AsyncResponseType.Redirect}.\n*/\nlet AsyncResponseType = /* @__PURE__ */ function(AsyncResponseType$1) {\n\t/**\n\t* When switching to {@link StepMode.Async}, respond with a 302 redirect which\n\t* will end the request once the run has completed asynchronously in the\n\t* background.\n\t*/\n\tAsyncResponseType$1[\"Redirect\"] = \"redirect\";\n\t/**\n\t* When switching to {@link StepMode.Async}, respond with a token and run ID\n\t* which can be used to poll for the status of the run.\n\t*/\n\tAsyncResponseType$1[\"Token\"] = \"token\";\n\treturn AsyncResponseType$1;\n\t/**\n\t* TODO Comment\n\t*/\n}({});\nconst incomingOpSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.object({\n\tid: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().min(1),\n\tdata: zod_v3__WEBPACK_IMPORTED_MODULE_1__.any().optional(),\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_1__.any().optional(),\n\tinput: zod_v3__WEBPACK_IMPORTED_MODULE_1__.any().optional()\n});\nconst sendEventResponseSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.object({\n\tids: zod_v3__WEBPACK_IMPORTED_MODULE_1__.array(zod_v3__WEBPACK_IMPORTED_MODULE_1__.string()).default([]),\n\tstatus: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number().default(0),\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n});\n/**\n* A set of log levels that can be used to control the amount of logging output\n* from various parts of the Inngest library.\n*\n* @public\n*/\nconst logLevels = [\n\t\"fatal\",\n\t\"error\",\n\t\"warn\",\n\t\"info\",\n\t\"debug\",\n\t\"silent\"\n];\n/**\n* This schema is used internally to share the shape of a concurrency option\n* when validating config. We cannot add comments to Zod fields, so we just use\n* an extra type check to ensure it matches our exported expectations.\n*/\nconst concurrencyOptionSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\tlimit: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\tscope: zod_v3__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n\t\t\"fn\",\n\t\t\"env\",\n\t\t\"account\"\n\t]).optional()\n});\n/**\n* The schema used to represent an individual function being synced with\n* Inngest.\n*\n* Note that this should only be used to validate the shape of a config object\n* and not used for feature compatibility, such as feature X being exclusive\n* with feature Y; these should be handled on the Inngest side.\n*/\nconst functionConfigSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\tname: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\tid: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\ttriggers: zod_v3__WEBPACK_IMPORTED_MODULE_1__.array(zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\texpression: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n\t}), zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({ cron: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string() })])),\n\tsteps: zod_v3__WEBPACK_IMPORTED_MODULE_1__.record(zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tid: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\tname: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\truntime: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\t\ttype: zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([zod_v3__WEBPACK_IMPORTED_MODULE_1__.literal(\"http\"), zod_v3__WEBPACK_IMPORTED_MODULE_1__.literal(\"ws\")]),\n\t\t\turl: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string()\n\t\t}),\n\t\tretries: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({ attempts: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number().optional() }).optional()\n\t})),\n\tidempotency: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\tbatchEvents: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tmaxSize: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\t\ttimeout: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tif: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n\t}).optional(),\n\trateLimit: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tlimit: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\t\tperiod: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x)\n\t}).optional(),\n\tthrottle: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tlimit: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\t\tperiod: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x),\n\t\tburst: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number().optional()\n\t}).optional(),\n\tsingleton: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tmode: zod_v3__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\"skip\", \"cancel\"])\n\t}).optional(),\n\tcancel: zod_v3__WEBPACK_IMPORTED_MODULE_1__.array(zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\tif: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\ttimeout: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n\t})).optional(),\n\tdebounce: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tperiod: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x),\n\t\ttimeout: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x).optional()\n\t}).optional(),\n\ttimeouts: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tstart: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x).optional(),\n\t\tfinish: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x).optional()\n\t}).optional(),\n\tpriority: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({ run: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional() }).optional(),\n\tconcurrency: zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([\n\t\tzod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\t\tconcurrencyOptionSchema.transform((x) => x),\n\t\tzod_v3__WEBPACK_IMPORTED_MODULE_1__.array(concurrencyOptionSchema.transform((x) => x)).min(1).max(2)\n\t]).optional()\n});\nconst ok = (data) => {\n\treturn {\n\t\tok: true,\n\t\tvalue: data\n\t};\n};\nconst err = (error) => {\n\treturn {\n\t\tok: false,\n\t\terror\n\t};\n};\nconst inBandSyncRequestBodySchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({ url: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string() });\n\n//#endregion\n\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC90eXBlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUEwRDtBQUMvQjs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHNFQUFRO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCLDBDQUFRO0FBQ3BDLE9BQU8sMENBQVE7QUFDZixRQUFRLDBDQUFRO0FBQ2hCLFVBQVUsMENBQVE7QUFDbEIsUUFBUSwwQ0FBUTtBQUNoQixDQUFDO0FBQ0QsNkJBQTZCLHdDQUFNLE9BQU8sMENBQVE7QUFDbEQsT0FBTywwQ0FBUTtBQUNmLFVBQVUsMENBQVE7QUFDbEIsUUFBUSwwQ0FBUTtBQUNoQixRQUFRLHlDQUFPLHdCQUF3QiwyQ0FBUztBQUNoRCxDQUFDO0FBQ0QscURBQXFELE9BQU8seUNBQU8sd0JBQXdCLDJDQUFTLGlCQUFpQix3QkFBd0I7QUFDN0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBLHVDQUF1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bm5nZXN0L3R5cGVzLmpzPzc0NTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92M1wiO1xuXG4vLyNyZWdpb24gc3JjL3R5cGVzLnRzXG4vKipcbiogSW50ZXJuYWwgdHlwZXMgYW5kIHNjaGVtYXMgdXNlZCB0aHJvdWdob3V0IHRoZSBJbm5nZXN0IFNESy5cbipcbiogTm90ZSB0aGF0IHR5cGVzIGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGFuZCB1dGlsaXplZCBpbiB1c2VybGFuZCBjb2RlIHdpbGwgYmVcbiogZXhwb3J0ZWQgZnJvbSB0aGUgbWFpbiBlbnRyeXBvaW50IG9mIHRoZSBTREssIGBpbm5nZXN0YDsgaW1wb3J0aW5nIHR5cGVzXG4qIGRpcmVjdGx5IGZyb20gdGhpcyBmaWxlIG1heSByZXN1bHQgaW4gYnJlYWtpbmcgY2hhbmdlcyBpbiBub24tbWFqb3IgYnVtcHMgYXNcbiogb25seSB0aG9zZSBleHBvcnRlZCBmcm9tIGBpbm5nZXN0YCBhcmUgY29uc2lkZXJlZCBzdGFibGUuXG4qXG4qIEBtb2R1bGVcbiovXG52YXIgdHlwZXNfZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7XG5cdEFzeW5jUmVzcG9uc2VUeXBlOiAoKSA9PiBBc3luY1Jlc3BvbnNlVHlwZSxcblx0U3RlcE1vZGU6ICgpID0+IFN0ZXBNb2RlLFxuXHRTdGVwT3BDb2RlOiAoKSA9PiBTdGVwT3BDb2RlLFxuXHRlcnI6ICgpID0+IGVycixcblx0ZnVuY3Rpb25Db25maWdTY2hlbWE6ICgpID0+IGZ1bmN0aW9uQ29uZmlnU2NoZW1hLFxuXHRpbkJhbmRTeW5jUmVxdWVzdEJvZHlTY2hlbWE6ICgpID0+IGluQmFuZFN5bmNSZXF1ZXN0Qm9keVNjaGVtYSxcblx0aW5jb21pbmdPcFNjaGVtYTogKCkgPT4gaW5jb21pbmdPcFNjaGVtYSxcblx0anNvbkVycm9yU2NoZW1hOiAoKSA9PiBqc29uRXJyb3JTY2hlbWEsXG5cdGxvZ0xldmVsczogKCkgPT4gbG9nTGV2ZWxzLFxuXHRvazogKCkgPT4gb2ssXG5cdHNlbmRFdmVudFJlc3BvbnNlU2NoZW1hOiAoKSA9PiBzZW5kRXZlbnRSZXNwb25zZVNjaGVtYVxufSk7XG5jb25zdCBiYXNlSnNvbkVycm9yU2NoZW1hID0gei5vYmplY3Qoe1xuXHRuYW1lOiB6LnN0cmluZygpLnRyaW0oKS5vcHRpb25hbCgpLFxuXHRlcnJvcjogei5zdHJpbmcoKS50cmltKCkub3B0aW9uYWwoKSxcblx0bWVzc2FnZTogei5zdHJpbmcoKS50cmltKCkub3B0aW9uYWwoKSxcblx0c3RhY2s6IHouc3RyaW5nKCkudHJpbSgpLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgbWF5YmVKc29uRXJyb3JTY2hlbWEgPSB6LmxhenkoKCkgPT4gei5vYmplY3Qoe1xuXHRuYW1lOiB6LnN0cmluZygpLnRyaW0oKSxcblx0bWVzc2FnZTogei5zdHJpbmcoKS50cmltKCksXG5cdHN0YWNrOiB6LnN0cmluZygpLnRyaW0oKS5vcHRpb25hbCgpLFxuXHRjYXVzZTogei51bmlvbihbbWF5YmVKc29uRXJyb3JTY2hlbWEsIHoudW5rbm93bigpXSkub3B0aW9uYWwoKVxufSkpO1xuY29uc3QganNvbkVycm9yU2NoZW1hID0gYmFzZUpzb25FcnJvclNjaGVtYS5leHRlbmQoeyBjYXVzZTogei51bmlvbihbbWF5YmVKc29uRXJyb3JTY2hlbWEsIHoudW5rbm93bigpXSkub3B0aW9uYWwoKSB9KS5wYXNzdGhyb3VnaCgpLmNhdGNoKHt9KS50cmFuc2Zvcm0oKHZhbCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdC4uLnZhbCxcblx0XHRuYW1lOiB2YWwubmFtZSB8fCBcIkVycm9yXCIsXG5cdFx0bWVzc2FnZTogdmFsLm1lc3NhZ2UgfHwgdmFsLmVycm9yIHx8IFwiVW5rbm93biBlcnJvclwiLFxuXHRcdHN0YWNrOiB2YWwuc3RhY2tcblx0fTtcbn0pO1xuLyoqXG4qIFVuaXF1ZSBjb2RlcyBmb3IgdGhlIGRpZmZlcmVudCB0eXBlcyBvZiBvcGVyYXRpb24gdGhhdCBjYW4gYmUgc2VudCB0byBJbm5nZXN0XG4qIGZyb20gU0RLIHN0ZXAgZnVuY3Rpb25zLlxuKi9cbmxldCBTdGVwT3BDb2RlID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKFN0ZXBPcENvZGUkMSkge1xuXHRTdGVwT3BDb2RlJDFbXCJXYWl0Rm9yU2lnbmFsXCJdID0gXCJXYWl0Rm9yU2lnbmFsXCI7XG5cdFN0ZXBPcENvZGUkMVtcIldhaXRGb3JFdmVudFwiXSA9IFwiV2FpdEZvckV2ZW50XCI7XG5cdC8qKlxuXHQqIExlZ2FjeSBlcXVpdmFsZW50IHRvIGBcIlN0ZXBSdW5cImAuIEhhcyBtaXhlZCBkYXRhIHdyYXBwaW5nIChlLmcuIGBkYXRhYCBvclxuXHQqIGBkYXRhLmRhdGFgIGRlcGVuZGluZyBvbiBTREsgdmVyc2lvbiksIHNvIHRoaXMgaXMgcGhhc2VkIG91dCBpbiBmYXZvdXIgb2Zcblx0KiBgXCJTdGVwUnVuXCJgLCB3aGljaCBuZXZlciB3cmFwcy5cblx0KlxuXHQqIE5vdGUgdGhhdCBpdCBpcyBzdGlsbCB1c2VkIGZvciB2MCBleGVjdXRpb25zIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cblx0KlxuXHQqIEBkZXByZWNhdGVkIE9ubHkgdXNlZCBmb3IgdjAgZXhlY3V0aW9uczsgdXNlIGBcIlN0ZXBSdW5cImAgaW5zdGVhZC5cblx0Ki9cblx0U3RlcE9wQ29kZSQxW1wiU3RlcFwiXSA9IFwiU3RlcFwiO1xuXHRTdGVwT3BDb2RlJDFbXCJTdGVwUnVuXCJdID0gXCJTdGVwUnVuXCI7XG5cdFN0ZXBPcENvZGUkMVtcIlN0ZXBFcnJvclwiXSA9IFwiU3RlcEVycm9yXCI7XG5cdFN0ZXBPcENvZGUkMVtcIlN0ZXBGYWlsZWRcIl0gPSBcIlN0ZXBGYWlsZWRcIjtcblx0U3RlcE9wQ29kZSQxW1wiU3RlcFBsYW5uZWRcIl0gPSBcIlN0ZXBQbGFubmVkXCI7XG5cdFN0ZXBPcENvZGUkMVtcIlNsZWVwXCJdID0gXCJTbGVlcFwiO1xuXHQvKipcblx0KiBVc2VkIHRvIHNpZ25pZnkgdGhhdCB0aGUgZXhlY3V0b3IgaGFzIHJlcXVlc3RlZCB0aGF0IGEgc3RlcCBydW4sIGJ1dCB3ZVxuXHQqIGNvdWxkIG5vdCBmaW5kIHRoYXQgc3RlcC5cblx0KlxuXHQqIFRoaXMgaXMgbGlrZWx5IGluZGljYXRpdmUgdGhhdCBhIHN0ZXAgd2FzIHJlbmFtZWQgb3IgcmVtb3ZlZCBmcm9tIHRoZVxuXHQqIGZ1bmN0aW9uLlxuXHQqL1xuXHRTdGVwT3BDb2RlJDFbXCJTdGVwTm90Rm91bmRcIl0gPSBcIlN0ZXBOb3RGb3VuZFwiO1xuXHRTdGVwT3BDb2RlJDFbXCJJbnZva2VGdW5jdGlvblwiXSA9IFwiSW52b2tlRnVuY3Rpb25cIjtcblx0U3RlcE9wQ29kZSQxW1wiQWlHYXRld2F5XCJdID0gXCJBSUdhdGV3YXlcIjtcblx0U3RlcE9wQ29kZSQxW1wiR2F0ZXdheVwiXSA9IFwiR2F0ZXdheVwiO1xuXHRTdGVwT3BDb2RlJDFbXCJSdW5Db21wbGV0ZVwiXSA9IFwiUnVuQ29tcGxldGVcIjtcblx0U3RlcE9wQ29kZSQxW1wiRGlzY292ZXJ5UmVxdWVzdFwiXSA9IFwiRGlzY292ZXJ5UmVxdWVzdFwiO1xuXHRyZXR1cm4gU3RlcE9wQ29kZSQxO1xufSh7fSk7XG4vKipcbiogU3RlcE1vZGVzIGFyZSB1c2VkIHRvIHNwZWNpZnkgaG93IHRoZSBTREsgc2hvdWxkIGV4ZWN1dGUgYSBmdW5jdGlvbi5cbiovXG5sZXQgU3RlcE1vZGUgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oU3RlcE1vZGUkMSkge1xuXHQvKipcblx0KiBBIHN5bmNocm9ub3VzIG1ldGhvZCBvZiBleGVjdXRpb24sIHdoZXJlIHN0ZXBzIGFyZSBleGVjdXRlZCBpbW1lZGlhdGVseSBhbmRcblx0KiB0aGVpciByZXN1bHRzIGFyZSBcImNoZWNrcG9pbnRlZFwiIGJhY2sgdG8gSW5uZ2VzdCBpbiByZWFsLXRpbWUuXG5cdCovXG5cdFN0ZXBNb2RlJDFbXCJTeW5jXCJdID0gXCJzeW5jXCI7XG5cdC8qKlxuXHQqIFRoZSB0cmFkaXRpb25hbCwgYmFja2dyb3VuZCBtZXRob2Qgb2YgZXhlY3V0aW9uLCB3aGVyZSBhbGwgc3RlcHMgYXJlIHF1ZXVlZFxuXHQqIGFuZCBleGVjdXRlZCBhc3luY2hyb25vdXNseSBhbmQgYWx3YXlzIHRyaWdnZXJlZCBieSBJbm5nZXN0LlxuXHQqL1xuXHRTdGVwTW9kZSQxW1wiQXN5bmNcIl0gPSBcImFzeW5jXCI7XG5cdC8qKlxuXHQqIFRoZSB0cmFkaXRpb25hbCwgYmFja2dyb3VuZCBtZXRob2Qgb2YgZXhlY3V0aW9uLCBidXQgc3RlcCByZXN1bHRzIGFyZVxuXHQqIGNoZWNrcG9pbnRlZCB3aGVuIHRoZXkgY2FuIGJlIHRvIHJlZHVjZSBsYXRlbmN5IGFuZCB0aGUgbnVtYmVyIG9mIHJlcXVlc3RzXG5cdCogYmVpbmcgc2VudCBiYWNrIGFuZCBmb3J0aCBiZXR3ZWVuIElubmdlc3QgYW5kIHRoZSBTREsuXG5cdCovXG5cdFN0ZXBNb2RlJDFbXCJBc3luY0NoZWNrcG9pbnRpbmdcIl0gPSBcImFzeW5jX2NoZWNrcG9pbnRpbmdcIjtcblx0cmV0dXJuIFN0ZXBNb2RlJDE7XG59KHt9KTtcbi8qKlxuKiBUaGUgdHlwZSBvZiByZXNwb25zZSB5b3Ugd2lzaCB0byByZXR1cm4gdG8gYW4gQVBJIGVuZHBvaW50IHdoZW4gdXNpbmcgc3RlcHNcbiogd2l0aGluIGl0IGFuZCB3ZSBtdXN0IHRyYW5zaXRpb24gdG8ge0BsaW5rIFN0ZXBNb2RlLkFzeW5jfS5cbipcbiogSW4gbW9zdCBjYXNlcywgdGhpcyBkZWZhdWx0cyB0byB7QGxpbmsgQXN5bmNSZXNwb25zZVR5cGUuUmVkaXJlY3R9LlxuKi9cbmxldCBBc3luY1Jlc3BvbnNlVHlwZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihBc3luY1Jlc3BvbnNlVHlwZSQxKSB7XG5cdC8qKlxuXHQqIFdoZW4gc3dpdGNoaW5nIHRvIHtAbGluayBTdGVwTW9kZS5Bc3luY30sIHJlc3BvbmQgd2l0aCBhIDMwMiByZWRpcmVjdCB3aGljaFxuXHQqIHdpbGwgZW5kIHRoZSByZXF1ZXN0IG9uY2UgdGhlIHJ1biBoYXMgY29tcGxldGVkIGFzeW5jaHJvbm91c2x5IGluIHRoZVxuXHQqIGJhY2tncm91bmQuXG5cdCovXG5cdEFzeW5jUmVzcG9uc2VUeXBlJDFbXCJSZWRpcmVjdFwiXSA9IFwicmVkaXJlY3RcIjtcblx0LyoqXG5cdCogV2hlbiBzd2l0Y2hpbmcgdG8ge0BsaW5rIFN0ZXBNb2RlLkFzeW5jfSwgcmVzcG9uZCB3aXRoIGEgdG9rZW4gYW5kIHJ1biBJRFxuXHQqIHdoaWNoIGNhbiBiZSB1c2VkIHRvIHBvbGwgZm9yIHRoZSBzdGF0dXMgb2YgdGhlIHJ1bi5cblx0Ki9cblx0QXN5bmNSZXNwb25zZVR5cGUkMVtcIlRva2VuXCJdID0gXCJ0b2tlblwiO1xuXHRyZXR1cm4gQXN5bmNSZXNwb25zZVR5cGUkMTtcblx0LyoqXG5cdCogVE9ETyBDb21tZW50XG5cdCovXG59KHt9KTtcbmNvbnN0IGluY29taW5nT3BTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGlkOiB6LnN0cmluZygpLm1pbigxKSxcblx0ZGF0YTogei5hbnkoKS5vcHRpb25hbCgpLFxuXHRlcnJvcjogei5hbnkoKS5vcHRpb25hbCgpLFxuXHRpbnB1dDogei5hbnkoKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IHNlbmRFdmVudFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuXHRpZHM6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbXSksXG5cdHN0YXR1czogei5udW1iZXIoKS5kZWZhdWx0KDApLFxuXHRlcnJvcjogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbi8qKlxuKiBBIHNldCBvZiBsb2cgbGV2ZWxzIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29udHJvbCB0aGUgYW1vdW50IG9mIGxvZ2dpbmcgb3V0cHV0XG4qIGZyb20gdmFyaW91cyBwYXJ0cyBvZiB0aGUgSW5uZ2VzdCBsaWJyYXJ5LlxuKlxuKiBAcHVibGljXG4qL1xuY29uc3QgbG9nTGV2ZWxzID0gW1xuXHRcImZhdGFsXCIsXG5cdFwiZXJyb3JcIixcblx0XCJ3YXJuXCIsXG5cdFwiaW5mb1wiLFxuXHRcImRlYnVnXCIsXG5cdFwic2lsZW50XCJcbl07XG4vKipcbiogVGhpcyBzY2hlbWEgaXMgdXNlZCBpbnRlcm5hbGx5IHRvIHNoYXJlIHRoZSBzaGFwZSBvZiBhIGNvbmN1cnJlbmN5IG9wdGlvblxuKiB3aGVuIHZhbGlkYXRpbmcgY29uZmlnLiBXZSBjYW5ub3QgYWRkIGNvbW1lbnRzIHRvIFpvZCBmaWVsZHMsIHNvIHdlIGp1c3QgdXNlXG4qIGFuIGV4dHJhIHR5cGUgY2hlY2sgdG8gZW5zdXJlIGl0IG1hdGNoZXMgb3VyIGV4cG9ydGVkIGV4cGVjdGF0aW9ucy5cbiovXG5jb25zdCBjb25jdXJyZW5jeU9wdGlvblNjaGVtYSA9IHouc3RyaWN0T2JqZWN0KHtcblx0bGltaXQ6IHoubnVtYmVyKCksXG5cdGtleTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRzY29wZTogei5lbnVtKFtcblx0XHRcImZuXCIsXG5cdFx0XCJlbnZcIixcblx0XHRcImFjY291bnRcIlxuXHRdKS5vcHRpb25hbCgpXG59KTtcbi8qKlxuKiBUaGUgc2NoZW1hIHVzZWQgdG8gcmVwcmVzZW50IGFuIGluZGl2aWR1YWwgZnVuY3Rpb24gYmVpbmcgc3luY2VkIHdpdGhcbiogSW5uZ2VzdC5cbipcbiogTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCB0byB2YWxpZGF0ZSB0aGUgc2hhcGUgb2YgYSBjb25maWcgb2JqZWN0XG4qIGFuZCBub3QgdXNlZCBmb3IgZmVhdHVyZSBjb21wYXRpYmlsaXR5LCBzdWNoIGFzIGZlYXR1cmUgWCBiZWluZyBleGNsdXNpdmVcbiogd2l0aCBmZWF0dXJlIFk7IHRoZXNlIHNob3VsZCBiZSBoYW5kbGVkIG9uIHRoZSBJbm5nZXN0IHNpZGUuXG4qL1xuY29uc3QgZnVuY3Rpb25Db25maWdTY2hlbWEgPSB6LnN0cmljdE9iamVjdCh7XG5cdG5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0aWQ6IHouc3RyaW5nKCksXG5cdHRyaWdnZXJzOiB6LmFycmF5KHoudW5pb24oW3ouc3RyaWN0T2JqZWN0KHtcblx0XHRldmVudDogei5zdHJpbmcoKSxcblx0XHRleHByZXNzaW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKClcblx0fSksIHouc3RyaWN0T2JqZWN0KHsgY3Jvbjogei5zdHJpbmcoKSB9KV0pKSxcblx0c3RlcHM6IHoucmVjb3JkKHouc3RyaWN0T2JqZWN0KHtcblx0XHRpZDogei5zdHJpbmcoKSxcblx0XHRuYW1lOiB6LnN0cmluZygpLFxuXHRcdHJ1bnRpbWU6IHouc3RyaWN0T2JqZWN0KHtcblx0XHRcdHR5cGU6IHoudW5pb24oW3oubGl0ZXJhbChcImh0dHBcIiksIHoubGl0ZXJhbChcIndzXCIpXSksXG5cdFx0XHR1cmw6IHouc3RyaW5nKClcblx0XHR9KSxcblx0XHRyZXRyaWVzOiB6LnN0cmljdE9iamVjdCh7IGF0dGVtcHRzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCkgfSkub3B0aW9uYWwoKVxuXHR9KSksXG5cdGlkZW1wb3RlbmN5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGJhdGNoRXZlbnRzOiB6LnN0cmljdE9iamVjdCh7XG5cdFx0bWF4U2l6ZTogei5udW1iZXIoKSxcblx0XHR0aW1lb3V0OiB6LnN0cmluZygpLFxuXHRcdGtleTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdGlmOiB6LnN0cmluZygpLm9wdGlvbmFsKClcblx0fSkub3B0aW9uYWwoKSxcblx0cmF0ZUxpbWl0OiB6LnN0cmljdE9iamVjdCh7XG5cdFx0a2V5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0bGltaXQ6IHoubnVtYmVyKCksXG5cdFx0cGVyaW9kOiB6LnN0cmluZygpLnRyYW5zZm9ybSgoeCkgPT4geClcblx0fSkub3B0aW9uYWwoKSxcblx0dGhyb3R0bGU6IHouc3RyaWN0T2JqZWN0KHtcblx0XHRrZXk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRsaW1pdDogei5udW1iZXIoKSxcblx0XHRwZXJpb2Q6IHouc3RyaW5nKCkudHJhbnNmb3JtKCh4KSA9PiB4KSxcblx0XHRidXJzdDogei5udW1iZXIoKS5vcHRpb25hbCgpXG5cdH0pLm9wdGlvbmFsKCksXG5cdHNpbmdsZXRvbjogei5zdHJpY3RPYmplY3Qoe1xuXHRcdGtleTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdG1vZGU6IHouZW51bShbXCJza2lwXCIsIFwiY2FuY2VsXCJdKVxuXHR9KS5vcHRpb25hbCgpLFxuXHRjYW5jZWw6IHouYXJyYXkoei5zdHJpY3RPYmplY3Qoe1xuXHRcdGV2ZW50OiB6LnN0cmluZygpLFxuXHRcdGlmOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0dGltZW91dDogei5zdHJpbmcoKS5vcHRpb25hbCgpXG5cdH0pKS5vcHRpb25hbCgpLFxuXHRkZWJvdW5jZTogei5zdHJpY3RPYmplY3Qoe1xuXHRcdGtleTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdHBlcmlvZDogei5zdHJpbmcoKS50cmFuc2Zvcm0oKHgpID0+IHgpLFxuXHRcdHRpbWVvdXQ6IHouc3RyaW5nKCkudHJhbnNmb3JtKCh4KSA9PiB4KS5vcHRpb25hbCgpXG5cdH0pLm9wdGlvbmFsKCksXG5cdHRpbWVvdXRzOiB6LnN0cmljdE9iamVjdCh7XG5cdFx0c3RhcnQ6IHouc3RyaW5nKCkudHJhbnNmb3JtKCh4KSA9PiB4KS5vcHRpb25hbCgpLFxuXHRcdGZpbmlzaDogei5zdHJpbmcoKS50cmFuc2Zvcm0oKHgpID0+IHgpLm9wdGlvbmFsKClcblx0fSkub3B0aW9uYWwoKSxcblx0cHJpb3JpdHk6IHouc3RyaWN0T2JqZWN0KHsgcnVuOiB6LnN0cmluZygpLm9wdGlvbmFsKCkgfSkub3B0aW9uYWwoKSxcblx0Y29uY3VycmVuY3k6IHoudW5pb24oW1xuXHRcdHoubnVtYmVyKCksXG5cdFx0Y29uY3VycmVuY3lPcHRpb25TY2hlbWEudHJhbnNmb3JtKCh4KSA9PiB4KSxcblx0XHR6LmFycmF5KGNvbmN1cnJlbmN5T3B0aW9uU2NoZW1hLnRyYW5zZm9ybSgoeCkgPT4geCkpLm1pbigxKS5tYXgoMilcblx0XSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBvayA9IChkYXRhKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0b2s6IHRydWUsXG5cdFx0dmFsdWU6IGRhdGFcblx0fTtcbn07XG5jb25zdCBlcnIgPSAoZXJyb3IpID0+IHtcblx0cmV0dXJuIHtcblx0XHRvazogZmFsc2UsXG5cdFx0ZXJyb3Jcblx0fTtcbn07XG5jb25zdCBpbkJhbmRTeW5jUmVxdWVzdEJvZHlTY2hlbWEgPSB6LnN0cmljdE9iamVjdCh7IHVybDogei5zdHJpbmcoKSB9KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBBc3luY1Jlc3BvbnNlVHlwZSwgU3RlcE1vZGUsIFN0ZXBPcENvZGUsIGVyciwgZnVuY3Rpb25Db25maWdTY2hlbWEsIGluQmFuZFN5bmNSZXF1ZXN0Qm9keVNjaGVtYSwgaW5jb21pbmdPcFNjaGVtYSwganNvbkVycm9yU2NoZW1hLCBsb2dMZXZlbHMsIG9rLCBzZW5kRXZlbnRSZXNwb25zZVNjaGVtYSwgdHlwZXNfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/version.js":
/*!*****************************************!*\
  !*** ./node_modules/inngest/version.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n//#region src/version.ts\nconst version = \"3.49.3\";\n\n//#endregion\n\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC92ZXJzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC92ZXJzaW9uLmpzP2QxN2EiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy92ZXJzaW9uLnRzXG5jb25zdCB2ZXJzaW9uID0gXCIzLjQ5LjNcIjtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB2ZXJzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZXJzaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/version.js\n");

/***/ })

};
;